# Reversing Native Libraries

{% hint style="success" %}
Ucz siÄ™ i Ä‡wicz Hacking AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Ucz siÄ™ i Ä‡wicz Hacking GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie dla HackTricks</summary>

* SprawdÅº [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegram**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ sztuczkami hackingowymi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w github.

</details>
{% endhint %}

<figure><img src="/.gitbook/assets/image (2).png" alt=""><figcaption></figcaption></figure>

ZgÅ‚Ä™biaj swojÄ… wiedzÄ™ w **BezpieczeÅ„stwie Mobilnym** z 8kSec Academy. Opanuj bezpieczeÅ„stwo iOS i Androida dziÄ™ki naszym kursom w trybie samodzielnym i uzyskaj certyfikat:

{% embed url="https://academy.8ksec.io/" %}


**Aby uzyskaÄ‡ wiÄ™cej informacji, sprawdÅº:** [**https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html**](https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html)

Aplikacje Android mogÄ… korzystaÄ‡ z bibliotek natywnych, zazwyczaj napisanych w C lub C++, do zadaÅ„ wymagajÄ…cych duÅ¼ej wydajnoÅ›ci. TwÃ³rcy zÅ‚oÅ›liwego oprogramowania rÃ³wnieÅ¼ uÅ¼ywajÄ… tych bibliotek, poniewaÅ¼ sÄ… trudniejsze do inÅ¼ynierii wstecznej niÅ¼ kod bajtowy DEX. Sekcja ta podkreÅ›la umiejÄ™tnoÅ›ci inÅ¼ynierii wstecznej dostosowane do Androida, zamiast uczyÄ‡ jÄ™zykÃ³w asemblera. Wersje bibliotek ARM i x86 sÄ… dostarczane dla zapewnienia kompatybilnoÅ›ci.

### Kluczowe punkty:

* **Biblioteki natywne w aplikacjach Android:**
* UÅ¼ywane do zadaÅ„ wymagajÄ…cych duÅ¼ej wydajnoÅ›ci.
* Napisane w C lub C++, co utrudnia inÅ¼ynieriÄ™ wstecznÄ….
* ZnajdujÄ… siÄ™ w formacie `.so` (obiekt wspÃ³Å‚dzielony), podobnie jak binaria Linuxa.
* TwÃ³rcy zÅ‚oÅ›liwego oprogramowania preferujÄ… kod natywny, aby utrudniÄ‡ analizÄ™.
* **Java Native Interface (JNI) i Android NDK:**
* JNI pozwala na implementacjÄ™ metod Java w kodzie natywnym.
* NDK to zestaw narzÄ™dzi specyficznych dla Androida do pisania kodu natywnego.
* JNI i NDK Å‚Ä…czÄ… kod Java (lub Kotlin) z bibliotekami natywnymi.
* **Åadowanie i wykonywanie bibliotek:**
* Biblioteki sÄ… Å‚adowane do pamiÄ™ci za pomocÄ… `System.loadLibrary` lub `System.load`.
* JNI\_OnLoad jest wykonywane po zaÅ‚adowaniu biblioteki.
* Metody natywne zadeklarowane w Javie Å‚Ä…czÄ… siÄ™ z funkcjami natywnymi, umoÅ¼liwiajÄ…c wykonanie.
* **ÅÄ…czenie metod Java z funkcjami natywnymi:**
* **ÅÄ…czenie dynamiczne:** Nazwy funkcji w bibliotekach natywnych pasujÄ… do okreÅ›lonego wzoru, co umoÅ¼liwia automatyczne Å‚Ä…czenie.
* **ÅÄ…czenie statyczne:** UÅ¼ywa `RegisterNatives` do Å‚Ä…czenia, co zapewnia elastycznoÅ›Ä‡ w nazewnictwie funkcji i strukturze.
* **NarzÄ™dzia i techniki inÅ¼ynierii wstecznej:**
* NarzÄ™dzia takie jak Ghidra i IDA Pro pomagajÄ… w analizie bibliotek natywnych.
* `JNIEnv` jest kluczowe dla zrozumienia funkcji JNI i interakcji.
* Zapewnione sÄ… Ä‡wiczenia do praktyki Å‚adowania bibliotek, Å‚Ä…czenia metod i identyfikowania funkcji natywnych.

### Zasoby:

* **Nauka asemblera ARM:**
* Sugerowane dla gÅ‚Ä™bszego zrozumienia podstawowej architektury.
* [Podstawy asemblera ARM](https://azeria-labs.com/writing-arm-assembly-part-1/) z Azeria Labs sÄ… polecane.
* **Dokumentacja JNI i NDK:**
* [Specyfikacja JNI Oracle](https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html)
* [WskazÃ³wki JNI Androida](https://developer.android.com/training/articles/perf-jni)
* [RozpoczÄ™cie pracy z NDK](https://developer.android.com/ndk/guides/)
* **Debugowanie bibliotek natywnych:**
* [Debugowanie bibliotek natywnych Androida za pomocÄ… dekompilatora JEB](https://medium.com/@shubhamsonani/how-to-debug-android-native-libraries-using-jeb-decompiler-eec681a22cf3)


<figure><img src="/.gitbook/assets/image (2).png" alt=""><figcaption></figcaption></figure>

ZgÅ‚Ä™biaj swojÄ… wiedzÄ™ w **BezpieczeÅ„stwie Mobilnym** z 8kSec Academy. Opanuj bezpieczeÅ„stwo iOS i Androida dziÄ™ki naszym kursom w trybie samodzielnym i uzyskaj certyfikat:

{% embed url="https://academy.8ksec.io/" %}

{% hint style="success" %}
Ucz siÄ™ i Ä‡wicz Hacking AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Ucz siÄ™ i Ä‡wicz Hacking GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Wsparcie dla HackTricks</summary>

* SprawdÅº [**plany subskrypcyjne**](https://github.com/sponsors/carlospolop)!
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegram**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ sztuczkami hackingowymi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w github.

</details>
{% endhint %}
