# Reversing Native Libraries

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

<figure><img src="/.gitbook/assets/image (2).png" alt=""><figcaption></figcaption></figure>

Produbite svoje znanje u **Mobilnoj Bezbednosti** sa 8kSec Akademijom. Savladajte bezbednost iOS i Android-a kroz naše kurseve koji se mogu pratiti sopstvenim tempom i dobijte sertifikat:

{% embed url="https://academy.8ksec.io/" %}


**Za više informacija pogledajte:** [**https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html**](https://maddiestone.github.io/AndroidAppRE/reversing\_native\_libs.html)

Android aplikacije mogu koristiti nativne biblioteke, obično napisane u C ili C++, za zadatke koji zahtevaju visoke performanse. Kreatori malvera takođe koriste ove biblioteke, jer je teže izvršiti reverzno inženjerstvo nego DEX bajtkodu. Odeljak naglašava veštine reverznog inženjerstva prilagođene Android-u, umesto da uči jezike asemblera. ARM i x86 verzije biblioteka su obezbeđene za kompatibilnost.

### Ključne tačke:

* **Nativne biblioteke u Android aplikacijama:**
* Koriste se za zadatke koji zahtevaju visoke performanse.
* Napisane u C ili C++, što otežava reverzno inženjerstvo.
* Pronađene u `.so` (deljeni objekat) formatu, slično Linux binarnim datotekama.
* Kreatori malvera preferiraju nativni kod kako bi otežali analizu.
* **Java Native Interface (JNI) & Android NDK:**
* JNI omogućava implementaciju Java metoda u nativnom kodu.
* NDK je set alata specifičnih za Android za pisanje nativnog koda.
* JNI i NDK povezuju Java (ili Kotlin) kod sa nativnim bibliotekama.
* **Učitavanje i izvršavanje biblioteka:**
* Biblioteke se učitavaju u memoriju koristeći `System.loadLibrary` ili `System.load`.
* JNI\_OnLoad se izvršava prilikom učitavanja biblioteke.
* Java-deklarisane nativne metode povezuju se sa nativnim funkcijama, omogućavajući izvršavanje.
* **Povezivanje Java metoda sa nativnim funkcijama:**
* **Dinamičko povezivanje:** Imena funkcija u nativnim bibliotekama odgovaraju specifičnom obrascu, omogućavajući automatsko povezivanje.
* **Statčko povezivanje:** Koristi `RegisterNatives` za povezivanje, pružajući fleksibilnost u imenovanju i strukturi funkcija.
* **Alati i tehnike reverznog inženjerstva:**
* Alati poput Ghidra i IDA Pro pomažu u analizi nativnih biblioteka.
* `JNIEnv` je ključan za razumevanje JNI funkcija i interakcija.
* Pružene su vežbe za vežbanje učitavanja biblioteka, povezivanja metoda i identifikacije nativnih funkcija.

### Resursi:

* **Učenje ARM asemblera:**
* Preporučuje se za dublje razumevanje osnovne arhitekture.
* [Osnovi ARM asemblera](https://azeria-labs.com/writing-arm-assembly-part-1/) iz Azeria Labs se preporučuje.
* **JNI & NDK dokumentacija:**
* [Oracle-ova JNI specifikacija](https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html)
* [Android-ovi JNI saveti](https://developer.android.com/training/articles/perf-jni)
* [Početak sa NDK](https://developer.android.com/ndk/guides/)
* **Debagovanje nativnih biblioteka:**
* [Debagovanje Android nativnih biblioteka koristeći JEB dekompajler](https://medium.com/@shubhamsonani/how-to-debug-android-native-libraries-using-jeb-decompiler-eec681a22cf3)


<figure><img src="/.gitbook/assets/image (2).png" alt=""><figcaption></figcaption></figure>

Produbite svoje znanje u **Mobilnoj Bezbednosti** sa 8kSec Akademijom. Savladajte bezbednost iOS i Android-a kroz naše kurseve koji se mogu pratiti sopstvenim tempom i dobijte sertifikat:

{% embed url="https://academy.8ksec.io/" %}

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
