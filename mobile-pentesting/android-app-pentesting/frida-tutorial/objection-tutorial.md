# Objection Tutorial

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Kyk na die [**subskripsie planne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking truuks deur PRs in te dien na die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**Bug bounty wenk**: **meld aan** by **Intigriti**, 'n premium **bug bounty platform geskep deur hackers, vir hackers**! Sluit by ons aan by [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) vandag, en begin verdien bounties tot **$100,000**!

{% embed url="https://go.intigriti.com/hacktricks" %}

## **Inleiding**

**objection - Runtime Mobile Exploration**

[**Objection**](https://github.com/sensepost/objection) is 'n runtime mobiele verkenning toolkit, aangedryf deur [Frida](https://www.frida.re). Dit is gebou met die doel om mobiele toepassings en hul sekuriteitsposisie te evalueer sonder die behoefte aan 'n jailbreak of ge-root mobiele toestel.

**Nota:** Dit is nie 'n vorm van jailbreak / root omseiling nie. Deur `objection` te gebruik, is jy steeds beperk deur al die beperkings wat deur die toepaslike sandbox opgel√™ word.

### Samevatting

Die **doel** van **objection** is om die gebruiker toe te laat om die **hoofd aksies wat Frida bied** aan te roep. **Andersins**, sal die gebruiker 'n **enkele skrip vir elke toepassing** wat hy wil toets, moet skep.

## Tutorial

Vir hierdie tutorial gaan ek die APK gebruik wat jy hier kan aflaai:

{% file src="../../../.gitbook/assets/app-release.zip" %}

Of van sy [oorspronklike repository](https://github.com/asvid/FridaApp)(aflaai app-release.apk)

### Installasie
```bash
pip3 install objection
```
### Verbinding

Maak 'n **gewone ADB-verbinding** en **begin** die **frida** bediener op die toestel (en kontroleer dat frida werk op beide die kli√´nt en die bediener).

As jy 'n **ge-root toestel** gebruik, is dit nodig om die toepassing te kies wat jy binne die _**--gadget**_ opsie wil toets. in hierdie geval:
```bash
frida-ps -Uai
objection --gadget asvid.github.io.fridaapp explore
```
### Basic Actions

Nie alle moontlike opdragte van objections gaan in hierdie tutoriaal gelys word nie, net diegene wat ek meer nuttig gevind het.

#### Environment

Sommige interessante inligting (soos wagwoorde of paaie) kan binne die omgewing gevind word.
```bash
env
```
![](<../../../.gitbook/assets/image (220).png>)

#### Frida Inligting
```bash
frida
```
![](<../../../.gitbook/assets/image (1093).png>)

#### Laai op/Laai af
```bash
file download <remote path> [<local path>]
file upload <local path> [<remote path>]
```
#### Importeer frida-skrip
```bash
import <local path frida-script>
```
#### SSLPinning
```bash
android sslpinning disable #Attempts to disable SSL Pinning on Android devices.
```
#### Wortelopsporing
```bash
android root disable  #Attempts to disable root detection on Android devices.
android root simulate #Attempts to simulate a rooted Android environment.
```
#### Exec Command
```bash
android shell_exec whoami
```
#### Skermskote
```bash
android ui screenshot /tmp/screenshot
android ui FLAG_SECURE false  #This may enable you to take screenshots using the hardware keys
```
### Statiese analise gemaak Dinamies

In 'n werklike toepassing moet ons al die inligting wat in hierdie deel ontdek is, ken voordat ons objection gebruik, danksy **statiese analise**. Hoe dit ook al sy, op hierdie manier kan jy dalk **iets nuuts** sien, aangesien jy hier slegs 'n volledige lys van klasse, metodes en uitgevoerde objekte sal h√™.

Dit is ook nuttig as jy op een of ander manier **nie 'n leesbare bronkode** van die toepassing kan kry nie.

#### Lys aktiwiteite, ontvangers en dienste
```bash
android hooking list activities
```
![](<../../../.gitbook/assets/image (1016).png>)
```bash
android hooking list services
android hooking list receivers
```
Frida sal 'n fout bekendstel as daar geen gevind word nie

#### Verkry huidige aktiwiteit
```bash
android hooking get current_activity
```
![](<../../../.gitbook/assets/image (813).png>)

#### Soek Klasse

Kom ons begin soek na klasse binne ons aansoek
```bash
android hooking search classes asvid.github.io.fridaapp
```
![](<../../../.gitbook/assets/image (507).png>)

#### Soekmetodes van 'n klas

Nou laat ons die metodes binne die klas _MainActivity:_ onttrek.
```bash
android hooking search methods asvid.github.io.fridaapp MainActivity
```
![](<../../../.gitbook/assets/image (929).png>)

#### Lys van verklaarde Metodes van 'n klas met hul parameters

Kom ons uitvind watter parameters die metodes van die klas benodig:
```bash
android hooking list class_methods asvid.github.io.fridaapp.MainActivity
```
![](<../../../.gitbook/assets/image (299).png>)

#### Lys klasse

Jy kan ook al die klasse lys wat in die huidige aansoek gelaai is:
```bash
android hooking list classes #List all loaded classes, As the target application gets usedmore, this command will return more classes.
```
Dit is baie nuttig as jy **die metode van 'n klas wil hook en jy weet net die naam van die klas**. Jy kan hierdie funksie gebruik om **te soek watter module die klas besit** en dan sy metode te hook.

### Hooking is maklik

#### Hooking (kyk) na 'n metode

Uit die [bronkode](https://github.com/asvid/FridaApp/blob/master/app/src/main/java/asvid/github/io/fridaapp/MainActivity.kt) van die toepassing weet ons dat die **funksie** _**sum()**_ **van** _**MainActivity**_ elke **tweede** keer uitgevoer word. Kom ons probeer om **alle moontlike inligting** te **dump** elke keer as die funksie aangeroep word (argumente, terugkeerwaarde en terugsporing):
```bash
android hooking watch class_method asvid.github.io.fridaapp.MainActivity.sum --dump-args --dump-backtrace --dump-return
```
![](<../../../.gitbook/assets/image (1086).png>)

#### Hooking (kyk) 'n hele klas

Eintlik vind ek al die metodes van die klas MainActivity regtig interessant, kom ons **hook hulle almal**. Wees versigtig, dit kan 'n toepassing **crash**.
```bash
android hooking watch class asvid.github.io.fridaapp.MainActivity --dump-args --dump-return
```
If you play with the application while the class is hooked you will see when **elke funksie aangeroep word**, its **argumente** and the **terug** waarde.

![](<../../../.gitbook/assets/image (861).png>)

#### Verander boolean terugwaarde van 'n funksie

From the source code you can see that the function _checkPin_ gets a _String_ as argument and returns a _boolean_. Laat ons die funksie **altyd true teruggee**:

![](<../../../.gitbook/assets/image (883).png>)

Now, If you write anything in the text box for the PIN code you will see tat anything is valid:

![](<../../../.gitbook/assets/image (228).png>)

### Klas instansies

Search for and print **lewende instansies van 'n spesifieke Java klas**, specified by a fully qualified class name. Out is the result of an attempt at getting a string value for a discovered objection which would typically **bevat eiendom waardes vir die objek**.
```
android heap print_instances <class>
```
![](<../../../.gitbook/assets/image (1095).png>)

### Keystore/Intents

Jy kan met die keystore en intents speel deur:
```bash
android keystore list
android intents launch_activity
android intent launch_service
```
### Geheue

#### Dump
```bash
memory dump all <local destination> #Dump all memory
memory dump from_base <base_address> <size_to_dump> <local_destination> #Dump a part
```
#### Lys
```bash
memory list modules
```
![](<../../../.gitbook/assets/image (286).png>)

Aan die onderkant van die lys kan jy frida sien:

![](<../../../.gitbook/assets/image (1097).png>)

Kom ons kyk wat frida uitvoer:

![](<../../../.gitbook/assets/image (298).png>)

#### Soek/Skryf

Jy kan ook binne geheue soek en skryf met objection:
```bash
memory search "<pattern eg: 41 41 41 ?? 41>" (--string) (--offsets-only)
memory write "<address>" "<pattern eg: 41 41 41 41>" (--string)
```
### SQLite

Jy kan die opdrag `sqlite` gebruik om met sqlite databasisse te kommunikeer.

### Exit
```bash
exit
```
## Wat ek mis in Objection

* Die hooking metodes laat soms die aansoek crash (dit is ook as gevolg van Frida).
* Jy kan nie die instansies van die klasse gebruik om funksies van die instansie aan te roep nie. En jy kan nie nuwe instansies van klasse skep en hulle gebruik om funksies aan te roep nie.
* Daar is nie 'n snelkoppeling (soos die een vir sslpinnin) om al die algemene crypto metodes wat deur die aansoek gebruik word te hook nie om gesifde teks, gewone teks, sleutels, IVs en algoritmes wat gebruik word te sien.

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**Bug bounty wenk**: **meld aan** vir **Intigriti**, 'n premium **bug bounty platform geskep deur hackers, vir hackers**! Sluit by ons aan by [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) vandag, en begin om bounties tot **$100,000** te verdien!

{% embed url="https://go.intigriti.com/hacktricks" %}

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kyk na die [**subskripsie planne**](https://github.com/sponsors/carlospolop)!
* **Sluit by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking truuks deur PRs in te dien na die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
