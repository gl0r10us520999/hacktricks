# Android Applications Pentesting

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

<figure><img src="../../.gitbook/assets/image (3).png" alt=""><figcaption></figcaption></figure>

Join [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy) server to communicate with experienced hackers and bug bounty hunters!

**Hacking Insights**\
í•´í‚¹ì˜ ìŠ¤ë¦´ê³¼ ë„ì „ì— ëŒ€í•´ ê¹Šì´ ìˆëŠ” ì½˜í…ì¸ ì— ì°¸ì—¬í•˜ì„¸ìš”.

**Real-Time Hack News**\
ì‹¤ì‹œê°„ ë‰´ìŠ¤ì™€ í†µì°°ë ¥ì„ í†µí•´ ë¹ ë¥´ê²Œ ë³€í™”í•˜ëŠ” í•´í‚¹ ì„¸ê³„ì˜ ìµœì‹  ì •ë³´ë¥¼ ìœ ì§€í•˜ì„¸ìš”.

**Latest Announcements**\
ìƒˆë¡œìš´ ë²„ê·¸ ë°”ìš´í‹° ì¶œì‹œ ë° ì¤‘ìš”í•œ í”Œë«í¼ ì—…ë°ì´íŠ¸ì— ëŒ€í•œ ì •ë³´ë¥¼ ìœ ì§€í•˜ì„¸ìš”.

**Join us on** [**Discord**](https://discord.com/invite/N3FrSbmwdy) and start collaborating with top hackers today!

## Android Applications Basics

ì´ í˜ì´ì§€ë¥¼ ì½ëŠ” ê²ƒì„ ê°•ë ¥íˆ ê¶Œì¥í•©ë‹ˆë‹¤. **ì•ˆë“œë¡œì´ë“œ ë³´ì•ˆê³¼ ì•ˆë“œë¡œì´ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ê°€ì¥ ìœ„í—˜í•œ êµ¬ì„± ìš”ì†Œì™€ ê´€ë ¨ëœ ê°€ì¥ ì¤‘ìš”í•œ ë¶€ë¶„**ì— ëŒ€í•´ ì•Œì•„ë³´ì„¸ìš”:

{% content-ref url="android-applications-basics.md" %}
[android-applications-basics.md](android-applications-basics.md)
{% endcontent-ref %}

## ADB (Android Debug Bridge)

ì´ê²ƒì€ ì•ˆë“œë¡œì´ë“œ ì¥ì¹˜(ì—ë®¬ë ˆì´íŠ¸ëœ ë˜ëŠ” ë¬¼ë¦¬ì )ì— ì—°ê²°í•˜ëŠ” ë° í•„ìš”í•œ ì£¼ìš” ë„êµ¬ì…ë‹ˆë‹¤.\
**ADB**ëŠ” ì»´í“¨í„°ì—ì„œ **USB** ë˜ëŠ” **ë„¤íŠ¸ì›Œí¬**ë¥¼ í†µí•´ ì¥ì¹˜ë¥¼ ì œì–´í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ì´ ìœ í‹¸ë¦¬í‹°ëŠ” **íŒŒì¼ ë³µì‚¬**, **ì•± ì„¤ì¹˜ ë° ì œê±°**, **ì…¸ ëª…ë ¹ ì‹¤í–‰**, **ë°ì´í„° ë°±ì—…**, **ë¡œê·¸ ì½ê¸°** ë“± ì—¬ëŸ¬ ê¸°ëŠ¥ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.

ë‹¤ìŒ [**ADB Commands**](adb-commands.md) ëª©ë¡ì„ í™•ì¸í•˜ì—¬ adb ì‚¬ìš© ë°©ë²•ì„ ë°°ìš°ì„¸ìš”.

## Smali

ë•Œë•Œë¡œ **ìˆ¨ê²¨ì§„ ì •ë³´**(ì•„ë§ˆë„ ì˜ ë‚œë…í™”ëœ ë¹„ë°€ë²ˆí˜¸ë‚˜ í”Œë˜ê·¸)ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ **ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ëŠ” ê²ƒ**ì´ í¥ë¯¸ë¡œìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ apkë¥¼ ë””ì»´íŒŒì¼í•˜ê³  ì½”ë“œë¥¼ ìˆ˜ì •í•œ í›„ ë‹¤ì‹œ ì»´íŒŒì¼í•˜ëŠ” ê²ƒì´ í¥ë¯¸ë¡œìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
[**ì´ íŠœí† ë¦¬ì–¼ì—ì„œ** APKë¥¼ ë””ì»´íŒŒì¼í•˜ê³  Smali ì½”ë“œë¥¼ ìˆ˜ì •í•œ í›„ ìƒˆë¡œìš´ ê¸°ëŠ¥ìœ¼ë¡œ APKë¥¼ ë‹¤ì‹œ ì»´íŒŒì¼í•˜ëŠ” ë°©ë²•ì„ ë°°ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤](smali-changes.md). ì´ëŠ” **ë™ì  ë¶„ì„ ì¤‘ ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ì˜ ëŒ€ì•ˆìœ¼ë¡œ ë§¤ìš° ìœ ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**. ê·¸ëŸ¬ë¯€ë¡œ **ì´ ê°€ëŠ¥ì„±ì„ í•­ìƒ ì—¼ë‘ì— ë‘ì„¸ìš”**.

## Other interesting tricks

* [Play Storeì—ì„œ ìœ„ì¹˜ ìŠ¤í‘¸í•‘í•˜ê¸°](spoofing-your-location-in-play-store.md)
* **APK ë‹¤ìš´ë¡œë“œ**: [https://apps.evozi.com/apk-downloader/](https://apps.evozi.com/apk-downloader/), [https://apkpure.com/es/](https://apkpure.com/es/), [https://www.apkmirror.com/](https://www.apkmirror.com), [https://apkcombo.com/es-es/apk-downloader/](https://apkcombo.com/es-es/apk-downloader/), [https://github.com/kiber-io/apkd](https://github.com/kiber-io/apkd)
* ì¥ì¹˜ì—ì„œ APK ì¶”ì¶œ:
```bash
adb shell pm list packages
com.android.insecurebankv2

adb shell pm path com.android.insecurebankv2
package:/data/app/com.android.insecurebankv2-Jnf8pNgwy3QA_U5f-n_4jQ==/base.apk

adb pull /data/app/com.android.insecurebankv2-Jnf8pNgwy3QA_U5f-n_4jQ==/base.apk
```
* [APKEditor](https://github.com/REAndroid/APKEditor)ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ë¶„í•  ë° ê¸°ë³¸ APKë¥¼ ë³‘í•©í•©ë‹ˆë‹¤:
```bash
mkdir splits
adb shell pm path com.android.insecurebankv2 | cut -d ':' -f 2 | xargs -n1 -i adb pull {} splits
java -jar ../APKEditor.jar m -i splits/ -o merged.apk

# after merging, you will need to align and sign the apk, personally, I like to use the uberapksigner
java -jar uber-apk-signer.jar -a merged.apk --allowResign -o merged_signed
```
## ì •ì  ë¶„ì„

ìš°ì„ , APKë¥¼ ë¶„ì„í•˜ê¸° ìœ„í•´ì„œëŠ” **ë””ì»´íŒŒì¼ëŸ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ Java ì½”ë“œë¥¼ ì‚´í´ë´ì•¼ í•©ë‹ˆë‹¤**.\
ìì„¸í•œ ë””ì»´íŒŒì¼ëŸ¬ ì •ë³´ëŠ” [**ì—¬ê¸°ì—ì„œ í™•ì¸í•˜ì„¸ìš”**](apk-decompilers.md).

### í¥ë¯¸ë¡œìš´ ì •ë³´ ì°¾ê¸°

APKì˜ **ë¬¸ìì—´**ì„ ì‚´í´ë³´ë©´ **ë¹„ë°€ë²ˆí˜¸**, **URL** ([https://github.com/ndelphit/apkurlgrep](https://github.com/ndelphit/apkurlgrep)), **API** í‚¤, **ì•”í˜¸í™”**, **ë¸”ë£¨íˆ¬ìŠ¤ UUID**, **í† í°** ë° í¥ë¯¸ë¡œìš´ ëª¨ë“  ê²ƒì„ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤... ì½”ë“œ ì‹¤í–‰ **ë°±ë„ì–´** ë˜ëŠ” ì¸ì¦ ë°±ë„ì–´(ì•±ì— í•˜ë“œì½”ë”©ëœ ê´€ë¦¬ì ìê²© ì¦ëª…)ë„ ì°¾ì•„ë³´ì„¸ìš”.

**Firebase**

**Firebase URL**ì— íŠ¹ë³„í•œ ì£¼ì˜ë¥¼ ê¸°ìš¸ì´ê³  ì˜ëª» êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. [Firebaseì— ëŒ€í•œ ì •ë³´ì™€ ì´ë¥¼ ì•…ìš©í•˜ëŠ” ë°©ë²•ì€ ì—¬ê¸°ì—ì„œ í™•ì¸í•˜ì„¸ìš”.](../../network-services-pentesting/pentesting-web/buckets/firebase-database.md)

### ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ê¸°ë³¸ ì´í•´ - Manifest.xml, strings.xml

**ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ \_Manifest.xml**_\*\* ë° \*\*_**strings.xml**\_\*\* íŒŒì¼ì˜ ê²€í† ëŠ” ì ì¬ì ì¸ ë³´ì•ˆ ì·¨ì•½ì ì„ ë“œëŸ¬ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤\*\*. ì´ íŒŒì¼ë“¤ì€ ë””ì»´íŒŒì¼ëŸ¬ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ APK íŒŒì¼ í™•ì¥ìë¥¼ .zipìœ¼ë¡œ ë³€ê²½í•œ í›„ ì••ì¶•ì„ í’€ì–´ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Manifest.xml**ì—ì„œ ì‹ë³„ëœ **ì·¨ì•½ì **ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

* **ë””ë²„ê¹… ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜**: _Manifest.xml_ íŒŒì¼ì—ì„œ ë””ë²„ê¹… ê°€ëŠ¥(`debuggable="true"`)ìœ¼ë¡œ ì„¤ì •ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì—°ê²°ì„ í—ˆìš©í•˜ì—¬ ì•…ìš©ë  ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤. ë””ë²„ê¹… ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì°¾ê³  ì•…ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ íŠœí† ë¦¬ì–¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.
* **ë°±ì—… ì„¤ì •**: ë¯¼ê°í•œ ì •ë³´ë¥¼ ë‹¤ë£¨ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê²½ìš° `android:allowBackup="false"` ì†ì„±ì„ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ adbë¥¼ í†µí•œ ë¬´ë‹¨ ë°ì´í„° ë°±ì—…ì„ ë°©ì§€í•´ì•¼ í•©ë‹ˆë‹¤. íŠ¹íˆ USB ë””ë²„ê¹…ì´ í™œì„±í™”ëœ ê²½ìš°ì— ê·¸ë ‡ìŠµë‹ˆë‹¤.
* **ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ**: _res/xml/_ì˜ ì‚¬ìš©ì ì •ì˜ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ êµ¬ì„±(`android:networkSecurityConfig="@xml/network_security_config"`)ì€ ì¸ì¦ì„œ í•€ ë° HTTP íŠ¸ë˜í”½ ì„¤ì •ê³¼ ê°™ì€ ë³´ì•ˆ ì„¸ë¶€ì •ë³´ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ íŠ¹ì • ë„ë©”ì¸ì— ëŒ€í•´ HTTP íŠ¸ë˜í”½ì„ í—ˆìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
* **ë‚´ë³´ë‚¸ í™œë™ ë° ì„œë¹„ìŠ¤**: ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì—ì„œ ë‚´ë³´ë‚¸ í™œë™ ë° ì„œë¹„ìŠ¤ë¥¼ ì‹ë³„í•˜ë©´ ì•…ìš©ë  ìˆ˜ ìˆëŠ” êµ¬ì„± ìš”ì†Œë¥¼ ê°•ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë™ì  í…ŒìŠ¤íŠ¸ ì¤‘ ì¶”ê°€ ë¶„ì„ì„ í†µí•´ ì´ëŸ¬í•œ êµ¬ì„± ìš”ì†Œë¥¼ ì•…ìš©í•˜ëŠ” ë°©ë²•ì„ ë°í˜€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **ì½˜í…ì¸  ì œê³µì ë° íŒŒì¼ ì œê³µì**: ë…¸ì¶œëœ ì½˜í…ì¸  ì œê³µìëŠ” ë¬´ë‹¨ ì ‘ê·¼ ë˜ëŠ” ë°ì´í„° ìˆ˜ì •ì´ ê°€ëŠ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŒŒì¼ ì œê³µìì˜ êµ¬ì„±ë„ ë©´ë°€íˆ ê²€í† í•´ì•¼ í•©ë‹ˆë‹¤.
* **ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ê¸° ë° URL ìŠ¤í‚´**: ì´ëŸ¬í•œ êµ¬ì„± ìš”ì†ŒëŠ” ì•…ìš©ë  ìˆ˜ ìˆìœ¼ë©°, ì…ë ¥ ì·¨ì•½ì ì— ëŒ€í•œ URL ìŠ¤í‚´ ê´€ë¦¬ ë°©ë²•ì— íŠ¹íˆ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.
* **SDK ë²„ì „**: `minSdkVersion`, `targetSDKVersion`, `maxSdkVersion` ì†ì„±ì€ ì§€ì›ë˜ëŠ” Android ë²„ì „ì„ ë‚˜íƒ€ë‚´ë©°, ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ êµ¬ì‹ì˜ ì·¨ì•½í•œ Android ë²„ì „ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

**strings.xml** íŒŒì¼ì—ì„œ API í‚¤, ì‚¬ìš©ì ì •ì˜ ìŠ¤í‚¤ë§ˆ ë° ê¸°íƒ€ ê°œë°œì ë…¸íŠ¸ì™€ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ë°œê²¬í•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŸ¬í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì‹ ì¤‘í•˜ê²Œ ê²€í† í•  í•„ìš”ì„±ì„ ê°•ì¡°í•©ë‹ˆë‹¤.

### íƒ­ì¬í‚¹

**íƒ­ì¬í‚¹**ì€ **ì•…ì˜ì ì¸** **ì• í”Œë¦¬ì¼€ì´ì…˜**ì´ ì‹¤í–‰ë˜ì–´ **í¬ìƒ ì• í”Œë¦¬ì¼€ì´ì…˜ ìœ„ì— ìœ„ì¹˜í•˜ëŠ” ê³µê²©**ì…ë‹ˆë‹¤. í¬ìƒ ì•±ì„ ê°€ì‹œì ìœ¼ë¡œ ê°€ë¦¬ë©´, ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ëŠ” ì‚¬ìš©ìê°€ ìƒí˜¸ì‘ìš©í•˜ë„ë¡ ì†ì´ë„ë¡ ì„¤ê³„ë˜ì–´ ìˆìœ¼ë©°, ì´ ìƒí˜¸ì‘ìš©ì€ í¬ìƒ ì•±ìœ¼ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.\
ê²°ê³¼ì ìœ¼ë¡œ, ì‚¬ìš©ìëŠ” ì‹¤ì œë¡œ í¬ìƒ ì•±ì—ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ **ëª¨ë¥´ê²Œ ë©ë‹ˆë‹¤**.

ìì„¸í•œ ì •ë³´ëŠ” ë‹¤ìŒì—ì„œ í™•ì¸í•˜ì„¸ìš”:

{% content-ref url="tapjacking.md" %}
[tapjacking.md](tapjacking.md)
{% endcontent-ref %}

### ì‘ì—… í•˜ì´ì¬í‚¹

**`launchMode`**ê°€ **`singleTask`**ë¡œ ì„¤ì •ë˜ê³  `taskAffinity`ê°€ ì •ì˜ë˜ì§€ ì•Šì€ **í™œë™**ì€ ì‘ì—… í•˜ì´ì¬í‚¹ì— ì·¨ì•½í•©ë‹ˆë‹¤. ì´ëŠ” **ì• í”Œë¦¬ì¼€ì´ì…˜**ì´ ì„¤ì¹˜ë˜ê³  ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ë³´ë‹¤ ë¨¼ì € ì‹¤í–‰ë  ê²½ìš° **ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‘ì—…ì„ í•˜ì´ì¬í‚¹í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤**(ë”°ë¼ì„œ ì‚¬ìš©ìëŠ” **ì•…ì˜ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ìƒí˜¸ì‘ìš©í•˜ê³  ìˆë‹¤ê³  ìƒê°í•˜ê²Œ ë©ë‹ˆë‹¤**).

ìì„¸í•œ ì •ë³´ëŠ” ë‹¤ìŒì—ì„œ í™•ì¸í•˜ì„¸ìš”:

{% content-ref url="android-task-hijacking.md" %}
[android-task-hijacking.md](android-task-hijacking.md)
{% endcontent-ref %}

### ì•ˆì „í•˜ì§€ ì•Šì€ ë°ì´í„° ì €ì¥

**ë‚´ë¶€ ì €ì¥ì†Œ**

Androidì—ì„œ **ë‚´ë¶€** ì €ì¥ì†Œì— **ì €ì¥ëœ** íŒŒì¼ì€ **ìƒì„±í•œ ì•±**ë§Œ **ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„**ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ë³´ì•ˆ ì¡°ì¹˜ëŠ” Android ìš´ì˜ ì²´ì œì— ì˜í•´ **ê°•ì œ**ë˜ë©°, ëŒ€ë¶€ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë³´ì•ˆ ìš”êµ¬ ì‚¬í•­ì— ì¼ë°˜ì ìœ¼ë¡œ ì í•©í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ê°œë°œìë“¤ì€ ë•Œë•Œë¡œ `MODE_WORLD_READABLE` ë° `MODE_WORLD_WRITABLE`ê³¼ ê°™ì€ ëª¨ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ì´ ì„œë¡œ ë‹¤ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°„ì— **ê³µìœ ë˜ë„ë¡ í—ˆìš©í•©ë‹ˆë‹¤**. ê·¸ëŸ¬ë‚˜ ì´ëŸ¬í•œ ëª¨ë“œëŠ” ë‹¤ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜, íŠ¹íˆ ì ì¬ì ìœ¼ë¡œ ì•…ì˜ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì˜í•œ íŒŒì¼ ì ‘ê·¼ì„ **ì œí•œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤**.

1. **ì •ì  ë¶„ì„:**
* `MODE_WORLD_READABLE` ë° `MODE_WORLD_WRITABLE`ì˜ ì‚¬ìš©ì´ **ë©´ë°€íˆ ê²€í† ë˜ì–´ì•¼ í•©ë‹ˆë‹¤**. ì´ëŸ¬í•œ ëª¨ë“œëŠ” íŒŒì¼ì„ **ì˜ˆê¸°ì¹˜ ì•Šê±°ë‚˜ ë¬´ë‹¨ ì ‘ê·¼**ì— ë…¸ì¶œì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. **ë™ì  ë¶„ì„:**
* ì•±ì—ì„œ ìƒì„±ëœ íŒŒì¼ì— ì„¤ì •ëœ **ê¶Œí•œ**ì„ **í™•ì¸**í•˜ì„¸ìš”. íŠ¹íˆ, ì–´ë–¤ íŒŒì¼ì´ **ì „ ì„¸ê³„ì ìœ¼ë¡œ ì½ê±°ë‚˜ ì“¸ ìˆ˜ ìˆë„ë¡ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸**í•˜ì„¸ìš”. ì´ëŠ” **ì–´ë–¤ ì• í”Œë¦¬ì¼€ì´ì…˜**ì´ë“  ì¥ì¹˜ì— ì„¤ì¹˜ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì´ íŒŒì¼ì„ **ì½ê±°ë‚˜ ìˆ˜ì •**í•  ìˆ˜ ìˆê²Œ í•˜ì—¬ ìƒë‹¹í•œ ë³´ì•ˆ ìœ„í—˜ì„ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì™¸ë¶€ ì €ì¥ì†Œ**

**ì™¸ë¶€ ì €ì¥ì†Œ**ì—ì„œ íŒŒì¼ì„ ë‹¤ë£° ë•ŒëŠ” ëª‡ ê°€ì§€ ì£¼ì˜ ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤:

1. **ì ‘ê·¼ì„±**:
* ì™¸ë¶€ ì €ì¥ì†Œì˜ íŒŒì¼ì€ **ì „ ì„¸ê³„ì ìœ¼ë¡œ ì½ê³  ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤**. ì´ëŠ” ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‚˜ ì‚¬ìš©ìê°€ ì´ëŸ¬í•œ íŒŒì¼ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
2. **ë³´ì•ˆ ë¬¸ì œ**:
* ì ‘ê·¼ì´ ìš©ì´í•˜ë¯€ë¡œ **ë¯¼ê°í•œ ì •ë³´ë¥¼ ì™¸ë¶€ ì €ì¥ì†Œì— ì €ì¥í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤**.
* ì™¸ë¶€ ì €ì¥ì†ŒëŠ” ì œê±°ë˜ê±°ë‚˜ ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì˜í•´ ì ‘ê·¼ë  ìˆ˜ ìˆì–´ ë³´ì•ˆì´ ë–¨ì–´ì§‘ë‹ˆë‹¤.
3. **ì™¸ë¶€ ì €ì¥ì†Œì—ì„œ ë°ì´í„° ì²˜ë¦¬**:
* ì™¸ë¶€ ì €ì¥ì†Œì—ì„œ ê²€ìƒ‰í•œ ë°ì´í„°ì— ëŒ€í•´ í•­ìƒ **ì…ë ¥ ê²€ì¦ì„ ìˆ˜í–‰**í•˜ì„¸ìš”. ì´ëŠ” ë°ì´í„°ê°€ ì‹ ë¢°í•  ìˆ˜ ì—†ëŠ” ì¶œì²˜ì—ì„œ ì˜¨ ê²ƒì´ê¸° ë•Œë¬¸ì— ì¤‘ìš”í•©ë‹ˆë‹¤.
* ë™ì  ë¡œë”©ì„ ìœ„í•´ ì™¸ë¶€ ì €ì¥ì†Œì— ì‹¤í–‰ íŒŒì¼ì´ë‚˜ í´ë˜ìŠ¤ íŒŒì¼ì„ ì €ì¥í•˜ëŠ” ê²ƒì€ ê°•ë ¥íˆ ê¶Œì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
* ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì™¸ë¶€ ì €ì¥ì†Œì—ì„œ ì‹¤í–‰ íŒŒì¼ì„ ê²€ìƒ‰í•´ì•¼ í•˜ëŠ” ê²½ìš°, ì´ëŸ¬í•œ íŒŒì¼ì´ **ì„œëª…ë˜ê³  ì•”í˜¸í•™ì ìœ¼ë¡œ ê²€ì¦ëœ í›„ ë™ì ìœ¼ë¡œ ë¡œë“œë˜ë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤**. ì´ ë‹¨ê³„ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë³´ì•ˆ ë¬´ê²°ì„±ì„ ìœ ì§€í•˜ëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤.

ì™¸ë¶€ ì €ì¥ì†ŒëŠ” `/storage/emulated/0`, `/sdcard`, `/mnt/sdcard`ì—ì„œ **ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**.

{% hint style="info" %}
Android 4.4 (**API 17**)ë¶€í„° SD ì¹´ë“œì—ëŠ” **ì•±ì— íŠ¹ì •í•œ ë””ë ‰í† ë¦¬ë¡œì˜ ì ‘ê·¼ì„ ì œí•œí•˜ëŠ” ë””ë ‰í† ë¦¬ êµ¬ì¡°**ê°€ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì•…ì˜ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë‹¤ë¥¸ ì•±ì˜ íŒŒì¼ì— ëŒ€í•œ ì½ê¸° ë˜ëŠ” ì“°ê¸° ì ‘ê·¼ì„ ì–»ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤.
{% endhint %}

**ëª…í™•í•œ í…ìŠ¤íŠ¸ë¡œ ì €ì¥ëœ ë¯¼ê°í•œ ë°ì´í„°**

* **ê³µìœ  í™˜ê²½ ì„¤ì •**: AndroidëŠ” ê° ì• í”Œë¦¬ì¼€ì´ì…˜ì´ `/data/data/<packagename>/shared_prefs/` ê²½ë¡œì— XML íŒŒì¼ì„ ì‰½ê²Œ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ë©°, ë•Œë•Œë¡œ í•´ë‹¹ í´ë”ì—ì„œ ëª…í™•í•œ í…ìŠ¤íŠ¸ë¡œ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **ë°ì´í„°ë² ì´ìŠ¤**: AndroidëŠ” ê° ì• í”Œë¦¬ì¼€ì´ì…˜ì´ `/data/data/<packagename>/databases/` ê²½ë¡œì— SQLite ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‰½ê²Œ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ë©°, ë•Œë•Œë¡œ í•´ë‹¹ í´ë”ì—ì„œ ëª…í™•í•œ í…ìŠ¤íŠ¸ë¡œ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì†ìƒëœ TLS

**ëª¨ë“  ì¸ì¦ì„œ ìˆ˜ë½**

ì–´ë–¤ ì´ìœ ë¡œ ê°œë°œìë“¤ì´ í˜¸ìŠ¤íŠ¸ ì´ë¦„ì´ ì½”ë“œì˜ ë‹¤ìŒ ì¤„ê³¼ ì¼ì¹˜í•˜ì§€ ì•Šë”ë¼ë„ ëª¨ë“  ì¸ì¦ì„œë¥¼ ìˆ˜ë½í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤:
```java
SSLSocketFactory sf = new cc(trustStore);
sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);
```
A good way to test this is to try to capture the traffic using some proxy like Burp without authorising Burp CA inside the device. Also, you can generate with Burp a certificate for a different hostname and use it.

### Broken Cryptography

**Poor Key Management Processes**

ì¼ë¶€ ê°œë°œìëŠ” ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ë¡œì»¬ ì €ì¥ì†Œì— ì €ì¥í•˜ê³  ì½”ë“œì— í•˜ë“œì½”ë”©ë˜ê±°ë‚˜ ì˜ˆì¸¡ ê°€ëŠ¥í•œ í‚¤ë¡œ ì•”í˜¸í™”í•©ë‹ˆë‹¤. ì´ëŠ” ë¦¬ë²„ì‹±ì„ í†µí•´ ê³µê²©ìê°€ ê¸°ë°€ ì •ë³´ë¥¼ ì¶”ì¶œí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ í”¼í•´ì•¼ í•©ë‹ˆë‹¤.

**Use of Insecure and/or Deprecated Algorithms**

ê°œë°œìëŠ” **ê¶Œì¥ë˜ì§€ ì•ŠëŠ” ì•Œê³ ë¦¬ì¦˜**ì„ ì‚¬ìš©í•˜ì—¬ **ê²€ì¦**ì„ ìˆ˜í–‰í•˜ê±°ë‚˜ **ë°ì´í„°ë¥¼ ì €ì¥**í•˜ê±°ë‚˜ **ì „ì†¡**í•´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì•Œê³ ë¦¬ì¦˜ì—ëŠ” RC4, MD4, MD5, SHA1 ë“±ì´ í¬í•¨ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ **í•´ì‹œ**ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì €ì¥í•˜ëŠ” ê²½ìš°, ì†Œê¸ˆì„ ì‚¬ìš©í•˜ì—¬ í•´ì‹œì˜ ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©ì— **ì €í•­**í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

### Other checks

* ê³µê²©ìê°€ ë¦¬ë²„ìŠ¤ ì—”ì§€ë‹ˆì–´ë§ ì‘ì—…ì„ ì–´ë µê²Œ í•˜ê¸° ìœ„í•´ **APKë¥¼ ë‚œë…í™”**í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
* ì•±ì´ ë¯¼ê°í•œ ê²½ìš°(ì˜ˆ: ì€í–‰ ì•±) **ëª¨ë°”ì¼ì´ ë£¨íŒ…ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ìì²´ ê²€ì‚¬ë¥¼ ìˆ˜í–‰**í•˜ê³  ê·¸ì— ë”°ë¼ í–‰ë™í•´ì•¼ í•©ë‹ˆë‹¤.
* ì•±ì´ ë¯¼ê°í•œ ê²½ìš°(ì˜ˆ: ì€í–‰ ì•±) **ì—ë®¬ë ˆì´í„°**ê°€ ì‚¬ìš©ë˜ê³  ìˆëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.
* ì•±ì´ ë¯¼ê°í•œ ê²½ìš°(ì˜ˆ: ì€í–‰ ì•±) **ì‹¤í–‰í•˜ê¸° ì „ì— ìì²´ ë¬´ê²°ì„±ì„ í™•ì¸**í•˜ì—¬ ìˆ˜ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.
* [**APKiD**](https://github.com/rednaga/APKiD)ë¥¼ ì‚¬ìš©í•˜ì—¬ APKë¥¼ ë¹Œë“œí•˜ëŠ” ë° ì‚¬ìš©ëœ ì»´íŒŒì¼ëŸ¬/íŒ¨ì»¤/ë‚œë…í™” ë„êµ¬ë¥¼ í™•ì¸í•˜ì„¸ìš”.

### React Native Application

Read the following page to learn how to easily access javascript code of React applications:

{% content-ref url="react-native-application.md" %}
[react-native-application.md](react-native-application.md)
{% endcontent-ref %}

### Xamarin Applications

Read the following page to learn how to easily access C# code of a xamarin applications:

{% content-ref url="../xamarin-apps.md" %}
[xamarin-apps.md](../xamarin-apps.md)
{% endcontent-ref %}

### Superpacked Applications

According to this [**blog post**](https://clearbluejar.github.io/posts/desuperpacking-meta-superpacked-apks-with-github-actions/) superpacked is a Meta algorithm that compress the content of an application into a single file. The blog talks about the possibility of creating an app that decompress these kind of apps... and a faster way which involves to **execute the application and gather the decompressed files from the filesystem.**

### Automated Static Code Analysis

The tool [**mariana-trench**](https://github.com/facebook/mariana-trench) is capable of finding **vulnerabilities** by **scanning** the **code** of the application. This tool contains a series of **known sources** (that indicates to the tool the **places** where the **input** is **controlled by the user**), **sinks** (which indicates to the tool **dangerous** **places** where malicious user input could cause damages) and **rules**. These rules indicates the **combination** of **sources-sinks** that indicates a vulnerability.

With this knowledge, **mariana-trench will review the code and find possible vulnerabilities on it**.

### Secrets leaked

An application may contain secrets (API keys, passwords, hidden urls, subdomains...) inside of it that you might be able to discover. You could us a tool such as [https://github.com/dwisiswant0/apkleaks](https://github.com/dwisiswant0/apkleaks)

### Bypass Biometric Authentication

{% content-ref url="bypass-biometric-authentication-android.md" %}
[bypass-biometric-authentication-android.md](bypass-biometric-authentication-android.md)
{% endcontent-ref %}

### Other interesting functions

* **Code execution**: `Runtime.exec(), ProcessBuilder(), native code:system()`
* **Send SMSs**: `sendTextMessage, sendMultipartTestMessage`
* **Native functions** declared as `native`: `public native, System.loadLibrary, System.load`
* [Read this to learn **how to reverse native functions**](reversing-native-libraries.md)

### **Other tricks**

{% content-ref url="content-protocol.md" %}
[content-protocol.md](content-protocol.md)
{% endcontent-ref %}

***

<figure><img src="../../.gitbook/assets/image (3).png" alt=""><figcaption></figcaption></figure>

Join [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy) server to communicate with experienced hackers and bug bounty hunters!

**Hacking Insights**\
Engage with content that delves into the thrill and challenges of hacking

**Real-Time Hack News**\
Keep up-to-date with fast-paced hacking world through real-time news and insights

**Latest Announcements**\
Stay informed with the newest bug bounties launching and crucial platform updates

**Join us on** [**Discord**](https://discord.com/invite/N3FrSbmwdy) and start collaborating with top hackers today!

***

## Dynamic Analysis

> First of all, you need an environment where you can install the application and all the environment (Burp CA cert, Drozer and Frida mainly). Therefore, a rooted device (emulated or not) is extremely recommended.

### Online Dynamic analysis

You can create a **free account** in: [https://appetize.io/](https://appetize.io). This platform allows you to **upload** and **execute** APKs, so it is useful to see how an apk is behaving.

You can even **see the logs of your application** in the web and connect through **adb**.

![](<../../.gitbook/assets/image (831).png>)

Thanks to the ADB connection you can use **Drozer** and **Frida** inside the emulators.

### Local Dynamic Analysis

#### Using an emulator

* [**Android Studio**](https://developer.android.com/studio) (You can create **x86** and **arm** devices, and according to [**this** ](https://android-developers.googleblog.com/2020/03/run-arm-apps-on-android-emulator.html)**latest x86** versions **support ARM libraries** without needing an slow arm emulator).
* Learn to set it up in this page:

{% content-ref url="avd-android-virtual-device.md" %}
[avd-android-virtual-device.md](avd-android-virtual-device.md)
{% endcontent-ref %}

* [**Genymotion**](https://www.genymotion.com/fun-zone/) **(Free version:** Personal Edition, you need to create an account. _It's recommend to **download** the version **WITH**_ _**VirtualBox** to avoid potential errors._)
* [**Nox**](https://es.bignox.com) (Free, but it doesn't support Frida or Drozer).

{% hint style="info" %}
When creating a new emulator on any platform remember that the bigger the screen is, the slower the emulator will run. So select small screens if possible.
{% endhint %}

To **install google services** (like AppStore) in Genymotion you need to click on the red marked button of the following image:

![](<../../.gitbook/assets/image (277).png>)

Also, notice that in the **configuration of the Android VM in Genymotion** you can select **Bridge Network mode** (this will be useful if you will be connecting to the Android VM from a different VM with the tools).

#### Use a physical device

You need to activate the **debugging** options and it will be cool if you can **root** it:

1. **Settings**.
2. (FromAndroid 8.0) Select **System**.
3. Select **About phone**.
4. Press **Build number** 7 times.
5. Go back and you will find the **Developer options**.

> Once you have installed the application, the first thing you should do is to try it and investigate what does it do, how does it work and get comfortable with it.\
> I will suggest to **perform this initial dynamic analysis using MobSF dynamic analysis + pidcat**, so we will be able to **learn how the application works** while MobSF **captures** a lot of **interesting** **data** you can review later on.

### Unintended Data Leakage

**Logging**

ê°œë°œìëŠ” **ë””ë²„ê¹… ì •ë³´**ë¥¼ ê³µê°œì ìœ¼ë¡œ ë…¸ì¶œí•˜ëŠ” ê²ƒì— ì£¼ì˜í•´ì•¼ í•˜ë©°, ì´ëŠ” ë¯¼ê°í•œ ë°ì´í„° ìœ ì¶œë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ì—¬ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì‹ë³„í•˜ê³  ë³´í˜¸í•˜ê¸° ìœ„í•´ [**pidcat**](https://github.com/JakeWharton/pidcat) ë° `adb logcat` ë„êµ¬ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤. **Pidcat**ì€ ì‚¬ìš© ìš©ì´ì„±ê³¼ ê°€ë…ì„± ë•Œë¬¸ì— ì„ í˜¸ë©ë‹ˆë‹¤.

{% hint style="warning" %}
Note that from **later newer than Android 4.0**, **applications are only able to access their own logs**. So applications cannot access other apps logs.\
Anyway, it's still recommended to **not log sensitive information**.
{% endhint %}

**Copy/Paste Buffer Caching**

Androidì˜ **í´ë¦½ë³´ë“œ ê¸°ë°˜** í”„ë ˆì„ì›Œí¬ëŠ” ì•±ì—ì„œ ë³µì‚¬-ë¶™ì—¬ë„£ê¸° ê¸°ëŠ¥ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ì§€ë§Œ, **ë‹¤ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜**ì´ í´ë¦½ë³´ë“œì— **ì ‘ê·¼**í•  ìˆ˜ ìˆì–´ ë¯¼ê°í•œ ë°ì´í„°ê°€ ë…¸ì¶œë  ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤. ì‹ ìš© ì¹´ë“œ ì„¸ë¶€ì •ë³´ì™€ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¯¼ê°í•œ ì„¹ì…˜ì— ëŒ€í•´ **ë³µì‚¬/ë¶™ì—¬ë„£ê¸°** ê¸°ëŠ¥ì„ ë¹„í™œì„±í™”í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

**Crash Logs**

ì• í”Œë¦¬ì¼€ì´ì…˜ì´ **ì¶©ëŒ**í•˜ê³  **ë¡œê·¸ë¥¼ ì €ì¥**í•˜ëŠ” ê²½ìš°, ì´ëŸ¬í•œ ë¡œê·¸ëŠ” ê³µê²©ìì—ê²Œ ë„ì›€ì´ ë  ìˆ˜ ìˆìœ¼ë©°, íŠ¹íˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¦¬ë²„ìŠ¤ ì—”ì§€ë‹ˆì–´ë§í•  ìˆ˜ ì—†ëŠ” ê²½ìš° ë”ìš± ê·¸ë ‡ìŠµë‹ˆë‹¤. ì´ ìœ„í—˜ì„ ì™„í™”í•˜ê¸° ìœ„í•´ ì¶©ëŒ ì‹œ ë¡œê·¸ë¥¼ ê¸°ë¡í•˜ì§€ ì•Šë„ë¡ í•˜ê³ , ë¡œê·¸ë¥¼ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ì „ì†¡í•´ì•¼ í•˜ëŠ” ê²½ìš° SSL ì±„ë„ì„ í†µí•´ ì „ì†¡ë˜ë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤.

As pentester, **try to take a look to these logs**.

**Analytics Data Sent To 3rd Parties**

ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì¢…ì¢… Google Adsenseì™€ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ í†µí•©í•˜ì—¬ ê°œë°œìì˜ ë¶€ì ì ˆí•œ êµ¬í˜„ìœ¼ë¡œ ì¸í•´ ë¯¼ê°í•œ ë°ì´í„°ê°€ **ìœ ì¶œ**ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì ì¬ì ì¸ ë°ì´í„° ìœ ì¶œì„ ì‹ë³„í•˜ê¸° ìœ„í•´ **ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ íŠ¸ë˜í”½ì„ ê°€ë¡œì±„ê³ ** ì œ3ì ì„œë¹„ìŠ¤ì— ì „ì†¡ë˜ëŠ” ë¯¼ê°í•œ ì •ë³´ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

### SQLite DBs

ëŒ€ë¶€ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì •ë³´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ **ë‚´ë¶€ SQLite ë°ì´í„°ë² ì´ìŠ¤**ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. íœí…ŒìŠ¤íŠ¸ ì¤‘ì— ìƒì„±ëœ **ë°ì´í„°ë² ì´ìŠ¤**, **í…Œì´ë¸”** ë° **ì—´**ì˜ ì´ë¦„ê³¼ ì €ì¥ëœ ëª¨ë“  **ë°ì´í„°**ë¥¼ ì‚´í´ë³´ì•„ì•¼ í•˜ë©°, ì—¬ê¸°ì„œ **ë¯¼ê°í•œ ì •ë³´**(ì·¨ì•½ì ì´ ë  ìˆ˜ ìˆìŒ)ë¥¼ ë°œê²¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
ë°ì´í„°ë² ì´ìŠ¤ëŠ” `/data/data/the.package.name/databases`ì— ìœ„ì¹˜í•´ì•¼ í•˜ë©°, ì˜ˆë¥¼ ë“¤ì–´ `/data/data/com.mwr.example.sieve/databases`ì™€ ê°™ìŠµë‹ˆë‹¤.

ë°ì´í„°ë² ì´ìŠ¤ê°€ ê¸°ë°€ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  **ì•”í˜¸í™”**ë˜ì–´ ìˆì§€ë§Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ **ë¹„ë°€ë²ˆí˜¸**ë¥¼ **ì°¾ì„ ìˆ˜** ìˆë‹¤ë©´ ì—¬ì „íˆ **ì·¨ì•½ì **ì…ë‹ˆë‹¤.

`.tables`ë¥¼ ì‚¬ìš©í•˜ì—¬ í…Œì´ë¸”ì„ ë‚˜ì—´í•˜ê³ , `.schema <table_name>`ì„ ì‚¬ìš©í•˜ì—¬ í…Œì´ë¸”ì˜ ì—´ì„ ë‚˜ì—´í•©ë‹ˆë‹¤.

### Drozer (Exploit Activities, Content Providers and Services)

From [Drozer Docs](https://labs.mwrinfosecurity.com/assets/BlogFiles/mwri-drozer-user-guide-2015-03-23.pdf): **Drozer**ëŠ” **Android ì•±ì˜ ì—­í• ì„ ê°€ì •**í•˜ê³  ë‹¤ë¥¸ ì•±ê³¼ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ì´ëŠ” ì„¤ì¹˜ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í•  ìˆ˜ ìˆëŠ” **ëª¨ë“  ì‘ì—…**ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìœ¼ë©°, Androidì˜ í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹ (IPC) ë©”ì»¤ë‹ˆì¦˜ì„ í™œìš©í•˜ê³  ê¸°ë³¸ ìš´ì˜ ì²´ì œì™€ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
DrozerëŠ” **ë‚´ë³´ë‚¸ í™œë™, ë‚´ë³´ë‚¸ ì„œë¹„ìŠ¤ ë° ì½˜í…ì¸  ì œê³µì**ë¥¼ **ì•…ìš©**í•˜ëŠ” ë° ìœ ìš©í•œ ë„êµ¬ì…ë‹ˆë‹¤.

### Exploiting exported Activities

[**Read this if you want to refresh what is an Android Activity.**](android-applications-basics.md#launcher-activity-and-other-activities)\
Also remember that the code of an activity starts in the **`onCreate`** method.

**Authorisation bypass**

í™œë™ì´ ë‚´ë³´ë‚´ì§€ë©´ ì™¸ë¶€ ì•±ì—ì„œ í•´ë‹¹ í™”ë©´ì„ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ **ë¯¼ê°í•œ ì •ë³´**ê°€ **ë‚´ë³´ë‚´ì§„** í™œë™ì´ ìˆëŠ” ê²½ìš° **ì¸ì¦** ë©”ì»¤ë‹ˆì¦˜ì„ **ìš°íšŒ**í•˜ì—¬ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

[**Learn how to exploit exported activities with Drozer.**](drozer-tutorial/#activities)

You can also start an exported activity from adb:

* PackageName is com.example.demo
* Exported ActivityName is com.example.test.MainActivity
```bash
adb shell am start -n com.example.demo/com.example.test.MainActivity
```
**NOTE**: MobSFëŠ” í™œë™ì—ì„œ `android:launchMode`ë¡œ _**singleTask/singleInstance**_ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì•…ì„±ìœ¼ë¡œ ê°ì§€í•˜ì§€ë§Œ, [ì´ê²ƒ](https://github.com/MobSF/Mobile-Security-Framework-MobSF/pull/750) ë•Œë¬¸ì—, ì´ëŠ” êµ¬ë²„ì „(API ë²„ì „ < 21)ì—ì„œë§Œ ìœ„í—˜í•œ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.

{% hint style="info" %}
ê¶Œí•œ ìš°íšŒê°€ í•­ìƒ ì·¨ì•½ì ì€ ì•„ë‹ˆë¼ëŠ” ì ì— ìœ ì˜í•´ì•¼ í•˜ë©°, ì´ëŠ” ìš°íšŒê°€ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ì™€ ì–´ë–¤ ì •ë³´ê°€ ë…¸ì¶œë˜ëŠ”ì§€ì— ë”°ë¼ ë‹¤ë¦…ë‹ˆë‹¤.
{% endhint %}

**ë¯¼ê°í•œ ì •ë³´ ìœ ì¶œ**

**í™œë™ì€ ê²°ê³¼ë¥¼ ë°˜í™˜í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤**. ë§Œì•½ ë‹¹ì‹ ì´ **`setResult`** ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê³  **ë¯¼ê°í•œ ì •ë³´ë¥¼ ë°˜í™˜í•˜ëŠ”** ë‚´ë³´ë‚´ê¸°ëœ ë³´í˜¸ë˜ì§€ ì•Šì€ í™œë™ì„ ì°¾ëŠ”ë‹¤ë©´, ë¯¼ê°í•œ ì •ë³´ ìœ ì¶œì´ ë°œìƒí•œ ê²ƒì…ë‹ˆë‹¤.

#### Tapjacking

Tapjackingì´ ë°©ì§€ë˜ì§€ ì•Šìœ¼ë©´, ë‚´ë³´ë‚´ê¸°ëœ í™œë™ì„ ì•…ìš©í•˜ì—¬ **ì‚¬ìš©ìê°€ ì˜ˆìƒì¹˜ ëª»í•œ í–‰ë™ì„ í•˜ë„ë¡ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤**. [**Tapjackingì´ ë¬´ì—‡ì¸ì§€ì— ëŒ€í•œ ë” ë§ì€ ì •ë³´ëŠ” ë§í¬ë¥¼ ë”°ë¼ê°€ì„¸ìš”**](./#tapjacking).

### ì½˜í…ì¸  ì œê³µì ì•…ìš© - ë¯¼ê°í•œ ì •ë³´ ì ‘ê·¼ ë° ì¡°ì‘

[**ì½˜í…ì¸  ì œê³µìê°€ ë¬´ì—‡ì¸ì§€ ìƒˆë¡­ê²Œ ì•Œê³  ì‹¶ë‹¤ë©´ ì´ ê¸€ì„ ì½ì–´ë³´ì„¸ìš”.**](android-applications-basics.md#content-provider)\
ì½˜í…ì¸  ì œê³µìëŠ” ê¸°ë³¸ì ìœ¼ë¡œ **ë°ì´í„°ë¥¼ ê³µìœ í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤**. ì•±ì— ì‚¬ìš© ê°€ëŠ¥í•œ ì½˜í…ì¸  ì œê³µìê°€ ìˆë‹¤ë©´, ê·¸ë“¤ë¡œë¶€í„° **ë¯¼ê°í•œ** ë°ì´í„°ë¥¼ **ì¶”ì¶œí•  ìˆ˜** ìˆì„ ê²ƒì…ë‹ˆë‹¤. ë˜í•œ **SQL ì¸ì ì…˜** ë° **ê²½ë¡œ íƒìƒ‰**ì˜ ê°€ëŠ¥ì„±ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒë„ í¥ë¯¸ë¡­ìŠµë‹ˆë‹¤. ì´ë“¤ì€ ì·¨ì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

[**Drozerë¡œ ì½˜í…ì¸  ì œê³µìë¥¼ ì•…ìš©í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ì„¸ìš”.**](drozer-tutorial/#content-providers)

### **ì„œë¹„ìŠ¤ ì•…ìš©**

[**ì„œë¹„ìŠ¤ê°€ ë¬´ì—‡ì¸ì§€ ìƒˆë¡­ê²Œ ì•Œê³  ì‹¶ë‹¤ë©´ ì´ ê¸€ì„ ì½ì–´ë³´ì„¸ìš”.**](android-applications-basics.md#services)\
ì„œë¹„ìŠ¤ì˜ ë™ì‘ì€ `onStartCommand` ë©”ì„œë“œì—ì„œ ì‹œì‘ëœë‹¤ëŠ” ì ì„ ê¸°ì–µí•˜ì„¸ìš”.

ì„œë¹„ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ **ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•˜ê³ **, **ì²˜ë¦¬**í•˜ë©° **ì‘ë‹µ**(ë˜ëŠ” ì‘ë‹µí•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ)ì„ **ë°˜í™˜**í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë”°ë¼ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¼ë¶€ ì„œë¹„ìŠ¤ë¥¼ ë‚´ë³´ë‚´ê³  ìˆë‹¤ë©´, **ì½”ë“œë¥¼ í™•ì¸**í•˜ì—¬ ê·¸ê²ƒì´ ë¬´ì—‡ì„ í•˜ëŠ”ì§€ ì´í•´í•˜ê³ , **ë¯¼ê°í•œ ì •ë³´ë¥¼ ì¶”ì¶œí•˜ê¸° ìœ„í•´ ë™ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸**í•´ì•¼ í•©ë‹ˆë‹¤. ì¸ì¦ ìˆ˜ë‹¨ì„ ìš°íšŒí•˜ëŠ” ê²ƒë„ í¬í•¨ë©ë‹ˆë‹¤...\
[**Drozerë¡œ ì„œë¹„ìŠ¤ë¥¼ ì•…ìš©í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ì„¸ìš”.**](drozer-tutorial/#services)

### **ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ê¸° ì•…ìš©**

[**ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ê¸°ê°€ ë¬´ì—‡ì¸ì§€ ìƒˆë¡­ê²Œ ì•Œê³  ì‹¶ë‹¤ë©´ ì´ ê¸€ì„ ì½ì–´ë³´ì„¸ìš”.**](android-applications-basics.md#broadcast-receivers)\
ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ê¸°ì˜ ë™ì‘ì€ `onReceive` ë©”ì„œë“œì—ì„œ ì‹œì‘ëœë‹¤ëŠ” ì ì„ ê¸°ì–µí•˜ì„¸ìš”.

ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ê¸°ëŠ” íŠ¹ì • ìœ í˜•ì˜ ë©”ì‹œì§€ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤. ìˆ˜ì‹ ê¸°ê°€ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì— ë”°ë¼ ì·¨ì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
[**Drozerë¡œ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ê¸°ë¥¼ ì•…ìš©í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ì„¸ìš”.**](./#exploiting-broadcast-receivers)

### **ìŠ¤í‚´ / ë”¥ ë§í¬ ì•…ìš©**

MobSFì™€ ê°™ì€ ë„êµ¬ë‚˜ [ì´ ìŠ¤í¬ë¦½íŠ¸](https://github.com/ashleykinguk/FBLinkBuilder/blob/master/FBLinkBuilder.py)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë”¥ ë§í¬ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
**adb** ë˜ëŠ” **ë¸Œë¼ìš°ì €**ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„ ì–¸ëœ **ìŠ¤í‚´**ì„ **ì—´ ìˆ˜** ìˆìŠµë‹ˆë‹¤:

{% code overflow="wrap" %}
```bash
adb shell am start -a android.intent.action.VIEW -d "scheme://hostname/path?param=value" [your.package.name]
```
{% endcode %}

_íŒ¨í‚¤ì§€ ì´ë¦„ì„ **ìƒëµí•  ìˆ˜** ìˆìœ¼ë©°, ëª¨ë°”ì¼ì€ ìë™ìœ¼ë¡œ í•´ë‹¹ ë§í¬ë¥¼ ì—´ì–´ì•¼ í•˜ëŠ” ì•±ì„ í˜¸ì¶œí•©ë‹ˆë‹¤._

{% code overflow="wrap" %}
```markup
<!-- Browser regular link -->
<a href="scheme://hostname/path?param=value">Click me</a>
<!-- fallback in your url you could try the intent url -->
<a href="intent://hostname#Intent;scheme=scheme;package=your.package.name;S.browser_fallback_url=http%3A%2F%2Fwww.example.com;end">with alternative</a>
```
{% endcode %}

**ì‹¤í–‰ëœ ì½”ë“œ**

**ì•±ì—ì„œ ì‹¤í–‰ë  ì½”ë“œ**ë¥¼ ì°¾ìœ¼ë ¤ë©´, ë”¥ë§í¬ë¡œ í˜¸ì¶œëœ ì•¡í‹°ë¹„í‹°ë¡œ ê°€ì„œ **`onNewIntent`** í•¨ìˆ˜ë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”.

![](<../../.gitbook/assets/image (436) (1) (1) (1).png>)

**ë¯¼ê°í•œ ì •ë³´**

ë”¥ë§í¬ë¥¼ ì°¾ì„ ë•Œë§ˆë‹¤ **URL ë§¤ê°œë³€ìˆ˜ë¥¼ í†µí•´ ë¯¼ê°í•œ ë°ì´í„°(ì˜ˆ: ë¹„ë°€ë²ˆí˜¸)ë¥¼ ìˆ˜ì‹ í•˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”**, ë‹¤ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ **ë”¥ë§í¬ë¥¼ ê°€ì¥í•˜ì—¬ í•´ë‹¹ ë°ì´í„°ë¥¼ í›”ì¹  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤!**

**ê²½ë¡œì˜ ë§¤ê°œë³€ìˆ˜**

**ë”¥ë§í¬ê°€ URLì˜ ê²½ë¡œ ë‚´ì—ì„œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤**. ì˜ˆ: `https://api.example.com/v1/users/{username}`. ì´ ê²½ìš°, ë‹¤ìŒê³¼ ê°™ì´ ê²½ë¡œ íƒìƒ‰ì„ ê°•ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: `example://app/users?username=../../unwanted-endpoint%3fparam=value`.\
ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ ì˜¬ë°”ë¥¸ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì°¾ìœ¼ë©´ **Open Redirect**(ê²½ë¡œì˜ ì¼ë¶€ê°€ ë„ë©”ì¸ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê²½ìš°), **ê³„ì • íƒˆì·¨**(CSRF í† í° ì—†ì´ ì‚¬ìš©ì ì„¸ë¶€ì •ë³´ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆê³  ì·¨ì•½í•œ ì—”ë“œí¬ì¸íŠ¸ê°€ ì˜¬ë°”ë¥¸ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°) ë° ê¸°íƒ€ ì·¨ì•½ì ì„ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë” ë§ì€ [ì •ë³´ëŠ” ì—¬ê¸°](http://dphoeniixx.com/2020/12/13-2/)ì—ì„œ í™•ì¸í•˜ì„¸ìš”.

**ë” ë§ì€ ì˜ˆì‹œ**

ë§í¬ì— ëŒ€í•œ [í¥ë¯¸ë¡œìš´ ë²„ê·¸ ë°”ìš´í‹° ë³´ê³ ì„œ](https://hackerone.com/reports/855618) (_/.well-known/assetlinks.json_).

### ì „ì†¡ ê³„ì¸µ ê²€ì‚¬ ë° ê²€ì¦ ì‹¤íŒ¨

* **ì¸ì¦ì„œëŠ” Android ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í•­ìƒ ì œëŒ€ë¡œ ê²€ì‚¬ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤**. ì´ëŸ¬í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê²½ê³ ë¥¼ ë¬´ì‹œí•˜ê³  ìì²´ ì„œëª…ëœ ì¸ì¦ì„œë¥¼ ìˆ˜ë½í•˜ê±°ë‚˜, ê²½ìš°ì— ë”°ë¼ HTTP ì—°ê²°ë¡œ ë˜ëŒì•„ê°€ëŠ” ê²½ìš°ê°€ í”í•©ë‹ˆë‹¤.
* **SSL/TLS í•¸ë“œì…°ì´í¬ ì¤‘ í˜‘ìƒì´ ë•Œë•Œë¡œ ì•½í•©ë‹ˆë‹¤**, ì•ˆì „í•˜ì§€ ì•Šì€ ì•”í˜¸ ëª¨ìŒì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ ì·¨ì•½ì ì€ ì—°ê²°ì„ ì¤‘ê°„ì ê³µê²©(MITM)ì— ì·¨ì•½í•˜ê²Œ ë§Œë“¤ì–´ ê³µê²©ìê°€ ë°ì´í„°ë¥¼ ë³µí˜¸í™”í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.
* **ë¯¼ê°í•œ ì •ë³´ì˜ ìœ ì¶œ**ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì•ˆì „í•œ ì±„ë„ì„ ì‚¬ìš©í•˜ì—¬ ì¸ì¦í•˜ì§€ë§Œ ë‹¤ë¥¸ ê±°ë˜ì— ëŒ€í•´ ë¹„ì•ˆì „í•œ ì±„ë„ì„ í†µí•´ í†µì‹ í•  ë•Œ ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤. ì´ ì ‘ê·¼ ë°©ì‹ì€ ì„¸ì…˜ ì¿ í‚¤ë‚˜ ì‚¬ìš©ì ì„¸ë¶€ì •ë³´ì™€ ê°™ì€ ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ì•…ì˜ì ì¸ ì—”í‹°í‹°ì˜ ê°€ë¡œì±„ê¸°ë¡œë¶€í„° ë³´í˜¸í•˜ì§€ ëª»í•©ë‹ˆë‹¤.

#### ì¸ì¦ì„œ ê²€ì¦

**ì¸ì¦ì„œ ê²€ì¦**ì— ì§‘ì¤‘í•˜ê² ìŠµë‹ˆë‹¤. ë³´ì•ˆì„ ê°•í™”í•˜ê¸° ìœ„í•´ ì„œë²„ì˜ ì¸ì¦ì„œ ë¬´ê²°ì„±ì„ ê²€ì¦í•´ì•¼ í•©ë‹ˆë‹¤. ì´ëŠ” ì•ˆì „í•˜ì§€ ì•Šì€ TLS êµ¬ì„±ê³¼ ì•”í˜¸í™”ë˜ì§€ ì•Šì€ ì±„ë„ì„ í†µí•œ ë¯¼ê°í•œ ë°ì´í„° ì „ì†¡ì´ ìƒë‹¹í•œ ìœ„í—˜ì„ ì´ˆë˜í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì¤‘ìš”í•©ë‹ˆë‹¤. ì„œë²„ ì¸ì¦ì„œë¥¼ ê²€ì¦í•˜ê³  ì·¨ì•½ì ì„ í•´ê²°í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ìì„¸í•œ ë‹¨ê³„ëŠ” [**ì´ ë¦¬ì†ŒìŠ¤**](https://manifestsecurity.com/android-application-security-part-10/)ì—ì„œ í¬ê´„ì ì¸ ì§€ì¹¨ì„ ì œê³µí•©ë‹ˆë‹¤.

#### SSL í•€ë‹

SSL í•€ë‹ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì„œë²„ì˜ ì¸ì¦ì„œë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì— ì €ì¥ëœ ì•Œë ¤ì§„ ë³µì‚¬ë³¸ê³¼ ë¹„êµí•˜ì—¬ ê²€ì¦í•˜ëŠ” ë³´ì•ˆ ì¡°ì¹˜ì…ë‹ˆë‹¤. ì´ ë°©ë²•ì€ MITM ê³µê²©ì„ ë°©ì§€í•˜ëŠ” ë° í•„ìˆ˜ì ì…ë‹ˆë‹¤. ë¯¼ê°í•œ ì •ë³´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ëŠ” SSL í•€ë‹ êµ¬í˜„ì´ ê°•ë ¥íˆ ê¶Œì¥ë©ë‹ˆë‹¤.

#### íŠ¸ë˜í”½ ê²€ì‚¬

HTTP íŠ¸ë˜í”½ì„ ê²€ì‚¬í•˜ë ¤ë©´ **í”„ë¡ì‹œ ë„êµ¬ì˜ ì¸ì¦ì„œë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤**(ì˜ˆ: Burp). ì´ ì¸ì¦ì„œë¥¼ ì„¤ì¹˜í•˜ì§€ ì•Šìœ¼ë©´ ì•”í˜¸í™”ëœ íŠ¸ë˜í”½ì´ í”„ë¡ì‹œë¥¼ í†µí•´ í‘œì‹œë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì •ì˜ CA ì¸ì¦ì„œë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê°€ì´ë“œëŠ” [**ì—¬ê¸°ë¥¼ í´ë¦­í•˜ì„¸ìš”**](avd-android-virtual-device.md#install-burp-certificate-on-a-virtual-machine).

**API ë ˆë²¨ 24 ì´ìƒ**ì„ ëŒ€ìƒìœ¼ë¡œ í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì€ í”„ë¡ì‹œì˜ CA ì¸ì¦ì„œë¥¼ ìˆ˜ë½í•˜ë„ë¡ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ êµ¬ì„±ì„ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ë‹¨ê³„ëŠ” ì•”í˜¸í™”ëœ íŠ¸ë˜í”½ì„ ê²€ì‚¬í•˜ëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ êµ¬ì„±ì„ ìˆ˜ì •í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ì§€ì¹¨ì€ [**ì´ íŠœí† ë¦¬ì–¼**](make-apk-accept-ca-certificate.md)ì„ ì°¸ì¡°í•˜ì„¸ìš”.

#### SSL í•€ë‹ ìš°íšŒ

SSL í•€ë‹ì´ êµ¬í˜„ëœ ê²½ìš° HTTPS íŠ¸ë˜í”½ì„ ê²€ì‚¬í•˜ê¸° ìœ„í•´ ì´ë¥¼ ìš°íšŒí•´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•œ ë‹¤ì–‘í•œ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤:

* **apk**ë¥¼ ìë™ìœ¼ë¡œ **ìˆ˜ì •í•˜ì—¬** SSLPinningì„ **ìš°íšŒ**í•˜ëŠ” [**apk-mitm**](https://github.com/shroudedcode/apk-mitm). ì´ ì˜µì…˜ì˜ ê°€ì¥ í° ì¥ì ì€ SSL í•€ë‹ì„ ìš°íšŒí•˜ê¸° ìœ„í•´ ë£¨íŠ¸ê°€ í•„ìš”í•˜ì§€ ì•Šì§€ë§Œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚­ì œí•˜ê³  ìƒˆë¡œ ì„¤ì¹˜í•´ì•¼ í•˜ë©°, í•­ìƒ ì‘ë™í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.
* **Frida**ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ ë³´í˜¸ë¥¼ ìš°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(ì•„ë˜ì—ì„œ ë…¼ì˜ë¨). Burp+Frida+Genymotionì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê°€ì´ë“œëŠ” [ì—¬ê¸°](https://spenkk.github.io/bugbounty/Configuring-Frida-with-Burp-and-GenyMotion-to-bypass-SSL-Pinning/)ì—ì„œ í™•ì¸í•˜ì„¸ìš”.
* **objection**ì„ ì‚¬ìš©í•˜ì—¬ SSL í•€ë‹ì„ **ìë™ìœ¼ë¡œ ìš°íšŒ**í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤: `objection --gadget com.package.app explore --startup-command "android sslpinning disable"`
* **MobSF ë™ì  ë¶„ì„**ì„ ì‚¬ìš©í•˜ì—¬ SSL í•€ë‹ì„ **ìë™ìœ¼ë¡œ ìš°íšŒ**í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤(ì•„ë˜ì—ì„œ ì„¤ëª…ë¨).
* ì—¬ì „íˆ ìº¡ì²˜í•˜ì§€ ëª»í•œ íŠ¸ë˜í”½ì´ ìˆë‹¤ê³  ìƒê°ë˜ë©´ **iptablesë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¸ë˜í”½ì„ burpë¡œ í¬ì›Œë”©**í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë¸”ë¡œê·¸ë¥¼ ì½ì–´ë³´ì„¸ìš”: [https://infosecwriteups.com/bypass-ssl-pinning-with-ip-forwarding-iptables-568171b52b62](https://infosecwriteups.com/bypass-ssl-pinning-with-ip-forwarding-iptables-568171b52b62)

#### ì¼ë°˜ ì›¹ ì·¨ì•½ì  ì°¾ê¸°

ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ ì¼ë°˜ ì›¹ ì·¨ì•½ì ì„ ê²€ìƒ‰í•˜ëŠ” ê²ƒë„ ì¤‘ìš”í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì·¨ì•½ì ì„ ì‹ë³„í•˜ê³  ì™„í™”í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ëŠ” ì´ ìš”ì•½ì˜ ë²”ìœ„ë¥¼ ë„˜ì–´ê°€ì§€ë§Œ, ë‹¤ë¥¸ ê³³ì—ì„œ ê´‘ë²”ìœ„í•˜ê²Œ ë‹¤ë£¨ì–´ì§€ê³  ìˆìŠµë‹ˆë‹¤.

### Frida

[Frida](https://www.frida.re)ëŠ” ê°œë°œì, ë¦¬ë²„ìŠ¤ ì—”ì§€ë‹ˆì–´, ë³´ì•ˆ ì—°êµ¬ìë¥¼ ìœ„í•œ ë™ì  ê³„ì¸¡ íˆ´í‚·ì…ë‹ˆë‹¤.\
**ì‹¤í–‰ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ‘ê·¼í•˜ê³  ëŸ°íƒ€ì„ì—ì„œ ë©”ì„œë“œë¥¼ í›„í‚¹í•˜ì—¬ ë™ì‘ì„ ë³€ê²½í•˜ê³ , ê°’ì„ ë³€ê²½í•˜ê³ , ê°’ì„ ì¶”ì¶œí•˜ê³ , ë‹¤ë¥¸ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤...**\
Android ì• í”Œë¦¬ì¼€ì´ì…˜ì„ íœí…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ Fridaë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.

* Frida ì‚¬ìš© ë°©ë²• ë°°ìš°ê¸°: [**Frida íŠœí† ë¦¬ì–¼**](frida-tutorial/)
* Fridaë¡œ ì‘ì—…í•˜ê¸° ìœ„í•œ "GUI": [**https://github.com/m0bilesecurity/RMS-Runtime-Mobile-Security**](https://github.com/m0bilesecurity/RMS-Runtime-Mobile-Security)
* Ojectionì€ Frida ì‚¬ìš©ì„ ìë™í™”í•˜ëŠ” ë° í›Œë¥­í•©ë‹ˆë‹¤: [**https://github.com/sensepost/objection**](https://github.com/sensepost/objection) **,** [**https://github.com/dpnishant/appmon**](https://github.com/dpnishant/appmon)
* ì—¬ê¸°ì—ì„œ ë©‹ì§„ Frida ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤: [**https://codeshare.frida.re/**](https://codeshare.frida.re)
* Fridaë¥¼ ë¡œë“œí•˜ì—¬ ì•ˆí‹° ë””ë²„ê¹… / ì•ˆí‹° Frida ë©”ì»¤ë‹ˆì¦˜ì„ ìš°íšŒí•´ ë³´ì„¸ìš”. [https://erfur.github.io/blog/dev/code-injection-without-ptrace](https://erfur.github.io/blog/dev/code-injection-without-ptrace)ì—ì„œ ì§€ì¹¨ì„ í™•ì¸í•˜ì„¸ìš” (ë„êµ¬ [linjector](https://github.com/erfur/linjector-rs)).

### **ë©”ëª¨ë¦¬ ë¤í”„ - Fridump**

ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë¹„ë°€ë²ˆí˜¸ë‚˜ ë‹ˆëª¨ë‹‰ê³¼ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ìˆì§€ ì•Šì€ì§€ í™•ì¸í•˜ì„¸ìš”.

[**Fridump3**](https://github.com/rootbsd/fridump3)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì•±ì˜ ë©”ëª¨ë¦¬ë¥¼ ë¤í”„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
# With PID
python3 fridump3.py -u <PID>

# With name
frida-ps -Uai
python3 fridump3.py -u "<Name>"
```
ì´ê²ƒì€ ./dump í´ë”ì— ë©”ëª¨ë¦¬ë¥¼ ë¤í”„í•  ê²ƒì´ë©°, ê·¸ ì•ˆì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ grepì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: 

{% code overflow="wrap" %}
```bash
strings * | grep -E "^[a-z]+ [a-z]+ [a-z]+ [a-z]+ [a-z]+ [a-z]+ [a-z]+ [a-z]+ [a-z]+ [a-z]+ [a-z]+ [a-z]+$"
```
{% endcode %}

### **í‚¤ ì €ì¥ì†Œì˜ ë¯¼ê°í•œ ë°ì´í„°**

ì•ˆë“œë¡œì´ë“œì—ì„œ í‚¤ ì €ì¥ì†ŒëŠ” ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸°ì— ê°€ì¥ ì¢‹ì€ ì¥ì†Œì´ì§€ë§Œ, ì¶©ë¶„í•œ ê¶Œí•œì´ ìˆìœ¼ë©´ ì—¬ì „íˆ **ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤**. ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì—¬ê¸°ì—ì„œ **ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ ì €ì¥í•˜ëŠ” ê²½í–¥ì´ ìˆê¸° ë•Œë¬¸ì—** íœí…ŒìŠ¤íŠ¸ëŠ” ì´ë¥¼ í™•ì¸í•´ì•¼ í•˜ë©°, ë£¨íŠ¸ ì‚¬ìš©ì ë˜ëŠ” ì¥ì¹˜ì— ë¬¼ë¦¬ì ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì‚¬ëŒì´ ì´ ë°ì´í„°ë¥¼ í›”ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•±ì´ í‚¤ ì €ì¥ì†Œì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ë”ë¼ë„, ë°ì´í„°ëŠ” ì•”í˜¸í™”ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

í‚¤ ì €ì¥ì†Œ ë‚´ë¶€ì˜ ë°ì´í„°ì— ì ‘ê·¼í•˜ë ¤ë©´ ì´ Frida ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: [https://github.com/WithSecureLabs/android-keystore-audit/blob/master/frida-scripts/tracer-cipher.js](https://github.com/WithSecureLabs/android-keystore-audit/blob/master/frida-scripts/tracer-cipher.js)
```bash
frida -U -f com.example.app -l frida-scripts/tracer-cipher.js
```
### **ì§€ë¬¸/ìƒì²´ ì¸ì‹ ìš°íšŒ**

ë‹¤ìŒ Frida ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ **ì§€ë¬¸ ì¸ì¦ì„ ìš°íšŒ**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Android ì• í”Œë¦¬ì¼€ì´ì…˜ì´ íŠ¹ì • ë¯¼ê°í•œ ì˜ì—­ì„ ë³´í˜¸í•˜ê¸° ìœ„í•´ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: 

{% code overflow="wrap" %}
```bash
frida --codeshare krapgras/android-biometric-bypass-update-android-11 -U -f <app.package>
```
{% endcode %}

### **ë°°ê²½ ì´ë¯¸ì§€**

ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°±ê·¸ë¼ìš´ë“œì— ë‘ë©´, AndroidëŠ” **ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìŠ¤ëƒ…ìƒ·**ì„ ì €ì¥í•˜ë¯€ë¡œ, í¬ê·¸ë¼ìš´ë“œë¡œ ë³µêµ¬ë  ë•Œ ì•±ë³´ë‹¤ ì´ë¯¸ì§€ë¥¼ ë¡œë“œí•˜ê¸° ì‹œì‘í•˜ì—¬ ì•±ì´ ë” ë¹¨ë¦¬ ë¡œë“œëœ ê²ƒì²˜ëŸ¼ ë³´ì…ë‹ˆë‹¤.

ê·¸ëŸ¬ë‚˜ ì´ ìŠ¤ëƒ…ìƒ·ì— **ë¯¼ê°í•œ ì •ë³´**ê°€ í¬í•¨ë˜ì–´ ìˆë‹¤ë©´, ìŠ¤ëƒ…ìƒ·ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì‚¬ëŒì€ **ê·¸ ì •ë³´ë¥¼ í›”ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤** (ì ‘ê·¼í•˜ë ¤ë©´ ë£¨íŠ¸ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤).

ìŠ¤ëƒ…ìƒ·ì€ ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒ ìœ„ì¹˜ì— ì €ì¥ë©ë‹ˆë‹¤: **`/data/system_ce/0/snapshots`**

AndroidëŠ” **FLAG\_SECURE** ë ˆì´ì•„ì›ƒ ë§¤ê°œë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì—¬ ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ë¥¼ **ë°©ì§€í•˜ëŠ” ë°©ë²•**ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ í”Œë˜ê·¸ë¥¼ ì‚¬ìš©í•˜ë©´ ì°½ì˜ ë‚´ìš©ì´ ì•ˆì „í•œ ê²ƒìœ¼ë¡œ ì²˜ë¦¬ë˜ì–´ ìŠ¤í¬ë¦°ìƒ·ì— ë‚˜íƒ€ë‚˜ê±°ë‚˜ ë¹„ì•ˆì „í•œ ë””ìŠ¤í”Œë ˆì´ì—ì„œ ë³¼ ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.
```bash
getWindow().setFlags(LayoutParams.FLAG_SECURE, LayoutParams.FLAG_SECURE);
```
### **ì•ˆë“œë¡œì´ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¶„ì„ê¸°**

ì´ ë„êµ¬ëŠ” ë™ì  ë¶„ì„ ì¤‘ ë‹¤ì–‘í•œ ë„êµ¬ë¥¼ ê´€ë¦¬í•˜ëŠ” ë° ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤: [https://github.com/NotSoSecure/android\_application\_analyzer](https://github.com/NotSoSecure/android_application_analyzer)

### ì¸í…íŠ¸ ì£¼ì…

ê°œë°œìë“¤ì€ ì¢…ì¢… ì´ëŸ¬í•œ ì¸í…íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê³  `startActivity(...)` ë˜ëŠ” `sendBroadcast(...)`ì™€ ê°™ì€ ë©”ì„œë“œë¡œ ì „ë‹¬í•˜ëŠ” í”„ë¡ì‹œ êµ¬ì„± ìš”ì†Œì¸ ì•¡í‹°ë¹„í‹°, ì„œë¹„ìŠ¤ ë° ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹ ê¸°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ëŠ” ìœ„í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìœ„í—˜ì€ ê³µê²©ìê°€ ì´ëŸ¬í•œ ì¸í…íŠ¸ë¥¼ ì˜ëª» ìœ ë„í•˜ì—¬ ë¹„ê³µì‹ ì•± êµ¬ì„± ìš”ì†Œë¥¼ íŠ¸ë¦¬ê±°í•˜ê±°ë‚˜ ë¯¼ê°í•œ ì½˜í…ì¸  ì œê³µìì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ëŠ” ë° ìˆìŠµë‹ˆë‹¤. ì£¼ëª©í•  ë§Œí•œ ì˜ˆëŠ” `WebView` êµ¬ì„± ìš”ì†Œê°€ URLì„ `Intent` ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” `Intent.parseUri(...)`ë¥¼ í†µí•´ ì´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì•…ì˜ì ì¸ ì¸í…íŠ¸ ì£¼ì…ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### í•„ìˆ˜ ìš”ì 

* **ì¸í…íŠ¸ ì£¼ì…**ì€ ì›¹ì˜ ì˜¤í”ˆ ë¦¬ë””ë ‰ì…˜ ë¬¸ì œì™€ ìœ ì‚¬í•©ë‹ˆë‹¤.
* ìµìŠ¤í”Œë¡œì‡ì€ `Intent` ê°ì²´ë¥¼ ì¶”ê°€ë¡œ ì „ë‹¬í•˜ì—¬ ì•ˆì „í•˜ì§€ ì•Šì€ ì‘ì—…ì„ ì‹¤í–‰í•˜ë„ë¡ ë¦¬ë””ë ‰ì…˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ë¹„ê³µì‹ êµ¬ì„± ìš”ì†Œì™€ ì½˜í…ì¸  ì œê³µìë¥¼ ê³µê²©ìì—ê²Œ ë…¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* `WebView`ì˜ URLì„ `Intent`ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì€ ì˜ë„í•˜ì§€ ì•Šì€ ì‘ì—…ì„ ì´‰ì§„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì•ˆë“œë¡œì´ë“œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì£¼ì… ë° ê¸°íƒ€

ì•„ë§ˆë„ ì›¹ì—ì„œ ì´ëŸ¬í•œ ì¢…ë¥˜ì˜ ì·¨ì•½ì ì— ëŒ€í•´ ì•Œê³  ê³„ì‹¤ ê²ƒì…ë‹ˆë‹¤. ì•ˆë“œë¡œì´ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì´ëŸ¬í•œ ì·¨ì•½ì ì— íŠ¹íˆ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤:

* **SQL ì£¼ì…:** ë™ì  ì¿¼ë¦¬ ë˜ëŠ” ì½˜í…ì¸  ì œê³µìë¥¼ ë‹¤ë£° ë•Œ ë§¤ê°œë³€ìˆ˜í™”ëœ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ”ì§€ í™•ì¸í•˜ì‹­ì‹œì˜¤.
* **ìë°”ìŠ¤í¬ë¦½íŠ¸ ì£¼ì… (XSS):** ëª¨ë“  WebViewì— ëŒ€í•´ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë° í”ŒëŸ¬ê·¸ì¸ ì§€ì›ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì‹­ì‹œì˜¤ (ê¸°ë³¸ì ìœ¼ë¡œ ë¹„í™œì„±í™”ë¨). [ìì„¸í•œ ì •ë³´ëŠ” ì—¬ê¸°](webview-attacks.md#javascript-enabled)ë¥¼ ì°¸ì¡°í•˜ì‹­ì‹œì˜¤.
* **ë¡œì»¬ íŒŒì¼ í¬í•¨:** WebViewëŠ” íŒŒì¼ ì‹œìŠ¤í…œì— ëŒ€í•œ ì ‘ê·¼ì´ ë¹„í™œì„±í™”ë˜ì–´ì•¼ í•©ë‹ˆë‹¤ (ê¸°ë³¸ì ìœ¼ë¡œ í™œì„±í™”ë¨) - `(webview.getSettings().setAllowFileAccess(false);)`. [ìì„¸í•œ ì •ë³´ëŠ” ì—¬ê¸°](webview-attacks.md#javascript-enabled)ë¥¼ ì°¸ì¡°í•˜ì‹­ì‹œì˜¤.
* **ì˜êµ¬ ì¿ í‚¤**: ì—¬ëŸ¬ ê²½ìš°ì— ì•ˆë“œë¡œì´ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì„¸ì…˜ì„ ì¢…ë£Œí•  ë•Œ ì¿ í‚¤ê°€ ì·¨ì†Œë˜ì§€ ì•Šê±°ë‚˜ ë””ìŠ¤í¬ì— ì €ì¥ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* [**ì¿ í‚¤ì˜ ë³´ì•ˆ í”Œë˜ê·¸**](../../pentesting-web/hacking-with-cookies/#cookies-flags)

***

<figure><img src="../../.gitbook/assets/image (3).png" alt=""><figcaption></figcaption></figure>

ê²½í—˜ì´ í’ë¶€í•œ í•´ì»¤ ë° ë²„ê·¸ ë°”ìš´í‹° í—Œí„°ì™€ ì†Œí†µí•˜ê¸° ìœ„í•´ [**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy) ì„œë²„ì— ì°¸ì—¬í•˜ì„¸ìš”!

**í•´í‚¹ í†µì°°ë ¥**\
í•´í‚¹ì˜ ìŠ¤ë¦´ê³¼ ë„ì „ì— ëŒ€í•´ ê¹Šì´ ìˆëŠ” ì½˜í…ì¸ ì— ì°¸ì—¬í•˜ì„¸ìš”.

**ì‹¤ì‹œê°„ í•´í‚¹ ë‰´ìŠ¤**\
ì‹¤ì‹œê°„ ë‰´ìŠ¤ì™€ í†µì°°ë ¥ì„ í†µí•´ ë¹ ë¥´ê²Œ ë³€í™”í•˜ëŠ” í•´í‚¹ ì„¸ê³„ì˜ ìµœì‹  ì •ë³´ë¥¼ ìœ ì§€í•˜ì„¸ìš”.

**ìµœì‹  ë°œí‘œ**\
ìƒˆë¡œìš´ ë²„ê·¸ ë°”ìš´í‹° ì¶œì‹œ ë° ì¤‘ìš”í•œ í”Œë«í¼ ì—…ë°ì´íŠ¸ì— ëŒ€í•œ ì •ë³´ë¥¼ ìœ ì§€í•˜ì„¸ìš”.

ì˜¤ëŠ˜ [**Discord**](https://discord.com/invite/N3FrSbmwdy)ì— ì°¸ì—¬í•˜ì—¬ ìµœê³ ì˜ í•´ì»¤ë“¤ê³¼ í˜‘ì—…ì„ ì‹œì‘í•˜ì„¸ìš”!

## ìë™ ë¶„ì„

### [MobSF](https://github.com/MobSF/Mobile-Security-Framework-MobSF)

**ì •ì  ë¶„ì„**

![](<../../.gitbook/assets/image (866).png>)

ë©‹ì§„ ì›¹ ê¸°ë°˜ í”„ë¡ íŠ¸ì—”ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ **ì·¨ì•½ì  í‰ê°€**ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë™ì  ë¶„ì„ë„ ìˆ˜í–‰í•  ìˆ˜ ìˆì§€ë§Œ (í™˜ê²½ì„ ì¤€ë¹„í•´ì•¼ í•¨) í•„ìš”í•©ë‹ˆë‹¤.
```bash
docker pull opensecurity/mobile-security-framework-mobsf
docker run -it -p 8000:8000 opensecurity/mobile-security-framework-mobsf:latest
```
Notice that MobSF can analyse **Android**(apk)**, IOS**(ipa) **and Windows**(apx) applications (_Windows applications must be analyzed from a MobSF installed in a Windows host_).\
ë˜í•œ, **Android** ë˜ëŠ” **IOS** ì•±ì˜ ì†ŒìŠ¤ ì½”ë“œë¡œ **ZIP** íŒŒì¼ì„ ìƒì„±í•˜ë©´ (ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë£¨íŠ¸ í´ë”ë¡œ ì´ë™í•˜ì—¬ ëª¨ë“  ê²ƒì„ ì„ íƒí•˜ê³  ZIP íŒŒì¼ì„ ìƒì„±), ê·¸ê²ƒë„ ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

MobSF also allows you to **diff/Compare** analysis and to integrate **VirusTotal** (you will need to set your API key in _MobSF/settings.py_ and enable it: `VT_ENABLED = TRUE` `VT_API_KEY = <Your API key>` `VT_UPLOAD = TRUE`). You can also set `VT_UPLOAD` to `False`, then the **hash** will be **upload** instead of the file.

### Assisted Dynamic analysis with MobSF

**MobSF** can also be very helpful for **dynamic analysis** in **Android**, but in that case you will need to install MobSF and **genymotion** in your host (a VM or Docker won't work). _Note: You need to **start first a VM in genymotion** and **then MobSF.**_\
**MobSF ë™ì  ë¶„ì„ê¸°**ëŠ” ë‹¤ìŒì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

* **ì• í”Œë¦¬ì¼€ì´ì…˜ ë°ì´í„° ë¤í”„** (URL, ë¡œê·¸, í´ë¦½ë³´ë“œ, ì‚¬ìš©ìê°€ ë§Œë“  ìŠ¤í¬ë¦°ìƒ·, "**Exported Activity Tester**"ê°€ ë§Œë“  ìŠ¤í¬ë¦°ìƒ·, ì´ë©”ì¼, SQLite ë°ì´í„°ë² ì´ìŠ¤, XML íŒŒì¼ ë° ê¸°íƒ€ ìƒì„±ëœ íŒŒì¼). ì´ ëª¨ë“  ê²ƒì€ ìë™ìœ¼ë¡œ ìˆ˜í–‰ë˜ë©°, ìŠ¤í¬ë¦°ìƒ·ì€ ì›í•  ë•Œ ëˆŒëŸ¬ì•¼ í•˜ê±°ë‚˜ "**Exported Activity Tester**"ë¥¼ ëˆŒëŸ¬ì•¼ ëª¨ë“  ë‚´ë³´ë‚¸ í™œë™ì˜ ìŠ¤í¬ë¦°ìƒ·ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **HTTPS íŠ¸ë˜í”½ ìº¡ì²˜**
* **Frida**ë¥¼ ì‚¬ìš©í•˜ì—¬ **ëŸ°íƒ€ì„** **ì •ë³´**ë¥¼ ì–»ê¸°

From android **versions > 5**, it will **automatically start Frida** and will set global **proxy** settings to **capture** traffic. It will only capture traffic from the tested application.

**Frida**

By default, it will also use some Frida Scripts to **bypass SSL pinning**, **root detection** and **debugger detection** and to **monitor interesting APIs**.\
MobSF can also **invoke exported activities**, grab **screenshots** of them and **save** them for the report.

To **start** the dynamic testing press the green bottom: "**Start Instrumentation**". Press the "**Frida Live Logs**" to see the logs generated by the Frida scripts and "**Live API Monitor**" to see all the invocation to hooked methods, arguments passed and returned values (this will appear after pressing "Start Instrumentation").\
MobSF also allows you to load your own **Frida scripts** (to send the results of your Friday scripts to MobSF use the function `send()`). It also has **several pre-written scripts** you can load (you can add more in `MobSF/DynamicAnalyzer/tools/frida_scripts/others/`), just **select them**, press "**Load**" and press "**Start Instrumentation**" (you will be able to see the logs of that scripts inside "**Frida Live Logs**").

![](<../../.gitbook/assets/image (419).png>)

Moreover, you have some Auxiliary Frida functionalities:

* **ë¡œë“œëœ í´ë˜ìŠ¤ ë‚˜ì—´**: ëª¨ë“  ë¡œë“œëœ í´ë˜ìŠ¤ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
* **ë¬¸ìì—´ ìº¡ì²˜**: ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ë™ì•ˆ ìº¡ì²˜ëœ ëª¨ë“  ë¬¸ìì—´ì„ ì¶œë ¥í•©ë‹ˆë‹¤ (ë§¤ìš° ì‹œë„ëŸ¬ì›€).
* **ë¬¸ìì—´ ë¹„êµ ìº¡ì²˜**: ë§¤ìš° ìœ ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **ë¹„êµë˜ëŠ” 2ê°œì˜ ë¬¸ìì—´**ê³¼ ê²°ê³¼ê°€ Trueì¸ì§€ Falseì¸ì§€ ë³´ì—¬ì¤ë‹ˆë‹¤.
* **í´ë˜ìŠ¤ ë©”ì„œë“œ ë‚˜ì—´**: í´ë˜ìŠ¤ ì´ë¦„(ì˜ˆ: "java.io.File")ì„ ì…ë ¥í•˜ë©´ í´ë˜ìŠ¤ì˜ ëª¨ë“  ë©”ì„œë“œë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
* **í´ë˜ìŠ¤ íŒ¨í„´ ê²€ìƒ‰**: íŒ¨í„´ìœ¼ë¡œ í´ë˜ìŠ¤ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.
* **í´ë˜ìŠ¤ ë©”ì„œë“œ ì¶”ì **: **ì „ì²´ í´ë˜ìŠ¤**ë¥¼ **ì¶”ì **í•©ë‹ˆë‹¤ (í´ë˜ìŠ¤ì˜ ëª¨ë“  ë©”ì„œë“œì˜ ì…ë ¥ ë° ì¶œë ¥ì„ ë´…ë‹ˆë‹¤). ê¸°ë³¸ì ìœ¼ë¡œ MobSFëŠ” ì—¬ëŸ¬ í¥ë¯¸ë¡œìš´ Android API ë©”ì„œë“œë¥¼ ì¶”ì í•©ë‹ˆë‹¤.

Once you have selected the auxiliary module you want to use you need to press "**Start Intrumentation**" and you will see all the outputs in "**Frida Live Logs**".

**Shell**

Mobsf also brings you a shell with some **adb** commands, **MobSF commands**, and common **shell** **commands** at the bottom of the dynamic analysis page. Some interesting commands:
```bash
help
shell ls
activities
exported_activities
services
receivers
```
**HTTP ë„êµ¬**

http íŠ¸ë˜í”½ì´ ìº¡ì²˜ë˜ë©´ "**HTTP(S) Traffic**" í•˜ë‹¨ì—ì„œ ìº¡ì²˜ëœ íŠ¸ë˜í”½ì˜ ë³´ê¸° ë¶ˆëŸ‰í•œ í˜•íƒœë¥¼ ë³¼ ìˆ˜ ìˆìœ¼ë©°, "**Start HTTPTools**" ë…¹ìƒ‰ ë²„íŠ¼ì—ì„œ ë” ë‚˜ì€ ë³´ê¸°ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‘ ë²ˆì§¸ ì˜µì…˜ì—ì„œ **ìº¡ì²˜ëœ ìš”ì²­**ì„ Burp ë˜ëŠ” Owasp ZAPê³¼ ê°™ì€ **í”„ë¡ì‹œ**ë¡œ **ì „ì†¡**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
ì´ë¥¼ ìœ„í•´, _Burp ì¼œê¸° -->_ _Intercept ë„ê¸° --> MobSB HTTPToolsì—ì„œ ìš”ì²­ ì„ íƒ_ --> "**Send to Fuzzer**" ë²„íŠ¼ì„ ëˆ„ë¥´ê¸° --> _í”„ë¡ì‹œ ì£¼ì†Œ ì„ íƒ_ ([http://127.0.0.1:8080\\](http://127.0.0.1:8080)).

MobSFë¡œ ë™ì  ë¶„ì„ì„ ë§ˆì¹œ í›„ "**Start Web API Fuzzer**"ë¥¼ ëˆŒëŸ¬ **http ìš”ì²­ì„ í¼ì§•**í•˜ê³  ì·¨ì•½ì ì„ ì°¾ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

{% hint style="info" %}
MobSFë¡œ ë™ì  ë¶„ì„ì„ ìˆ˜í–‰í•œ í›„ í”„ë¡ì‹œ ì„¤ì •ì´ ì˜ëª» êµ¬ì„±ë  ìˆ˜ ìˆìœ¼ë©° GUIì—ì„œ ì´ë¥¼ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í”„ë¡ì‹œ ì„¤ì •ì„ ìˆ˜ì •í•˜ë ¤ë©´:
```
adb shell settings put global http_proxy :0
```
{% endhint %}

### Inspeckageë¥¼ ì´ìš©í•œ ë³´ì¡° ë™ì  ë¶„ì„

ë„êµ¬ëŠ” [**Inspeckage**](https://github.com/ac-pm/Inspeckage)ì—ì„œ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
ì´ ë„êµ¬ëŠ” **Hooks**ë¥¼ ì‚¬ìš©í•˜ì—¬ **ë™ì  ë¶„ì„**ì„ ìˆ˜í–‰í•˜ëŠ” ë™ì•ˆ **ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆëŠ”ì§€** ì•Œ ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.

### [Yaazhini](https://www.vegabird.com/yaazhini/)

ì´ê²ƒì€ **GUIë¥¼ ì´ìš©í•œ ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ í›Œë¥­í•œ ë„êµ¬**ì…ë‹ˆë‹¤.

![](<../../.gitbook/assets/image (741).png>)

### [Qark](https://github.com/linkedin/qark)

ì´ ë„êµ¬ëŠ” **ì†ŒìŠ¤ ì½”ë“œ** ë˜ëŠ” **íŒ¨í‚¤ì§€ëœ APK**ì—ì„œ ì—¬ëŸ¬ **ë³´ì•ˆ ê´€ë ¨ Android ì• í”Œë¦¬ì¼€ì´ì…˜ ì·¨ì•½ì **ì„ ì°¾ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ë„êµ¬ëŠ” ë˜í•œ ë°œê²¬ëœ ì·¨ì•½ì (ë…¸ì¶œëœ í™œë™, ì¸í…íŠ¸, íƒ­ì¬í‚¹ ë“±)ì„ ì•…ìš©í•˜ê¸° ìœ„í•œ **"Proof-of-Concept" ë°°í¬ ê°€ëŠ¥í•œ APK** ë° **ADB ëª…ë ¹**ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Drozerì™€ ë§ˆì°¬ê°€ì§€ë¡œ í…ŒìŠ¤íŠ¸ ì¥ì¹˜ë¥¼ ë£¨íŒ…í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.
```bash
pip3 install --user qark  # --user is only needed if not using a virtualenv
qark --apk path/to/my.apk
qark --java path/to/parent/java/folder
qark --java path/to/specific/java/file.java
```
### [**ReverseAPK**](https://github.com/1N3/ReverseAPK.git)

* ì‰½ê²Œ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ ëª¨ë“  ì¶”ì¶œëœ íŒŒì¼ì„ í‘œì‹œí•©ë‹ˆë‹¤.
* APK íŒŒì¼ì„ ìë™ìœ¼ë¡œ Java ë° Smali í˜•ì‹ìœ¼ë¡œ ë””ì»´íŒŒì¼í•©ë‹ˆë‹¤.
* ì¼ë°˜ì ì¸ ì·¨ì•½ì  ë° ë™ì‘ì„ ìœ„í•´ AndroidManifest.xmlì„ ë¶„ì„í•©ë‹ˆë‹¤.
* ì¼ë°˜ì ì¸ ì·¨ì•½ì  ë° ë™ì‘ì— ëŒ€í•œ ì •ì  ì†ŒìŠ¤ ì½”ë“œ ë¶„ì„
* ì¥ì¹˜ ì •ë³´
* ë° ê¸°íƒ€
```bash
reverse-apk relative/path/to/APP.apk
```
### [SUPER Android Analyzer](https://github.com/SUPERAndroidAnalyzer/super)

SUPERëŠ” Windows, MacOS X ë° Linuxì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëª…ë ¹ì¤„ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ, _.apk_ íŒŒì¼ì„ ë¶„ì„í•˜ì—¬ ì·¨ì•½ì ì„ ì°¾ìŠµë‹ˆë‹¤. ì´ëŠ” APKë¥¼ ì••ì¶• í•´ì œí•˜ê³  ì¼ë ¨ì˜ ê·œì¹™ì„ ì ìš©í•˜ì—¬ ì´ëŸ¬í•œ ì·¨ì•½ì ì„ ê°ì§€í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìˆ˜í–‰ë©ë‹ˆë‹¤.

ëª¨ë“  ê·œì¹™ì€ `rules.json` íŒŒì¼ì— ì¤‘ì‹¬ì„ ë‘ê³  ìˆìœ¼ë©°, ê° íšŒì‚¬ë‚˜ í…ŒìŠ¤í„°ëŠ” ìì‹ ì´ í•„ìš”í•œ ê²ƒì„ ë¶„ì„í•˜ê¸° ìœ„í•´ ê³ ìœ í•œ ê·œì¹™ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìµœì‹  ë°”ì´ë„ˆë¦¬ëŠ” [ë‹¤ìš´ë¡œë“œ í˜ì´ì§€](https://superanalyzer.rocks/download.html)ì—ì„œ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”.
```
super-analyzer {apk_file}
```
### [StaCoAn](https://github.com/vincentcox/StaCoAn)

![](<../../.gitbook/assets/image (297).png>)

StaCoAnì€ ê°œë°œì, ë²„ê·¸ ë°”ìš´í‹° í—Œí„° ë° ìœ¤ë¦¬ì  í•´ì»¤ê°€ ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ [ì •ì  ì½”ë“œ ë¶„ì„](https://en.wikipedia.org/wiki/Static_program_analysis)ì„ ìˆ˜í–‰í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ëŠ” **í¬ë¡œìŠ¤ í”Œë«í¼** ë„êµ¬ì…ë‹ˆë‹¤.

ê°œë…ì€ ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ íŒŒì¼(.apk ë˜ëŠ” .ipa íŒŒì¼)ì„ StaCoAn ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë“œë˜ê·¸ ì•¤ ë“œë¡­í•˜ë©´ ì‹œê°ì ì´ê³  íœ´ëŒ€ ê°€ëŠ¥í•œ ë³´ê³ ì„œë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì„¤ì •ê³¼ ë‹¨ì–´ ëª©ë¡ì„ ì¡°ì •í•˜ì—¬ ë§ì¶¤í˜• ê²½í—˜ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ìš´ë¡œë“œ [ìµœì‹  ë¦´ë¦¬ìŠ¤](https://github.com/vincentcox/StaCoAn/releases):
```
./stacoan
```
### [AndroBugs](https://github.com/AndroBugs/AndroBugs_Framework)

AndroBugs FrameworkëŠ” ê°œë°œì ë˜ëŠ” í•´ì»¤ê°€ Android ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì ì¬ì ì¸ ë³´ì•ˆ ì·¨ì•½ì ì„ ì°¾ëŠ” ë° ë„ì›€ì„ ì£¼ëŠ” Android ì·¨ì•½ì  ë¶„ì„ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.\
[Windows ë¦´ë¦¬ìŠ¤](https://github.com/AndroBugs/AndroBugs_Framework/releases)
```
python androbugs.py -f [APK file]
androbugs.exe -f [APK file]
```
### [Androwarn](https://github.com/maaaaz/androwarn)

**Androwarn**ëŠ” Android ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì•…ì˜ì ì¸ í–‰ë™ì„ ê°ì§€í•˜ê³  ì‚¬ìš©ìì—ê²Œ ê²½ê³ í•˜ëŠ” ê²ƒì„ ì£¼ìš” ëª©í‘œë¡œ í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.

ê°ì§€ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ Dalvik ë°”ì´íŠ¸ì½”ë“œë¥¼ **ì •ì  ë¶„ì„**í•˜ì—¬ ìˆ˜í–‰ë˜ë©°, ì´ëŠ” **Smali**ë¡œ í‘œí˜„ë©ë‹ˆë‹¤. [`androguard`](https://github.com/androguard/androguard) ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

ì´ ë„êµ¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ **"ë‚˜ìœ" ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì¼ë°˜ì ì¸ í–‰ë™**ì„ ì°¾ìŠµë‹ˆë‹¤: ì „í™” ì‹ë³„ì ìœ ì¶œ, ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤ íë¦„ ê°€ë¡œì±„ê¸°, PIM ë°ì´í„° ìˆ˜ì •, ì„ì˜ ì½”ë“œ ì‹¤í–‰...
```
python androwarn.py -i my_application_to_be_analyzed.apk -r html -v 3
```
### [MARA Framework](https://github.com/xtiankisutsa/MARA_Framework)

![](<../../.gitbook/assets/image (595).png>)

**MARA**ëŠ” **ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì—­ê³µí•™ ë° ë¶„ì„ í”„ë ˆì„ì›Œí¬**ì…ë‹ˆë‹¤. ì´ëŠ” OWASP ëª¨ë°”ì¼ ë³´ì•ˆ ìœ„í˜‘ì— ëŒ€í•´ ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ê¸° ìœ„í•´ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì—­ê³µí•™ ë° ë¶„ì„ ë„êµ¬ë¥¼ í†µí•©í•œ ë„êµ¬ì…ë‹ˆë‹¤. ì´ ì‘ì—…ì„ ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œìì™€ ë³´ì•ˆ ì „ë¬¸ê°€ì—ê²Œ ë” ì‰½ê³  ì¹œìˆ™í•˜ê²Œ ë§Œë“œëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤.

ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤:

* ë‹¤ì–‘í•œ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ Java ë° Smali ì½”ë“œë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.
* ë‹¤ìŒì„ ì‚¬ìš©í•˜ì—¬ APKë¥¼ ë¶„ì„í•©ë‹ˆë‹¤: [smalisca](https://github.com/dorneanu/smalisca), [ClassyShark](https://github.com/google/android-classyshark), [androbugs](https://github.com/AndroBugs/AndroBugs_Framework), [androwarn](https://github.com/maaaaz/androwarn), [APKiD](https://github.com/rednaga/APKiD)
* ì •ê·œ í‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ì—¬ APKì—ì„œ ê°œì¸ ì •ë³´ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.
* ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.
* ë‹¤ìŒì„ ì‚¬ìš©í•˜ì—¬ ë°œê²¬ëœ ë„ë©”ì¸ì„ ë¶„ì„í•©ë‹ˆë‹¤: [pyssltest](https://github.com/moheshmohan/pyssltest), [testssl](https://github.com/drwetter/testssl.sh) ë° [whatweb](https://github.com/urbanadventurer/WhatWeb)
* [apk-deguard.com](http://www.apk-deguard.com)ì„ í†µí•´ APKë¥¼ ë””ì˜¤ë¸ŒìŠ¤íë ˆì´ì…˜í•©ë‹ˆë‹¤.

### Koodous

ì•…ì„±ì½”ë“œë¥¼ íƒì§€í•˜ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤: [https://koodous.com/](https://koodous.com)

## ì½”ë“œ ë‚œë…í™”/ë””ì˜¤ë¸ŒìŠ¤íë ˆì´ì…˜

ì‚¬ìš©í•˜ëŠ” ì„œë¹„ìŠ¤ì™€ êµ¬ì„±ì— ë”°ë¼ ì½”ë“œê°€ ë‚œë…í™”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹„ë°€ì€ ë‚œë…í™”ë  ìˆ˜ë„ ìˆê³  ì•„ë‹ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

### [ProGuard](https://en.wikipedia.org/wiki/ProGuard_\(software\))

[ìœ„í‚¤ë°±ê³¼](https://en.wikipedia.org/wiki/ProGuard_\(software\))ì—ì„œ: **ProGuard**ëŠ” Java ì½”ë“œë¥¼ ì¶•ì†Œ, ìµœì í™” ë° ë‚œë…í™”í•˜ëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ ëª…ë ¹ì¤„ ë„êµ¬ì…ë‹ˆë‹¤. ë°”ì´íŠ¸ì½”ë“œë¥¼ ìµœì í™”í•˜ê³  ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ëª…ë ¹ì–´ë¥¼ ê°ì§€ ë° ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ProGuardëŠ” ë¬´ë£Œ ì†Œí”„íŠ¸ì›¨ì–´ì´ë©° GNU ì¼ë°˜ ê³µì¤‘ ë¼ì´ì„ ìŠ¤ ë²„ì „ 2ì— ë”°ë¼ ë°°í¬ë©ë‹ˆë‹¤.

ProGuardëŠ” Android SDKì˜ ì¼ë¶€ë¡œ ë°°í¬ë˜ë©° ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¦´ë¦¬ìŠ¤ ëª¨ë“œë¡œ ë¹Œë“œí•  ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤.

### [DexGuard](https://www.guardsquare.com/dexguard)

[https://blog.lexfo.fr/dexguard.html](https://blog.lexfo.fr/dexguard.html)ì—ì„œ APKë¥¼ ë””ì˜¤ë¸ŒìŠ¤íë ˆì´ì…˜í•˜ëŠ” ë‹¨ê³„ë³„ ê°€ì´ë“œë¥¼ ì°¾ìœ¼ì„¸ìš”.

(ê·¸ ê°€ì´ë“œì—ì„œ) ë§ˆì§€ë§‰ìœ¼ë¡œ í™•ì¸í–ˆì„ ë•Œ, Dexguardì˜ ì‘ë™ ëª¨ë“œëŠ” ë‹¤ìŒê³¼ ê°™ì•˜ìŠµë‹ˆë‹¤:

* ë¦¬ì†ŒìŠ¤ë¥¼ InputStreamìœ¼ë¡œ ë¡œë“œí•©ë‹ˆë‹¤;
* ê²°ê³¼ë¥¼ FilterInputStreamì—ì„œ ìƒì†ë°›ì€ í´ë˜ìŠ¤ì— ì œê³µí•˜ì—¬ ë³µí˜¸í™”í•©ë‹ˆë‹¤;
* ë¦¬ë²„ì„œì˜ ì‹œê°„ì„ ë‚­ë¹„í•˜ê¸° ìœ„í•´ ì“¸ëª¨ì—†ëŠ” ë‚œë…í™”ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤;
* ZipInputStreamì— ë³µí˜¸í™”ëœ ê²°ê³¼ë¥¼ ì œê³µí•˜ì—¬ DEX íŒŒì¼ì„ ì–»ìŠµë‹ˆë‹¤;
* ë§ˆì§€ë§‰ìœ¼ë¡œ `loadDex` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°ê³¼ DEXë¥¼ ë¦¬ì†ŒìŠ¤ë¡œ ë¡œë“œí•©ë‹ˆë‹¤.

### [DeGuard](http://apk-deguard.com)

**DeGuardëŠ” Android ë‚œë…í™” ë„êµ¬ê°€ ìˆ˜í–‰í•œ ë‚œë…í™” í”„ë¡œì„¸ìŠ¤ë¥¼ ì—­ì „ì‹œí‚µë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì½”ë“œ ê²€ì‚¬ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ˆì¸¡ì„ í¬í•¨í•œ ìˆ˜ë§ì€ ë³´ì•ˆ ë¶„ì„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.**

ë‚œë…í™”ëœ APKë¥¼ ê·¸ë“¤ì˜ í”Œë«í¼ì— ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### [Simplify](https://github.com/CalebFenton/simplify)

**ì¼ë°˜ì ì¸ Android ë””ì˜¤ë¸ŒìŠ¤íë ˆì´í„°ì…ë‹ˆë‹¤.** SimplifyëŠ” **ì•±ì„ ê°€ìƒ ì‹¤í–‰**í•˜ì—¬ ê·¸ ë™ì‘ì„ ì´í•´í•˜ê³ , **ì½”ë“œë¥¼ ìµœì í™”**í•˜ì—¬ ë™ì¼í•˜ê²Œ ë™ì‘í•˜ì§€ë§Œ ì‚¬ëŒì´ ì´í•´í•˜ê¸° ì‰½ê²Œ ë§Œë“­ë‹ˆë‹¤. ê° ìµœì í™” ìœ í˜•ì€ ê°„ë‹¨í•˜ê³  ì¼ë°˜ì ì´ë¯€ë¡œ ì‚¬ìš©ëœ íŠ¹ì • ë‚œë…í™” ìœ í˜•ì€ ì¤‘ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

### [APKiD](https://github.com/rednaga/APKiD)

APKiDëŠ” **APKê°€ ì–´ë–»ê²Œ ë§Œë“¤ì–´ì¡ŒëŠ”ì§€**ì— ëŒ€í•œ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ë§ì€ **ì»´íŒŒì¼ëŸ¬**, **íŒ¨ì»¤**, **ë‚œë…í™” ë„êµ¬** ë° ê¸°íƒ€ ì´ìƒí•œ ê²ƒë“¤ì„ ì‹ë³„í•©ë‹ˆë‹¤. Androidìš© [_PEiD_](https://www.aldeid.com/wiki/PEiD)ì…ë‹ˆë‹¤.

### Manual

[ì‚¬ìš©ì ì •ì˜ ë‚œë…í™”ë¥¼ ì—­ì „ì‹œí‚¤ëŠ” ë°©ë²•ì— ëŒ€í•œ ëª‡ ê°€ì§€ ìš”ë ¹ì„ ë°°ìš°ë ¤ë©´ ì´ íŠœí† ë¦¬ì–¼ì„ ì½ìœ¼ì„¸ìš”](manual-deobfuscation.md)

## Labs

### [Androl4b](https://github.com/sh4hin/Androl4b)

AndroL4bëŠ” ìš°ë¶„íˆ¬-ë©”ì´íŠ¸ ê¸°ë°˜ì˜ Android ë³´ì•ˆ ê°€ìƒ ë¨¸ì‹ ìœ¼ë¡œ, ì—­ê³µí•™ ë° ì•…ì„±ì½”ë“œ ë¶„ì„ì„ ìœ„í•œ ë‹¤ì–‘í•œ ë³´ì•ˆ ì „ë¬¸ê°€ì™€ ì—°êµ¬ìë“¤ì˜ ìµœì‹  í”„ë ˆì„ì›Œí¬, íŠœí† ë¦¬ì–¼ ë° ì‹¤í—˜ì‹¤ì„ í¬í•¨í•©ë‹ˆë‹¤.

## References

* [https://owasp.org/www-project-mobile-app-security/](https://owasp.org/www-project-mobile-app-security/)
* [https://appsecwiki.com/#/](https://appsecwiki.com/#/) í›Œë¥­í•œ ë¦¬ì†ŒìŠ¤ ëª©ë¡ì…ë‹ˆë‹¤.
* [https://maddiestone.github.io/AndroidAppRE/](https://maddiestone.github.io/AndroidAppRE/) Android ë¹ ë¥¸ ê³¼ì •
* [https://manifestsecurity.com/android-application-security/](https://manifestsecurity.com/android-application-security/)
* [https://github.com/Ralireza/Android-Security-Teryaagh](https://github.com/Ralireza/Android-Security-Teryaagh)
* [https://www.youtube.com/watch?v=PMKnPaGWxtg\&feature=youtu.be\&ab\_channel=B3nacSec](https://www.youtube.com/watch?v=PMKnPaGWxtg\&feature=youtu.be\&ab_channel=B3nacSec)

## Yet to try

* [https://www.vegabird.com/yaazhini/](https://www.vegabird.com/yaazhini/)
* [https://github.com/abhi-r3v0/Adhrit](https://github.com/abhi-r3v0/Adhrit)

<figure><img src="../../.gitbook/assets/image (3).png" alt=""><figcaption></figcaption></figure>

[**HackenProof Discord**](https://discord.com/invite/N3FrSbmwdy) ì„œë²„ì— ì°¸ì—¬í•˜ì—¬ ê²½í—˜ì´ í’ë¶€í•œ í•´ì»¤ ë° ë²„ê·¸ ë°”ìš´í‹° í—Œí„°ì™€ ì†Œí†µí•˜ì„¸ìš”!

**Hacking Insights**\
í•´í‚¹ì˜ ìŠ¤ë¦´ê³¼ ë„ì „ì— ëŒ€í•œ ë‚´ìš©ì„ ë‹¤ë£¨ëŠ” ì½˜í…ì¸ ì— ì°¸ì—¬í•˜ì„¸ìš”.

**Real-Time Hack News**\
ì‹¤ì‹œê°„ ë‰´ìŠ¤ì™€ í†µì°°ë ¥ì„ í†µí•´ ë¹ ë¥´ê²Œ ë³€í™”í•˜ëŠ” í•´í‚¹ ì„¸ê³„ë¥¼ ìµœì‹  ìƒíƒœë¡œ ìœ ì§€í•˜ì„¸ìš”.

**Latest Announcements**\
ìƒˆë¡œìš´ ë²„ê·¸ ë°”ìš´í‹° ì¶œì‹œ ë° ì¤‘ìš”í•œ í”Œë«í¼ ì—…ë°ì´íŠ¸ì— ëŒ€í•œ ì •ë³´ë¥¼ ìœ ì§€í•˜ì„¸ìš”.

[**Discord**](https://discord.com/invite/N3FrSbmwdy)ì— ì°¸ì—¬í•˜ì—¬ ì˜¤ëŠ˜ë‚  ìµœê³ ì˜ í•´ì»¤ë“¤ê³¼ í˜‘ë ¥í•˜ì„¸ìš”!

{% hint style="success" %}
AWS í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°:<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">\
GCP í•´í‚¹ ë°°ìš°ê¸° ë° ì—°ìŠµí•˜ê¸°: <img src="../../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks ì§€ì›í•˜ê¸°</summary>

* [**êµ¬ë… ê³„íš**](https://github.com/sponsors/carlospolop)ì„ í™•ì¸í•˜ì„¸ìš”!
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ì°¸ì—¬í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **HackTricks** ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ë¦¬í¬ì§€í† ë¦¬ì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ ìš”ë ¹ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
{% endhint %}
