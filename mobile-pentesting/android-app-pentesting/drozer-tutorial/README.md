# Drozer Tutorial

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**Bug bounty tip**: **‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§ï‡§∞‡•á‡§Ç** **Intigriti** ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§è‡§ï ‡§™‡•ç‡§∞‡•Ä‡§Æ‡§ø‡§Ø‡§Æ **bug bounty ‡§™‡•ç‡§≤‡•á‡§ü‡§´‡§æ‡§∞‡•ç‡§Æ ‡§ú‡•ã ‡§π‡•à‡§ï‡§∞‡•ç‡§∏ ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ, ‡§π‡•à‡§ï‡§∞‡•ç‡§∏ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à**! ‡§Ü‡§ú ‡§π‡•Ä ‡§π‡§Æ‡§æ‡§∞‡•á ‡§∏‡§æ‡§• ‡§ú‡•Å‡§°‡§º‡•á‡§Ç [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) ‡§™‡§∞, ‡§î‡§∞ **$100,000** ‡§§‡§ï ‡§ï‡•á ‡§¨‡§æ‡§â‡§Ç‡§ü‡•Ä ‡§ï‡§Æ‡§æ‡§®‡§æ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç!

{% embed url="https://go.intigriti.com/hacktricks" %}

## APKs to test

* [Sieve](https://github.com/mwrlabs/drozer/releases/download/2.3.4/sieve.apk) (from mrwlabs)
* [DIVA](https://payatu.com/wp-content/uploads/2016/01/diva-beta.tar.gz)

**‡§á‡§∏ ‡§ü‡•ç‡§Ø‡•Ç‡§ü‡•ã‡§∞‡§ø‡§Ø‡§≤ ‡§ï‡•á ‡§ï‡•Å‡§õ ‡§≠‡§æ‡§ó** [**Drozer documentation pdf**](https://labs.withsecure.com/content/dam/labs/docs/mwri-drozer-user-guide-2015-03-23.pdf)** ‡§∏‡•á ‡§®‡§ø‡§ï‡§æ‡§≤‡•á ‡§ó‡§è ‡§π‡•à‡§Ç‡•§**

## Installation

Drozer Client ‡§ï‡•ã ‡§Ö‡§™‡§®‡•á ‡§π‡•ã‡§∏‡•ç‡§ü ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§á‡§∏‡•á [latest releases](https://github.com/mwrlabs/drozer/releases) ‡§∏‡•á ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç‡•§
```bash
pip install drozer-2.4.4-py2-none-any.whl
pip install twisted
pip install service_identity
```
Download ‡§î‡§∞ install ‡§ï‡§∞‡•á‡§Ç drozer APK ‡§ï‡•ã [latest releases](https://github.com/mwrlabs/drozer/releases) ‡§∏‡•á‡•§ ‡§á‡§∏ ‡§∏‡§Æ‡§Ø ‡§Ø‡§π [‡§Ø‡§π](https://github.com/mwrlabs/drozer/releases/download/2.3.4/drozer-agent-2.3.4.apk) ‡§π‡•à‡•§
```bash
adb install drozer.apk
```
### ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡§æ

‡§è‡§ú‡•á‡§Ç‡§ü ‡§™‡•ã‡§∞‡•ç‡§ü 31415 ‡§™‡§∞ ‡§ö‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à, ‡§π‡§Æ‡•á‡§Ç [‡§™‡•ã‡§∞‡•ç‡§ü ‡§´‡•â‡§∞‡§µ‡§∞‡•ç‡§°](https://en.wikipedia.org/wiki/Port\_forwarding) ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ ‡§§‡§æ‡§ï‡§ø Drozer ‡§ï‡•ç‡§≤‡§æ‡§á‡§Ç‡§ü ‡§î‡§∞ ‡§è‡§ú‡•á‡§Ç‡§ü ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§∏‡§Ç‡§ö‡§æ‡§∞ ‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡•á, ‡§á‡§∏‡•á ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§Æ‡§æ‡§Ç‡§° ‡§Ø‡§π‡§æ‡§Å ‡§π‡•à:
```bash
adb forward tcp:31415 tcp:31415
```
‡§Ö‡§Ç‡§§ ‡§Æ‡•á‡§Ç, **‡§≤‡•â‡§®‡•ç‡§ö** ‡§ï‡§∞‡•á‡§Ç **‡§è‡§™‡•ç‡§≤‡§ø‡§ï‡•á‡§∂‡§®** ‡§î‡§∞ ‡§®‡•Ä‡§ö‡•á "**ON**" ‡§¶‡§¨‡§æ‡§è‡§Ç

![](<../../../.gitbook/assets/image (459).png>)

‡§î‡§∞ ‡§á‡§∏‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç:
```bash
drozer console connect
```
## Interesting Commands

| **Commands**    | **Description**                                                                                                                                        |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Help MODULE** | ‡§ö‡§Ø‡§®‡§ø‡§§ ‡§Æ‡•â‡§°‡•ç‡§Ø‡•Ç‡§≤ ‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§¶‡§ø‡§ñ‡§æ‡§§‡§æ ‡§π‡•à                                                                                                                      |
| **list**        | ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§∏‡§§‡•ç‡§∞ ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§ø‡§è ‡§ú‡§æ ‡§∏‡§ï‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§∏‡§≠‡•Ä drozer ‡§Æ‡•â‡§°‡•ç‡§Ø‡•Ç‡§≤ ‡§ï‡•Ä ‡§∏‡•Ç‡§ö‡•Ä ‡§¶‡§ø‡§ñ‡§æ‡§§‡§æ ‡§π‡•à‡•§ ‡§Ø‡§π ‡§â‡§® ‡§Æ‡•â‡§°‡•ç‡§Ø‡•Ç‡§≤ ‡§ï‡•ã ‡§õ‡•Å‡§™‡§æ‡§§‡§æ ‡§π‡•à ‡§ú‡§ø‡§®‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§™‡§ï‡•á ‡§™‡§æ‡§∏ ‡§â‡§ö‡§ø‡§§ ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø‡§Ø‡§æ‡§Å ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡§Ç‡•§ |
| **shell**       | ‡§è‡§ú‡•á‡§Ç‡§ü ‡§ï‡•á ‡§∏‡§Ç‡§¶‡§∞‡•ç‡§≠ ‡§Æ‡•á‡§Ç ‡§°‡§ø‡§µ‡§æ‡§á‡§∏ ‡§™‡§∞ ‡§è‡§ï ‡§á‡§Ç‡§ü‡§∞‡•à‡§ï‡•ç‡§ü‡§ø‡§µ ‡§≤‡§ø‡§®‡§ï‡•ç‡§∏ ‡§∂‡•á‡§≤ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç‡•§                                                                           |
| **clean**       | ‡§è‡§Ç‡§°‡•ç‡§∞‡•â‡§á‡§° ‡§°‡§ø‡§µ‡§æ‡§á‡§∏ ‡§™‡§∞ drozer ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§ ‡§Ö‡§∏‡•ç‡§•‡§æ‡§Ø‡•Ä ‡§´‡§º‡§æ‡§á‡§≤‡•á‡§Ç ‡§π‡§ü‡§æ ‡§¶‡•á‡§Ç‡•§                                                                                         |
| **load**        | drozer ‡§ï‡§Æ‡§æ‡§Ç‡§° ‡§µ‡§æ‡§≤‡•á ‡§´‡§º‡§æ‡§á‡§≤ ‡§ï‡•ã ‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§â‡§®‡•ç‡§π‡•á‡§Ç ‡§Ö‡§®‡•Å‡§ï‡•ç‡§∞‡§Æ ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§                                                                                   |
| **module**      | ‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§∏‡•á ‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ drozer ‡§Æ‡•â‡§°‡•ç‡§Ø‡•Ç‡§≤ ‡§ñ‡•ã‡§ú‡•á‡§Ç ‡§î‡§∞ ‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§                                                                                          |
| **unset**       | ‡§è‡§ï ‡§®‡§æ‡§Æ‡§ø‡§§ ‡§ö‡§∞ ‡§ï‡•ã ‡§π‡§ü‡§æ ‡§¶‡•á‡§Ç ‡§ú‡§ø‡§∏‡•á drozer ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§≤‡§ø‡§®‡§ï‡•ç‡§∏ ‡§∂‡•á‡§≤ ‡§Æ‡•á‡§Ç ‡§™‡§æ‡§∏ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§ú‡§ø‡§∏‡•á ‡§Ø‡§π ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§                                                                         |
| **set**         | ‡§è‡§ï ‡§Æ‡§æ‡§® ‡§ï‡•ã ‡§è‡§ï ‡§ö‡§∞ ‡§Æ‡•á‡§Ç ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§ú‡§ø‡§∏‡•á drozer ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§≤‡§ø‡§®‡§ï‡•ç‡§∏ ‡§∂‡•á‡§≤ ‡§Æ‡•á‡§Ç ‡§™‡§∞‡•ç‡§Ø‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø ‡§ö‡§∞ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§™‡§æ‡§∏ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§                                   |
| **shell**       | ‡§è‡§ú‡•á‡§Ç‡§ü ‡§ï‡•á ‡§∏‡§Ç‡§¶‡§∞‡•ç‡§≠ ‡§Æ‡•á‡§Ç ‡§°‡§ø‡§µ‡§æ‡§á‡§∏ ‡§™‡§∞ ‡§è‡§ï ‡§á‡§Ç‡§ü‡§∞‡•à‡§ï‡•ç‡§ü‡§ø‡§µ ‡§≤‡§ø‡§®‡§ï‡•ç‡§∏ ‡§∂‡•á‡§≤ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç‡•§                                                                            |
| **run MODULE**  | ‡§è‡§ï drozer ‡§Æ‡•â‡§°‡•ç‡§Ø‡•Ç‡§≤ ‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç                                                                                                                                |
| **exploit**     | Drozer ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∂‡•ã‡§∑‡§£ ‡§¨‡§®‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§ `drozer exploit list`                                                                             |
| **payload**     | ‡§∂‡•ã‡§∑‡§£ ‡§ï‡•ã ‡§è‡§ï ‡§™‡•á‡§≤‡•ã‡§° ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡•§ `drozer payload list`                                                                                                     |

### Package

**‡§®‡§æ‡§Æ** ‡§ï‡§æ ‡§™‡§§‡§æ ‡§≤‡§ó‡§æ‡§è‡§Å ‡§ú‡•ã ‡§®‡§æ‡§Æ ‡§ï‡•á ‡§≠‡§æ‡§ó ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§´‡§º‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à:
```bash
dz> run app.package.list -f sieve
com.mwr.example.sieve
```
**‡§™‡•à‡§ï‡•á‡§ú ‡§ï‡•Ä ‡§Æ‡•Ç‡§≤ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä:**
```bash
dz> run app.package.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
Process Name: com.mwr.example.sieve
Version: 1.0
Data Directory: /data/data/com.mwr.example.sieve
APK Path: /data/app/com.mwr.example.sieve-2.apk
UID: 10056
GID: [1028, 1015, 3003]
Shared Libraries: null
Shared User ID: null
Uses Permissions:
- android.permission.READ_EXTERNAL_STORAGE
- android.permission.WRITE_EXTERNAL_STORAGE
- android.permission.INTERNET
Defines Permissions:
- com.mwr.example.sieve.READ_KEYS
- com.mwr.example.sieve.WRITE_KEYS
```
‡§™‡§¢‡§º‡•á‡§Ç **Manifest**:
```bash
run app.package.manifest jakhar.aseem.diva
```
**‡§™‡•à‡§ï‡•á‡§ú ‡§ï‡•Ä** Attack surface:
```bash
dz> run app.package.attacksurface com.mwr.example.sieve
Attack Surface:
3 activities exported
0 broadcast receivers exported
2 content providers exported
2 services exported
is debuggable
```
* **‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø‡§Ø‡§æ‡§Å**: ‡§∂‡§æ‡§Ø‡§¶ ‡§Ü‡§™ ‡§è‡§ï ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§ï‡§ø‡§∏‡•Ä ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§æ‡§ß‡§ø‡§ï‡§∞‡§£ ‡§ï‡•ã ‡§¨‡§æ‡§Ø‡§™‡§æ‡§∏ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡•ã ‡§Ü‡§™‡§ï‡•ã ‡§á‡§∏‡•á ‡§≤‡•â‡§®‡•ç‡§ö ‡§ï‡§∞‡§®‡•á ‡§∏‡•á ‡§∞‡•ã‡§ï‡§®‡•Ä ‡§ö‡§æ‡§π‡§ø‡§è‡•§
* **‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡§æ**: ‡§∂‡§æ‡§Ø‡§¶ ‡§Ü‡§™ ‡§®‡§ø‡§ú‡•Ä ‡§°‡•á‡§ü‡§æ ‡§§‡§ï ‡§™‡§π‡•Å‡§Å‡§ö ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§Ø‡§æ ‡§ï‡•Å‡§õ ‡§ï‡§Æ‡§ú‡•ã‡§∞‡§ø‡§Ø‡•ã‡§Ç (SQL Injection ‡§Ø‡§æ Path Traversal) ‡§ï‡§æ ‡§≤‡§æ‡§≠ ‡§â‡§†‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§
* **‡§∏‡•á‡§µ‡§æ‡§è‡§Å**:
* **is debuggable**: [‡§Ö‡§ß‡§ø‡§ï ‡§ú‡§æ‡§®‡•á‡§Ç](./#is-debuggeable)

### ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø‡§Ø‡§æ‡§Å

‡§è‡§ï ‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§‡§ø‡§§ ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø ‡§ò‡§ü‡§ï ‡§ï‡§æ ‚Äúandroid:exported‚Äù ‡§Æ‡§æ‡§® AndroidManifest.xml ‡§´‡§º‡§æ‡§á‡§≤ ‡§Æ‡•á‡§Ç **‚Äútrue‚Äù** ‡§™‡§∞ ‡§∏‡•á‡§ü ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à:
```markup
<activity android:name="com.my.app.Initial" android:exported="true">
</activity>
```
**‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§‡§ø‡§§ ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•Ç‡§ö‡•Ä**:
```bash
dz> run app.activity.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
com.mwr.example.sieve.FileSelectActivity
com.mwr.example.sieve.MainLoginActivity
com.mwr.example.sieve.PWList
```
**‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø ‡§™‡•ç‡§∞‡§æ‡§∞‡§Ç‡§≠ ‡§ï‡§∞‡•á‡§Ç**:

‡§∂‡§æ‡§Ø‡§¶ ‡§Ü‡§™ ‡§è‡§ï ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø ‡§™‡•ç‡§∞‡§æ‡§∞‡§Ç‡§≠ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§ï‡•Å‡§õ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§æ‡§ß‡§ø‡§ï‡§∞‡§£ ‡§ï‡•ã ‡§¨‡§æ‡§Ø‡§™‡§æ‡§∏ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡•ã ‡§Ü‡§™‡§ï‡•ã ‡§á‡§∏‡•á ‡§≤‡•â‡§®‡•ç‡§ö ‡§ï‡§∞‡§®‡•á ‡§∏‡•á ‡§∞‡•ã‡§ï‡§®‡•Ä ‡§ö‡§æ‡§π‡§ø‡§è‡•§

{% code overflow="wrap" %}
```bash
dz> run app.activity.start --component com.mwr.example.sieve com.mwr.example.sieve.PWList
```
{% endcode %}

‡§Ü‡§™ **adb** ‡§∏‡•á ‡§è‡§ï ‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§‡§ø‡§§ ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø ‡§≠‡•Ä ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç:

* PackageName com.example.demo ‡§π‡•à
* Exported ActivityName com.example.test.MainActivity ‡§π‡•à
```bash
adb shell am start -n com.example.demo/com.example.test.MainActivity
```
### Content Providers

‡§Ø‡§π ‡§™‡•ã‡§∏‡•ç‡§ü ‡§Ø‡§π‡§æ‡§Å ‡§á‡§§‡§®‡•Ä ‡§¨‡§°‡§º‡•Ä ‡§•‡•Ä ‡§ï‡§ø **‡§Ü‡§™ ‡§á‡§∏‡•á** [**‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡•á ‡§™‡•É‡§∑‡•ç‡§† ‡§Æ‡•á‡§Ç ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç**](exploiting-content-providers.md).

### Services

‡§è‡§ï ‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§‡§ø‡§§ ‡§∏‡•á‡§µ‡§æ Manifest.xml ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§ò‡•ã‡§∑‡§ø‡§§ ‡§ï‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à:

{% code overflow="wrap" %}
```markup
<service android:name=".AuthService" android:exported="true" android:process=":remote"/>
```
{% endcode %}

‡§ï‡•ã‡§° ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ **check** ‡§ï‡§∞‡•á‡§Ç \*\*`handleMessage`\*\* ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡•ã **message** ‡§ï‡•ã **receive** ‡§ï‡§∞‡•á‡§ó‡§æ:

![](<../../../.gitbook/assets/image (82).png>)

#### ‡§∏‡•Ç‡§ö‡•Ä ‡§∏‡•á‡§µ‡§æ
```bash
dz> run app.service.info -a com.mwr.example.sieve
Package: com.mwr.example.sieve
com.mwr.example.sieve.AuthService
Permission: null
com.mwr.example.sieve.CryptoService
Permission: null
```
#### **‡§è‡§ï ‡§∏‡•á‡§µ‡§æ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§á‡§Ç‡§ü‡§∞‡•à‡§ï‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç**
```bash
app.service.send            Send a Message to a service, and display the reply
app.service.start           Start Service
app.service.stop            Stop Service
```
#### ‡§â‡§¶‡§æ‡§π‡§∞‡§£

Take a look to the **drozer** help for `app.service.send`:

![](<../../../.gitbook/assets/image (1079).png>)

Note that you will be sending first the data inside "_msg.what_", then "_msg.arg1_" and "_msg.arg2_", you should check inside the code **‡§ï‡•å‡§® ‡§∏‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à** ‡§î‡§∞ ‡§ï‡§π‡§æ‡§Å‡•§\
Using the `--extra` option you can send something interpreted by "_msg.replyTo"_, and using `--bundle-as-obj` you create and object with the provided details.

In the following example:

* `what == 2354`
* `arg1 == 9234`
* `arg2 == 1`
* `replyTo == object(string com.mwr.example.sieve.PIN 1337)`
```bash
run app.service.send com.mwr.example.sieve com.mwr.example.sieve.AuthService --msg 2354 9234 1 --extra string com.mwr.example.sieve.PIN 1337 --bundle-as-obj
```
![](<../../../.gitbook/assets/image (647).png>)

### ‡§¨‡•ç‡§∞‡•â‡§°‡§ï‡§æ‡§∏‡•ç‡§ü ‡§∞‡§ø‡§∏‡•Ä‡§µ‡§∞‡•ç‡§∏

**‡§è‡§Ç‡§°‡•ç‡§∞‡•â‡§á‡§° ‡§¨‡•á‡§∏‡§ø‡§ï ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§Ö‡§®‡•Å‡§≠‡§æ‡§ó ‡§Æ‡•á‡§Ç ‡§Ü‡§™ ‡§¶‡•á‡§ñ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§¨‡•ç‡§∞‡•â‡§°‡§ï‡§æ‡§∏‡•ç‡§ü ‡§∞‡§ø‡§∏‡•Ä‡§µ‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à**‡•§

‡§á‡§® ‡§¨‡•ç‡§∞‡•â‡§°‡§ï‡§æ‡§∏‡•ç‡§ü ‡§∞‡§ø‡§∏‡•Ä‡§µ‡§∞‡•ç‡§∏ ‡§ï‡§æ ‡§™‡§§‡§æ ‡§≤‡§ó‡§æ‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§Ü‡§™‡§ï‡•ã **‡§â‡§®‡§ï‡§æ ‡§ï‡•ã‡§°** ‡§ö‡•á‡§ï ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§ ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç **`onReceive`** ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® ‡§™‡§∞ ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§Ø‡§π ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§∏‡§Ç‡§¶‡•á‡§∂‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§Ç‡§≠‡§æ‡§≤ ‡§∞‡§π‡§æ ‡§π‡•ã‡§ó‡§æ‡•§

#### **‡§∏‡§≠‡•Ä** ‡§¨‡•ç‡§∞‡•â‡§°‡§ï‡§æ‡§∏‡•ç‡§ü ‡§∞‡§ø‡§∏‡•Ä‡§µ‡§∞‡•ç‡§∏ ‡§ï‡§æ ‡§™‡§§‡§æ ‡§≤‡§ó‡§æ‡§è‡§Ç
```bash
run app.broadcast.info #Detects all
```
#### ‡§è‡§ï ‡§ê‡§™ ‡§ï‡•á ‡§¨‡•ç‡§∞‡•â‡§°‡§ï‡§æ‡§∏‡•ç‡§ü ‡§∞‡§ø‡§∏‡•Ä‡§µ‡§∞‡•ç‡§∏ ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§∞‡•á‡§Ç
```bash
#Check one negative
run app.broadcast.info -a jakhar.aseem.diva
Package: jakhar.aseem.diva
No matching receivers.

# Check one positive
run app.broadcast.info -a com.google.android.youtube
Package: com.google.android.youtube
com.google.android.libraries.youtube.player.PlayerUiModule$LegacyMediaButtonIntentReceiver
Permission: null
com.google.android.apps.youtube.app.common.notification.GcmBroadcastReceiver
Permission: com.google.android.c2dm.permission.SEND
com.google.android.apps.youtube.app.PackageReplacedReceiver
Permission: null
com.google.android.libraries.youtube.account.AccountsChangedReceiver
Permission: null
com.google.android.apps.youtube.app.application.system.LocaleUpdatedReceiver
Permission: null
```
#### ‡§¨‡•ç‡§∞‡•â‡§°‡§ï‡§æ‡§∏‡•ç‡§ü **‡§á‡§Ç‡§ü‡§∞‡•à‡§ï‡•ç‡§∂‡§®**
```bash
app.broadcast.info          Get information about broadcast receivers
app.broadcast.send          Send broadcast using an intent
app.broadcast.sniff         Register a broadcast receiver that can sniff particular intents
```
#### ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≠‡•á‡§ú‡•á‡§Ç

‡§á‡§∏ ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§Æ‡•á‡§Ç [FourGoats apk](https://github.com/linkedin/qark/blob/master/tests/goatdroid.apk) ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü ‡§™‡•ç‡§∞‡•ã‡§µ‡§æ‡§á‡§°‡§∞ ‡§ï‡§æ ‡§¶‡•Å‡§∞‡•Å‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§§‡•á ‡§π‡•Å‡§è ‡§Ü‡§™ **‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§ó‡•à‡§∞-‡§™‡•ç‡§∞‡•Ä‡§Æ‡§ø‡§Ø‡§Æ ‡§ó‡§Ç‡§§‡§µ‡•ç‡§Ø ‡§ï‡•ã ‡§Æ‡§®‡§ö‡§æ‡§π‡§æ SMS** **‡§¨‡§ø‡§®‡§æ ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø** ‡§Æ‡§æ‡§Ç‡§ó‡•á ‡§≠‡•á‡§ú ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§

![](<../../../.gitbook/assets/image (415).png>)

![](<../../../.gitbook/assets/image (573).png>)

‡§Ø‡§¶‡§ø ‡§Ü‡§™ ‡§ï‡•ã‡§° ‡§™‡§¢‡§º‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã "_phoneNumber_" ‡§î‡§∞ "_message_" ‡§™‡•à‡§∞‡§æ‡§Æ‡•Ä‡§ü‡§∞ ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü ‡§™‡•ç‡§∞‡•ã‡§µ‡§æ‡§á‡§°‡§∞ ‡§ï‡•ã ‡§≠‡•á‡§ú‡•á ‡§ú‡§æ‡§®‡•á ‡§ö‡§æ‡§π‡§ø‡§è‡•§
```bash
run app.broadcast.send --action org.owasp.goatdroid.fourgoats.SOCIAL_SMS --component org.owasp.goatdroid.fourgoats.broadcastreceivers SendSMSNowReceiver --extra string phoneNumber 123456789 --extra string message "Hello mate!"
```
### Is debuggeable

‡§è‡§ï ‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§∂‡§® APK ‡§ï‡§≠‡•Ä ‡§≠‡•Ä ‡§°‡§ø‡§¨‡§ó ‡§ï‡§∞‡§®‡•á ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§\
‡§á‡§∏‡§ï‡§æ ‡§Æ‡§§‡§≤‡§¨ ‡§π‡•à ‡§ï‡§ø ‡§Ü‡§™ **‡§ú‡§æ‡§µ‡§æ ‡§°‡§ø‡§¨‡§ó‡§∞** ‡§ï‡•ã ‡§ö‡§≤ ‡§∞‡§π‡•á ‡§è‡§™‡•ç‡§≤‡§ø‡§ï‡•á‡§∂‡§® ‡§∏‡•á ‡§ú‡•ã‡§°‡§º ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç, ‡§á‡§∏‡•á ‡§∞‡§® ‡§ü‡§æ‡§á‡§Æ ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç, ‡§¨‡•ç‡§∞‡•á‡§ï‡§™‡•â‡§á‡§Ç‡§ü ‡§∏‡•á‡§ü ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç, ‡§ï‡§¶‡§Æ ‡§∏‡•á ‡§ï‡§¶‡§Æ ‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç, ‡§µ‡•á‡§∞‡§ø‡§è‡§¨‡§≤ ‡§ï‡•á ‡§Æ‡§æ‡§® ‡§á‡§ï‡§ü‡•ç‡§†‡§æ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§Ø‡§π‡§æ‡§Ç ‡§§‡§ï ‡§ï‡§ø ‡§â‡§®‡•ç‡§π‡•á‡§Ç ‡§¨‡§¶‡§≤ ‡§≠‡•Ä ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§[ InfoSec institute has an excellent article](../exploiting-a-debuggeable-applciation.md) ‡§ú‡§¨ ‡§Ü‡§™‡§ï‡§æ ‡§è‡§™‡•ç‡§≤‡§ø‡§ï‡•á‡§∂‡§® ‡§°‡§ø‡§¨‡§ó ‡§ï‡§∞‡§®‡•á ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§π‡•ã ‡§î‡§∞ ‡§∞‡§®‡§ü‡§æ‡§á‡§Æ ‡§ï‡•ã‡§° ‡§á‡§Ç‡§ú‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§ó‡§π‡§∞‡§æ‡§à ‡§∏‡•á ‡§ñ‡•Å‡§¶‡§æ‡§à ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è‡•§

‡§ú‡§¨ ‡§è‡§ï ‡§è‡§™‡•ç‡§≤‡§ø‡§ï‡•á‡§∂‡§® ‡§°‡§ø‡§¨‡§ó ‡§ï‡§∞‡§®‡•á ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§π‡•ã‡§§‡§æ ‡§π‡•à, ‡§§‡•ã ‡§Ø‡§π ‡§Æ‡•à‡§®‡§ø‡§´‡•á‡§∏‡•ç‡§ü ‡§Æ‡•á‡§Ç ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§¶‡•á‡§ó‡§æ:
```xml
<application theme="@2131296387" debuggable="true"
```
‡§Ü‡§™ ‡§∏‡§≠‡•Ä ‡§°‡§ø‡§¨‡§ó ‡§ï‡§∞‡§®‡•á ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§Ö‡§®‡•Å‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó‡•ã‡§Ç ‡§ï‡•ã **Drozer** ‡§ï‡•á ‡§∏‡§æ‡§• ‡§¢‡•Ç‡§Ç‡§¢ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç:
```bash
run app.package.debuggable
```
## Tutorials

* [https://resources.infosecinstitute.com/android-penetration-tools-walkthrough-series-drozer/#gref](https://resources.infosecinstitute.com/android-penetration-tools-walkthrough-series-drozer/#gref)
* [https://github.com/mgcfish/mobiletools/blob/master/\_posts/2016-08-01-Using-Drozer-for-application-security-assessments.md](https://github.com/mgcfish/mobiletools/blob/master/\_posts/2016-08-01-Using-Drozer-for-application-security-assessments.md)
* [https://www.hackingarticles.in/android-penetration-testing-drozer/](https://www.hackingarticles.in/android-penetration-testing-drozer/)
* [https://medium.com/@ashrafrizvi3006/how-to-test-android-application-security-using-drozer-edc002c5dcac](https://medium.com/@ashrafrizvi3006/how-to-test-android-application-security-using-drozer-edc002c5dcac)

## More info

* [https://blog.dixitaditya.com/android-pentesting-cheatsheet/](https://blog.dixitaditya.com/android-pentesting-cheatsheet/)

<img src="../../../.gitbook/assets/i3.png" alt="" data-size="original">

**Bug bounty tip**: **‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§ï‡§∞‡•á‡§Ç** **Intigriti** ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§è‡§ï ‡§™‡•ç‡§∞‡•Ä‡§Æ‡§ø‡§Ø‡§Æ **‡§¨‡§ó ‡§¨‡§æ‡§â‡§Ç‡§ü‡•Ä ‡§™‡•ç‡§≤‡•á‡§ü‡§´‡•â‡§∞‡•ç‡§Æ ‡§ú‡•ã ‡§π‡•à‡§ï‡§∞‡•ç‡§∏ ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ, ‡§π‡•à‡§ï‡§∞‡•ç‡§∏ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à**! ‡§Ü‡§ú ‡§π‡•Ä [**https://go.intigriti.com/hacktricks**](https://go.intigriti.com/hacktricks) ‡§™‡§∞ ‡§π‡§Æ‡§æ‡§∞‡•á ‡§∏‡§æ‡§• ‡§ú‡•Å‡§°‡§º‡•á‡§Ç, ‡§î‡§∞ **$100,000** ‡§§‡§ï ‡§ï‡•á ‡§¨‡§æ‡§â‡§Ç‡§ü‡•Ä ‡§ï‡§Æ‡§æ‡§®‡§æ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç!

{% embed url="https://go.intigriti.com/hacktricks" %}

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
