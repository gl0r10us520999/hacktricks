# iOS Burp Suite Configuration

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
{% endhint %}

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
Use [**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=burp-configuration-for-ios) to easily build and **automate workflows** powered by the world's **most advanced** community tools.\
Get Access Today:

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=burp-configuration-for-ios" %}

## iOSデバイスへのBurp証明書のインストール

iOSデバイスでの安全なウェブトラフィック分析とSSLピンニングのために、Burp Suiteは**Burp Mobile Assistant**を通じて、または手動設定を介して利用できます。以下は両方の方法の要約ガイドです。

### Burp Mobile Assistantによる自動インストール

**Burp Mobile Assistant**は、Burp証明書のインストールプロセス、プロキシ設定、およびSSLピンニングを簡素化します。詳細なガイダンスは[PortSwiggerの公式ドキュメント](https://portswigger.net/burp/documentation/desktop/tools/mobile-assistant/installing)で確認できます。

### 手動インストール手順

1. **プロキシ設定:** iPhoneのWi-Fi設定でBurpをプロキシとして設定します。
2. **証明書のダウンロード:** デバイスのブラウザで`http://burp`に移動して証明書をダウンロードします。
3. **証明書のインストール:** ダウンロードしたプロファイルを**設定** > **一般** > **VPNとデバイス管理**を通じてインストールし、**証明書信頼設定**でPortSwigger CAの信頼を有効にします。

### インターセプションプロキシの設定

この設定により、iOSデバイスとインターネット間のトラフィック分析がBurpを介して可能になり、クライアント間トラフィックをサポートするWi-Fiネットワークが必要です。利用できない場合は、usbmuxdを介したUSB接続が代替手段として機能します。PortSwiggerのチュートリアルでは、[デバイス設定](https://support.portswigger.net/customer/portal/articles/1841108-configuring-an-ios-device-to-work-with-burp)と[証明書インストール](https://support.portswigger.net/customer/portal/articles/1841109-installing-burp-s-ca-certificate-in-an-ios-device)に関する詳細な指示が提供されています。

### ジェイルブレイクデバイスのための高度な設定

ジェイルブレイクされたデバイスを持つユーザーは、SSH over USB（**iproxy**を介して）を使用してトラフィックを直接Burpを通じてルーティングする方法を提供します：

1. **SSH接続の確立:** iproxyを使用してSSHをローカルホストに転送し、iOSデバイスからBurpを実行しているコンピュータへの接続を可能にします。

```bash
iproxy 2222 22
```
2. **リモートポートフォワーディング:** iOSデバイスのポート8080をコンピュータのローカルホストに転送し、Burpのインターフェースへの直接アクセスを可能にします。

```bash
ssh -R 8080:localhost:8080 root@localhost -p 2222
```
3. **グローバルプロキシ設定:** 最後に、iOSデバイスのWi-Fi設定を手動プロキシを使用するように構成し、すべてのウェブトラフィックをBurpを通じてルーティングします。

### フルネットワークモニタリング/スニッフィング

非HTTPデバイストラフィックのモニタリングは、すべての形式のデータトラフィックをキャプチャできるツールである**Wireshark**を使用して効率的に行うことができます。iOSデバイスの場合、リアルタイムトラフィックモニタリングはリモート仮想インターフェースの作成を通じて実現され、このプロセスは[このStack Overflowの投稿](https://stackoverflow.com/questions/9555403/capturing-mobile-phone-traffic-on-wireshark/33175819#33175819)で詳述されています。開始する前に、macOSシステムに**Wireshark**をインストールする必要があります。

手順は以下の主要なステップを含みます：

1. iOSデバイスとmacOSホストの間でUSB経由で接続を開始します。
2. iOSデバイスの**UDID**を確認します。これはトラフィックモニタリングに必要なステップです。macOSターミナルでコマンドを実行することで確認できます：
```bash
$ rvictl -s <UDID>
Starting device <UDID> [SUCCEEDED] with interface rvi0
```
3. UDIDの特定後、**Wireshark**を開き、「rvi0」インターフェースを選択してデータキャプチャを行います。  
4. 特定のIPアドレスに関連するHTTPトラフィックをキャプチャするなど、ターゲット監視のために、Wiresharkのキャプチャフィルターを使用できます：

## シミュレーターでのBurp証明書のインストール

* **Burp証明書のエクスポート**

_Proxy_ --> _Options_ --> _Export CA certificate_ --> _Certificate in DER format_

![](<../../.gitbook/assets/image (534).png>)

* **証明書をエミュレーター内にドラッグアンドドロップ**
* **エミュレーター内で** _Settings_ --> _General_ --> _Profile_ --> _PortSwigger CA_に移動し、**証明書を確認**
* **エミュレーター内で** _Settings_ --> _General_ --> _About_ --> _Certificate Trust Settings_に移動し、**PortSwigger CAを有効にする**

![](<../../.gitbook/assets/image (1048).png>)

**おめでとうございます、iOSシミュレーターにBurp CA証明書を正常に設定しました**

{% hint style="info" %}
**iOSシミュレーターはMacOSのプロキシ設定を使用します。**
{% endhint %}

### MacOSプロキシ設定

Burpをプロキシとして設定する手順：

* _System Preferences_ --> _Network_ --> _Advanced_に移動
* _Proxies_タブで_ウェブプロキシ（HTTP）_と_セキュアウェブプロキシ（HTTPS）_にチェックを入れる
* 両方のオプションで_127.0.0.1:8080_を設定

![](<../../.gitbook/assets/image (431).png>)

* _**Ok**_をクリックし、次に_**Apply**_をクリック

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm_source=hacktricks&utm_medium=text&utm_campaign=ppc&utm_term=trickest&utm_content=burp-configuration-for-ios)を使用して、世界の**最も先進的な**コミュニティツールによって強化された**ワークフローを簡単に構築し、自動化**します。\
今すぐアクセスを取得：

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=burp-configuration-for-ios" %}
{% hint style="success" %}
AWSハッキングを学び、実践する：<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCPハッキングを学び、実践する：<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksをサポートする</summary>

* [**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)を確認してください！
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**テレグラムグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**をフォローしてください。**
* [**HackTricks**](https://github.com/carlospolop/hacktricks)および[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してハッキングトリックを共有してください。

</details>
{% endhint %}
</details>
{% endhint %}
