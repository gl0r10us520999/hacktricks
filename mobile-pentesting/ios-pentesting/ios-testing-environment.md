# iOS Test OrtamÄ±

{% hint style="success" %}
AWS Hacking Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± Ekip UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="../../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± Ekip UzmanÄ± (GRTE)**<img src="../../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## Apple GeliÅŸtirici ProgramÄ±

Bir **provisioning identity**, bir Apple geliÅŸtirici hesabÄ±yla iliÅŸkili olan bir dizi genel ve Ã¶zel anahtardÄ±r. **UygulamalarÄ± imzalamak** iÃ§in **99$/yÄ±l** Ã¶deyerek **Apple GeliÅŸtirici ProgramÄ±**'na kaydolmanÄ±z gerekir. Bunu yapmadan, bir fiziksel cihazda kaynak kodundan uygulamalarÄ± Ã§alÄ±ÅŸtÄ±ramazsÄ±nÄ±z. Bunu yapmanÄ±n bir diÄŸer seÃ§eneÄŸi ise **jailbroken bir cihaz** kullanmaktÄ±r.

Xcode 7.2 ile birlikte Apple, gerÃ§ek bir iPhone'da uygulamanÄ±zÄ± yazmanÄ±za ve test etmenize olanak tanÄ±yan **Ã¼cretsiz bir iOS geliÅŸtirme provisioning profili** oluÅŸturma seÃ§eneÄŸi sunmuÅŸtur. _Xcode_ --> _Preferences_ --> _Accounts_ --> _+_ (Kimlik bilgilerinizi ekleyin) --> _OluÅŸturulan Apple ID'ye tÄ±klayÄ±n_ --> _SertifikalarÄ± YÃ¶net_ --> _+_ (Apple GeliÅŸtirme) --> _Tamam_\
\_\_Daha sonra, uygulamanÄ±zÄ± iPhone'unuzda Ã§alÄ±ÅŸtÄ±rmak iÃ§in Ã¶nce **iPhone'un bilgisayarÄ± gÃ¼venilir olarak gÃ¶stermesini saÄŸlamalÄ±sÄ±nÄ±z.** ArdÄ±ndan, **Xcode'dan mobilde uygulamayÄ± Ã§alÄ±ÅŸtÄ±rmayÄ± deneyebilirsiniz,** ancak bir hata gÃ¶rÃ¼necektir. Bu nedenle _Ayarlar_ --> _Genel_ --> _Profiller ve Cihaz YÃ¶netimi_ --> GÃ¼venilmeyen profili seÃ§in ve "**GÃ¼ven**"e tÄ±klayÄ±n.

**AynÄ± imzalama sertifikasÄ±yla imzalanmÄ±ÅŸ uygulamalar, gÃ¼venli bir ÅŸekilde kaynaklarÄ± paylaÅŸabilir, Ã¶rneÄŸin anahtar zinciri Ã¶ÄŸeleri**.

Provisioning profilleri, telefonun iÃ§inde **`/Library/MobileDevice/ProvisioningProfiles`** dizininde saklanÄ±r.

## **SimÃ¼latÃ¶r**

{% hint style="info" %}
Bir **simÃ¼latÃ¶rÃ¼n emÃ¼latÃ¶rle aynÄ± olmadÄ±ÄŸÄ±nÄ±** unutmayÄ±n. SimÃ¼latÃ¶r, cihazÄ±n davranÄ±ÅŸÄ±nÄ± ve iÅŸlevlerini simÃ¼le eder, ancak bunlarÄ± gerÃ§ekten kullanmaz.
{% endhint %}

### **SimÃ¼latÃ¶r**

Bilmeniz gereken ilk ÅŸey, **simÃ¼latÃ¶r iÃ§inde bir pentest gerÃ§ekleÅŸtirmenin, jailbreak yapÄ±lmÄ±ÅŸ bir cihazda yapmaktan Ã§ok daha sÄ±nÄ±rlÄ± olacaÄŸÄ±dÄ±r**.

Bir iOS uygulamasÄ± oluÅŸturmak ve desteklemek iÃ§in gereken tÃ¼m araÃ§lar **sadece resmi olarak Mac OS'ta desteklenmektedir**.\
Apple'Ä±n iOS uygulamalarÄ±nÄ± oluÅŸturmak/ayarlarÄ±nÄ± dÃ¼zeltmek/geliÅŸtirmek iÃ§in kullanÄ±lan de facto aracÄ± **Xcode**'dur. UygulamanÄ±zÄ± oluÅŸturmak ve **test etmek** iÃ§in gereken diÄŸer bileÅŸenleri, Ã¶rneÄŸin **simÃ¼latÃ¶rler** ve farklÄ± **SDK** **sÃ¼rÃ¼mlerini** indirmek iÃ§in kullanÄ±labilir.\
Xcode'u **resmi uygulama maÄŸazasÄ±ndan** **indirmek** ÅŸiddetle tavsiye edilir. DiÄŸer sÃ¼rÃ¼mler kÃ¶tÃ¼ amaÃ§lÄ± yazÄ±lÄ±m iÃ§erebilir.

SimÃ¼latÃ¶r dosyalarÄ± `/Users/<username>/Library/Developer/CoreSimulator/Devices` dizininde bulunabilir.

SimÃ¼latÃ¶rÃ¼ aÃ§mak iÃ§in Xcode'u Ã§alÄ±ÅŸtÄ±rÄ±n, ardÄ±ndan _Xcode sekmesine_ tÄ±klayÄ±n --> _GeliÅŸtirici araÃ§larÄ±nÄ± aÃ§_ --> _SimÃ¼latÃ¶r_\
\_\_AÅŸaÄŸÄ±daki resimde "iPod touch \[...\]" Ã¼zerine tÄ±klayarak test etmek iÃ§in baÅŸka bir cihaz seÃ§ebilirsiniz:

![](<../../.gitbook/assets/image (270).png>)

![](<../../.gitbook/assets/image (520).png>)

### SimÃ¼latÃ¶rdeki Uygulamalar

`/Users/<username>/Library/Developer/CoreSimulator/Devices` dizininde tÃ¼m **kurulu simÃ¼latÃ¶rleri** bulabilirsiniz. EmÃ¼latÃ¶rlerden birinde oluÅŸturulan bir uygulamanÄ±n dosyalarÄ±na eriÅŸmek istiyorsanÄ±z, **uygulamanÄ±n hangi emÃ¼latÃ¶rde kurulu olduÄŸunu bilmek zor olabilir**. DoÄŸru UID'yi **bulmanÄ±n hÄ±zlÄ± bir yolu**, simÃ¼latÃ¶rde uygulamayÄ± Ã§alÄ±ÅŸtÄ±rmak ve ÅŸunu yÃ¼rÃ¼tmektir:
```bash
xcrun simctl list | grep Booted
iPhone 8 (BF5DA4F8-6BBE-4EA0-BA16-7E3AFD16C06C) (Booted)
```
Once you know the UID the apps installed within it can be found in `/Users/<username>/Library/Developer/CoreSimulator/Devices/{UID}/data/Containers/Data/Application`

Ancak, ÅŸaÅŸÄ±rtÄ±cÄ± bir ÅŸekilde burada uygulamayÄ± bulamayacaksÄ±nÄ±z. `/Users/<username>/Library/Developer/Xcode/DerivedData/{Application}/Build/Products/Debug-iphonesimulator/` adresine eriÅŸmeniz gerekiyor.

Ve bu klasÃ¶rde **uygulamanÄ±n paketini bulabilirsiniz.**

## Emulator

Corellium, kamuya aÃ§Ä±k tek iOS emÃ¼latÃ¶rÃ¼dÃ¼r. KullanÄ±cÄ± baÅŸÄ±na lisans modeli ile bir kurumsal SaaS Ã§Ã¶zÃ¼mÃ¼dÃ¼r ve herhangi bir deneme lisansÄ± sunmamaktadÄ±r.

## No Jailbreak needed

**Jailbreak yapÄ±lmamÄ±ÅŸ bir cihazda** bir iOS uygulamasÄ±nÄ± nasÄ±l pentest edeceÄŸinizi anlatan bu blog yazÄ±sÄ±nÄ± kontrol edin: [https://dvuln.com/blog/modern-ios-pentesting-no-jailbreak-needed](https://dvuln.com/blog/modern-ios-pentesting-no-jailbreak-needed)

## Jailbreaking

Apple, iPhone'da Ã§alÄ±ÅŸan kodun **Apple tarafÄ±ndan verilen bir sertifika ile imzalanmasÄ±nÄ±** kesinlikle gerektirir. **Jailbreaking**, bu tÃ¼r kÄ±sÄ±tlamalarÄ± ve iÅŸletim sistemi tarafÄ±ndan konulan diÄŸer gÃ¼venlik kontrollerini **aÅŸma** sÃ¼recidir. Bu nedenle, cihaz jailbreak yapÄ±ldÄ±ÄŸÄ±nda, uygulamalarÄ±n yÃ¼klenmesini kontrol eden **bÃ¼tÃ¼nlÃ¼k kontrolÃ¼** yamanÄ±r, bÃ¶ylece **bypass edilir**.

{% hint style="info" %}
Android'in aksine, iOS'ta **imzasÄ±z/gÃ¼venilmeyen kodu Ã§alÄ±ÅŸtÄ±rmak iÃ§in "GeliÅŸtirici Modu"na geÃ§emezsiniz.**
{% endhint %}

### Android Rooting vs. iOS Jailbreaking

SÄ±klÄ±kla karÅŸÄ±laÅŸtÄ±rÄ±lsa da, Android'de **rooting** ve iOS'ta **jailbreaking** temelde farklÄ± sÃ¼reÃ§lerdir. Android cihazlarÄ±nÄ± rootlamak, **`su` ikili dosyasÄ±nÄ± yÃ¼klemeyi** veya **sistemi kÃ¶klÃ¼ bir Ã¶zel ROM ile deÄŸiÅŸtirmeyi** iÃ§erebilir; bu, bootloader kilidi aÃ§Ä±ldÄ±ÄŸÄ±nda mutlaka istismar gerektirmez. **Ã–zel ROM'larÄ±n yÃ¼klenmesi**, bootloader kilidi aÃ§Ä±ldÄ±ktan sonra cihazÄ±n iÅŸletim sistemini deÄŸiÅŸtirir ve bazen bir istismar gerektirebilir.

Buna karÅŸÄ±n, iOS cihazlarÄ±, bootloader'Ä±n yalnÄ±zca Apple imzalÄ± gÃ¶rÃ¼ntÃ¼leri baÅŸlatmasÄ±na izin vermesi nedeniyle Ã¶zel ROM'larÄ± yÃ¼kleyemez. **iOS'u jailbreak yapmak**, imzasÄ±z kod Ã§alÄ±ÅŸtÄ±rmak iÃ§in Apple'Ä±n kod imzalama korumalarÄ±nÄ± aÅŸmayÄ± amaÃ§lar; bu sÃ¼reÃ§, Apple'Ä±n sÃ¼rekli gÃ¼venlik iyileÅŸtirmeleri ile karmaÅŸÄ±klaÅŸÄ±r.

### Jailbreaking Challenges

iOS'u jailbreak yapmak, Apple'Ä±n gÃ¼venlik aÃ§Ä±klarÄ±nÄ± hÄ±zla yamalamasÄ± nedeniyle giderek zorlaÅŸmaktadÄ±r. **iOS'u dÃ¼ÅŸÃ¼rmek**, bir sÃ¼rÃ¼mden sonra sÄ±nÄ±rlÄ± bir sÃ¼re iÃ§in mÃ¼mkÃ¼ndÃ¼r ve bu da jailbreak yapmayÄ± zaman aÃ§Ä±sÄ±ndan hassas bir mesele haline getirir. GÃ¼venlik testi iÃ§in kullanÄ±lan cihazlar, yeniden jailbreak yapÄ±lmasÄ± garanti edilmedikÃ§e gÃ¼ncellenmemelidir.

iOS gÃ¼ncellemeleri, yalnÄ±zca Apple imzalÄ± yanÄ±tlar iÃ§in yÃ¼klemeye izin veren bir **challenge-response mekanizmasÄ±** (SHSH bloblarÄ±) ile kontrol edilir. "Ä°mzalama penceresi" olarak bilinen bu mekanizma, OTA firmware paketlerini depolama ve daha sonra kullanma yeteneÄŸini sÄ±nÄ±rlar. [IPSW Downloads web sitesi](https://ipsw.me), mevcut imzalama pencerelerini kontrol etmek iÃ§in bir kaynaktÄ±r.

### Jailbreak Varieties

* **Tethered jailbreak'ler**, her yeniden baÅŸlatma iÃ§in bir bilgisayar baÄŸlantÄ±sÄ± gerektirir.
* **Semi-tethered jailbreak'ler**, bilgisayar olmadan jailbreak yapÄ±lmamÄ±ÅŸ moda geÃ§iÅŸe izin verir.
* **Semi-untethered jailbreak'ler**, bilgisayar gerektirmeden manuel yeniden jailbreak yapmayÄ± gerektirir.
* **Untethered jailbreak'ler**, yeniden uygulama gerektirmeden kalÄ±cÄ± bir jailbreak Ã§Ã¶zÃ¼mÃ¼ sunar.

### Jailbreaking Tools and Resources

Jailbreaking araÃ§larÄ±, iOS sÃ¼rÃ¼mÃ¼ne ve cihaza gÃ¶re deÄŸiÅŸir. [Can I Jailbreak?](https://canijailbreak.com), [The iPhone Wiki](https://www.theiphonewiki.com) ve [Reddit Jailbreak](https://www.reddit.com/r/jailbreak/) gibi kaynaklar gÃ¼ncel bilgiler saÄŸlar. Ã–rnekler:

* A7-A11 Ã§ipli cihazlar iÃ§in [Checkra1n](https://checkra.in/).
* iOS 15.0-16.5'te Checkm8 cihazlarÄ± (A8-A11) iÃ§in [Palera1n](https://palera.in/).
* iOS sÃ¼rÃ¼mleri 14.8'e kadar [Unc0ver](https://unc0ver.dev/).

CihazÄ±nÄ±zÄ± deÄŸiÅŸtirmek risk taÅŸÄ±r ve jailbreak yaparken dikkatli olunmalÄ±dÄ±r.

### Jailbreaking Benefits and Risks

Jailbreaking, **iÅŸletim sistemi tarafÄ±ndan dayatÄ±lan sandbox'Ä± kaldÄ±rÄ±r**, uygulamalarÄ±n tÃ¼m dosya sistemine eriÅŸmesine izin verir. Bu Ã¶zgÃ¼rlÃ¼k, onaylanmamÄ±ÅŸ uygulamalarÄ±n yÃ¼klenmesini ve daha fazla API'ye eriÅŸimi saÄŸlar. Ancak, normal kullanÄ±cÄ±lar iÃ§in, potansiyel gÃ¼venlik riskleri ve cihaz kararsÄ±zlÄ±ÄŸÄ± nedeniyle jailbreak yapÄ±lmasÄ± **tavsiye edilmez**.

### **After Jailbreaking**

{% content-ref url="basic-ios-testing-operations.md" %}
[basic-ios-testing-operations.md](basic-ios-testing-operations.md)
{% endcontent-ref %}

### **Jailbreak Detection**

**BirÃ§ok uygulama, mobil cihazÄ±n jailbreak yapÄ±lÄ±p yapÄ±lmadÄ±ÄŸÄ±nÄ± tespit etmeye Ã§alÄ±ÅŸacak ve bu durumda uygulama Ã§alÄ±ÅŸmayacaktÄ±r.**

* Jailbreak yapÄ±ldÄ±ktan sonra iOS'ta **dosyalar ve klasÃ¶rler genellikle yÃ¼klenir**, bunlar cihazÄ±n jailbreak yapÄ±lÄ±p yapÄ±lmadÄ±ÄŸÄ±nÄ± belirlemek iÃ§in aranabilir.
* Jailbreak yapÄ±lmÄ±ÅŸ bir cihazda uygulamalar, sandbox dÄ±ÅŸÄ±ndaki yeni dosyalara **okuma/yazma eriÅŸimi** alÄ±r.
* BazÄ± **API** **Ã§aÄŸrÄ±larÄ±** **farklÄ± davranacaktÄ±r.**
* **OpenSSH** hizmetinin varlÄ±ÄŸÄ±.
* `/bin/sh` Ã§aÄŸrÄ±sÄ± **0 yerine 1** dÃ¶ndÃ¼recektir.

**Jailbreaking'i tespit etme yÃ¶ntemleri hakkÄ±nda daha fazla bilgi** [**burada**](https://www.trustwave.com/en-us/resources/blogs/spiderlabs-blog/jailbreak-detection-methods/)**.**

Bu tespitlerden kaÃ§Ä±nmak iÃ§in **objection'Ä±n** `ios jailbreak disable` komutunu kullanmayÄ± deneyebilirsiniz.

## **Jailbreak Detection Bypass**

* Bu tespitlerden kaÃ§Ä±nmak iÃ§in **objection'Ä±n** `ios jailbreak disable` komutunu kullanmayÄ± deneyebilirsiniz.
* AyrÄ±ca **Liberty Lite** (https://ryleyangus.com/repo/) aracÄ±nÄ± yÃ¼kleyebilirsiniz. Repo eklendikten sonra, uygulama 'Arama' sekmesinde gÃ¶rÃ¼nmelidir.

## References

* [https://mas.owasp.org/MASTG/iOS/0x06b-iOS-Security-Testing/](https://mas.owasp.org/MASTG/iOS/0x06b-iOS-Security-Testing/)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
