# iOS UIActivity Sharing

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

# UIActivity Sharing Simplified

iOS 6 рд╕реЗ рд╢реБрд░реВ рд╣реЛрдХрд░, рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ **рдбреЗрдЯрд╛ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ** рдХреА рдЕрдиреБрдорддрд┐ рджреА рдЧрдИ рд╣реИ рдЬреИрд╕реЗ рдХрд┐ рдЯреЗрдХреНрд╕реНрдЯ, URL, рдпрд╛ рдЫрд╡рд┐рдпрд╛рдБ, рдПрдпрд░реНрдбреНрд░реЙрдк рдЬреИрд╕реА рддрдВрддреНрд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдЬреИрд╕рд╛ рдХрд┐ рдПрдкреНрдкрд▓ рдХреЗ [Inter-App Communication guide](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple_ref/doc/uid/TP40007072-CH6-SW3) рдореЗрдВ рд╡рд░реНрдгрд┐рдд рд╣реИред рдпрд╣ рд╕реБрд╡рд┐рдзрд╛ рдПрдХ рдкреНрд░рдгрд╛рд▓реА-рд╡реНрдпрд╛рдкреА _рд╢реЗрдпрд░ рдЧрддрд┐рд╡рд┐рдзрд┐ рд╢реАрдЯ_ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреНрд░рдХрдЯ рд╣реЛрддреА рд╣реИ рдЬреЛ "Share" рдмрдЯрди рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХрд░рдиреЗ рдкрд░ рдкреНрд░рдХрдЯ рд╣реЛрддреА рд╣реИред

рд╕рднреА рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреЗ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреА рдПрдХ рд╡реНрдпрд╛рдкрдХ рд╕реВрдЪреА [UIActivity.ActivityType](https://developer.apple.com/documentation/uikit/uiactivity/activitytype) рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИред рдбреЗрд╡рд▓рдкрд░реНрд╕ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреЗ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЛ рдмрд╛рд╣рд░ рдХрд░рдиреЗ рдХрд╛ рд╡рд┐рдХрд▓реНрдк рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВ рдпрджрд┐ рд╡реЗ рдЙрдиреНрд╣реЗрдВ рдЕрдкрдиреЗ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдкрдпреБрдХреНрдд рдорд╛рдирддреЗ рд╣реИрдВред

## **How to Share Data**

рдзреНрдпрд╛рди рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкрд░ рдХреЗрдВрджреНрд░рд┐рдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП:

- рд╕рд╛рдЭрд╛ рдХрд┐рдП рдЬрд╛ рд░рд╣реЗ рдбреЗрдЯрд╛ рдХреА рдкреНрд░рдХреГрддрд┐ред
- рдХрд╕реНрдЯрдо рдЧрддрд┐рд╡рд┐рдзрд┐рдпреЛрдВ рдХрд╛ рд╕рдорд╛рд╡реЗрд╢ред
- рдХреБрдЫ рдЧрддрд┐рд╡рд┐рдзрд┐ рдкреНрд░рдХрд╛рд░реЛрдВ рдХрд╛ рдмрд╣рд┐рд╖реНрдХрд╛рд░ред

рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ `UIActivityViewController` рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реБрдЧрдо рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрдЪреНрдЫрд┐рдд рдЖрдЗрдЯрдо рдкрд╛рд╕ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред рдпрд╣ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рджреНрд╡рд╛рд░рд╛ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ:
```bash
$ rabin2 -zq Telegram\ X.app/Telegram\ X | grep -i activityItems
0x1000df034 45 44 initWithActivityItems:applicationActivities:
```
Developers рдХреЛ `UIActivityViewController` рдХреА рдЧрддрд┐рд╡рд┐рдзрд┐рдпреЛрдВ рдФрд░ рдХрд╕реНрдЯрдо рдЧрддрд┐рд╡рд┐рдзрд┐рдпреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреА рдЪрд╛рд╣рд┐рдП рдЬрд┐рдирд╕реЗ рдЗрд╕реЗ рдкреНрд░рд╛рд░рдВрдн рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд╕рд╛рде рд╣реА рдХрд┐рд╕реА рднреА рдирд┐рд░реНрджрд┐рд╖реНрдЯ `excludedActivityTypes` рдХреА рднреАред

## **рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛**

рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╕рдордп рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкрд╣рд▓реВ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИрдВ:

- **рдХрд╕реНрдЯрдо рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдкреНрд░рдХрд╛рд░реЛрдВ** рдХреА рдШреЛрд╖рдгрд╛ред
- **рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдкреНрд░рдХрд╛рд░реЛрдВ** рдХрд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдирд╛ рдЬрд┐рдиреНрд╣реЗрдВ рдРрдк рдЦреЛрд▓ рд╕рдХрддрд╛ рд╣реИред
- **рдкреНрд░рд╛рдкреНрдд рдбреЗрдЯрд╛ рдХреА рдЕрдЦрдВрдбрддрд╛** рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рдирд╛ред

рд╕реНрд░реЛрдд рдХреЛрдб рддрдХ рдкрд╣реБрдВрдЪ рдХреЗ рдмрд┐рдирд╛, рдХреЛрдИ `Info.plist` рдореЗрдВ `UTExportedTypeDeclarations`, `UTImportedTypeDeclarations`, рдФрд░ `CFBundleDocumentTypes` рдЬреИрд╕реЗ рдХреБрдВрдЬреА рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдпрд╣ рд╕рдордЭ рд╕рдХреЗ рдХрд┐ рдПрдХ рдРрдк рдХрд┐рди рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓ рдФрд░ рдШреЛрд╖рд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИред

рдЗрди рдХреБрдВрдЬреА рдкрд░ рдПрдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдорд╛рд░реНрдЧрджрд░реНрд╢рд┐рдХрд╛ [Stackoverflow](https://stackoverflow.com/questions/21937978/what-are-utimportedtypedeclarations-and-utexportedtypedeclarations-used-for-on-i) рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИ, рдЬреЛ рд╕рд┐рд╕реНрдЯрдо-рд╡реНрдпрд╛рдкреА рдкрд╣рдЪрд╛рди рдХреЗ рд▓рд┐рдП UTIs рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдФрд░ рдЖрдпрд╛рдд рдХрд░рдиреЗ рдХреЗ рдорд╣рддреНрд╡ рдХреЛ рдЙрдЬрд╛рдЧрд░ рдХрд░рддреА рд╣реИ рдФрд░ "Open With" рд╕рдВрд╡рд╛рдж рдореЗрдВ рдЖрдкрдХреЗ рдРрдк рдХреЗ рд╕рд╛рде рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рдЬреЛрдбрд╝рддреА рд╣реИред

## рдбрд╛рдпрдирд╛рдорд┐рдХ рдкрд░реАрдХреНрд╖рдг рджреГрд╖реНрдЯрд┐рдХреЛрдг

**рдЧрддрд┐рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рднреЗрдЬрдиреЗ** рдХреЗ рд▓рд┐рдП, рдХреЛрдИ:

- рд╕рд╛рдЭрд╛ рдХреА рдЬрд╛ рд░рд╣реА рд╡рд╕реНрддреБрдУрдВ рдФрд░ рдЧрддрд┐рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдХреИрдкреНрдЪрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `init(activityItems:applicationActivities:)` рд╡рд┐рдзрд┐ рдореЗрдВ рд╣реБрдХ рдХрд░ рд╕рдХрддрд╛ рд╣реИред
- `excludedActivityTypes` рдкреНрд░реЙрдкрд░реНрдЯреА рдХреЛ рдЗрдВрдЯрд░рд╕реЗрдкреНрдЯ рдХрд░рдХреЗ рдмрд╛рд╣рд░ рдХреА рдЧрдИ рдЧрддрд┐рд╡рд┐рдзрд┐рдпреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░ рд╕рдХрддрд╛ рд╣реИред

**рд╡рд╕реНрддреБрдУрдВ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ** рдХреЗ рд▓рд┐рдП, рдЗрд╕рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИ:

- рдХрд┐рд╕реА рдЕрдиреНрдп рд╕реНрд░реЛрдд (рдЬреИрд╕реЗ, AirDrop, рдИрдореЗрд▓) рд╕реЗ рдРрдк рдХреЗ рд╕рд╛рде рдПрдХ рдлрд╝рд╛рдЗрд▓ рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ рдЬреЛ "Open with..." рд╕рдВрд╡рд╛рдж рдХреЛ рдкреНрд░реЗрд░рд┐рдд рдХрд░рддрд╛ рд╣реИред
- рдРрдк рдХреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдереИрддрд┐рдХ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рджреМрд░рд╛рди рдкрд╣рдЪрд╛рдиреА рдЧрдИ рдЕрдиреНрдп рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЗ рдмреАрдЪ `application:openURL:options:` рдореЗрдВ рд╣реБрдХ рдХрд░рдирд╛ред
- рдРрдк рдХреА рдордЬрдмреВрддреА рдХрд╛ рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЧрд▓рдд рдлрд╝рд╛рдЗрд▓реЛрдВ рдпрд╛ рдлрдЬрд╝рд┐рдВрдЧ рддрдХрдиреАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ред

## рд╕рдВрджрд░реНрдн
* [https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction](https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06h-testing-platform-interaction)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
