# Vari√°veis N√£o Inicializadas

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe truques de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}

## Informa√ß√µes B√°sicas

A ideia central aqui √© entender o que acontece com **vari√°veis n√£o inicializadas, pois elas ter√£o o valor que j√° estava na mem√≥ria atribu√≠da a elas.** Exemplo:

* **Fun√ß√£o 1: `initializeVariable`**: Declaramos uma vari√°vel `x` e atribu√≠mos um valor, digamos `0x1234`. Esta a√ß√£o √© semelhante a reservar um espa√ßo na mem√≥ria e colocar um valor espec√≠fico nele.
* **Fun√ß√£o 2: `useUninitializedVariable`**: Aqui, declaramos outra vari√°vel `y`, mas n√£o atribu√≠mos nenhum valor a ela. Em C, vari√°veis n√£o inicializadas n√£o s√£o automaticamente definidas como zero. Em vez disso, elas mant√™m o √∫ltimo valor armazenado em seu local de mem√≥ria.

Quando executamos essas duas fun√ß√µes **sequentially**:

1. Em `initializeVariable`, `x` √© atribu√≠do um valor (`0x1234`), que ocupa um endere√ßo de mem√≥ria espec√≠fico.
2. Em `useUninitializedVariable`, `y` √© declarada, mas n√£o recebe um valor, ent√£o ocupa o espa√ßo de mem√≥ria logo ap√≥s `x`. Devido √† n√£o inicializa√ß√£o de `y`, ela acaba "herdando" o valor do mesmo local de mem√≥ria usado por `x`, porque esse √© o √∫ltimo valor que estava l√°.

Esse comportamento ilustra um conceito chave na programa√ß√£o de baixo n√≠vel: **O gerenciamento de mem√≥ria √© crucial**, e vari√°veis n√£o inicializadas podem levar a comportamentos imprevis√≠veis ou vulnerabilidades de seguran√ßa, pois podem, inadvertidamente, conter dados sens√≠veis deixados na mem√≥ria.

Vari√°veis de pilha n√£o inicializadas podem representar v√°rios riscos de seguran√ßa, como:

* **Vazamento de Dados**: Informa√ß√µes sens√≠veis, como senhas, chaves de criptografia ou detalhes pessoais, podem ser expostas se armazenadas em vari√°veis n√£o inicializadas, permitindo que atacantes potencialmente leiam esses dados.
* **Divulga√ß√£o de Informa√ß√µes**: O conte√∫do de vari√°veis n√£o inicializadas pode revelar detalhes sobre o layout de mem√≥ria do programa ou opera√ß√µes internas, ajudando atacantes a desenvolver exploits direcionados.
* **Falhas e Instabilidade**: Opera√ß√µes envolvendo vari√°veis n√£o inicializadas podem resultar em comportamento indefinido, levando a falhas no programa ou resultados imprevis√≠veis.
* **Execu√ß√£o Arbitr√°ria de C√≥digo**: Em certos cen√°rios, atacantes poderiam explorar essas vulnerabilidades para alterar o fluxo de execu√ß√£o do programa, permitindo-lhes executar c√≥digo arbitr√°rio, o que pode incluir amea√ßas de execu√ß√£o remota de c√≥digo.

### Exemplo
```c
#include <stdio.h>

// Function to initialize and print a variable
void initializeAndPrint() {
int initializedVar = 100; // Initialize the variable
printf("Initialized Variable:\n");
printf("Address: %p, Value: %d\n\n", (void*)&initializedVar, initializedVar);
}

// Function to demonstrate the behavior of an uninitialized variable
void demonstrateUninitializedVar() {
int uninitializedVar; // Declare but do not initialize
printf("Uninitialized Variable:\n");
printf("Address: %p, Value: %d\n\n", (void*)&uninitializedVar, uninitializedVar);
}

int main() {
printf("Demonstrating Initialized vs. Uninitialized Variables in C\n\n");

// First, call the function that initializes its variable
initializeAndPrint();

// Then, call the function that has an uninitialized variable
demonstrateUninitializedVar();

return 0;
}
```
#### Como Isso Funciona:

* **Fun√ß√£o `initializeAndPrint`**: Esta fun√ß√£o declara uma vari√°vel inteira `initializedVar`, atribui a ela o valor `100` e, em seguida, imprime tanto o endere√ßo de mem√≥ria quanto o valor da vari√°vel. Este passo √© direto e mostra como uma vari√°vel inicializada se comporta.
* **Fun√ß√£o `demonstrateUninitializedVar`**: Nesta fun√ß√£o, declaramos uma vari√°vel inteira `uninitializedVar` sem inicializ√°-la. Quando tentamos imprimir seu valor, a sa√≠da pode mostrar um n√∫mero aleat√≥rio. Este n√∫mero representa qualquer dado que estava anteriormente naquele local de mem√≥ria. Dependendo do ambiente e do compilador, a sa√≠da real pode variar e, √†s vezes, por seguran√ßa, alguns compiladores podem inicializar automaticamente vari√°veis para zero, embora isso n√£o deva ser confiado.
* **Fun√ß√£o `main`**: A fun√ß√£o `main` chama ambas as fun√ß√µes acima em sequ√™ncia, demonstrando o contraste entre uma vari√°vel inicializada e uma n√£o inicializada.

## Exemplo ARM64

Isso n√£o muda nada no ARM64, pois vari√°veis locais tamb√©m s√£o gerenciadas na pilha, voc√™ pode [**ver este exemplo**](https://8ksec.io/arm64-reversing-and-exploitation-part-6-exploiting-an-uninitialized-stack-variable-vulnerability/) onde isso √© mostrado.

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe truques de hacking enviando PRs para os reposit√≥rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
{% endhint %}
