# Temel Ä°kili SÃ¶mÃ¼rÃ¼ Metodolojisi

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}

## ELF Temel Bilgiler

Herhangi bir ÅŸeyi sÃ¶mÃ¼rmeye baÅŸlamadan Ã¶nce, bir **ELF ikilisi** yapÄ±sÄ±nÄ±n bir kÄ±smÄ±nÄ± anlamak ilginÃ§tir:

{% content-ref url="elf-tricks.md" %}
[elf-tricks.md](elf-tricks.md)
{% endcontent-ref %}

## SÃ¶mÃ¼rÃ¼ AraÃ§larÄ±

{% content-ref url="tools/" %}
[tools](tools/)
{% endcontent-ref %}

## YÄ±ÄŸÄ±n TaÅŸmasÄ± Metodolojisi

Bu kadar Ã§ok teknikle, her tekniÄŸin ne zaman faydalÄ± olacaÄŸÄ±na dair bir ÅŸemaya sahip olmak iyidir. AynÄ± korumalarÄ±n farklÄ± teknikleri etkileyeceÄŸini unutmayÄ±n. Her koruma bÃ¶lÃ¼mÃ¼nde korumalarÄ± aÅŸmanÄ±n yollarÄ±nÄ± bulabilirsiniz, ancak bu metodolojide deÄŸil.

## AkÄ±ÅŸÄ± Kontrol Etme

Bir programÄ±n akÄ±ÅŸÄ±nÄ± kontrol etmenin farklÄ± yollarÄ± vardÄ±r:

* [**YÄ±ÄŸÄ±n TaÅŸmalarÄ±**](../stack-overflow/) yÄ±ÄŸÄ±ndan dÃ¶nÃ¼ÅŸ iÅŸaretÃ§isini veya EBP -> ESP -> EIP'yi yazma.
* TaÅŸmayÄ± saÄŸlamak iÃ§in bir [**Tam SayÄ± TaÅŸmasÄ±**](../integer-overflow.md) istismar etmeniz gerekebilir.
* Ya da **Rastgele Yazmalar + YazÄ±lacak Ne Nerede** ile.
* [**Format dizeleri**](../format-strings/)**:** `printf`'i istendiÄŸi gibi iÃ§erik yazmak iÃ§in istismar etme.
* [**Dizi Ä°ndeksleme**](../array-indexing.md): BazÄ± dizileri kontrol edebilmek ve rastgele yazma elde edebilmek iÃ§in kÃ¶tÃ¼ tasarlanmÄ±ÅŸ bir indekslemeyi istismar etme.
* TaÅŸmayÄ± saÄŸlamak iÃ§in bir [**Tam SayÄ± TaÅŸmasÄ±**](../integer-overflow.md) istismar etmeniz gerekebilir.
* **bof'dan WWW'ye ROP ile**: Bir tampon taÅŸmasÄ±nÄ± istismar ederek bir ROP oluÅŸturma ve WWW'ye ulaÅŸma.

**YazÄ±lacak Ne Nerede** tekniklerini bulabilirsiniz:

{% content-ref url="../arbitrary-write-2-exec/" %}
[arbitrary-write-2-exec](../arbitrary-write-2-exec/)
{% endcontent-ref %}

## Sonsuz DÃ¶ngÃ¼ler

Dikkate alÄ±nmasÄ± gereken bir ÅŸey, genellikle **bir zafiyetin yalnÄ±zca bir kez sÃ¶mÃ¼rÃ¼lmesinin yeterli olmayabileceÄŸidir**; Ã¶zellikle bazÄ± korumalarÄ±n aÅŸÄ±lmasÄ± gerekir. Bu nedenle, bir **tek zafiyeti aynÄ± ikilinin yÃ¼rÃ¼tÃ¼lmesi sÄ±rasÄ±nda birkaÃ§ kez sÃ¶mÃ¼rÃ¼lebilir hale getirmek** iÃ§in bazÄ± seÃ§enekleri tartÄ±ÅŸmak ilginÃ§tir:

* **`main` fonksiyonunun** adresini veya **zafiyetin** meydana geldiÄŸi adresi bir **ROP** zincirine yazÄ±n.
* Uygun bir ROP zincirini kontrol ederek, o zincirdeki tÃ¼m eylemleri gerÃ§ekleÅŸtirebilirsiniz.
* **`exit` adresini GOT'ta** (veya ikili tarafÄ±ndan bitirilmeden Ã¶nce kullanÄ±lan herhangi bir fonksiyonda) **zafiyete geri dÃ¶nmek iÃ§in** adresi yazÄ±n.
* [**.fini\_array**](../arbitrary-write-2-exec/www2exec-.dtors-and-.fini\_array.md#eternal-loop)**'de aÃ§Ä±klandÄ±ÄŸÄ± gibi**, burada zafiyeti tekrar Ã§aÄŸÄ±rmak iÃ§in bir fonksiyon ve **`__libc_csu_fini`** fonksiyonunu Ã§aÄŸÄ±rmak iÃ§in baÅŸka bir fonksiyon saklayÄ±n; bu da `.fini_array`'dan fonksiyonu tekrar Ã§aÄŸÄ±racaktÄ±r.

## SÃ¶mÃ¼rÃ¼ Hedefleri

### Hedef: Mevcut bir fonksiyonu Ã§aÄŸÄ±rmak

* [**ret2win**](./#ret2win): BayraÄŸÄ± almak iÃ§in Ã§aÄŸÄ±rmanÄ±z gereken (belki bazÄ± Ã¶zel parametrelerle) kodda bir fonksiyon var.
* [**PIE**](../common-binary-protections-and-bypasses/pie/) **ve** [**canary**](../common-binary-protections-and-bypasses/stack-canaries/) **olmayan** bir **normal bof'da**, yÄ±ÄŸÄ±nda saklanan dÃ¶nÃ¼ÅŸ adresine adresi yazmanÄ±z yeterlidir.
* [**PIE**](../common-binary-protections-and-bypasses/pie/) olan bir bof'da, bunu aÅŸmanÄ±z gerekecek.
* [**canary**](../common-binary-protections-and-bypasses/stack-canaries/) olan bir bof'da, bunu aÅŸmanÄ±z gerekecek.
* **ret2win** fonksiyonunu doÄŸru bir ÅŸekilde Ã§aÄŸÄ±rmak iÃ§in birkaÃ§ parametre ayarlamanÄ±z gerekiyorsa, ÅŸunlarÄ± kullanabilirsiniz:
* TÃ¼m parametreleri hazÄ±rlamak iÃ§in yeterli gadget varsa bir [**ROP**](./#rop-and-ret2...-techniques) **zinciri**.
* BirÃ§ok kaydÄ± kontrol etmek iÃ§in [**SROP**](../rop-return-oriented-programing/srop-sigreturn-oriented-programming/) (bu syscall'Ä± Ã§aÄŸÄ±rabiliyorsanÄ±z).
* BirÃ§ok kaydÄ± kontrol etmek iÃ§in [**ret2csu**](../rop-return-oriented-programing/ret2csu.md) ve [**ret2vdso**](../rop-return-oriented-programing/ret2vdso.md) gadget'larÄ±.
* [**YazÄ±lacak Ne Nerede**](../arbitrary-write-2-exec/) aracÄ±lÄ±ÄŸÄ±yla, **`win`** fonksiyonunu Ã§aÄŸÄ±rmak iÃ§in diÄŸer zafiyetleri (bof olmayan) istismar edebilirsiniz.
* [**Ä°ÅŸaretÃ§i YÃ¶nlendirme**](../stack-overflow/pointer-redirecting.md): YÄ±ÄŸÄ±n, Ã§aÄŸrÄ±lacak bir fonksiyona veya ilginÃ§ bir fonksiyon (system veya printf) tarafÄ±ndan kullanÄ±lacak bir dizeye iÅŸaretÃ§i iÃ§eriyorsa, o adresi yazmak mÃ¼mkÃ¼ndÃ¼r.
* [**ASLR**](../common-binary-protections-and-bypasses/aslr/) veya [**PIE**](../common-binary-protections-and-bypasses/pie/) adresleri etkileyebilir.
* [**BaÅŸlatÄ±lmamÄ±ÅŸ deÄŸiÅŸkenler**](../stack-overflow/uninitialized-variables.md): Asla bilemezsiniz.

### Hedef: RCE

#### Shellcode aracÄ±lÄ±ÄŸÄ±yla, eÄŸer nx devre dÄ±ÅŸÄ±ysa veya shellcode ile ROP'u karÄ±ÅŸtÄ±rarak:

* [**(YÄ±ÄŸÄ±n) Shellcode**](./#stack-shellcode): Bu, dÃ¶nÃ¼ÅŸ iÅŸaretÃ§isini yazmadan Ã¶nce veya sonra yÄ±ÄŸÄ±nda bir shellcode saklamak ve ardÄ±ndan **ona atlamak** iÃ§in yararlÄ±dÄ±r:
* Her durumda, eÄŸer bir [**canary**](../common-binary-protections-and-bypasses/stack-canaries/) **varsa**, normal bir bof'da bunu aÅŸmanÄ±z gerekecek (sÄ±zdÄ±rmak).
* [**ASLR**](../common-binary-protections-and-bypasses/aslr/) **ve** [**nx**](../common-binary-protections-and-bypasses/no-exec-nx.md) **olmadan**, yÄ±ÄŸÄ±n adresine atlamak mÃ¼mkÃ¼ndÃ¼r Ã§Ã¼nkÃ¼ asla deÄŸiÅŸmeyecektir.
* [**ASLR**](../common-binary-protections-and-bypasses/aslr/) ile, ona atlamak iÃ§in [**ret2esp/ret2reg**](../rop-return-oriented-programing/ret2esp-ret2reg.md) gibi tekniklere ihtiyacÄ±nÄ±z olacak.
* [**nx**](../common-binary-protections-and-bypasses/no-exec-nx.md) ile, bazÄ± [**ROP**](../rop-return-oriented-programing/) kullanarak **`memprotect`** Ã§aÄŸÄ±rmanÄ±z ve bazÄ± sayfalarÄ± `rwx` yapmanÄ±z gerekecek; bÃ¶ylece shellcode'u oraya **saklayabilir** (Ã¶rneÄŸin read Ã§aÄŸÄ±rarak) ve ardÄ±ndan oraya atlayabilirsiniz.
* Bu, shellcode ile bir ROP zincirini karÄ±ÅŸtÄ±racaktÄ±r.

#### Syscall'lar aracÄ±lÄ±ÄŸÄ±yla

* [**Ret2syscall**](../rop-return-oriented-programing/rop-syscall-execv/): Rastgele komutlarÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in `execve` Ã§aÄŸÄ±rmak iÃ§in yararlÄ±dÄ±r. **Belirli syscall'Ä± parametrelerle Ã§aÄŸÄ±rmak iÃ§in gadget'larÄ± bulabilmeniz gerekir.**
* [**ASLR**](../common-binary-protections-and-bypasses/aslr/) veya [**PIE**](../common-binary-protections-and-bypasses/pie/) etkinse, **ROP gadget'larÄ±nÄ±** kullanmak iÃ§in bunlarÄ± aÅŸmanÄ±z gerekecek.
* [**SROP**](../rop-return-oriented-programing/srop-sigreturn-oriented-programming/) **ret2execve**'yi hazÄ±rlamak iÃ§in yararlÄ± olabilir.
* BirÃ§ok kaydÄ± kontrol etmek iÃ§in [**ret2csu**](../rop-return-oriented-programing/ret2csu.md) ve [**ret2vdso**](../rop-return-oriented-programing/ret2vdso.md) gadget'larÄ±.

#### libc aracÄ±lÄ±ÄŸÄ±yla

* [**Ret2lib**](../rop-return-oriented-programing/ret2lib/): Genellikle **`libc`**'den bir fonksiyonu (Ã¶rneÄŸin **`system`** ile bazÄ± hazÄ±rlanan argÃ¼manlarla) Ã§aÄŸÄ±rmak iÃ§in yararlÄ±dÄ±r (Ã¶rneÄŸin `'/bin/sh'`). Ã‡aÄŸÄ±rmak istediÄŸiniz fonksiyonla birlikte **kÃ¼tÃ¼phaneyi yÃ¼klemek** iÃ§in ikiliyi **gerektirir** (genellikle libc).
* **Statik derlenmiÅŸ ve** [**PIE**](../common-binary-protections-and-bypasses/pie/) **yoksa**, `system` ve `/bin/sh`'nin **adresleri** deÄŸiÅŸmeyecek, bu nedenle bunlarÄ± statik olarak kullanmak mÃ¼mkÃ¼ndÃ¼r.
* [**ASLR**](../common-binary-protections-and-bypasses/aslr/) **olmadan ve yÃ¼klÃ¼ libc sÃ¼rÃ¼mÃ¼nÃ¼ bilerek**, `system` ve `/bin/sh`'nin **adresleri** deÄŸiÅŸmeyecek, bu nedenle bunlarÄ± statik olarak kullanmak mÃ¼mkÃ¼ndÃ¼r.
* [**ASLR**](../common-binary-protections-and-bypasses/aslr/) **var ama** [**PIE**](../common-binary-protections-and-bypasses/pie/) **yoksa**, libc'yi bilerek ve ikili `system` fonksiyonunu kullanÄ±yorsa, **GOT'taki system adresine** `'/bin/sh'` adresi ile **`ret`** yapmak mÃ¼mkÃ¼ndÃ¼r (bunu Ã§Ã¶zmeniz gerekecek).
* [**ASLR**](../common-binary-protections-and-bypasses/aslr/) **var ama** [**PIE**](../common-binary-protections-and-bypasses/pie/) **yoksa**, libc'yi bilerek ve **ikili `system` kullanmÄ±yorsanÄ±z**:
* [**`ret2dlresolve`**](../rop-return-oriented-programing/ret2dlresolve.md) kullanarak `system` adresini Ã§Ã¶zmek ve Ã§aÄŸÄ±rmak.
* [**ASLR**](../common-binary-protections-and-bypasses/aslr/) **aÅŸmak** ve `system` ve `'/bin/sh'` adreslerini bellek iÃ§inde hesaplamak.
* [**ASLR**](../common-binary-protections-and-bypasses/aslr/) **ve** [**PIE**](../common-binary-protections-and-bypasses/pie/) **ve libc'yi bilmeden**: ÅunlarÄ± yapmanÄ±z gerekir:
* [**PIE**](../common-binary-protections-and-bypasses/pie/) aÅŸmak.
* KullanÄ±lan **`libc` sÃ¼rÃ¼mÃ¼nÃ¼** bulmak (birkaÃ§ fonksiyon adresini sÄ±zdÄ±rmak).
* Devam etmek iÃ§in **ASLR ile Ã¶nceki senaryolarÄ±** kontrol etmek.

#### EBP/RBP aracÄ±lÄ±ÄŸÄ±yla

* [**YÄ±ÄŸÄ±n Pivotlama / EBP2Ret / EBP Zincirleme**](../stack-overflow/stack-pivoting-ebp2ret-ebp-chaining.md): YÄ±ÄŸÄ±n Ã¼zerindeki EBP'yi kontrol ederek RET'i kontrol etmek.
* **Birden fazla** yÄ±ÄŸÄ±n taÅŸmalarÄ±nda yararlÄ±dÄ±r.
* YÃ¼klemenin bellek iÃ§inde payload'u oluÅŸtururken EIP'i istismar ederek EIP'i kontrol etmenin alternatif bir yolu olarak yararlÄ±dÄ±r ve ardÄ±ndan EBP aracÄ±lÄ±ÄŸÄ±yla ona atlayabilirsiniz.

#### Ã‡eÅŸitli

* [**Ä°ÅŸaretÃ§i YÃ¶nlendirme**](../stack-overflow/pointer-redirecting.md): YÄ±ÄŸÄ±n, Ã§aÄŸrÄ±lacak bir fonksiyona veya ilginÃ§ bir fonksiyon (system veya printf) tarafÄ±ndan kullanÄ±lacak bir dizeye iÅŸaretÃ§i iÃ§eriyorsa, o adresi yazmak mÃ¼mkÃ¼ndÃ¼r.
* [**ASLR**](../common-binary-protections-and-bypasses/aslr/) veya [**PIE**](../common-binary-protections-and-bypasses/pie/) adresleri etkileyebilir.
* [**BaÅŸlatÄ±lmamÄ±ÅŸ deÄŸiÅŸkenler**](../stack-overflow/uninitialized-variables.md): Asla bilemezsiniz.

{% hint style="success" %}
AWS Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks EÄŸitim AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'i Ã¶ÄŸrenin ve pratik yapÄ±n: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks EÄŸitim GCP KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ± (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarÄ±nÄ±**](https://github.com/sponsors/carlospolop) kontrol edin!
* **ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n ya da **Twitter**'da **bizi takip edin** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuÃ§larÄ±nÄ± paylaÅŸmak iÃ§in** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gÃ¶nderin.

</details>
{% endhint %}
