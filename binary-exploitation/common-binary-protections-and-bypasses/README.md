# 一般的なバイナリエクスプロイテーション保護と回避方法

{% hint style="success" %}
AWSハッキングの学習と練習:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCPハッキングの学習と練習: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksのサポート</summary>

* [**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)をチェックしてください！
* 💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)に参加するか、[**telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**をフォロー**してください。
* **ハッキングトリックを共有するために、** [**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。

</details>
{% endhint %}

## コアファイルの有効化

**コアファイル**は、プロセスがクラッシュしたときにオペレーティングシステムによって生成されるファイルの一種です。これらのファイルは、クラッシュしたプロセスのメモリイメージ、レジスタ、プログラムカウンタの状態など、終了時のプロセスの詳細をキャプチャします。このスナップショットは、デバッグやクラッシュの原因を理解するために非常に貴重です。

### **コアダンプの生成を有効にする**

デフォルトでは、多くのシステムはコアファイルのサイズを0に制限しています（つまり、コアファイルを生成しません）が、ディスクスペースを節約するためです。コアファイルの生成を有効にするには、**`ulimit`**コマンド（bashや類似のシェルで）を使用するか、システム全体の設定を構成できます。

* **ulimitを使用する**: `ulimit -c unlimited`コマンドは、現在のシェルセッションが無制限のサイズのコアファイルを作成できるようにします。これはデバッグセッションに便利ですが、再起動や新しいセッションで永続的ではありません。
```bash
ulimit -c unlimited
```
* **永続的な構成**：より永続的な解決策として、`/etc/security/limits.conf` ファイルを編集して、`* soft core unlimited` のような行を追加することができます。これにより、すべてのユーザーがセッションで ulimit を手動で設定する必要なく、無制限のサイズのコアファイルを生成できます。
```markdown
* soft core unlimited
```
### **GDBを使用したコアファイルの解析**

コアファイルを解析するには、GDB（GNUデバッガー）のようなデバッグツールを使用できます。コアダンプを生成した実行可能ファイルがあり、コアファイルの名前が`core_file`であると仮定すると、次のように解析を開始できます:
```bash
gdb /path/to/executable /path/to/core_file
```
このコマンドは、実行可能ファイルとコアファイルをGDBに読み込み、クラッシュ発生時のプログラムの状態を調査することができます。GDBコマンドを使用してスタックを調査し、変数を調べ、クラッシュの原因を理解することができます。
