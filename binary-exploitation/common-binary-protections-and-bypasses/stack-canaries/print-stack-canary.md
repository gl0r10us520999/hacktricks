# Print Stack Canary

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Enlarge printed stack

ìŠ¤íƒ ì˜¤ë²„í”Œë¡œìš°ì— ì·¨ì•½í•œ **í”„ë¡œê·¸ë¨**ì´ **ìŠ¤íƒ ì˜¤ë²„í”Œë¡œìš°**ì˜ **ì¼ë¶€**ë¥¼ ê°€ë¦¬í‚¤ëŠ” **puts** í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ìƒí™©ì„ ìƒìƒí•´ ë³´ì‹­ì‹œì˜¤. ê³µê²©ìëŠ” **canaryì˜ ì²« ë²ˆì§¸ ë°”ì´íŠ¸ê°€ ë„ ë°”ì´íŠ¸**(`\x00`)ì´ê³  ë‚˜ë¨¸ì§€ canaryëŠ” **ë¬´ì‘ìœ„** ë°”ì´íŠ¸ë¼ëŠ” ê²ƒì„ ì•Œê³  ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ê³µê²©ìëŠ” **canaryì˜ ì²« ë²ˆì§¸ ë°”ì´íŠ¸**ê¹Œì§€ ìŠ¤íƒì„ **ë®ì–´ì“°ëŠ”** ì˜¤ë²„í”Œë¡œìš°ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ëŸ° ë‹¤ìŒ ê³µê²©ìëŠ” í˜ì´ë¡œë“œì˜ ì¤‘ê°„ì—ì„œ **puts ê¸°ëŠ¥**ì„ í˜¸ì¶œí•˜ì—¬ **canaryë¥¼ ëª¨ë‘ ì¶œë ¥**í•©ë‹ˆë‹¤(ì²« ë²ˆì§¸ ë„ ë°”ì´íŠ¸ ì œì™¸).

ì´ ì •ë³´ë¥¼ í†µí•´ ê³µê²©ìëŠ” **canaryë¥¼ ì•Œê³ ** ìƒˆë¡œìš´ ê³µê²©ì„ **êµ¬ì„±í•˜ê³  ì „ì†¡**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(ê°™ì€ í”„ë¡œê·¸ë¨ ì„¸ì…˜ ë‚´ì—ì„œ).

ëª…ë°±íˆ, ì´ ì „ìˆ ì€ ê³µê²©ìê°€ ìì‹ ì˜ **í˜ì´ë¡œë“œ**ì˜ **ë‚´ìš©**ì„ **ì¶œë ¥**í•˜ì—¬ **canaryë¥¼ ìœ ì¶œ**í•˜ê³ , ê·¸ëŸ° ë‹¤ìŒ **ìƒˆë¡œìš´ í˜ì´ë¡œë“œ**ë¥¼ ìƒì„±í•  ìˆ˜ ìˆì–´ì•¼ í•˜ë¯€ë¡œ ë§¤ìš° **ì œí•œì **ì…ë‹ˆë‹¤(ê°™ì€ í”„ë¡œê·¸ë¨ ì„¸ì…˜ ë‚´ì—ì„œ) ë° **ì‹¤ì œ ë²„í¼ ì˜¤ë²„í”Œë¡œìš°**ë¥¼ **ì „ì†¡**í•©ë‹ˆë‹¤.

**CTF ì˜ˆì‹œ:**&#x20;

* [**https://guyinatuxedo.github.io/08-bof\_dynamic/csawquals17\_svc/index.html**](https://guyinatuxedo.github.io/08-bof\_dynamic/csawquals17\_svc/index.html)
* 64ë¹„íŠ¸, ASLR í™œì„±í™”, PIE ì—†ìŒ, ì²« ë²ˆì§¸ ë‹¨ê³„ëŠ” canaryì˜ ë°”ì´íŠ¸ 0x00ê¹Œì§€ ì˜¤ë²„í”Œë¡œìš°ë¥¼ ì±„ìš´ ë‹¤ìŒ putsë¥¼ í˜¸ì¶œí•˜ì—¬ ìœ ì¶œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. canaryë¡œ ROP ê°€ì ¯ì„ ìƒì„±í•˜ì—¬ putsë¥¼ í˜¸ì¶œí•˜ì—¬ GOTì˜ puts ì£¼ì†Œë¥¼ ìœ ì¶œí•˜ê³ , `system('/bin/sh')`ë¥¼ í˜¸ì¶œí•˜ëŠ” ROP ê°€ì ¯ì„ ìƒì„±í•©ë‹ˆë‹¤.
* [**https://guyinatuxedo.github.io/14-ret\_2\_system/hxp18\_poorCanary/index.html**](https://guyinatuxedo.github.io/14-ret\_2\_system/hxp18\_poorCanary/index.html)
* 32ë¹„íŠ¸, ARM, relro ì—†ìŒ, canary, nx, pie ì—†ìŒ. canaryë¥¼ ìœ ì¶œí•˜ê¸° ìœ„í•´ putsë¥¼ í˜¸ì¶œí•˜ëŠ” ì˜¤ë²„í”Œë¡œìš° + ROP ì²´ì¸ì„ ì‚¬ìš©í•˜ì—¬ `system`ì„ í˜¸ì¶œí•˜ëŠ” ret2libë¡œ r0(ì¸ìˆ˜ `/bin/sh`)ì™€ pc(ì‹œìŠ¤í…œ ì£¼ì†Œ)ë¥¼ íŒí•©ë‹ˆë‹¤.

## Arbitrary Read

í˜•ì‹ **ë¬¸ìì—´**ì´ ì œê³µí•˜ëŠ” **ì„ì˜ ì½ê¸°**ë¥¼ í†µí•´ canaryë¥¼ ìœ ì¶œí•  ìˆ˜ ìˆì„ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤. ì´ ì˜ˆì œë¥¼ í™•ì¸í•˜ì‹­ì‹œì˜¤: [**https://ir0nstone.gitbook.io/notes/types/stack/canaries**](https://ir0nstone.gitbook.io/notes/types/stack/canaries) ë° ì„ì˜ì˜ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ì½ê¸° ìœ„í•´ í˜•ì‹ ë¬¸ìì—´ì„ ì•…ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="../../format-strings/" %}
[format-strings](../../format-strings/)
{% endcontent-ref %}

* [https://guyinatuxedo.github.io/14-ret\_2\_system/asis17\_marymorton/index.html](https://guyinatuxedo.github.io/14-ret\_2\_system/asis17\_marymorton/index.html)
* ì´ ë„ì „ ê³¼ì œëŠ” í˜•ì‹ ë¬¸ìì—´ì„ ë§¤ìš° ê°„ë‹¨í•˜ê²Œ ì•…ìš©í•˜ì—¬ ìŠ¤íƒì—ì„œ canaryë¥¼ ì½ìŠµë‹ˆë‹¤.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
