# CET & Shadow Stack

{% hint style="success" %}
Jifunze na zoezi la Udukuzi wa AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya AWS (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Jifunze na zoezi la Udukuzi wa GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya GCP (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
{% endhint %}

## Teknolojia ya Utekelezaji wa Mwelekeo wa Kudhibiti (CET)

**CET** ni kipengele cha usalama kilichotekelezwa kwenye kiwango cha vifaa, kimeundwa kuzuia mashambulizi ya kudhibiti mwelekeo kama vile **Return-Oriented Programming (ROP)** na **Jump-Oriented Programming (JOP)**. Aina hizi za mashambulizi hufanya mabadiliko kwenye mwelekeo wa utekelezaji wa programu ili kutekeleza msimbo mbaya au kuunganisha vipande vya msimbo mzuri kwa njia inayotekeleza kitendo cha uovu.

CET inaleta vipengele viwili kuu: **Indirect Branch Tracking (IBT)** na **Shadow Stack**.

* **IBT** inahakikisha kwamba kuruka na simu za moja kwa moja zinafanywa kwa malengo halali, ambayo yameainishwa wazi kama vituo halali vya matawi ya moja kwa moja. Hii inafikiwa kupitia matumizi ya seti mpya ya maagizo ambayo huiweka alama malengo halali, hivyo kuzuia wadukuzi kuelekeza mwelekeo wa kudhibiti kwenye maeneo yasiyo ya kawaida.
* **Shadow Stack** ni mbinu inayotoa usalama kwa anwani za kurudi. Inaendelea nakala iliyolindwa, iliyofichwa ya anwani za kurudi tofauti na rundo la simu la kawaida. Wakati kazi inaporudi, anwani ya kurudi inathibitishwa dhidi ya shadow stack, kuzuia wadukuzi kubadilisha anwani za kurudi kwenye rundo ili kudhibiti mwelekeo.

## Shadow Stack

**Shadow stack** ni **rundo maalum linalotumiwa pekee kwa kuhifadhi anwani za kurudi**. Inafanya kazi pamoja na rundo la kawaida lakini ni salama na iliyofichwa kutoka kwa utekelezaji wa kawaida wa programu, ikifanya iwe ngumu kwa wadukuzi kuingilia. Lengo kuu la shadow stack ni kuhakikisha kuwa mabadiliko yoyote kwenye anwani za kurudi kwenye rundo la kawaida yanagunduliwa kabla ya kutumiwa, ikipunguza kwa ufanisi mashambulizi ya ROP.

## Jinsi CET na Shadow Stack Wanazuia Mashambulizi

**Mashambulizi ya ROP na JOP** yanategemea uwezo wa kudhibiti mwelekeo wa programu kwa kutumia udhaifu unaowaruhusu kubadilisha pointa au anwani za kurudi kwenye rundo. Kwa kuongoza mwelekeo kwa vipande vya msimbo uliopo au vipande vya msimbo vinavyoendelea, wadukuzi wanaweza kutekeleza msimbo wowote.

* Sifa ya **IBT ya CET** inafanya mashambulizi haya kuwa magumu sana kwa kuhakikisha kwamba matawi ya moja kwa moja yanaweza kuruka tu kwenye anwani ambazo zimeainishwa wazi kama malengo halali. Hii inafanya iwe haiwezekani kwa wadukuzi kutekeleza vipande vya msimbo kwa njia ya kipekee kwenye faili.
* **Shadow stack**, kwa upande mwingine, inahakikisha kwamba hata kama muhusika anaweza kubadilisha anwani ya kurudi kwenye rundo la kawaida, **tofauti itagunduliwa** wakati wa kulinganisha anwani iliyoharibiwa na nakala salama iliyohifadhiwa kwenye shadow stack wakati wa kurudi kutoka kwa kazi. Ikiwa anwani hazilingani, programu inaweza kusitisha au kuchukua hatua za usalama zingine, kuzuia shambulio kufanikiwa.

{% hint style="success" %}
Jifunze na zoezi la Udukuzi wa AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya AWS (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Jifunze na zoezi la Udukuzi wa GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**Mafunzo ya HackTricks ya Mtaalam wa Timu Nyekundu ya GCP (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**Kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au kikundi cha [**telegram**](https://t.me/peass) au **tufuate** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za udukuzi kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repos za github.

</details>
{% endhint %}
