# рдореЗрдореЛрд░реА рдЯреИрдЧрд┐рдВрдЧ рдПрдХреНрд╕рдЯреЗрдВрд╢рди (MTE)

{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдкреНрд░реИрдХреНрдЯрд┐рд╕ рдХрд░реЗрдВ:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг AWS рд░реЗрдб рдЯреАрдо рдПрдХреНрд╕рдкрд░реНрдЯ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдкреНрд░реИрдХреНрдЯрд┐рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг GCP рд░реЗрдб рдЯреАрдо рдПрдХреНрд╕рдкрд░реНрдЯ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдВ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ!
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, PRs рд╕рдмрдорд┐рдЯ рдХрд░рдХреЗ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github рд░реЗрдкреЛ рдореЗрдВред

</details>
{% endhint %}

## рдореВрд▓ рдЬрд╛рдирдХрд╛рд░реА

**рдореЗрдореЛрд░реА рдЯреИрдЧрд┐рдВрдЧ рдПрдХреНрд╕рдЯреЗрдВрд╢рди (MTE)** рдпрд╣ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╕реНрдерд┐рд░рддрд╛ рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХреЛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдЬреЛ **рдореЗрдореЛрд░реА рд╕рдВрдмрдВрдзрд┐рдд рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдФрд░ рд░реЛрдХрдерд╛рдо рдХрд░рддрд╛ рд╣реИ**, рдЬреИрд╕реЗ рдХрд┐ рдмрдлрд░ рдУрд╡рд░рдлреНрд▓реЛ рдФрд░ рдпреВрдЬ-рдЕрдлреНрдЯрд░-рдлреНрд░реА рд╕реБрд░рдХреНрд╖рд╛рд╕рдВрдмрдВрдзреА рд╡рд┐рдХрд▓реНрдкред MTE, **ARM** рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реЛрдиреЗ рдХреЗ рдирд╛рддреЗ, рдкреНрд░рддреНрдпреЗрдХ рдореЗрдореЛрд░реА рдЖрд╡рдВрдЯрди рдХреЗ рд▓рд┐рдП рдПрдХ **рдЫреЛрдЯреЗ рдЯреИрдЧ рдХреЛ рд╕рдВрд▓рдЧреНрди рдХрд░рдиреЗ** рдФрд░ рдЙрд╕ рдореЗрдореЛрд░реА рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рддреНрдпреЗрдХ рдкреЙрдЗрдВрдЯрд░ рдХреЗ рд▓рд┐рдП рдПрдХ **рд╕рдВрдмрдВрдзрд┐рдд рдЯреИрдЧ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ** рдХреА рдПрдХ рдпреБрдХреНрддрд┐ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдЕрд╡реИрдз рдореЗрдореЛрд░реА рдкрд╣реБрдВрдЪ рдХреА рдкрд╣рдЪрд╛рди рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЬреЛ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХреА рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЛ рдХрд┐рд╕реА рднреА рдЕрд░реНрдмрд┐рдЯреНрд░реЗ рдХреЛрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрддреНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рдЬреЛрдЦрд┐рдо рдХреЛ рдХрдо рдХрд░рддрд╛ рд╣реИред

### **рдореЗрдореЛрд░реА рдЯреИрдЧрд┐рдВрдЧ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ**

MTE рджреНрд╡рд╛рд░рд╛ **рдореЗрдореЛрд░реА рдХреЛ рдЫреЛрдЯреЗ, рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдЖрдХрд╛рд░ рдХреЗ рдмреНрд▓реЙрдХ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдмреНрд▓реЙрдХ рдХреЛ рдПрдХ рдЯреИрдЧ рд╕реМрдВрдкрд╛ рдЬрд╛рддрд╛ рд╣реИ,** рдЖрдо рддреМрд░ рдкрд░ рдХреБрдЫ рдмрд┐рдЯ рдХрд╛ рдЖрдХрд╛рд░ред

рдЬрдм рдПрдХ рдкреЙрдЗрдВрдЯрд░ рдЙрд╕ рдореЗрдореЛрд░реА рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЙрд╕реЗ рд╡рд╣реА рдЯреИрдЧ рдорд┐рд▓рддрд╛ рд╣реИред рдпрд╣ рдЯреИрдЧ **рдореЗрдореЛрд░реА рдкреЙрдЗрдВрдЯрд░ рдХреЗ рдЕрдирдЙрдкрдпреЛрдЧрд┐рдд рдмрд┐рдЯреНрд╕ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрддрд╛ рд╣реИ**, рдкреНрд░рднрд╛рд╡реА рд░реВрдк рд╕реЗ рдкреЙрдЗрдВрдЯрд░ рдХреЛ рдЙрд╕рдХреЗ рд╕рдВрдмрдВрдзрд┐рдд рдореЗрдореЛрд░реА рдмреНрд▓реЙрдХ рд╕реЗ рдЬреЛрдбрд╝рддрд╛ рд╣реИред

<figure><img src="../../.gitbook/assets/image (1202).png" alt=""><figcaption><p><a href="https://www.youtube.com/watch?v=UwMt0e_dC_Q">https://www.youtube.com/watch?v=UwMt0e_dC_Q</a></p></figcaption></figure>

рдЬрдм рдПрдХ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдПрдХ рдкреЙрдЗрдВрдЯрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдореЗрдореЛрд░реА рддрдХ рдкрд╣реБрдВрдЪрддрд╛ рд╣реИ, рддреЛ MTE рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдпрд╣ рдЬрд╛рдВрдЪрддрд╛ рд╣реИ рдХрд┐ **рдкреЙрдЗрдВрдЯрд░ рдХрд╛ рдЯреИрдЧ рдореЗрдореЛрд░реА рдмреНрд▓реЙрдХ рдХреЗ рдЯреИрдЧ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИ**ред рдпрджрд┐ рдЯреИрдЧ **рдореЗрд▓ рдирд╣реАрдВ рдЦрд╛рддреЗ рд╣реИрдВ**, рддреЛ рдпрд╣ рдПрдХ **рдЕрд╡реИрдз рдореЗрдореЛрд░реА рдкрд╣реБрдВрдЪ** рдХреА рд╕реВрдЪрдирд╛ рджреЗрддрд╛ рд╣реИред

### MTE рдкреЙрдЗрдВрдЯрд░ рдЯреИрдЧ

рдкреЙрдЗрдВрдЯрд░ рдХреЗ рднреАрддрд░ рдЯреИрдЧ 4 рдмрд┐рдЯ рдореЗрдВ рд╢реАрд░реНрд╖ рдмрд╛рдЗрдЯ рдХреЗ рдЕрдВрджрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрддреЗ рд╣реИрдВ:

<figure><img src="../../.gitbook/assets/image (1203).png" alt=""><figcaption><p><a href="https://www.youtube.com/watch?v=UwMt0e_dC_Q">https://www.youtube.com/watch?v=UwMt0e_dC_Q</a></p></figcaption></figure>

рдЗрд╕рд▓рд┐рдП, рдЗрд╕рд╕реЗ **16 рд╡рд┐рднрд┐рдиреНрди рдЯреИрдЧ рдорд╛рди** рддрдХ рдХреА рдЕрдиреБрдорддрд┐ рд╣реЛрддреА рд╣реИред

### MTE рдореЗрдореЛрд░реА рдЯреИрдЧ

рдкреНрд░рддреНрдпреЗрдХ **16B рдлрд┐рдЬрд┐рдХрд▓ рдореЗрдореЛрд░реА** рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдВрдмрдВрдзрд┐рдд **рдореЗрдореЛрд░реА рдЯреИрдЧ** рд╣реЛрддрд╛ рд╣реИред

рдореЗрдореЛрд░реА рдЯреИрдЧ рдПрдХ **рд╡рд┐рд╢реЗрд╖рд┐рдд рд░реИрдо рдХреНрд╖реЗрддреНрд░** рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрддреЗ рд╣реИрдВ (рд╕рд╛рдорд╛рдиреНрдп рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдкрд╣реБрдВрдЪ рдирд╣реАрдВ рд╣реЛрддреА)ред рдкреНрд░рддреНрдпреЗрдХ 16B рдореЗрдореЛрд░реА рдЯреИрдЧ рдХреЗ рд▓рд┐рдП 4 рдмрд┐рдЯ рдЯреИрдЧ рддрдХ рд░реИрдо рдХрд╛ 3%ред

ARM рдЗрди рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЛ рдкреЗрд╢ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЗрди рдЯреИрдЧреЛрдВ рдХреЛ рд╡рд┐рд╢реЗрд╖рд┐рдд рд░реИрдо рдореЗрдореЛрд░реА рдореЗрдВ рд╕рдВрдЪрд╛рд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:
```
STG [<Xn/SP>], #<simm>    Store Allocation (memory) Tag
LDG <Xt>, [<Xn/SP>]       Load Allocatoin (memory) Tag
IRG <Xd/SP>, <Xn/SP>      Insert Random [pointer] Tag
...
```
## рдЬрд╛рдБрдЪ рдХрд░рдиреЗ рдХреЗ рдореЛрдб

### рд╕рд┐рдВрдХ

CPU **рдирд┐рд░реНрджреЗрд╢ рдХреЛ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рд┐рдд рдХрд░рддреЗ рд╕рдордп** рдЯреИрдЧ рдХреА рдЬрд╛рдБрдЪ рдХрд░рддрд╛ рд╣реИ, рдЕрдЧрд░ рдорд┐рд▓рд╛рди рдирд╣реАрдВ рд╣реИ, рддреЛ рдпрд╣ рдПрдХ рдЕрдкрд╡рд╛рдж рдЙрдард╛рддрд╛ рд╣реИред\
рдпрд╣ рд╕рдмрд╕реЗ рдзреАрдорд╛ рдФрд░ рд╕рдмрд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИред

### рдЕрд╕рд┐рдВрдХ

CPU рдЯреИрдЧ рдХреА рдЬрд╛рдБрдЪ **рдЕрд╕рд┐рдВрдХреНрд░реЛрдирд╕** рд░реВрдк рд╕реЗ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдЬрдм рдПрдХ рдорд┐рд▓рд╛рди рдЦреЛрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ рдпрд╣ рдПрдХ рдЕрдкрд╡рд╛рдж рдмрд┐рдЯ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ рдПрдХ рд╕рд┐рд╕реНрдЯрдо рд░рдЬрд┐рд╕реНрдЯрд░ рдореЗрдВред рдпрд╣ рдкрд┐рдЫрд▓реЗ рд╕реЗ **рддреЗрдЬ** рд╣реИ рд▓реЗрдХрд┐рди рдпрд╣ **рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛** рдХрд┐ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдирд┐рд░реНрджреЗрд╢ рдХрд┐рд╕рдХреЗ рдХрд╛рд░рдг рдорд┐рд▓рд╛рди рдХреЛ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИ рдФрд░ рдпрд╣ рддреБрд░рдВрдд рдЕрдкрд╡рд╛рдж рдЙрдард╛рддрд╛ рдирд╣реАрдВ рд╣реИ, рд╣рдорд▓рд╛рд╡рд░ рдХреЛ рдЕрдкрдирд╛ рд╣рдорд▓рд╛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рд╕рдордп рджреЗрддрд╛ рд╣реИред

### рдорд┐рд╢реНрд░рд┐рдд

???

## рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдФрд░ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреА рдЙрджрд╛рд╣рд░рдг

рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдЯреИрдЧ-рдЖрдзрд╛рд░рд┐рдд KASAN, MTE-рдЖрдзрд╛рд░рд┐рдд KASAN рдпрд╛ рдЗрди-рдХрд░реНрдиреЗрд▓ MTE рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред\
рдХрд░реНрдиреЗрд▓ рдЖрд╡рдВрдЯрдХ (рдЬреИрд╕реЗ `kmalloc`) рдЗрд╕ рдореЙрдбреНрдпреВрд▓ рдХреЛ **рдмреБрд▓рд╛рдПрдЧрд╛** рдЬреЛ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдЯреИрдЧ рддреИрдпрд╛рд░ рдХрд░реЗрдЧрд╛ (рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рд░реВрдк рд╕реЗ) рдФрд░ рдЗрд╕реЗ рдХрд░реНрдиреЗрд▓ рд╕реНрдкреЗрд╕ рдЖрд╡рдВрдЯрд┐рдд рдХрд░рдиреЗ рдФрд░ рд▓реМрдЯрд╛рдП рдЧрдП рдкреЙрдЗрдВрдЯрд░ рдкрд░ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдЧ рддреИрдпрд╛рд░ рдХрд░реЗрдЧрд╛ред

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрд╣ **рдХреЗрд╡рд▓ рдкрд░реНрдпрд╛рдкреНрдд рд╕реНрдореГрддрд┐ рдЧреНрд░реЗрдиреНрдпреВрд▓** (рдкреНрд░рддреНрдпреЗрдХ 16B) рдХреЛ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░реЗрдЧрд╛ рдЬрд┐рддрдирд╛ рдЕрдиреБрд░реЛрдзрд┐рдд рдЖрдХрд╛рд░ рдерд╛ред рдЗрд╕рд▓рд┐рдП рдпрджрд┐ рдЕрдиреБрд░реЛрдзрд┐рдд рдЖрдХрд╛рд░ 35 рдерд╛ рдФрд░ 60B рдХрд╛ рдПрдХ рд╕реНрд▓реИрдм рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рддреЛ рдпрд╣ рдкрд╣рд▓реЗ 16\*3 = 48B рдХреЛ рдЗрд╕ рдЯреИрдЧ рдХреЗ рд╕рд╛рде рдЪрд┐рд╣реНрдирд┐рдд рдХрд░реЗрдЧрд╛ рдФрд░ **рд╢реЗрд╖** рдХреЛ рдПрдХ рдРрд╕реЗ рдХрд╣рд▓рд╛рддреЗ рд╣реИрдВ **рдЕрдорд╛рдиреНрдп рдЯреИрдЧ (0xE)** рдХреЗ рд╕рд╛рде **рдЪрд┐рд╣реНрдирд┐рдд** рдХрд░реЗрдЧрд╛ред

рдЯреИрдЧ **0xF** рд╣реИ **рд╕рднреА рдкреЙрдЗрдВрдЯрд░ рдХрд╛ рдорд┐рд▓рд╛рди**ред рдЗрд╕ рдкреЙрдЗрдВрдЯрд░ рдХреЗ рд╕рд╛рде рдХрд┐рд╕реА рднреА рдЯреИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдЗрд╕рдХреА рд╕реНрдореГрддрд┐ (рдХреЛрдИ рдорд┐рд▓рд╛рди рдирд╣реАрдВ)ред рдпрджрд┐ рдЗрд╕ рдЯреИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рд╣реЛ рд░рд╣рд╛ рд╣реИ рддреЛ рдпрд╣ рд╣рдорд▓рд╛ рдбрд┐рдЯреЗрдХреНрдЯ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХ рд╕рдХрддрд╛ рд╣реИред

рдЗрд╕рд▓рд┐рдП рдХреЗрд╡рд▓ **14 рдореВрд▓реНрдп** рд╣реИрдВ рдЬреЛ рдЯреИрдЧ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдХреНрдпреЛрдВрдХрд┐ 0xE рдФрд░ 0xF рдЖрд░рдХреНрд╖рд┐рдд рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдЯреИрдЧ рдХреЛ **рдлрд┐рд░ рд╕реЗ рдЙрдкрдпреЛрдЧ** рдХрд░рдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ 1/17 -> рд▓рдЧрднрдЧ **7%** рд╣реИред

рдпрджрд┐ рдХрд░реНрдиреЗрд▓ **рдЕрдорд╛рдиреНрдп рдЯреИрдЧ рдЧреНрд░реЗрдиреНрдпреВрд▓** рддрдХ рдкрд╣реБрдВрдЪрддрд╛ рд╣реИ, рддреЛ **рдорд┐рд▓рд╛рди** рдХреЛ **рдбрд┐рдЯреЗрдХреНрдЯ** рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред рдпрджрд┐ рдпрд╣ рдХрд┐рд╕реА рдЕрдиреНрдп рд╕реНрдореГрддрд┐ рд╕реНрдерд╛рди рддрдХ рдкрд╣реБрдВрдЪрддрд╛ рд╣реИ, рдпрджрд┐ рд╕реНрдореГрддрд┐ рдореЗрдВ рдПрдХ рд╡рд┐рднрд┐рдиреНрди рдЯреИрдЧ (рдпрд╛ рдЕрдорд╛рдиреНрдп рдЯреИрдЧ) рд╣реИ рддреЛ рдорд┐рд▓рд╛рди рдХреЛ **рдбрд┐рдЯреЗрдХреНрдЯ** рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред рдпрджрд┐ рд╣рдорд▓рд╛рд╡рд░ рдХреЛ рднрд╛рдЧреНрдпрд╢рд╛рд▓реА рд╣реИ рдФрд░ рд╕реНрдореГрддрд┐ рдореЗрдВ рдПрдХ рд╣реА рдЯреИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рд╣реЛ рд░рд╣рд╛ рд╣реИ, рддреЛ рдпрд╣ рдбрд┐рдЯреЗрдХреНрдЯ рдирд╣реАрдВ рд╣реЛрдЧрд╛ред рдЕрд╡рд╕рд░ рд▓рдЧрднрдЧ 7% рд╣реИрдВред

рдПрдХ рдФрд░ рдмрдЧ рдЙрд╕ рд╕реНрдореГрддрд┐ рдХреЗ **рдЕрдВрддрд┐рдо рдЧреНрд░реЗрдиреНрдпреВрд▓** рдореЗрдВ рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдЖрд╡рдВрдЯрд┐рдд рд╕реНрдореГрддрд┐ рдХрд╛ рд╣реИред рдпрджрд┐ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдиреЗ 35B рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд┐рдпрд╛ рдерд╛, рддреЛ 32 рд╕реЗ 48 рддрдХ рдХрд╛ рдЧреНрд░реЗрдиреНрдпреВрд▓ рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред рдЗрд╕рд▓рд┐рдП, 36 рд╕реЗ 47 рддрдХ рдХреЗ рдмрд╛рдЗрдЯреНрд╕ рдПрдХ рд╣реА рдЯреИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ рд▓реЗрдХрд┐рди рдЙрдиреНрд╣реЗрдВ рдЕрдиреБрд░реЛрдз рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред рдпрджрд┐ рд╣рдорд▓рд╛рд╡рд░ **рдЗрди рдЕрддрд┐рд░рд┐рдХреНрдд рдмрд╛рдЗрдЯреНрд╕ рддрдХ рдкрд╣реБрдВрдЪрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдбрд┐рдЯреЗрдХреНрдЯ рдирд╣реАрдВ рд╣реЛрдЧрд╛**ред

рдЬрдм **`kfree()`** рдХреНрд░рд┐рдпрд╛рдиреНрд╡рд┐рдд рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╕реНрдореГрддрд┐ рдХреЛ рдЕрдорд╛рдиреНрдп рд╕реНрдореГрддрд┐ рдЯреИрдЧ рдХреЗ рд╕рд╛рде рдлрд┐рд░ рд╕реЗ рдЯреИрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдПрдХ **рдЙрдкрдпреЛрдЧ-рдХреЗ-рдмрд╛рдж-рдореБрдХреНрддрд┐** рдореЗрдВ, рдЬрдм рд╕реНрдореГрддрд┐ рдХреЛ рдлрд┐рд░ рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ **рдорд┐рд▓рд╛рди рдбрд┐рдЯреЗрдХреНрдЯ** рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

рд╣рд╛рд▓рд╛рдВрдХрд┐, рдПрдХ рдЙрдкрдпреЛрдЧ-рдХреЗ-рдмрд╛рдж-рдореБрдХреНрддрд┐ рдореЗрдВ, рдпрджрд┐ **рд╡рд╣реА рдЪрдВрдХ рдкреБрдирдГ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реИ рдФрд░ рдЙрд╕реА рдЯреИрдЧ рдХреЗ рд╕рд╛рде**, рддреЛ рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдЗрд╕ рдЙрдкрдпреЛрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХреЗрдЧрд╛ рдФрд░ рдпрд╣ рдбрд┐рдЯреЗрдХреНрдЯ рдирд╣реАрдВ рд╣реЛрдЧрд╛ (рд▓рдЧрднрдЧ 7% рдХреА рд╕рдВрднрд╛рд╡рдирд╛)ред

рдЗрд╕рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд, рдХреЗрд╡рд▓ **`slab` рдФрд░ `page_alloc`** рдЯреИрдЧ рдХреА рд╕реНрдореГрддрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рд▓реЗрдХрд┐рди рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ `vmalloc`, `stack` рдФрд░ `globals` рдореЗрдВ рднреА рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ (рд╡реАрдбрд┐рдпреЛ рдХреЗ рд╕рдордп рдпреЗ рдЕрднреА рднреА рджреБрд░реБрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ)ред

рдЬрдм рдПрдХ **рдорд┐рд▓рд╛рди рдбрд┐рдЯреЗрдХреНрдЯ** рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдХрд░реНрдиреЗрд▓ **рдкреИрдирд┐рдХ** рдХрд░реЗрдЧрд╛ рддрд╛рдХрд┐ рдЖрдЧреЗ рдХреА рд╢реЛрд╖рдг рдФрд░ рдЙрдкрдпреЛрдЧ рдХреЗ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕реЛрдВ рд╕реЗ рдмрдЪрд╛ рдЬрд╛ рд╕рдХреЗ (MTE рдореЗрдВ рдХреЛрдИ рдЧрд▓рдд рд╕рдХрд╛рд░рд╛рддреНрдордХ рдирд╣реАрдВ рд╣реИ)ред

## рд╕рдВрджрд░реНрдн

* [https://www.youtube.com/watch?v=UwMt0e\_dC\_Q](https://www.youtube.com/watch?v=UwMt0e\_dC\_Q)
