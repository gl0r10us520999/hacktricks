# Relro

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Relro

**RELRO** signifie **Relocation Read-Only**, et c'est une fonctionnalit√© de s√©curit√© utilis√©e dans les binaires pour att√©nuer les risques associ√©s aux **√©critures dans la table d'offset global (GOT)**. Il existe deux types de protections **RELRO** : (1) **RELRO partiel** et (2) **RELRO complet**. Tous deux r√©organisent la **GOT** et **BSS** des fichiers ELF, mais avec des r√©sultats et des implications diff√©rents. Plus pr√©cis√©ment, ils placent la section **GOT** *avant* la **BSS**. C'est-√†-dire que la **GOT** se trouve √† des adresses inf√©rieures √† celles de la **BSS**, rendant ainsi impossible l'√©crasement des entr√©es de la **GOT** en d√©bordant des variables dans la **BSS** (rappelez-vous que l'√©criture en m√©moire se fait des adresses les plus basses vers les plus √©lev√©es).

D√©composons le concept en ses deux types distincts pour plus de clart√©.

### **RELRO partiel**

**RELRO partiel** adopte une approche plus simple pour am√©liorer la s√©curit√© sans affecter significativement les performances du binaire. Le RELRO partiel rend **la .got en lecture seule (la partie non-PLT de la section GOT)**. Gardez √† l'esprit que le reste de la section (comme la .got.plt) est toujours modifiable et, par cons√©quent, sujet √† des attaques. Cela **ne pr√©vient pas l'abus de la GOT** √† partir de vuln√©rabilit√©s d'√©criture arbitraire.

Remarque : Par d√©faut, GCC compile les binaires avec RELRO partiel.

### **RELRO complet**

**RELRO complet** renforce la protection en **rendant l'ensemble de la GOT (√† la fois .got et .got.plt) et la section .fini\_array** compl√®tement **en lecture seule.** Une fois que le binaire d√©marre, toutes les adresses de fonction sont r√©solues et charg√©es dans la GOT, puis, la GOT est marqu√©e comme en lecture seule, emp√™chant effectivement toute modification pendant l'ex√©cution.

Cependant, le compromis avec le RELRO complet se situe en termes de performances et de temps de d√©marrage. Parce qu'il doit r√©soudre tous les symboles dynamiques au d√©marrage avant de marquer la GOT comme en lecture seule, **les binaires avec RELRO complet activ√© peuvent conna√Ætre des temps de chargement plus longs**. Ce surco√ªt suppl√©mentaire au d√©marrage est la raison pour laquelle le RELRO complet n'est pas activ√© par d√©faut dans tous les binaires.

Il est possible de voir si le RELRO complet est **activ√©** dans un binaire avec :
```bash
readelf -l /proc/ID_PROC/exe | grep BIND_NOW
```
## Bypass

Si Full RELRO est activ√©, la seule fa√ßon de le contourner est de trouver un autre moyen qui ne n√©cessite pas d'√©crire dans la table GOT pour obtenir une ex√©cution arbitraire.

Notez que **la GOT de LIBC est g√©n√©ralement en Partial RELRO**, donc elle peut √™tre modifi√©e avec une √©criture arbitraire. Plus d'informations dans [Targetting libc GOT entries](https://github.com/nobodyisnobody/docs/blob/main/code.execution.on.last.libc/README.md#1---targetting-libc-got-entries)**.**

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
