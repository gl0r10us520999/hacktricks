# Relro

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Relro

**RELRO** significa **Relocation Read-Only**, y es una caracter칤stica de seguridad utilizada en binarios para mitigar los riesgos asociados con los sobrescrituras de **GOT (Global Offset Table)**. Hay dos tipos de protecciones **RELRO**: (1) **Partial RELRO** y (2) **Full RELRO**. Ambos reordenan la **GOT** y **BSS** de los archivos ELF, pero con diferentes resultados e implicaciones. Espec칤ficamente, colocan la secci칩n **GOT** *antes* de la **BSS**. Es decir, **GOT** est치 en direcciones m치s bajas que **BSS**, lo que hace imposible sobrescribir las entradas de **GOT** al desbordar variables en la **BSS** (recuerda que escribir en memoria ocurre de direcciones m치s bajas a m치s altas).

Desglosemos el concepto en sus dos tipos distintos para mayor claridad.

### **Partial RELRO**

**Partial RELRO** adopta un enfoque m치s simple para mejorar la seguridad sin afectar significativamente el rendimiento del binario. Partial RELRO hace **que la .got sea de solo lectura (la parte no-PLT de la secci칩n GOT)**. Ten en cuenta que el resto de la secci칩n (como la .got.plt) sigue siendo escribible y, por lo tanto, es susceptible a ataques. Esto **no impide que la GOT** sea abusada **por vulnerabilidades de escritura arbitraria**.

Nota: Por defecto, GCC compila binarios con Partial RELRO.

### **Full RELRO**

**Full RELRO** aumenta la protecci칩n al **hacer que toda la GOT (tanto .got como .got.plt) y la secci칩n .fini\_array** sean completamente **de solo lectura.** Una vez que el binario se inicia, todas las direcciones de funci칩n se resuelven y se cargan en la GOT, luego, la GOT se marca como de solo lectura, lo que efectivamente previene cualquier modificaci칩n durante el tiempo de ejecuci칩n.

Sin embargo, la desventaja de Full RELRO est치 en t칠rminos de rendimiento y tiempo de inicio. Debido a que necesita resolver todos los s칤mbolos din치micos al inicio antes de marcar la GOT como de solo lectura, **los binarios con Full RELRO habilitado pueden experimentar tiempos de carga m치s largos**. Este costo adicional de inicio es la raz칩n por la cual Full RELRO no est치 habilitado por defecto en todos los binarios.

Es posible ver si Full RELRO est치 **habilitado** en un binario con:
```bash
readelf -l /proc/ID_PROC/exe | grep BIND_NOW
```
## Bypass

Si Full RELRO est치 habilitado, la 칰nica forma de eludirlo es encontrar otra manera que no necesite escribir en la tabla GOT para obtener ejecuci칩n arbitraria.

Ten en cuenta que **la GOT de LIBC es generalmente Partial RELRO**, por lo que puede ser modificada con una escritura arbitraria. M치s informaci칩n en [Targetting libc GOT entries](https://github.com/nobodyisnobody/docs/blob/main/code.execution.on.last.libc/README.md#1---targetting-libc-got-entries)**.**

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
