# PAM - Pluggable Authentication Modules

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}


### Basic Information

**PAM (Pluggable Authentication Modules)** –¥—ñ—î —è–∫ –º–µ—Ö–∞–Ω—ñ–∑–º –±–µ–∑–ø–µ–∫–∏, —è–∫–∏–π **–ø–µ—Ä–µ–≤—ñ—Ä—è—î –æ—Å–æ–±—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —è–∫—ñ –Ω–∞–º–∞–≥–∞—é—Ç—å—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –∫–æ–º–ø'—é—Ç–µ—Ä–Ω–∏—Ö –ø–æ—Å–ª—É–≥**, –∫–æ–Ω—Ç—Ä–æ–ª—é—é—á–∏ —ó—Ö –¥–æ—Å—Ç—É–ø –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ä—ñ–∑–Ω–∏—Ö –∫—Ä–∏—Ç–µ—Ä—ñ—ó–≤. –¶–µ —Å—Ö–æ–∂–µ –Ω–∞ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –æ—Ö–æ—Ä–æ–Ω—Ü—è, —è–∫–∏–π –∑–∞–±–µ–∑–ø–µ—á—É—î, —â–æ–± –ª–∏—à–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–æ–≥–ª–∏ –≤–∑–∞—î–º–æ–¥—ñ—è—Ç–∏ –∑ –ø–µ–≤–Ω–∏–º–∏ –ø–æ—Å–ª—É–≥–∞–º–∏, –ø—Ä–∏ —Ü—å–æ–º—É –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –æ–±–º–µ–∂—É—é—á–∏ —ó—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è, —â–æ–± –∑–∞–ø–æ–±—ñ–≥—Ç–∏ –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—é —Å–∏—Å—Ç–µ–º–∏.

#### Configuration Files

* **–°–∏—Å—Ç–µ–º–∏ Solaris —Ç–∞ UNIX** –∑–∞–∑–≤–∏—á–∞–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∏–π —Ñ–∞–π–ª, —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é `/etc/pam.conf`.
* **–°–∏—Å—Ç–µ–º–∏ Linux** –≤—ñ–¥–¥–∞—é—Ç—å –ø–µ—Ä–µ–≤–∞–≥—É –ø—ñ–¥—Ö–æ–¥—É –∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è–º–∏, –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –¥–ª—è –ø–æ—Å–ª—É–≥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –≤ `/etc/pam.d`. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∏–π —Ñ–∞–π–ª –¥–ª—è —Å–ª—É–∂–±–∏ –≤—Ö–æ–¥—É –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –∑–∞ –∞–¥—Ä–µ—Å–æ—é `/etc/pam.d/login`.

–ü—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó PAM –¥–ª—è —Å–ª—É–∂–±–∏ –≤—Ö–æ–¥—É –º–æ–∂–µ –≤–∏–≥–ª—è–¥–∞—Ç–∏ —Ç–∞–∫:
```
auth required /lib/security/pam_securetty.so
auth required /lib/security/pam_nologin.so
auth sufficient /lib/security/pam_ldap.so
auth required /lib/security/pam_unix_auth.so try_first_pass
account sufficient /lib/security/pam_ldap.so
account required /lib/security/pam_unix_acct.so
password required /lib/security/pam_cracklib.so
password required /lib/security/pam_ldap.so
password required /lib/security/pam_pwdb.so use_first_pass
session required /lib/security/pam_unix_session.so
```
#### **PAM Management Realms**

–¶—ñ –æ–±–ª–∞—Å—Ç—ñ, –∞–±–æ –≥—Ä—É–ø–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è, –≤–∫–ª—é—á–∞—é—Ç—å **auth**, **account**, **password** —Ç–∞ **session**, –∫–æ–∂–Ω–∞ –∑ —è–∫–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ —Ä—ñ–∑–Ω—ñ –∞—Å–ø–µ–∫—Ç–∏ –ø—Ä–æ—Ü–µ—Å—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Å—ñ—è–º–∏:

* **Auth**: –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –æ—Å–æ–±—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —á–∞—Å—Ç–æ –∑–∞–ø–∏—Ç—É—é—á–∏ –ø–∞—Ä–æ–ª—å.
* **Account**: –û–±—Ä–æ–±–ª—è—î –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É, –ø–µ—Ä–µ–≤—ñ—Ä—è—é—á–∏ —É–º–æ–≤–∏, —Ç–∞–∫—ñ —è–∫ —á–ª–µ–Ω—Å—Ç–≤–æ –≤ –≥—Ä—É–ø—ñ –∞–±–æ –æ–±–º–µ–∂–µ–Ω–Ω—è –∑–∞ —á–∞—Å–æ–º –¥–æ–±–∏.
* **Password**: –ö–µ—Ä—É—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º–∏ –ø–∞—Ä–æ–ª—ñ–≤, –≤–∫–ª—é—á–∞—é—á–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ –∞–±–æ –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –∞—Ç–∞–∫–∞–º —Å–ª–æ–≤–Ω–∏–∫–æ–º.
* **Session**: –ö–µ—Ä—É—î –¥—ñ—è–º–∏ –ø—ñ–¥ —á–∞—Å –ø–æ—á–∞—Ç–∫—É –∞–±–æ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è —Å–µ—Å—ñ—ó —Å–ª—É–∂–±–∏, —Ç–∞–∫–∏–º–∏ —è–∫ –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—è –∫–∞—Ç–∞–ª–æ–≥—ñ–≤ –∞–±–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–±–º–µ–∂–µ–Ω—å —Ä–µ—Å—É—Ä—Å—ñ–≤.

#### **PAM Module Controls**

–ö–æ–Ω—Ç—Ä–æ–ª—ñ –≤–∏–∑–Ω–∞—á–∞—é—Ç—å —Ä–µ–∞–∫—Ü—ñ—é –º–æ–¥—É–ª—è –Ω–∞ —É—Å–ø—ñ—Ö –∞–±–æ –Ω–µ–≤–¥–∞—á—É, –≤–ø–ª–∏–≤–∞—é—á–∏ –Ω–∞ –∑–∞–≥–∞–ª—å–Ω–∏–π –ø—Ä–æ—Ü–µ—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó. –î–æ –Ω–∏—Ö –≤—ñ–¥–Ω–æ—Å—è—Ç—å—Å—è:

* **Required**: –ù–µ–≤–¥–∞—á–∞ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –æ—Å—Ç–∞—Ç–æ—á–Ω–æ—ó –Ω–µ–≤–¥–∞—á—ñ, –∞–ª–µ –ª–∏—à–µ –ø—ñ—Å–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤—Å—ñ—Ö –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –º–æ–¥—É–ª—ñ–≤.
* **Requisite**: –ù–µ–≥–∞–π–Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É —É —Ä–∞–∑—ñ –Ω–µ–≤–¥–∞—á—ñ.
* **Sufficient**: –£—Å–ø—ñ—Ö –æ–±—Ö–æ–¥–∏—Ç—å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ä–µ—à—Ç–∏ –º–æ–¥—É–ª—ñ–≤ —Ç–æ–≥–æ –∂ —Ä—ñ–≤–Ω—è, —è–∫—â–æ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –º–æ–¥—É–ª—å –Ω–µ –∑–∞–∑–Ω–∞—î –Ω–µ–≤–¥–∞—á—ñ.
* **Optional**: –í–∏–∫–ª–∏–∫–∞—î –Ω–µ–≤–¥–∞—á—É –ª–∏—à–µ —è–∫—â–æ —Ü–µ —î–¥–∏–Ω–∏–π –º–æ–¥—É–ª—å —É —Å—Ç–µ–∫—É.

#### Example Scenario

–£ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—ñ –∑ –∫—ñ–ª—å–∫–æ–º–∞ –º–æ–¥—É–ª—è–º–∏ auth –ø—Ä–æ—Ü–µ—Å —Å–ª—ñ–¥—É—î —Å—Ç—Ä–æ–≥–æ–º—É –ø–æ—Ä—è–¥–∫—É. –Ø–∫—â–æ –º–æ–¥—É–ª—å `pam_securetty` –≤–∏—è–≤–ª—è—î, —â–æ —Ç–µ—Ä–º—ñ–Ω–∞–ª –≤—Ö–æ–¥—É –Ω–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω–∏–π, –≤—Ö—ñ–¥ –¥–ª—è root –±–ª–æ–∫—É—î—Ç—å—Å—è, –ø—Ä–æ—Ç–µ –≤—Å—ñ –º–æ–¥—É–ª—ñ –≤—Å–µ —â–µ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è —á–µ—Ä–µ–∑ –π–æ–≥–æ —Å—Ç–∞—Ç—É—Å "required". –ú–æ–¥—É–ª—å `pam_env` –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞, —â–æ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –¥–æ–ø–æ–º–∞–≥–∞—î –≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–æ–º—É –¥–æ—Å–≤—ñ–¥—ñ. –ú–æ–¥—É–ª—ñ `pam_ldap` —Ç–∞ `pam_unix` –ø—Ä–∞—Ü—é—é—Ç—å —Ä–∞–∑–æ–º –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –ø—Ä–∏—á–æ–º—É `pam_unix` –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ä–∞–Ω—ñ—à–µ –Ω–∞–¥–∞–Ω–∏–π –ø–∞—Ä–æ–ª—å, –ø—ñ–¥–≤–∏—â—É—é—á–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —ñ –≥–Ω—É—á–∫—ñ—Å—Ç—å –º–µ—Ç–æ–¥—ñ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó.

### References

* [https://hotpotato.tistory.com/434](https://hotpotato.tistory.com/434)


{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
