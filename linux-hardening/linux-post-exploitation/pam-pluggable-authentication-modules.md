# PAM - M√≥dulos de Autentica√ß√£o Pluggable

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe truques de hacking enviando PRs para o** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>
{% endhint %}


### Informa√ß√µes B√°sicas

**PAM (M√≥dulos de Autentica√ß√£o Pluggable)** atua como um mecanismo de seguran√ßa que **verifica a identidade dos usu√°rios que tentam acessar servi√ßos de computador**, controlando seu acesso com base em v√°rios crit√©rios. √â semelhante a um porteiro digital, garantindo que apenas usu√°rios autorizados possam interagir com servi√ßos espec√≠ficos, enquanto potencialmente limita seu uso para evitar sobrecargas no sistema.

#### Arquivos de Configura√ß√£o

* **Sistemas Solaris e baseados em UNIX** normalmente utilizam um arquivo de configura√ß√£o central localizado em `/etc/pam.conf`.
* **Sistemas Linux** preferem uma abordagem de diret√≥rio, armazenando configura√ß√µes espec√≠ficas de servi√ßos dentro de `/etc/pam.d`. Por exemplo, o arquivo de configura√ß√£o para o servi√ßo de login √© encontrado em `/etc/pam.d/login`.

Um exemplo de configura√ß√£o PAM para o servi√ßo de login pode parecer assim:
```
auth required /lib/security/pam_securetty.so
auth required /lib/security/pam_nologin.so
auth sufficient /lib/security/pam_ldap.so
auth required /lib/security/pam_unix_auth.so try_first_pass
account sufficient /lib/security/pam_ldap.so
account required /lib/security/pam_unix_acct.so
password required /lib/security/pam_cracklib.so
password required /lib/security/pam_ldap.so
password required /lib/security/pam_pwdb.so use_first_pass
session required /lib/security/pam_unix_session.so
```
#### **Reinos de Gerenciamento PAM**

Esses reinos, ou grupos de gerenciamento, incluem **auth**, **account**, **password** e **session**, cada um respons√°vel por diferentes aspectos do processo de autentica√ß√£o e gerenciamento de sess√£o:

* **Auth**: Valida a identidade do usu√°rio, frequentemente solicitando uma senha.
* **Account**: Trata da verifica√ß√£o da conta, checando condi√ß√µes como pertencimento a grupos ou restri√ß√µes de hor√°rio.
* **Password**: Gerencia atualiza√ß√µes de senha, incluindo verifica√ß√µes de complexidade ou preven√ß√£o contra ataques de dicion√°rio.
* **Session**: Gerencia a√ß√µes durante o in√≠cio ou o fim de uma sess√£o de servi√ßo, como montar diret√≥rios ou definir limites de recursos.

#### **Controles de M√≥dulo PAM**

Os controles ditam a resposta do m√≥dulo ao sucesso ou falha, influenciando o processo geral de autentica√ß√£o. Estes incluem:

* **Required**: A falha de um m√≥dulo requerido resulta em falha eventual, mas somente ap√≥s todos os m√≥dulos subsequentes serem verificados.
* **Requisite**: T√©rmino imediato do processo em caso de falha.
* **Sufficient**: O sucesso ignora as verifica√ß√µes do restante do mesmo reino, a menos que um m√≥dulo subsequente falhe.
* **Optional**: Causa falha apenas se for o √∫nico m√≥dulo na pilha.

#### Exemplo de Cen√°rio

Em uma configura√ß√£o com m√∫ltiplos m√≥dulos de auth, o processo segue uma ordem rigorosa. Se o m√≥dulo `pam_securetty` encontrar o terminal de login n√£o autorizado, logins de root s√£o bloqueados, mas todos os m√≥dulos ainda s√£o processados devido ao seu status de "required". O `pam_env` define vari√°veis de ambiente, potencialmente ajudando na experi√™ncia do usu√°rio. Os m√≥dulos `pam_ldap` e `pam_unix` trabalham juntos para autenticar o usu√°rio, com `pam_unix` tentando usar uma senha previamente fornecida, aumentando a efici√™ncia e flexibilidade nos m√©todos de autentica√ß√£o.

### Refer√™ncias

* [https://hotpotato.tistory.com/434](https://hotpotato.tistory.com/434)


{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
