# 88tcp/udp - Pentesting Kerberos

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Basic Information

**Kerberos** fonctionne sur un principe o√π il authentifie les utilisateurs sans g√©rer directement leur acc√®s aux ressources. C'est une distinction importante car elle souligne le r√¥le du protocole dans les cadres de s√©curit√©.

Dans des environnements comme **Active Directory**, **Kerberos** est essentiel pour √©tablir l'identit√© des utilisateurs en validant leurs mots de passe secrets. Ce processus garantit que l'identit√© de chaque utilisateur est confirm√©e avant qu'il n'interagisse avec les ressources r√©seau. Cependant, **Kerberos** n'√©tend pas sa fonctionnalit√© pour √©valuer ou appliquer les permissions qu'un utilisateur a sur des ressources ou services sp√©cifiques. Au lieu de cela, il fournit un moyen s√©curis√© d'authentifier les utilisateurs, ce qui est une √©tape critique dans le processus de s√©curit√©.

Apr√®s l'authentification par **Kerberos**, le processus de prise de d√©cision concernant l'acc√®s aux ressources est d√©l√©gu√© aux services individuels au sein du r√©seau. Ces services sont alors responsables d'√©valuer les droits et permissions de l'utilisateur authentifi√©, en fonction des informations fournies par **Kerberos** sur les privil√®ges de l'utilisateur. Ce design permet une s√©paration des pr√©occupations entre l'authentification de l'identit√© des utilisateurs et la gestion de leurs droits d'acc√®s, permettant une approche plus flexible et s√©curis√©e de la gestion des ressources dans des r√©seaux distribu√©s.

**Default Port:** 88/tcp/udp
```
PORT   STATE SERVICE
88/tcp open  kerberos-sec
```
### **Pour apprendre √† abuser de Kerberos, vous devriez lire le post sur** [**Active Directory**](../../windows-hardening/active-directory-methodology/)**.**

## Plus

### Shodan

* `port:88 kerberos`

### MS14-068

La faille MS14-068 permet √† un attaquant de manipuler le jeton de connexion Kerberos d'un utilisateur l√©gitime pour revendiquer faussement des privil√®ges √©lev√©s, comme √™tre un administrateur de domaine. Cette revendication contrefaite est erron√©ment valid√©e par le contr√¥leur de domaine, permettant un acc√®s non autoris√© aux ressources r√©seau √† travers la for√™t Active Directory.

{% embed url="https://adsecurity.org/?p=541" %}

Autres exploits : [https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS14-068/pykek](https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS14-068/pykek)

## HackTricks Commandes Automatiques
```
Protocol_Name: Kerberos    #Protocol Abbreviation if there is one.
Port_Number:  88   #Comma separated if there is more than one.
Protocol_Description: AD Domain Authentication         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for Kerberos
Note: |
Kerberos operates on a principle where it authenticates users without directly managing their access to resources. This is an important distinction because it underlines the protocol's role in security frameworks.
In environments like **Active Directory**, Kerberos is instrumental in establishing the identity of users by validating their secret passwords. This process ensures that each user's identity is confirmed before they interact with network resources. However, Kerberos does not extend its functionality to evaluate or enforce the permissions a user has over specific resources or services. Instead, it provides a secure way of authenticating users, which is a critical first step in the security process.

https://book.hacktricks.xyz/pentesting/pentesting-kerberos-88

Entry_2:
Name: Pre-Creds
Description: Brute Force to get Usernames
Command: nmap -p 88 --script=krb5-enum-users --script-args krb5-enum-users.realm="{Domain_Name}",userdb={Big_Userlist} {IP}

Entry_3:
Name: With Usernames
Description: Brute Force with Usernames and Passwords
Note: consider git clone https://github.com/ropnop/kerbrute.git ./kerbrute -h

Entry_4:
Name: With Creds
Description: Attempt to get a list of user service principal names
Command: GetUserSPNs.py -request -dc-ip {IP} active.htb/svc_tgs
```
{% hint style="success" %}
Apprenez et pratiquez le hacking AWS :<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**Formation HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Apprenez et pratiquez le hacking GCP : <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**Formation HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Soutenir HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop) !
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez-nous sur** **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Partagez des astuces de hacking en soumettant des PRs aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) d√©p√¥ts github.

</details>
{% endhint %}
