{% hint style="success" %}
AWSハッキングを学び、実践する：<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCPハッキングを学び、実践する：<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksをサポートする</summary>

* [**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)を確認してください！
* **💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**をフォローしてください。**
* **ハッキングのトリックを共有するには、[**HackTricks**](https://github.com/carlospolop/hacktricks)および[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。**

</details>
{% endhint %}


# 基本情報

[Wikipedia](https://en.wikipedia.org/wiki/Squid\_\(software\))から：

> **Squid**は、キャッシングおよび転送HTTPウェブプロキシです。繰り返しのリクエストをキャッシュすることによってウェブサーバーの速度を向上させたり、ネットワークリソースを共有する人々のグループのためにウェブ、DNSおよびその他のコンピュータネットワークのルックアップをキャッシュしたり、トラフィックをフィルタリングすることによってセキュリティを支援するなど、さまざまな用途があります。主にHTTPおよびFTPに使用されますが、SquidはInternet Gopher、SSL、TLSおよびHTTPSを含むいくつかの他のプロトコルに対しても限られたサポートを提供します。Squidは、Privoxyとは異なり、SOCKSプロトコルをサポートしていませんが、SOCKSサポートを提供するためにSquidと一緒に使用することができます。

**デフォルトポート：** 3128
```
PORT     STATE  SERVICE      VERSION
3128/tcp open   http-proxy   Squid http proxy 4.11
```
# 列挙

## ウェブプロキシ

この発見されたサービスをブラウザのプロキシとして設定してみることができます。ただし、HTTP認証が設定されている場合は、ユーザー名とパスワードの入力を求められます。
```bash
# Try to proxify curl
curl --proxy http://10.10.11.131:3128 http://10.10.11.131
```
## Nmap proxified

プロキシを悪用して**nmapをプロキシ化して内部ポートをスキャン**することもできます。\
proxychainsを設定して、proxichains.confファイルの最後に次の行を追加します: `http 10.10.10.10 3128`\
認証を必要とするプロキシの場合、設定の最後にユーザー名とパスワードを含めて資格情報を追加します: `http 10.10.10.10 3128 username passw0rd`。

次に、proxychainsを使用してnmapを実行し、**ローカルからホストをスキャン**します: `proxychains nmap -sT -n -p- localhost`

## SPOSE Scanner

代わりに、Squid Pivoting Open Port Scanner ([spose.py](https://github.com/aancw/spose))を使用できます。
```bash
python spose.py --proxy http://10.10.11.131:3128 --target 10.10.11.131
```
{% hint style="success" %}
AWSハッキングを学び、実践する：<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCPハッキングを学び、実践する：<img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksをサポートする</summary>

* [**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)を確認してください！
* **💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**をフォローしてください。**
* **ハッキングのトリックを共有するには、[**HackTricks**](https://github.com/carlospolop/hacktricks)と[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。**

</details>
{% endhint %}
