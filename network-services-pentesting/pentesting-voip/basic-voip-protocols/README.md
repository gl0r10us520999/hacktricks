# Basiese VoIP Protokolle

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kyk na die [**subskripsie planne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking truuks deur PRs in te dien na die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
{% endhint %}

## Seinprotokolle

### SIP (Session Initiation Protocol)

Dit is die industrie standaard, vir meer inligting kyk:

{% content-ref url="sip-session-initiation-protocol.md" %}
[sip-session-initiation-protocol.md](sip-session-initiation-protocol.md)
{% endcontent-ref %}

### MGCP (Media Gateway Control Protocol)

MGCP (Media Gateway Control Protocol) is 'n **sein** en **oproep** **beheerprotokol** soos uiteengesit in RFC 3435. Dit werk in 'n gesentraliseerde argitektuur, wat uit drie hoofkomponente bestaan:

1. **Oproepagent of Media Gateway Controller (MGC)**: Die meesterpoort in die MGCP-argitektuur is verantwoordelik vir **die bestuur en beheer van die media gateways**. Dit hanteer oproepopstelling, -wysiging en -be√´indigingsprosesse. Die MGC kommunikeer met die media gateways deur die MGCP-protokol.
2. **Media Gateways (MGs) of Slave Gateways**: Hierdie toestelle **verander digitale media-strome tussen verskillende netwerke**, soos tradisionele kringgeskakelde telekommunikasie en pakketskakelde IP-netwerke. Hulle word deur die MGC bestuur en voer opdragte uit wat van hom ontvang is. Media gateways kan funksies insluit soos transkodering, pakketering en echo-kansellasie.
3. **Sein Gateways (SGs)**: Hierdie gateways is verantwoordelik vir **die omskakeling van seinboodskappe tussen verskillende netwerke**, wat naatlose kommunikasie tussen tradisionele telekommunikasiestelsels (bv. SS7) en IP-gebaseerde netwerke (bv. SIP of H.323) moontlik maak. Sein gateways is van kardinale belang vir interoperabiliteit en verseker dat oproepbeheerinligting behoorlik tussen die verskillende netwerke gekommunikeer word.

In samevatting, MGCP sentraliseer die oproepbeheerlogika in die oproepagent, wat die bestuur van media en sein gateways vereenvoudig, wat beter skaalbaarheid, betroubaarheid en doeltreffendheid in telekommunikasienetwerke bied.

### SCCP (Skinny Client Control Protocol)

Skinny Client Control Protocol (SCCP) is 'n **eienaarskap sein- en oproepbeheerprotokol** wat aan Cisco Systems behoort. Dit word hoofsaaklik **gebruik** vir kommunikasie tussen **Cisco Unified Communications Manager** (voorheen bekend as CallManager) en Cisco IP telefone of ander Cisco stem- en video-eindpunte.

SCCP is 'n liggewig protokol wat die kommunikasie tussen die oproepbeheerbediener en die eindpunttoestelle vereenvoudig. Dit word "Skinny" genoem weens sy minimalistiese ontwerp en verminderde bandwydte vereistes in vergelyking met ander VoIP-protokolle soos H.323 of SIP.

Die hoofkomponente van 'n SCCP-gebaseerde stelsel is:

1. **Oproepbeheerbediener**: Hierdie bediener, tipies 'n Cisco Unified Communications Manager, bestuur die oproepopstelling, -wysiging en -be√´indigingsprosesse, sowel as ander telekommunikasiefunksies soos oproepdoorgifte, oproepoorplasing en oproephou.
2. **SCCP Eindpunte**: Dit is toestelle soos IP telefone, video-konferensie-eenhede, of ander Cisco stem- en video-eindpunte wat SCCP gebruik om met die oproepbeheerbediener te kommunikeer. Hulle registreer by die bediener, stuur en ontvang seinboodskappe, en volg die instruksies wat deur die oproepbeheerbediener vir oproephantering verskaf word.
3. **Gateways**: Hierdie toestelle, soos stemgateways of media gateways, is verantwoordelik vir die omskakeling van media-strome tussen verskillende netwerke, soos tradisionele kringgeskakelde telekommunikasie en pakketskakelde IP-netwerke. Hulle kan ook addisionele funksionaliteit insluit, soos transkodering of echo-kansellasie.

SCCP bied 'n eenvoudige en doeltreffende kommunikasie metode tussen Cisco oproepbeheerbedieners en eindpunttoestelle. Dit is egter die moeite werd om te noem dat **SCCP 'n eienaarskap protokol is**, wat interoperabiliteit met nie-Cisco stelsels kan beperk. In sulke gevalle kan ander standaard VoIP-protokolle soos SIP meer geskik wees.

### H.323

H.323 is 'n **suite van protokolle** vir multimedia kommunikasie, insluitend stem, video, en data konferensies oor pakketskakelde netwerke, soos IP-gebaseerde netwerke. Dit is ontwikkel deur die **Internasionale Telekommunikasie Unie** (ITU-T) en bied 'n omvattende raamwerk vir die bestuur van multimedia kommunikasiesessies.

Sommige sleutelkomponente van die H.323 suite sluit in:

1. **Terminals**: Dit is eindpunttoestelle, soos IP telefone, video-konferensiestelsels, of sagtewaretoepassings, wat H.323 ondersteun en kan deelneem aan multimedia kommunikasiesessies.
2. **Gateways**: Hierdie toestelle omskep media-strome tussen verskillende netwerke, soos tradisionele kringgeskakelde telekommunikasie en pakketskakelde IP-netwerke, wat interoperabiliteit tussen H.323 en ander kommunikasiesisteme moontlik maak. Hulle kan ook addisionele funksionaliteit insluit, soos transkodering of echo-kansellasie.
3. **Gatekeepers**: Dit is opsionele komponente wat oproepbeheer en bestuursdienste in 'n H.323 netwerk bied. Hulle voer funksies uit soos adresvertaling, bandwydtebestuur, en toelatingsbeheer, wat help om netwerkbronne te bestuur en te optimaliseer.
4. **Multipoint Control Units (MCUs)**: Hierdie toestelle fasiliteer multipoint konferensies deur media-strome van verskeie eindpunte te bestuur en te meng. MCUs stel funksies soos video-opstellingbeheer, stem-geaktiveerde skakeling, en deurlopende teenwoordigheid in staat, wat dit moontlik maak om groot skaal konferensies met verskeie deelnemers te hou.

H.323 ondersteun 'n reeks klank- en video-codecs, sowel as ander aanvullende dienste soos oproepdoorgifte, oproepoorplasing, oproephou, en oproepwag. Ten spyte van sy wye aanvaarding in die vroe√´ dae van VoIP, is H.323 geleidelik vervang deur meer moderne en buigsame protokolle soos die **Session Initiation Protocol (SIP)**, wat beter interoperabiliteit en makliker implementering bied. Nietemin bly H.323 in gebruik in baie erfenisstelsels en word dit steeds deur verskeie toerustingverkopers ondersteun.

### IAX (Inter Asterisk eXchange)

IAX (Inter-Asterisk eXchange) is 'n **sein- en oproepbeheerprotokol** wat hoofsaaklik gebruik word vir kommunikasie tussen Asterisk PBX (Private Branch Exchange) bedieners en ander VoIP toestelle. Dit is ontwikkel deur Mark Spencer, die skepper van die Asterisk oopbron PBX sagteware, as 'n alternatief vir ander VoIP-protokolle soos SIP en H.323.

IAX is bekend vir sy **simpliciteit, doeltreffendheid, en maklikheid van implementering**. Sommige sleutelkenmerke van IAX sluit in:

1. **Enkele UDP Poort**: IAX gebruik 'n enkele UDP-poort (4569) vir beide sein- en media-verkeer, wat firewall en NAT-oorgang vereenvoudig, wat dit makliker maak om in verskillende netwerkomgewings te implementeer.
2. **Binarie Protokol**: Anders as teksgebaseerde protokolle soos SIP, is IAX 'n binarie protokol, wat sy bandwydteverbruik verminder en dit doeltreffender maak vir die oordrag van sein- en mediadata.
3. **Trunking**: IAX ondersteun trunking, wat toelaat dat verskeie oproepe in 'n enkele netwerkverbinding gekombineer word, wat oorhoofse koste verminder en bandwydte benutting verbeter.
4. **Inheemse Enkripsie**: IAX het ingeboude ondersteuning vir enkripsie, wat metodes soos RSA vir sleuteluitruiling en AES vir media-enkripsie gebruik, wat veilige kommunikasie tussen eindpunte bied.
5. **Peer-to-Peer Kommunikasie**: IAX kan gebruik word vir direkte kommunikasie tussen eindpunte sonder die behoefte aan 'n sentrale bediener, wat eenvoudiger en doeltreffender oproeprouting moontlik maak.

Ten spyte van sy voordele, het IAX 'n paar beperkings, soos sy prim√™re fokus op die Asterisk-ekosisteem en minder wye aanvaarding in vergelyking met meer gevestigde protokolle soos SIP. As gevolg hiervan mag IAX nie die beste keuse wees vir interoperabiliteit met nie-Asterisk stelsels of toestelle nie. Nietemin bied IAX 'n robuuste en doeltreffende oplossing vir VoIP kommunikasie vir diegene wat binne die Asterisk-omgewing werk.

## Oordrag & Vervoer Protokolle

### SDP (Session Description Protocol)

SDP (Session Description Protocol) is 'n **teksgebaseerde formaat** wat gebruik word om die eienskappe van multimedia sessies te beskryf, soos stem, video, of data konferensies, oor IP-netwerke. Dit is ontwikkel deur die **Internet Engineering Task Force (IETF)** en is gedefinieer in **RFC 4566**. SDP hanteer nie die werklike media-oordrag of sessieopstelling nie, maar word in samewerking met ander seinprotokolle, soos **SIP (Session Initiation Protocol)**, gebruik om inligting oor die media-strome en hul eienskappe te onderhandel en uit te ruil.

Sommige sleutel elemente van SDP sluit in:

1. **Sessie-inligting**: SDP beskryf die besonderhede van 'n multimedia sessie, insluitend sessienaam, sessiebeskrywing, begin tyd, en eind tyd.
2. **Media-strome**: SDP definieer die eienskappe van media-strome, soos die mediatipe (klank, video, of teks), vervoersprotokol (bv. RTP of SRTP), en die mediaformaat (bv. kodekinligting).
3. **Verbindingsinligting**: SDP bied inligting oor die netwerkadres (IP-adres) en poortnommer waar die media gestuur of ontvang moet word.
4. **Attributen**: SDP ondersteun die gebruik van attributen om addisionele, opsionele inligting oor 'n sessie of media-stroom te verskaf. Attributen kan gebruik word om verskillende funksies soos enkripsiesleutels, bandwydtevereistes, of media-beheermeganismes spesifiek te maak.

SDP word tipies in die volgende proses gebruik:

1. 'n Inisierende party skep 'n SDP-beskrywing van die voorgestelde multimedia sessie, insluitend die besonderhede van die media-strome en hul eienskappe.
2. Die SDP-beskrywing word na die ontvangende party gestuur, gewoonlik ingebed binne 'n seinprotokol boodskap soos SIP of RTSP.
3. Die ontvangende party verwerk die SDP-beskrywing, en gebaseer op sy vermo√´ns, kan dit die voorgestelde sessie aanvaar, verwerp, of wysig.
4. Die finale SDP-beskrywing word teruggestuur na die inisierende party as deel van die seinprotokol boodskap, wat die onderhandelingsproses voltooi.

SDP se eenvoud en buigsaamheid maak dit 'n wye aanvaarde standaard vir die beskrywing van multimedia sessies in verskeie kommunikasiesisteme, wat 'n cruciale rol speel in die vestiging en bestuur van regstreekse multimedia sessies oor IP-netwerke.

### RTP / RTCP / SRTP / ZRTP

1. **RTP (Real-time Transport Protocol)**: RTP is 'n netwerkprotokol wat ontwerp is vir die aflewering van klank- en videodata, of ander regstreekse media, oor IP-netwerke. Ontwikkel deur die **IETF** en gedefinieer in **RFC 3550**, word RTP algemeen gebruik saam met seinprotokolle soos SIP en H.323 om multimedia kommunikasie moontlik te maak. RTP bied meganismes vir **synchronisasie**, **volgorde**, en **tydstempel** van media-strome, wat help om gladde en tydige media-afspeel te verseker.
2. **RTCP (Real-time Transport Control Protocol)**: RTCP is 'n metgeselprotokol van RTP, wat gebruik word om die kwaliteit van diens (QoS) te monitor en terugvoer te verskaf oor die oordrag van media-strome. Gedefinieer in dieselfde **RFC 3550** as RTP, **ruil RTCP periodiek kontrolepakkette tussen deelnemers in 'n RTP-sessie uit**. Dit deel inligting soos pakkieverlies, jitter, en rondreis tyd, wat help om netwerktoestande te diagnoseer en aan te pas, wat die algehele media kwaliteit verbeter.
3. **SRTP (Secure Real-time Transport Protocol)**: SRTP is 'n uitbreiding van RTP wat **enkripsie**, **boodskapverifikasie**, en **herhalingsbeskerming** vir media-strome bied, wat veilige oordrag van sensitiewe klank- en videodata verseker. Gedefinieer in **RFC 3711**, gebruik SRTP kriptografiese algoritmes soos AES vir enkripsie en HMAC-SHA1 vir boodskapverifikasie. SRTP word dikwels in kombinasie met veilige seinprotokolle soos SIP oor TLS gebruik om end-tot-end sekuriteit in multimedia kommunikasie te bied.
4. **ZRTP (Zimmermann Real-time Transport Protocol)**: ZRTP is 'n kriptografiese sleutel-ooreenkomsprotokol wat **end-tot-end enkripsie** vir RTP media-strome bied. Ontwikkel deur Phil Zimmermann, die skepper van PGP, word ZRTP beskryf in **RFC 6189**. Anders as SRTP, wat op seinprotokolle staatmaak vir sleuteluitruiling, is ZRTP ontwerp om onafhanklik van die seinprotokol te werk. Dit gebruik **Diffie-Hellman sleuteluitruiling** om 'n gedeelde geheim tussen die kommunikasiepartye te vestig, sonder om vooraf vertroue of 'n openbare sleutel infrastruktuur (PKI) te vereis. ZRTP sluit ook funksies in soos **Korte Verifikasiestrings (SAS)** om teen man-in-die-middel aanvalle te beskerm.

Hierdie protokolle speel noodsaaklike rolle in **die aflewering en beveiliging van regstreekse multimedia kommunikasie oor IP-netwerke**. Terwyl RTP en RTCP die werklike media-oordrag en kwaliteitmonitering hanteer, verseker SRTP en ZRTP dat die oorgedraagde media teen afluister, manipulasie, en herhalingsaanvalle beskerm word.

{% hint style="success" %}
Leer & oefen AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Leer & oefen GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Kyk na die [**subskripsie planne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord groep**](https://discord.gg/hRep4RUj7f) of die [**telegram groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacking truuks deur PRs in te dien na die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
</details>
{% endhint %}
