# Msingi wa Protokali za VoIP

{% hint style="success" %}
Jifunze na fanya mazoezi ya AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Jifunze na fanya mazoezi ya GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuatilie** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za hacking kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
{% endhint %}

## Protokali za Ishara

### SIP (Session Initiation Protocol)

Hii ni kiwango cha tasnia, kwa maelezo zaidi angalia:

{% content-ref url="sip-session-initiation-protocol.md" %}
[sip-session-initiation-protocol.md](sip-session-initiation-protocol.md)
{% endcontent-ref %}

### MGCP (Media Gateway Control Protocol)

MGCP (Media Gateway Control Protocol) ni **protokali ya ishara** na **udhibiti wa simu** iliyoainishwa katika RFC 3435. Inafanya kazi katika usanifu wa kati, ambao unajumuisha vipengele vitatu vikuu:

1. **Wakala wa Simu au Msimamizi wa Media Gateway (MGC)**: Lango kuu katika usanifu wa MGCP lina jukumu la **kusimamia na kudhibiti media gateways**. Linashughulikia mchakato wa kuanzisha simu, mabadiliko, na kumaliza. MGC inawasiliana na media gateways kwa kutumia protokali ya MGCP.
2. **Media Gateways (MGs) au Slave Gateways**: Vifaa hivi **vinabadilisha mitiririko ya media ya kidijitali kati ya mitandao tofauti**, kama vile simu za jadi za circuit-switched na mitandao ya IP ya packet-switched. Vinadhibitiwa na MGC na kutekeleza amri zinazopokelewa kutoka kwake. Media gateways zinaweza kujumuisha kazi kama vile transcoding, packetization, na echo cancellation.
3. **Signaling Gateways (SGs)**: Vifaa hivi vina jukumu la **kubadilisha ujumbe wa ishara kati ya mitandao tofauti**, kuwezesha mawasiliano yasiyo na mshono kati ya mifumo ya simu za jadi (mfano, SS7) na mitandao ya IP (mfano, SIP au H.323). Signaling gateways ni muhimu kwa ufanisi wa kazi pamoja na kuhakikisha kuwa taarifa za udhibiti wa simu zinawasilishwa ipasavyo kati ya mitandao tofauti.

Kwa muhtasari, MGCP inakusanya mantiki ya udhibiti wa simu katika wakala wa simu, ambayo inarahisisha usimamizi wa media na signaling gateways, ikitoa ufanisi bora, kuaminika, na ufanisi katika mitandao ya mawasiliano.

### SCCP (Skinny Client Control Protocol)

Skinny Client Control Protocol (SCCP) ni **protokali ya ishara na udhibiti wa simu** inayomilikiwa na Cisco Systems. Inatumika hasa kwa mawasiliano kati ya **Cisco Unified Communications Manager** (iliyokuwa inajulikana kama CallManager) na simu za Cisco IP au vifaa vingine vya sauti na video vya Cisco.

SCCP ni protokali nyepesi inayorahisisha mawasiliano kati ya seva ya udhibiti wa simu na vifaa vya mwisho. Inajulikana kama "Skinny" kwa sababu ya muundo wake wa chini na mahitaji madogo ya bandwidth ikilinganishwa na protokali nyingine za VoIP kama H.323 au SIP.

Vipengele vikuu vya mfumo unaotumia SCCP ni:

1. **Seva ya Udhibiti wa Simu**: Seva hii, kwa kawaida ni Cisco Unified Communications Manager, inasimamia mchakato wa kuanzisha simu, mabadiliko, na kumaliza, pamoja na huduma nyingine za simu kama vile kuhamasisha simu, uhamisho wa simu, na kushikilia simu.
2. **Vifaa vya SCCP**: Hivi ni vifaa kama simu za IP, vitengo vya video conferencing, au vifaa vingine vya sauti na video vya Cisco vinavyotumia SCCP kuwasiliana na seva ya udhibiti wa simu. Vinajiandikisha na seva, vinatuma na kupokea ujumbe wa ishara, na kufuata maelekezo yanayotolewa na seva ya udhibiti wa simu kwa ajili ya kushughulikia simu.
3. **Gateways**: Vifaa hivi, kama vile voice gateways au media gateways, vina jukumu la kubadilisha mitiririko ya media kati ya mitandao tofauti, kama vile simu za jadi za circuit-switched na mitandao ya IP ya packet-switched. Vinaweza pia kujumuisha kazi za ziada, kama vile transcoding au echo cancellation.

SCCP inatoa njia rahisi na yenye ufanisi ya mawasiliano kati ya seva za udhibiti wa simu za Cisco na vifaa vya mwisho. Hata hivyo, inapaswa kutambuliwa kuwa **SCCP ni protokali ya miliki**, ambayo inaweza kupunguza ufanisi wa kazi pamoja na mifumo isiyo ya Cisco. Katika hali kama hizo, protokali nyingine za kawaida za VoIP kama SIP zinaweza kuwa bora zaidi.

### H.323

H.323 ni **seti ya protokali** za mawasiliano ya multimedia, ikiwa ni pamoja na sauti, video, na mikutano ya data juu ya mitandao ya packet-switched, kama vile mitandao ya IP. Ilitengenezwa na **Shirika la Kimataifa la Mawasiliano** (ITU-T) na inatoa mfumo kamili wa kusimamia vikao vya mawasiliano ya multimedia.

Baadhi ya vipengele muhimu vya seti ya H.323 ni:

1. **Vituo**: Hivi ni vifaa vya mwisho, kama simu za IP, mifumo ya video conferencing, au programu za software, ambazo zinasaidia H.323 na zinaweza kushiriki katika vikao vya mawasiliano ya multimedia.
2. **Gateways**: Vifaa hivi vinabadilisha mitiririko ya media kati ya mitandao tofauti, kama vile simu za jadi za circuit-switched na mitandao ya IP ya packet-switched, kuwezesha ufanisi wa kazi kati ya H.323 na mifumo mingine ya mawasiliano. Vinaweza pia kujumuisha kazi za ziada, kama vile transcoding au echo cancellation.
3. **Gatekeepers**: Hivi ni vipengele vya hiari vinavyotoa huduma za udhibiti na usimamizi wa simu katika mtandao wa H.323. Vinatekeleza kazi kama vile tafsiri ya anwani, usimamizi wa bandwidth, na udhibiti wa kuingia, kusaidia kusimamia na kuboresha rasilimali za mtandao.
4. **Vitengo vya Udhibiti wa Muktadha (MCUs)**: Vifaa hivi vinasaidia mikutano ya muktadha kwa kusimamia na kuchanganya mitiririko ya media kutoka kwa vituo vingi. MCUs zinawezesha vipengele kama vile udhibiti wa mpangilio wa video, kubadilisha sauti kulingana na shughuli, na uwepo wa kudumu, na kufanya iwezekane kuandaa mikutano mikubwa yenye washiriki wengi.

H.323 inasaidia aina mbalimbali za codecs za sauti na video, pamoja na huduma nyingine za ziada kama vile kuhamasisha simu, uhamisho wa simu, kushikilia simu, na kusubiri simu. Licha ya kupokelewa kwake kwa wingi katika siku za mwanzo za VoIP, H.323 imekuwa ikibadilishwa taratibu na protokali za kisasa na zinazoweza kubadilika kama **Session Initiation Protocol (SIP)**, ambayo inatoa ufanisi bora wa kazi pamoja na urahisi wa utekelezaji. Hata hivyo, H.323 bado inatumika katika mifumo mingi ya zamani na inaendelea kuungwa mkono na wauzaji mbalimbali wa vifaa.

### IAX (Inter Asterisk eXchange)

IAX (Inter-Asterisk eXchange) ni **protokali ya ishara na udhibiti wa simu** inayotumika hasa kwa mawasiliano kati ya seva za Asterisk PBX (Private Branch Exchange) na vifaa vingine vya VoIP. Ilitengenezwa na Mark Spencer, muundaji wa programu ya Asterisk open-source PBX, kama mbadala wa protokali nyingine za VoIP kama SIP na H.323.

IAX inajulikana kwa **urahisi wake, ufanisi, na urahisi wa utekelezaji**. Baadhi ya vipengele muhimu vya IAX ni:

1. **Bandari Moja ya UDP**: IAX inatumia bandari moja ya UDP (4569) kwa ajili ya ishara na trafiki ya media, ambayo inarahisisha usalama wa moto na NAT, na kufanya iwe rahisi kuanzisha katika mazingira mbalimbali ya mtandao.
2. **Protokali ya Kihesabu**: Tofauti na protokali za maandiko kama SIP, IAX ni protokali ya kihesabu, ambayo inapunguza matumizi yake ya bandwidth na kuifanya iwe na ufanisi zaidi katika kutuma ishara na data za media.
3. **Trunking**: IAX inasaidia trunking, ambayo inaruhusu simu nyingi kuunganishwa katika muunganisho mmoja wa mtandao, kupunguza mzigo na kuboresha matumizi ya bandwidth.
4. **Ushirikiano wa Asili**: IAX ina msaada wa ndani wa ushirikiano, ikitumia mbinu kama RSA kwa ajili ya kubadilishana funguo na AES kwa ajili ya ushirikiano wa media, ikitoa mawasiliano salama kati ya vituo vya mwisho.
5. **Mawasiliano ya Mtu kwa Mtu**: IAX inaweza kutumika kwa mawasiliano ya moja kwa moja kati ya vituo vya mwisho bila haja ya seva kuu, kuwezesha urahisi na ufanisi zaidi katika uhamasishaji wa simu.

Licha ya faida zake, IAX ina baadhi ya mipaka, kama vile kuzingatia kwake hasa kwenye mfumo wa Asterisk na kupungua kwa kupitishwa ikilinganishwa na protokali zilizothibitishwa kama SIP. Kwa hivyo, IAX huenda isiwe chaguo bora kwa ufanisi wa kazi pamoja na mifumo au vifaa visivyo vya Asterisk. Hata hivyo, kwa wale wanaofanya kazi ndani ya mazingira ya Asterisk, IAX inatoa suluhisho thabiti na lenye ufanisi kwa mawasiliano ya VoIP.

## Protokali za Usafirishaji na Usafirishaji

### SDP (Session Description Protocol)

SDP (Session Description Protocol) ni **muundo wa maandiko** unaotumika kuelezea sifa za vikao vya multimedia, kama vile sauti, video, au mikutano ya data, juu ya mitandao ya IP. Ilitengenezwa na **Kikundi cha Uhandisi wa Mtandao (IETF)** na imeainishwa katika **RFC 4566**. SDP haisimamia usafirishaji halisi wa media au kuanzishwa kwa kikao lakini inatumika pamoja na protokali nyingine za ishara, kama **SIP (Session Initiation Protocol)**, ili kujadili na kubadilishana taarifa kuhusu mitiririko ya media na sifa zake.

Baadhi ya vipengele muhimu vya SDP ni:

1. **Taarifa za Kikao**: SDP inaelezea maelezo ya kikao cha multimedia, ikiwa ni pamoja na jina la kikao, maelezo ya kikao, wakati wa kuanza, na wakati wa kumaliza.
2. **Mitiririko ya Media**: SDP inaelezea sifa za mitiririko ya media, kama vile aina ya media (sauti, video, au maandiko), protokali ya usafirishaji (mfano, RTP au SRTP), na muundo wa media (mfano, taarifa za codec).
3. **Taarifa za Muunganisho**: SDP inatoa taarifa kuhusu anwani ya mtandao (anwani ya IP) na nambari ya bandari ambapo media inapaswa kutumwa au kupokelewa.
4. **Sifa**: SDP inasaidia matumizi ya sifa kutoa taarifa za ziada, za hiari kuhusu kikao au mitiririko ya media. Sifa zinaweza kutumika kwa ajili ya kubainisha vipengele mbalimbali kama funguo za ushirikiano, mahitaji ya bandwidth, au mitambo ya kudhibiti media.

SDP kwa kawaida inatumika katika mchakato ufuatao:

1. Sehemu inayozindua inaunda maelezo ya SDP ya kikao cha multimedia kinachopendekezwa, ikiwa ni pamoja na maelezo ya mitiririko ya media na sifa zake.
2. Maelezo ya SDP yanatumwa kwa upande unaopokea, kwa kawaida yakiwa ndani ya ujumbe wa protokali ya ishara kama SIP au RTSP.
3. Upande unaopokea unachakata maelezo ya SDP, na kulingana na uwezo wake, unaweza kukubali, kukataa, au kubadilisha kikao kilichopendekezwa.
4. Maelezo ya mwisho ya SDP yanatumwa nyuma kwa upande unaozindua kama sehemu ya ujumbe wa protokali ya ishara, kukamilisha mchakato wa majadiliano.

Urahisi na kubadilika kwa SDP kunafanya iwe kiwango kinachopokelewa kwa wingi katika kuelezea vikao vya multimedia katika mifumo mbalimbali ya mawasiliano, ikicheza jukumu muhimu katika kuanzisha na kusimamia vikao vya multimedia vya wakati halisi juu ya mitandao ya IP.

### RTP / RTCP / SRTP / ZRTP

1. **RTP (Real-time Transport Protocol)**: RTP ni protokali ya mtandao iliyoundwa kwa ajili ya usafirishaji wa data za sauti na video, au media nyingine za wakati halisi, juu ya mitandao ya IP. Ilitengenezwa na **IETF** na imeainishwa katika **RFC 3550**, RTP kwa kawaida hutumika pamoja na protokali za ishara kama SIP na H.323 kuwezesha mawasiliano ya multimedia. RTP inatoa mitambo ya **kuunganisha**, **kuweka mpangilio**, na **kuweka alama ya wakati** ya mitiririko ya media, kusaidia kuhakikisha upokeaji wa media kwa wakati na kwa usahihi.
2. **RTCP (Real-time Transport Control Protocol)**: RTCP ni protokali ya washirika kwa RTP, inayotumika kwa ajili ya kufuatilia ubora wa huduma (QoS) na kutoa mrejesho kuhusu usafirishaji wa mitiririko ya media. Imeainishwa katika **RFC 3550** kama RTP, RTCP **hubadilishana pakiti za udhibiti kati ya washiriki katika kikao cha RTP**. Inashiriki taarifa kama vile kupotea kwa pakiti, jitter, na wakati wa kurudi, ambayo husaidia katika kugundua na kubadilisha hali za mtandao, kuboresha ubora wa jumla wa media.
3. **SRTP (Secure Real-time Transport Protocol)**: SRTP ni nyongeza ya RTP inayotoa **usimbaji**, **uthibitishaji wa ujumbe**, na **ulinzi wa kurudi** kwa mitiririko ya media, kuhakikisha usafirishaji salama wa data nyeti za sauti na video. Imeainishwa katika **RFC 3711**, SRTP inatumia algorithimu za kihesabu kama AES kwa ajili ya usimbaji na HMAC-SHA1 kwa ajili ya uthibitishaji wa ujumbe. SRTP mara nyingi hutumiwa pamoja na protokali za ishara salama kama SIP juu ya TLS ili kutoa usalama wa mwisho hadi mwisho katika mawasiliano ya multimedia.
4. **ZRTP (Zimmermann Real-time Transport Protocol)**: ZRTP ni protokali ya makubaliano ya funguo ya kihesabu inayotoa **usimbaji wa mwisho hadi mwisho** kwa mitiririko ya media ya RTP. Ilitengenezwa na Phil Zimmermann, muundaji wa PGP, ZRTP inaelezwa katika **RFC 6189**. Tofauti na SRTP, ambayo inategemea protokali za ishara kwa ajili ya kubadilishana funguo, ZRTP imeundwa kufanya kazi bila kutegemea protokali ya ishara. Inatumia **kubadilishana funguo za Diffie-Hellman** kuanzisha siri ya pamoja kati ya pande zinazowasiliana, bila haja ya kuaminiana kabla au miundombinu ya funguo za umma (PKI). ZRTP pia inajumuisha vipengele kama **Mifumo ya Uthibitishaji wa Fupi (SAS)** ili kulinda dhidi ya mashambulizi ya mtu katikati.

Protokali hizi zina jukumu muhimu katika **kusafirisha na kulinda mawasiliano ya multimedia ya wakati halisi juu ya mitandao ya IP**. Wakati RTP na RTCP zinashughulikia usafirishaji halisi wa media na ufuatiliaji wa ubora, SRTP na ZRTP zinahakikisha kuwa media iliyosafirishwa inalindwa dhidi ya kusikiliza, kuingilia, na mashambulizi ya kurudi.

{% hint style="success" %}
Jifunze na fanya mazoezi ya AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Jifunze na fanya mazoezi ya GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Angalia [**mpango wa usajili**](https://github.com/sponsors/carlospolop)!
* **Jiunge na** üí¨ [**kikundi cha Discord**](https://discord.gg/hRep4RUj7f) au [**kikundi cha telegram**](https://t.me/peass) au **tufuatilie** kwenye **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Shiriki mbinu za hacking kwa kuwasilisha PRs kwa** [**HackTricks**](https://github.com/carlospolop/hacktricks) na [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
</details>
{% endhint %}
