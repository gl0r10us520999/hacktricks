# 4786 - Cisco Smart Install

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

<figure><img src="https://pentest.eu/RENDER_WebSec_10fps_21sec_9MB_29042024.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}

## Informa√ß√µes B√°sicas

**Cisco Smart Install** √© um recurso da Cisco projetado para automatizar a configura√ß√£o inicial e o carregamento de uma imagem do sistema operacional para novo hardware Cisco. **Por padr√£o, o Cisco Smart Install est√° ativo no hardware Cisco e usa o protocolo da camada de transporte, TCP, com o n√∫mero da porta 4786.**

**Porta padr√£o:** 4786
```
PORT      STATE  SERVICE
4786/tcp  open   smart-install
```
## **Ferramenta de Explora√ß√£o do Smart Install**

**Em 2018, uma vulnerabilidade cr√≠tica, CVE-2018‚Äì0171, foi encontrada neste protocolo. O n√≠vel de amea√ßa √© 9.8 na escala CVSS.**

**Um pacote especialmente elaborado enviado para a porta TCP/4786, onde o Cisco Smart Install est√° ativo, aciona um estouro de buffer, permitindo que um atacante:**

* reinicie for√ßosamente o dispositivo
* chame RCE
* roube configura√ß√µes de equipamentos de rede.

**A** [**SIET**](https://github.com/frostbits-security/SIET) **(Ferramenta de Explora√ß√£o do Smart Install)** foi desenvolvida para explorar essa vulnerabilidade, permitindo abusar do Cisco Smart Install. Neste artigo, mostrarei como voc√™ pode ler um arquivo de configura√ß√£o de hardware de rede leg√≠timo. A configura√ß√£o de exfiltra√ß√£o pode ser valiosa para um pentester, pois permitir√° aprender sobre as caracter√≠sticas √∫nicas da rede. E isso facilitar√° a vida e permitir√° encontrar novos vetores para um ataque.

**O dispositivo alvo ser√° um switch Cisco Catalyst 2960 ‚Äúao vivo‚Äù. Imagens virtuais n√£o t√™m Cisco Smart Install, ent√£o voc√™ s√≥ pode praticar no hardware real.**

O endere√ßo do switch alvo √© **10.10.100.10 e CSI est√° ativo.** Carregue o SIET e inicie o ataque. **O argumento -g** significa exfiltra√ß√£o da configura√ß√£o do dispositivo, **o argumento -i** permite que voc√™ defina o endere√ßo IP do alvo vulner√°vel.
```
~/opt/tools/SIET$ sudo python2 siet.py -g -i 10.10.100.10
```
<figure><img src="../.gitbook/assets/image (773).png" alt=""><figcaption></figcaption></figure>

A configura√ß√£o do switch **10.10.100.10** estar√° na pasta **tftp/**

<figure><img src="../.gitbook/assets/image (1116).png" alt=""><figcaption></figcaption></figure>

<figure><img src="https://pentest.eu/RENDER_WebSec_10fps_21sec_9MB_29042024.gif" alt=""><figcaption></figcaption></figure>

{% embed url="https://websec.nl/" %}

{% hint style="success" %}
Aprenda e pratique Hacking AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Aprenda e pratique Hacking GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Confira os [**planos de assinatura**](https://github.com/sponsors/carlospolop)!
* **Junte-se ao** üí¨ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga**-nos no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe truques de hacking enviando PRs para o** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>
{% endhint %}
