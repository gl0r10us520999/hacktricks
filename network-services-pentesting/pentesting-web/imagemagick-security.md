# ImageMagick Bezbednost

{% hint style="success" %}
U캜ite i ve쬭ajte AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
U캜ite i ve쬭ajte GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podr코ka HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakerske trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}

Proverite dodatne detalje na [**https://blog.doyensec.com/2023/01/10/imagemagick-security-policy-evaluator.html**](https://blog.doyensec.com/2023/01/10/imagemagick-security-policy-evaluator.html)

ImageMagick, svestrana biblioteka za obradu slika, predstavlja izazov u konfigurisanju svoje bezbednosne politike zbog svojih opse쬹ih opcija i nedostatka detaljne online dokumentacije. Korisnici 캜esto kreiraju politike na osnovu fragmentisanih internet izvora, 코to mo쬰 dovesti do potencijalnih pogre코nih konfiguracija. Biblioteka podr쬬va 코irok spektar od preko 100 formata slika, od kojih svaki doprinosi njenoj kompleksnosti i profilu ranjivosti, 코to su pokazali istorijski bezbednosni incidenti.

## Ka Bezbednijim Politikama
Kako bi se re코ili ovi izazovi, [razvijen je alat](https://imagemagick-secevaluator.doyensec.com/) koji poma쬰 u dizajniranju i reviziji bezbednosnih politika ImageMagick-a. Ovaj alat je zasnovan na opse쬹om istra쬴vanju i ima za cilj da osigura da politike budu ne samo robusne, ve캖 i bez rupa koje bi mogle biti iskori코캖ene.

## Pristup Dozvolama naspram Zabrana
Istorijski, politike ImageMagick su se oslanjale na pristup zabrana, gde su odre캠enim kodovima bio uskra캖en pristup. Me캠utim, promene u ImageMagick 6.9.7-7 su pomerile ovu paradigmu, omogu캖avaju캖i pristup dozvolama. Ovaj pristup prvo uskra캖uje pristup svim kodovima, a zatim selektivno dodeljuje pristup pouzdanim, 캜ime se pobolj코ava bezbednosna pozicija.
```xml
...
<policy domain="coder" rights="none" pattern="*" />
<policy domain="coder" rights="read | write" pattern="{GIF,JPEG,PNG,WEBP}" />
...
```
## Osjetljivost na velika i mala slova u politikama
Va쬹o je napomenuti da su obrasci politika u ImageMagick-u osjetljivi na velika i mala slova. Stoga je od su코tinskog zna캜aja osigurati da su kodovi i moduli pravilno napisani velikim slovima u politikama kako bi se spre캜ile nenamerne dozvole.

## Ograni캜enja resursa
ImageMagick je podlo쬬n napadima uskra캖ivanja usluga ako nije pravilno konfigurisan. Postavljanje eksplicitnih ograni캜enja resursa u politici je od su코tinskog zna캜aja za spre캜avanje takvih ranjivosti.

## Fragmentacija politika
Politike mogu biti fragmentirane kroz razli캜ite instalacije ImageMagick-a, 코to mo쬰 dovesti do potencijalnih sukoba ili preklapanja. Preporu캜uje se da se lociraju i verifikuju aktivne datoteke politika koriste캖i komande kao 코to su:
```shell
$ find / -iname policy.xml
```
## Po캜etna, Restriktivna Politika
Predlo쬰n je 코ablon restriktivne politike, fokusiraju캖i se na stroga ograni캜enja resursa i kontrole pristupa. Ovaj 코ablon slu쬴 kao osnovna ta캜ka za razvijanje prilago캠enih politika koje se uskla캠uju sa specifi캜nim zahtevima aplikacija.

Efikasnost bezbednosne politike mo쬰 se potvrditi kori코캖enjem komande `identify -list policy` u ImageMagick-u. Pored toga, [alat za evaluaciju](https://imagemagick-secevaluator.doyensec.com/) pomenut ranije mo쬰 se koristiti za usavr코avanje politike na osnovu individualnih potreba.

## Reference
* [https://blog.doyensec.com/2023/01/10/imagemagick-security-policy-evaluator.html**](https://blog.doyensec.com/2023/01/10/imagemagick-security-policy-evaluator.html)



{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 游눫 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
