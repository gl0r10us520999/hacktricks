# NextJS

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Next.js рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреА рд╕рд╛рдорд╛рдиреНрдп рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░

### рд╕рд╛рдорд╛рдиреНрдп рдлрд╝рд╛рдЗрд▓ рд╕рдВрд░рдЪрдирд╛

рдПрдХ рдорд╛рдирдХ Next.js рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдлрд╝рд╛рдЗрд▓ рдФрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рдкрд╛рд▓рди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЗрд╕рдХреЗ рдлреАрдЪрд░реНрд╕ рдЬреИрд╕реЗ рд░реВрдЯрд┐рдВрдЧ, API рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕, рдФрд░ рд╕реНрдереИрддрд┐рдХ рд╕рдВрдкрддреНрддрд┐ рдкреНрд░рдмрдВрдзрди рдХреЛ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдмрдирд╛рддрд╛ рд╣реИред рдпрд╣рд╛рдБ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рд▓реЗрдЖрдЙрдЯ рд╣реИ:
```lua
my-nextjs-app/
тФЬтФАтФА node_modules/
тФЬтФАтФА public/
тФВ   тФЬтФАтФА images/
тФВ   тФВ   тФФтФАтФА logo.png
тФВ   тФФтФАтФА favicon.ico
тФЬтФАтФА app/
тФВ   тФЬтФАтФА api/
тФВ   тФВ   тФФтФАтФА hello/
тФВ   тФВ       тФФтФАтФА route.ts
тФВ   тФЬтФАтФА layout.tsx
тФВ   тФЬтФАтФА page.tsx
тФВ   тФЬтФАтФА about/
тФВ   тФВ   тФФтФАтФА page.tsx
тФВ   тФЬтФАтФА dashboard/
тФВ   тФВ   тФЬтФАтФА layout.tsx
тФВ   тФВ   тФФтФАтФА page.tsx
тФВ   тФЬтФАтФА components/
тФВ   тФВ   тФЬтФАтФА Header.tsx
тФВ   тФВ   тФФтФАтФА Footer.tsx
тФВ   тФЬтФАтФА styles/
тФВ   тФВ   тФЬтФАтФА globals.css
тФВ   тФВ   тФФтФАтФА Home.module.css
тФВ   тФФтФАтФА utils/
тФВ       тФФтФАтФА api.ts
тФЬтФАтФА .env.local
тФЬтФАтФА next.config.js
тФЬтФАтФА tsconfig.json
тФЬтФАтФА package.json
тФЬтФАтФА README.md
тФФтФАтФА yarn.lock / package-lock.json

```
### Core Directories and Files

* **public/:** рд╕реНрдерд┐рд░ рд╕рдВрдкрддреНрддрд┐рдпреЛрдВ рдЬреИрд╕реЗ рдЫрд╡рд┐рдпреЛрдВ, рдлрд╝реЙрдиреНрдЯреЛрдВ рдФрд░ рдЕрдиреНрдп рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд░рддрд╛ рд╣реИред рдпрд╣рд╛рдБ рдХреА рдлрд╝рд╛рдЗрд▓реЗрдВ рд░реВрдЯ рдкрде (`/`) рдкрд░ рд╕реБрд▓рдн рд╣реИрдВред
* **app/:** рдЖрдкрдХреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рдкреГрд╖реНрдареЛрдВ, рд▓реЗрдЖрдЙрдЯ, рдШрдЯрдХреЛрдВ рдФрд░ API рдорд╛рд░реНрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдХреЗрдВрджреНрд░реАрдп рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ред **App Router** рдкреИрд░рд╛рдЬрд╛рдЗрдо рдХреЛ рдЕрдкрдирд╛рддрд╛ рд╣реИ, рдЬреЛ рдЙрдиреНрдирдд рд░реВрдЯрд┐рдВрдЧ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдФрд░ рд╕рд░реНрд╡рд░-рдХреНрд▓рд╛рдЗрдВрдЯ рдШрдЯрдХ рдкреГрдердХреНрдХрд░рдг рдХреЛ рд╕рдХреНрд╖рдо рдмрдирд╛рддрд╛ рд╣реИред
* **app/layout.tsx:** рдЖрдкрдХреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд▓рд┐рдП рд░реВрдЯ рд▓реЗрдЖрдЙрдЯ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ, рд╕рднреА рдкреГрд╖реНрдареЛрдВ рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рд▓рдкреЗрдЯрддрд╛ рд╣реИ рдФрд░ рд╣реЗрдбрд░, рдлреБрдЯрд░ рдФрд░ рдиреЗрд╡рд┐рдЧреЗрд╢рди рдмрд╛рд░ рдЬреИрд╕реЗ рд╕реБрд╕рдВрдЧрдд UI рддрддреНрд╡ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред
* **app/page.tsx:** рд░реВрдЯ рдорд╛рд░реНрдЧ `/` рдХреЗ рд▓рд┐рдП рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИ, рд╣реЛрдо рдкреГрд╖реНрда рдХреЛ рд░реЗрдВрдбрд░ рдХрд░рддрд╛ рд╣реИред
* **app/\[route]/page.tsx:** рд╕реНрдерд┐рд░ рдФрд░ рдЧрддрд┐рд╢реАрд▓ рдорд╛рд░реНрдЧреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИред `app/` рдХреЗ рднреАрддрд░ рдкреНрд░рддреНрдпреЗрдХ рдлрд╝реЛрд▓реНрдбрд░ рдПрдХ рдорд╛рд░реНрдЧ рдЦрдВрдб рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдЙрди рдлрд╝реЛрд▓реНрдбрд░реЛрдВ рдХреЗ рднреАрддрд░ `page.tsx` рдЙрд╕ рдорд╛рд░реНрдЧ рдХреЗ рдШрдЯрдХ рдХреЗ рдЕрдиреБрд░реВрдк рд╣реЛрддрд╛ рд╣реИред
* **app/api/:** API рдорд╛рд░реНрдЧреЛрдВ рдХреЛ рд╕рдорд╛рд╣рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЖрдк HTTP рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред рдпреЗ рдорд╛рд░реНрдЧ рдкрд╛рд░рдВрдкрд░рд┐рдХ `pages/api` рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВред
* **app/components/:** рдкреБрди: рдкреНрд░рдпреЛрдЬреНрдп React рдШрдЯрдХреЛрдВ рдХреЛ рд╕рдорд╛рд╣рд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рд╡рд┐рднрд┐рдиреНрди рдкреГрд╖реНрдареЛрдВ рдФрд░ рд▓реЗрдЖрдЙрдЯ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред
* **app/styles/:** рд╡реИрд╢реНрд╡рд┐рдХ CSS рдлрд╝рд╛рдЗрд▓реЗрдВ рдФрд░ рдШрдЯрдХ-рд╕реНрдХреЛрдкреНрдб рд╕реНрдЯрд╛рдЗрд▓рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП CSS рдореЙрдбреНрдпреВрд▓ рд╕рдорд╛рд╣рд┐рдд рдХрд░рддрд╛ рд╣реИред
* **app/utils/:** рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдлрд╝рдВрдХреНрд╢рди, рд╕рд╣рд╛рдпрдХ рдореЙрдбреНрдпреВрд▓ рдФрд░ рдЕрдиреНрдп рдЧреИрд░-UI рд▓реЙрдЬрд┐рдХ рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рд╕рд╛рдЭрд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред
* **.env.local:** рд╕реНрдерд╛рдиреАрдп рд╡рд┐рдХрд╛рд╕ рд╡рд╛рддрд╛рд╡рд░рдг рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИред рдпреЗ рдЪрд░ **рдирд╣реАрдВ** рд╕рдВрд╕реНрдХрд░рдг рдирд┐рдпрдВрддреНрд░рдг рдореЗрдВ рдкреНрд░рддрд┐рдмрджреНрдз рд╣реЛрддреЗ рд╣реИрдВред
* **next.config.js:** Next.js рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╡реЗрдмрдкреИрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди, рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред
* **tsconfig.json:** рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП TypeScript рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реИ, рдкреНрд░рдХрд╛рд░ рдЬрд╛рдВрдЪ рдФрд░ рдЕрдиреНрдп TypeScript рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рддрд╛ рд╣реИред
* **package.json:** рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреА рдирд┐рд░реНрднрд░рддрд╛рдУрдВ, рд╕реНрдХреНрд░рд┐рдкреНрдЯреЛрдВ рдФрд░ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рддрд╛ рд╣реИред
* **README.md:** рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХрд░рдг рдФрд░ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╕реЗрдЯрдЕрдк рдирд┐рд░реНрджреЗрд╢, рдЙрдкрдпреЛрдЧ рджрд┐рд╢рд╛рдирд┐рд░реНрджреЗрд╢ рдФрд░ рдЕрдиреНрдп рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рд╡рд┐рд╡рд░рдг рд╢рд╛рдорд┐рд▓ рд╣реИрдВред
* **yarn.lock / package-lock.json:** рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреА рдирд┐рд░реНрднрд░рддрд╛рдУрдВ рдХреЛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдкрд░ рд▓реЙрдХ рдХрд░рддрд╛ рд╣реИ, рд╡рд┐рднрд┐рдиреНрди рд╡рд╛рддрд╛рд╡рд░рдгреЛрдВ рдореЗрдВ рд╕реБрд╕рдВрдЧрдд рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИред

## Client-Side in Next.js

### File-Based Routing in the `app` Directory

`app` рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдирд╡реАрдирддрдо Next.js рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдореЗрдВ рд░реВрдЯрд┐рдВрдЧ рдХрд╛ рдЖрдзрд╛рд░ рд╣реИред рдпрд╣ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдорд╛рд░реНрдЧреЛрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдорд╛рд░реНрдЧ рдкреНрд░рдмрдВрдзрди рд╕рд╣рдЬ рдФрд░ рд╕реНрдХреЗрд▓реЗрдмрд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред

<details>

<summary>Handling the Root Path /</summary>

**File Structure:**
```arduino
my-nextjs-app/
тФЬтФАтФА app/
тФВ   тФЬтФАтФА layout.tsx
тФВ   тФФтФАтФА page.tsx
тФЬтФАтФА public/
тФЬтФАтФА next.config.js
тФФтФАтФА ...
```
**рдореБрдЦреНрдп рдлрд╝рд╛рдЗрд▓реЗрдВ:**

* **`app/page.tsx`**: рдореВрд▓ рдкрде `/` рдкрд░ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИред
* **`app/layout.tsx`**: рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд▓рд┐рдП рд▓реЗрдЖрдЙрдЯ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ, рд╕рднреА рдкреГрд╖реНрдареЛрдВ рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рд▓рдкреЗрдЯрддрд╛ рд╣реИред

**рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди:**
```tsx
tsxCopy code// app/page.tsx

export default function HomePage() {
return (
<div>
<h1>Welcome to the Home Page!</h1>
<p>This is the root route.</p>
</div>
);
}
```
**рд╡реНрдпрд╛рдЦреНрдпрд╛:**

* **рд░реВрдЯ рдкрд░рд┐рднрд╛рд╖рд╛:** `app` рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЗ рдареАрдХ рдиреАрдЪреЗ `page.tsx` рдлрд╝рд╛рдЗрд▓ `/` рд░реВрдЯ рдХреЗ рд▓рд┐рдП рд╣реИред
* **рд░реЗрдВрдбрд░рд┐рдВрдЧ:** рдпрд╣ рдШрдЯрдХ рд╣реЛрдо рдкреЗрдЬ рдХреЗ рд▓рд┐рдП рд╕рд╛рдордЧреНрд░реА рдХреЛ рд░реЗрдВрдбрд░ рдХрд░рддрд╛ рд╣реИред
* **рд▓реЗрдЖрдЙрдЯ рдПрдХреАрдХрд░рдг:** `HomePage` рдШрдЯрдХ `layout.tsx` рджреНрд╡рд╛рд░рд╛ рд▓рд┐рдкрдЯрд╛ рд╣реБрдЖ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╣реЗрдбрд░, рдлреВрдЯрд░ рдФрд░ рдЕрдиреНрдп рд╕рд╛рдорд╛рдиреНрдп рддрддреНрд╡ рд╢рд╛рдорд┐рд▓ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред

</details>

<details>

<summary>рдЕрдиреНрдп рд╕реНрдерд┐рд░ рдкрдереЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдирд╛</summary>



**рдЙрджрд╛рд╣рд░рдг: `/about` рд░реВрдЯ**

**рдлрд╝рд╛рдЗрд▓ рд╕рдВрд░рдЪрдирд╛:**
```arduino
arduinoCopy codemy-nextjs-app/
тФЬтФАтФА app/
тФВ   тФЬтФАтФА about/
тФВ   тФВ   тФФтФАтФА page.tsx
тФВ   тФЬтФАтФА layout.tsx
тФВ   тФФтФАтФА page.tsx
тФЬтФАтФА public/
тФЬтФАтФА next.config.js
тФФтФАтФА ...
```
**рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди:**
```tsx
// app/about/page.tsx

export default function AboutPage() {
return (
<div>
<h1>About Us</h1>
<p>Learn more about our mission and values.</p>
</div>
);
}
```
**рд╡реНрдпрд╛рдЦреНрдпрд╛:**

* **рд░реВрдЯ рдкрд░рд┐рднрд╛рд╖рд╛:** `about` рдлрд╝реЛрд▓реНрдбрд░ рдХреЗ рдЕрдВрджрд░ `page.tsx` рдлрд╝рд╛рдЗрд▓ `/about` рд░реВрдЯ рдХреЗ рд▓рд┐рдП рд╣реИред
* **рд░реЗрдВрдбрд░рд┐рдВрдЧ:** рдпрд╣ рдШрдЯрдХ рдЕрдмрд╛рдЙрдЯ рдкреГрд╖реНрда рдХреЗ рд▓рд┐рдП рд╕рд╛рдордЧреНрд░реА рдХреЛ рд░реЗрдВрдбрд░ рдХрд░рддрд╛ рд╣реИред

</details>

<details>

<summary>рдбрд╛рдпрдирд╛рдорд┐рдХ рд░реВрдЯреНрд╕</summary>

рдбрд╛рдпрдирд╛рдорд┐рдХ рд░реВрдЯреНрд╕ рд╡реЗрд░рд┐рдПрдмрд▓ рд╕реЗрдЧрдореЗрдВрдЯ рдХреЗ рд╕рд╛рде рдкрдереЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЖрдИрдбреА, рд╕реНрд▓рдЧ рдЖрджрд┐ рдЬреИрд╕реЗ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╕рд╛рдордЧреНрд░реА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

**рдЙрджрд╛рд╣рд░рдг: `/posts/[id]` рд░реВрдЯ**

**рдлрд╝рд╛рдЗрд▓ рд╕рдВрд░рдЪрдирд╛:**
```arduino
arduinoCopy codemy-nextjs-app/
тФЬтФАтФА app/
тФВ   тФЬтФАтФА posts/
тФВ   тФВ   тФФтФАтФА [id]/
тФВ   тФВ       тФФтФАтФА page.tsx
тФВ   тФЬтФАтФА layout.tsx
тФВ   тФФтФАтФА page.tsx
тФЬтФАтФА public/
тФЬтФАтФА next.config.js
тФФтФАтФА ...
```
**рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди:**
```tsx
tsxCopy code// app/posts/[id]/page.tsx

import { useRouter } from 'next/navigation';

interface PostProps {
params: { id: string };
}

export default function PostPage({ params }: PostProps) {
const { id } = params;
// Fetch post data based on 'id'

return (
<div>
<h1>Post #{id}</h1>
<p>This is the content of post {id}.</p>
</div>
);
}
```
**рд╡реНрдпрд╛рдЦреНрдпрд╛:**

* **рдбрд╛рдпрдирд╛рдорд┐рдХ рд╕реЗрдЧрдореЗрдВрдЯ:** `[id]` рдорд╛рд░реНрдЧ рдореЗрдВ рдПрдХ рдбрд╛рдпрдирд╛рдорд┐рдХ рд╕реЗрдЧрдореЗрдВрдЯ рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ, рдЬреЛ URL рд╕реЗ `id` рдкреИрд░рд╛рдореАрдЯрд░ рдХреЛ рдХреИрдкреНрдЪрд░ рдХрд░рддрд╛ рд╣реИред
* **рдкреИрд░рд╛рдореАрдЯрд░ рддрдХ рдкрд╣реБрдБрдЪ:** `params` рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ рдбрд╛рдпрдирд╛рдорд┐рдХ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реЛрддреЗ рд╣реИрдВ, рдЬреЛ рдХрдВрдкреЛрдиреЗрдВрдЯ рдХреЗ рднреАрддрд░ рдкрд╣реБрдБрдЪ рдпреЛрдЧреНрдп рд╣реЛрддреЗ рд╣реИрдВред
* **рдорд╛рд░реНрдЧ рдорд┐рд▓рд╛рди:** рдХреЛрдИ рднреА рдкрде рдЬреЛ `/posts/*` рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИ, рдЬреИрд╕реЗ `/posts/1`, `/posts/abc`, рдЖрджрд┐, рдЗрд╕ рдХрдВрдкреЛрдиреЗрдВрдЯ рджреНрд╡рд╛рд░рд╛ рд╕рдВрднрд╛рд▓рд╛ рдЬрд╛рдПрдЧрд╛ред

</details>

<details>

<summary>рдиреЗрд╕реНрдЯреЗрдб рд░реВрдЯреНрд╕</summary>



Next.js рдиреЗрд╕реНрдЯреЗрдб рд░реВрдЯрд┐рдВрдЧ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдкрджрд╛рдиреБрдХреНрд░рдорд┐рдд рдорд╛рд░реНрдЧ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдЬреЛ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд▓реЗрдЖрдЙрдЯ рдХреЛ рджрд░реНрд╢рд╛рддреА рд╣реИрдВред

**рдЙрджрд╛рд╣рд░рдг: `/dashboard/settings/profile` рдорд╛рд░реНрдЧ**

**рдлрд╛рдЗрд▓ рд╕рдВрд░рдЪрдирд╛:**
```arduino
arduinoCopy codemy-nextjs-app/
тФЬтФАтФА app/
тФВ   тФЬтФАтФА dashboard/
тФВ   тФВ   тФЬтФАтФА settings/
тФВ   тФВ   тФВ   тФФтФАтФА profile/
тФВ   тФВ   тФВ       тФФтФАтФА page.tsx
тФВ   тФВ   тФФтФАтФА page.tsx
тФВ   тФЬтФАтФА layout.tsx
тФВ   тФФтФАтФА page.tsx
тФЬтФАтФА public/
тФЬтФАтФА next.config.js
тФФтФАтФА ...
```
**рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди:**
```tsx
tsxCopy code// app/dashboard/settings/profile/page.tsx

export default function ProfileSettingsPage() {
return (
<div>
<h1>Profile Settings</h1>
<p>Manage your profile information here.</p>
</div>
);
}
```
**рд╡реНрдпрд╛рдЦреНрдпрд╛:**

* **рдЧрд╣рд░рд╛ рдиреЗрд╕реНрдЯрд┐рдВрдЧ:** `dashboard/settings/profile/` рдХреЗ рдЕрдВрджрд░ `page.tsx` рдлрд╝рд╛рдЗрд▓ `/dashboard/settings/profile` рд░реВрдЯ рдХреЗ рдЕрдиреБрд░реВрдк рд╣реИред
* **рд╣рд╛рдпрд░рд╛рд░реНрдХреА рдкрд░рд╛рд╡рд░реНрддрди:** рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕рдВрд░рдЪрдирд╛ URL рдкрде рдХреЛ рджрд░реНрд╢рд╛рддреА рд╣реИ, рд░рдЦрд░рдЦрд╛рд╡ рдФрд░ рд╕реНрдкрд╖реНрдЯрддрд╛ рдХреЛ рдмрдврд╝рд╛рддреА рд╣реИред

</details>

<details>

<summary>рдХреИрдЪ-рдСрд▓ рд░реВрдЯреНрд╕</summary>

рдХреИрдЪ-рдСрд▓ рд░реВрдЯреНрд╕ рдХрдИ рдиреЗрд╕реНрдЯреЗрдб рд╕реЗрдЧрдореЗрдВрдЯ рдпрд╛ рдЕрдЬреНрдЮрд╛рдд рдкрдереЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рддреЗ рд╣реИрдВ, рд░реВрдЯ рд╣реИрдВрдбрд▓рд┐рдВрдЧ рдореЗрдВ рд▓рдЪреАрд▓рд╛рдкрди рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред

**рдЙрджрд╛рд╣рд░рдг: `/*` рд░реВрдЯ**

**рдлрд╝рд╛рдЗрд▓ рд╕рдВрд░рдЪрдирд╛:**
```arduino
my-nextjs-app/
тФЬтФАтФА app/
тФВ   тФЬтФАтФА [..slug]/
тФВ   тФВ   тФФтФАтФА page.tsx
тФВ   тФЬтФАтФА layout.tsx
тФВ   тФФтФАтФА page.tsx
тФЬтФАтФА public/
тФЬтФАтФА next.config.js
тФФтФАтФА ...
```
**рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди:**
```tsx
// app/[...slug]/page.tsx

interface CatchAllProps {
params: { slug: string[] };
}

export default function CatchAllPage({ params }: CatchAllProps) {
const { slug } = params;
const fullPath = `/${slug.join('/')}`;

return (
<div>
<h1>Catch-All Route</h1>
<p>You have navigated to: {fullPath}</p>
</div>
);
}
```
**рд╡реНрдпрд╛рдЦреНрдпрд╛:**

* **рдХреИрдЪ-рдСрд▓ рдЦрдВрдб:** `[...slug]` рд╕рднреА рд╢реЗрд╖ рдкрде рдЦрдВрдбреЛрдВ рдХреЛ рдПрдХ рд╕рд░рдгреА рдХреЗ рд░реВрдк рдореЗрдВ рдХреИрдкреНрдЪрд░ рдХрд░рддрд╛ рд╣реИред
* **рдЙрдкрдпреЛрдЧ:** рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛-рдЬрдирд┐рдд рдкрде, рдиреЗрд╕реНрдЯреЗрдб рд╢реНрд░реЗрдгрд┐рдпреЛрдВ рдЖрджрд┐ рдЬреИрд╕реЗ рдЧрддрд┐рд╢реАрд▓ рд░реВрдЯрд┐рдВрдЧ рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреАред
* **рд░реВрдЯ рдорд┐рд▓рд╛рди:** `/anything/here`, `/foo/bar/baz` рдЬреИрд╕реЗ рдкрде рдЗрд╕ рдШрдЯрдХ рджреНрд╡рд╛рд░рд╛ рд╕рдВрднрд╛рд▓реЗ рдЬрд╛рддреЗ рд╣реИрдВред

</details>

### рд╕рдВрднрд╛рд╡рд┐рдд рдХреНрд▓рд╛рдЗрдВрдЯ-рд╕рд╛рдЗрдб рдХрдордЬреЛрд░рд┐рдпрд╛рдБ

рд╣рд╛рд▓рд╛рдВрдХрд┐ Next.js рдПрдХ рд╕реБрд░рдХреНрд╖рд┐рдд рдЖрдзрд╛рд░ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЧрд▓рдд рдХреЛрдбрд┐рдВрдЧ рдкреНрд░рдерд╛рдПрдБ рдХрдордЬреЛрд░рд┐рдпреЛрдВ рдХреЛ рдкреЗрд╢ рдХрд░ рд╕рдХрддреА рд╣реИрдВред рдкреНрд░рдореБрдЦ рдХреНрд▓рд╛рдЗрдВрдЯ-рд╕рд╛рдЗрдб рдХрдордЬреЛрд░рд┐рдпреЛрдВ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ:

<details>

<summary>рдХреНрд░реЙрд╕-рд╕рд╛рдЗрдЯ рд╕реНрдХреНрд░рд┐рдкреНрдЯрд┐рдВрдЧ (XSS)</summary>

XSS рд╣рдорд▓реЗ рддрдм рд╣реЛрддреЗ рд╣реИрдВ рдЬрдм рджреБрд░реНрднрд╛рд╡рдирд╛рдкреВрд░реНрдг рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд╡реЗрдмрд╕рд╛рдЗрдЯреЛрдВ рдореЗрдВ рдЗрдВрдЬреЗрдХреНрдЯ рдХреА рдЬрд╛рддреА рд╣реИрдВред рд╣рдорд▓рд╛рд╡рд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдмреНрд░рд╛рдЙрдЬрд╝рд░реЛрдВ рдореЗрдВ рд╕реНрдХреНрд░рд┐рдкреНрдЯреНрд╕ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдбреЗрдЯрд╛ рдЪреБрд░рд╛рддреЗ рд╣реИрдВ рдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдУрд░ рд╕реЗ рдХреНрд░рд┐рдпрд╛рдПрдБ рдХрд░рддреЗ рд╣реИрдВред

**рдХрдордЬреЛрд░ рдХреЛрдб рдХрд╛ рдЙрджрд╛рд╣рд░рдг:**
```jsx
// Dangerous: Injecting user input directly into HTML
function Comment({ userInput }) {
return <div dangerouslySetInnerHTML={{ __html: userInput }} />;
}
```
**рдХреНрдпреЛрдВ рдпрд╣ рдХрдордЬреЛрд░ рд╣реИ:** `dangerouslySetInnerHTML` рдХрд╛ рдЙрдкрдпреЛрдЧ рдЕрд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдЗрдирдкреБрдЯ рдХреЗ рд╕рд╛рде рдХрд░рдиреЗ рд╕реЗ рд╣рдорд▓рд╛рд╡рд░реЛрдВ рдХреЛ рджреБрд░реНрднрд╛рд╡рдирд╛рдкреВрд░реНрдг рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдорд┐рд▓рддреА рд╣реИред

</details>

<details>

<summary>рдХреНрд▓рд╛рдЗрдВрдЯ-рд╕рд╛рдЗрдб рдЯреЗрдореНрдкрд▓реЗрдЯ рдЗрдВрдЬреЗрдХреНрд╢рди</summary>

рдпрд╣ рддрдм рд╣реЛрддрд╛ рд╣реИ рдЬрдм рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдирдкреБрдЯ рдХреЛ рдЯреЗрдореНрдкрд▓реЗрдЯ рдореЗрдВ рдареАрдХ рд╕реЗ рд╕рдВрднрд╛рд▓рд╛ рдирд╣реАрдВ рдЬрд╛рддрд╛, рдЬрд┐рд╕рд╕реЗ рд╣рдорд▓рд╛рд╡рд░реЛрдВ рдХреЛ рдЯреЗрдореНрдкрд▓реЗрдЯ рдпрд╛ рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рдХреЛ рдЗрдВрдЬреЗрдХреНрдЯ рдФрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдорд┐рд▓рддреА рд╣реИред

**рдХрдордЬреЛрд░ рдХреЛрдб рдХрд╛ рдЙрджрд╛рд╣рд░рдг:**
```jsx
import React from 'react';
import ejs from 'ejs';

function RenderTemplate({ template, data }) {
const html = ejs.render(template, data);
return <div dangerouslySetInnerHTML={{ __html: html }} />;
}
```
**рдХреНрдпреЛрдВ рдпрд╣ рдХрдордЬреЛрд░ рд╣реИ:** рдпрджрд┐ `template` рдпрд╛ `data` рдореЗрдВ рджреБрд░реНрднрд╛рд╡рдирд╛рдкреВрд░реНрдг рд╕рд╛рдордЧреНрд░реА рд╢рд╛рдорд┐рд▓ рд╣реИ, рддреЛ рдпрд╣ рдЕрдирдкреЗрдХреНрд╖рд┐рдд рдХреЛрдб рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХрд╛ рдХрд╛рд░рдг рдмрди рд╕рдХрддрд╛ рд╣реИред

</details>

<details>

<summary>рдХреНрд▓рд╛рдЗрдВрдЯ рдкрде рдЯреНрд░реИрд╡рд░реНрд╕рд▓</summary>

рдпрд╣ рдПрдХ рдХрдордЬреЛрд░реА рд╣реИ рдЬреЛ рд╣рдорд▓рд╛рд╡рд░реЛрдВ рдХреЛ рдХреНрд▓рд╛рдЗрдВрдЯ-рд╕рд╛рдЗрдб рдкрдереЛрдВ рдореЗрдВ рд╣реЗрд░рдлреЗрд░ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ рддрд╛рдХрд┐ рдЕрдирдкреЗрдХреНрд╖рд┐рдд рдХреНрд░рд┐рдпрд╛рдПрдБ рдХреА рдЬрд╛ рд╕рдХреЗрдВ, рдЬреИрд╕реЗ рдХрд┐ рдХреНрд░реЙрд╕-рд╕рд╛рдЗрдЯ рдЕрдиреБрд░реЛрдз рдзреЛрдЦрд╛рдзрдбрд╝реА (CSRF)ред рд╕рд░реНрд╡рд░-рд╕рд╛рдЗрдб рдкрде рдЯреНрд░реИрд╡рд░реНрд╕рд▓ рдХреЗ рд╡рд┐рдкрд░реАрдд, рдЬреЛ рд╕рд░реНрд╡рд░ рдХреА рдлрд╝рд╛рдЗрд▓ рдкреНрд░рдгрд╛рд▓реА рдХреЛ рд▓рдХреНрд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ, CSPT рдХреНрд▓рд╛рдЗрдВрдЯ-рд╕рд╛рдЗрдб рддрдВрддреНрд░реЛрдВ рдХрд╛ рд▓рд╛рдн рдЙрдард╛рдиреЗ рдкрд░ рдХреЗрдВрджреНрд░рд┐рдд рд╣реИ рддрд╛рдХрд┐ рд╡реИрдз API рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рджреБрд░реНрднрд╛рд╡рдирд╛рдкреВрд░реНрдг рдЕрдВрдд рдмрд┐рдВрджреБрдУрдВ рдкрд░ рдкреБрдирдГ рдорд╛рд░реНрдЧрдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред

**рдХрдордЬреЛрд░ рдХреЛрдб рдХрд╛ рдЙрджрд╛рд╣рд░рдг:**

рдПрдХ Next.js рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдлрд╝рд╛рдЗрд▓реЗрдВ рдЕрдкрд▓реЛрдб рдФрд░ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рдбрд╛рдЙрдирд▓реЛрдб рд╕реБрд╡рд┐рдзрд╛ рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд╛рдЗрдб рдкрд░ рд▓рд╛рдЧреВ рдХреА рдЧрдИ рд╣реИ, рдЬрд╣рд╛рдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рд╛рдЗрд▓ рдкрде рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
```jsx
// pages/download.js
import { useState } from 'react';

export default function DownloadPage() {
const [filePath, setFilePath] = useState('');

const handleDownload = () => {
fetch(`/api/files/${filePath}`)
.then(response => response.blob())
.then(blob => {
const url = window.URL.createObjectURL(blob);
const a = document.createElement('a');
a.href = url;
a.download = filePath;
a.click();
});
};

return (
<div>
<h1>Download File</h1>
<input
type="text"
value={filePath}
onChange={(e) => setFilePath(e.target.value)}
placeholder="Enter file path"
/>
<button onClick={handleDownload}>Download</button>
</div>
);
}
```
#### рд╣рдорд▓рд╛ рдкрд░рд┐рджреГрд╢реНрдп

1. **рд╣рдорд▓рд╛рд╡рд░ рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп**: `filePath` рдХреЛ рд╣реЗрд░рдлреЗрд░ рдХрд░рдХреЗ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдлрд╝рд╛рдЗрд▓ (рдЬреИрд╕реЗ, `admin/config.json`) рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП CSRF рд╣рдорд▓реЗ рдХреЛ рдЕрдВрдЬрд╛рдо рджреЗрдирд╛ред
2. **CSPT рдХрд╛ рд╢реЛрд╖рдг**:
* **рджреБрд╖реНрдЯ рдЗрдирдкреБрдЯ**: рд╣рдорд▓рд╛рд╡рд░ рдПрдХ URL рддреИрдпрд╛рд░ рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╣реЗрд░рдлреЗрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ `filePath` рд╣реЛрддрд╛ рд╣реИ рдЬреИрд╕реЗ `../deleteFile/config.json`ред
* **рдкрд░рд┐рдгрд╛рдореА API рдХреЙрд▓**: рдХреНрд▓рд╛рдЗрдВрдЯ-рд╕рд╛рдЗрдб рдХреЛрдб `/api/files/../deleteFile/config.json` рдкрд░ рдПрдХ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИред
* **рд╕рд░реНрд╡рд░ рдХрд╛ рдкреНрд░рдмрдВрдзрди**: рдпрджрд┐ рд╕рд░реНрд╡рд░ `filePath` рдХреЛ рдорд╛рдиреНрдп рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдЕрдиреБрд░реЛрдз рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддрд╛ рд╣реИ, рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╣рдЯрд╛рдиреЗ рдпрд╛ рдЙрдЬрд╛рдЧрд░ рдХрд░рдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рд╣реЛрддреА рд╣реИред
3. **CSRF рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдирд╛**:
* **рддреИрдпрд╛рд░ рд▓рд┐рдВрдХ**: рд╣рдорд▓рд╛рд╡рд░ рдкреАрдбрд╝рд┐рдд рдХреЛ рдПрдХ рд▓рд┐рдВрдХ рднреЗрдЬрддрд╛ рд╣реИ рдпрд╛ рдПрдХ рджреБрд╖реНрдЯ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдПрдореНрдмреЗрдб рдХрд░рддрд╛ рд╣реИ рдЬреЛ рд╣реЗрд░рдлреЗрд░ рдХрд┐рдП рдЧрдП `filePath` рдХреЗ рд╕рд╛рде рдбрд╛рдЙрдирд▓реЛрдб рдЕрдиреБрд░реЛрдз рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реИред
* **рдкрд░рд┐рдгрд╛рдо**: рдкреАрдбрд╝рд┐рдд рдЕрдирдЬрд╛рдиреЗ рдореЗрдВ рдХреНрд░рд┐рдпрд╛ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЕрдирдзрд┐рдХреГрдд рдлрд╝рд╛рдЗрд▓ рдкрд╣реБрдВрдЪ рдпрд╛ рд╣рдЯрд╛рдиреЗ рдХреА рд╕реНрдерд┐рддрд┐ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИред

#### рдпрд╣ рдХреНрдпреЛрдВ рдХрдордЬреЛрд░ рд╣реИ

* **рдЗрдирдкреБрдЯ рдорд╛рдиреНрдпрддрд╛ рдХреА рдХрдореА**: рдХреНрд▓рд╛рдЗрдВрдЯ-рд╕рд╛рдЗрдб рдордирдорд╛рдиреЗ `filePath` рдЗрдирдкреБрдЯ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдкрде рдпрд╛рддреНрд░рд╛ рдХреА рдЕрдиреБрдорддрд┐ рдорд┐рд▓рддреА рд╣реИред
* **рдХреНрд▓рд╛рдЗрдВрдЯ рдЗрдирдкреБрдЯ рдкрд░ рднрд░реЛрд╕рд╛ рдХрд░рдирд╛**: рд╕рд░реНрд╡рд░-рд╕рд╛рдЗрдб API `filePath` рдХреЛ рдмрд┐рдирд╛ рд╕рдлрд╛рдИ рдХреЗ рднрд░реЛрд╕рд╛ рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддрд╛ рд╣реИред
* **рд╕рдВрднрд╛рд╡рд┐рдд API рдХреНрд░рд┐рдпрд╛рдПрдБ**: рдпрджрд┐ API рдПрдВрдбрдкреЙрдЗрдВрдЯ рд╕реНрдерд┐рддрд┐-рдкрд░рд┐рд╡рд░реНрддрдирдХрд╛рд░реА рдХреНрд░рд┐рдпрд╛рдПрдБ рдХрд░рддрд╛ рд╣реИ (рдЬреИрд╕реЗ, рдлрд╝рд╛рдЗрд▓реЗрдВ рд╣рдЯрд╛рдирд╛, рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛), рддреЛ рдЗрд╕реЗ CSPT рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╢реЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

</details>

## Next.js рдореЗрдВ рд╕рд░реНрд╡рд░-рд╕рд╛рдЗрдб

### рд╕рд░реНрд╡рд░-рд╕рд╛рдЗрдб рд░реЗрдВрдбрд░рд┐рдВрдЧ (SSR)

рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрд░реЛрдз рдкрд░ рдкреГрд╖реНрдареЛрдВ рдХреЛ рд╕рд░реНрд╡рд░ рдкрд░ рд░реЗрдВрдбрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реБрдП рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд░реЗрдВрдбрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ HTML рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИред рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдЖрдкрдХреЛ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдирд╛ рдЦреБрдж рдХрд╛ рдХрд╕реНрдЯрдо рд╕рд░реНрд╡рд░ рдмрдирд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред

**рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЗ:**

* рдЧрддрд┐рд╢реАрд▓ рд╕рд╛рдордЧреНрд░реА рдЬреЛ рдмрд╛рд░-рдмрд╛рд░ рдмрджрд▓рддреА рд╣реИред
* SEO рдЕрдиреБрдХреВрд▓рди, рдХреНрдпреЛрдВрдХрд┐ рдЦреЛрдЬ рдЗрдВрдЬрди рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд░реЗрдВрдбрд░ рдХрд┐рдП рдЧрдП рдкреГрд╖реНрда рдХреЛ рдХреНрд░реЙрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

**рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди:**
```jsx
// pages/index.js
export async function getServerSideProps(context) {
const res = await fetch('https://api.example.com/data');
const data = await res.json();
return { props: { data } };
}

function HomePage({ data }) {
return <div>{data.title}</div>;
}

export default HomePage;
```
### Static Site Generation (SSG)

рдкреГрд╖реНрдареЛрдВ рдХреЛ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд╕рдордп рдкреВрд░реНрд╡-рд░реЗрдВрдбрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рд▓реЛрдб рд╕рдордп рддреЗрдЬ рдФрд░ рд╕рд░реНрд╡рд░ рд▓реЛрдб рдХрдо рд╣реЛрддрд╛ рд╣реИред

**Use Cases:**

* рд╕рд╛рдордЧреНрд░реА рдЬреЛ рдЕрдХреНрд╕рд░ рдирд╣реАрдВ рдмрджрд▓рддреАред
* рдмреНрд▓реЙрдЧ, рджрд╕реНрддрд╛рд╡реЗрдЬрд╝, рд╡рд┐рдкрдгрди рдкреГрд╖реНрдаред

**Implementation:**
```jsx
// pages/index.js
export async function getStaticProps() {
const res = await fetch('https://api.example.com/data');
const data = await res.json();
return { props: { data }, revalidate: 60 }; // Revalidate every 60 seconds
}

function HomePage({ data }) {
return <div>{data.title}</div>;
}

export default HomePage;
```
### Serverless Functions (API Routes)

Next.js API рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рдХреЛ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдлрд╝рдВрдХреНрд╢рдВрд╕ рдХреЗ рд░реВрдк рдореЗрдВ рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рдпреЗ рдлрд╝рдВрдХреНрд╢рдВрд╕ рд╕рдорд░реНрдкрд┐рдд рд╕рд░реНрд╡рд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗ рдмрд┐рдирд╛ рдСрди-рдбрд┐рдорд╛рдВрдб рдЪрд▓рддреЗ рд╣реИрдВред

**рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЗ:**

* рдлрд╝реЙрд░реНрдо рд╕рдмрдорд┐рд╢рди рдХреЛ рд╕рдВрднрд╛рд▓рдирд╛ред
* рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░реИрдХреНрдЯ рдХрд░рдирд╛ред
* рдбреЗрдЯрд╛ рдХреЛ рдкреНрд░реЛрд╕реЗрд╕ рдХрд░рдирд╛ рдпрд╛ рдерд░реНрдб-рдкрд╛рд░реНрдЯреА APIs рдХреЗ рд╕рд╛рде рдПрдХреАрдХреГрдд рдХрд░рдирд╛ред

**рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди:**

Next.js 13 рдореЗрдВ `app` рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдХреЗ рдкрд░рд┐рдЪрдп рдХреЗ рд╕рд╛рде, рд░реВрдЯрд┐рдВрдЧ рдФрд░ API рд╣реИрдВрдбрд▓рд┐рдВрдЧ рдЕрдзрд┐рдХ рд▓рдЪреАрд▓реА рдФрд░ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рд╣реЛ рдЧрдИ рд╣реИред рдпрд╣ рдЖрдзреБрдирд┐рдХ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдлрд╝рд╛рдЗрд▓-рдЖрдзрд╛рд░рд┐рдд рд░реВрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рд╛рде рдирд┐рдХрдЯрддрд╛ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИ рд▓реЗрдХрд┐рди рдЗрд╕рдореЗрдВ рд╕рд░реНрд╡рд░ рдФрд░ рдХреНрд▓рд╛рдЗрдВрдЯ рдШрдЯрдХреЛрдВ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рд╕рд╣рд┐рдд рдЙрдиреНрдирдд рдХреНрд╖рдорддрд╛рдПрдБ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред

#### рдмреЗрд╕рд┐рдХ рд░реВрдЯ рд╣реИрдВрдбрд▓рд░

**рдлрд╛рдЗрд▓ рд╕рдВрд░рдЪрдирд╛:**
```go
my-nextjs-app/
тФЬтФАтФА app/
тФВ   тФФтФАтФА api/
тФВ       тФФтФАтФА hello/
тФВ           тФФтФАтФА route.js
тФЬтФАтФА package.json
тФФтФАтФА ...
```
**рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди:**
```javascript
// app/api/hello/route.js

export async function POST(request) {
return new Response(JSON.stringify({ message: 'Hello from App Router!' }), {
status: 200,
headers: { 'Content-Type': 'application/json' },
});
}

// Client-side fetch to access the API endpoint
fetch('/api/submit', {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify({ name: 'John Doe' }),
})
.then((res) => res.json())
.then((data) => console.log(data));
```
**рд╡реНрдпрд╛рдЦреНрдпрд╛:**

* **рд╕реНрдерд╛рди:** API рд░реВрдЯ `app/api/` рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЗ рддрд╣рдд рд░рдЦреЗ рдЬрд╛рддреЗ рд╣реИрдВред
* **рдлрд╛рдЗрд▓ рдирд╛рдордХрд░рдг:** рдкреНрд░рддреНрдпреЗрдХ API рдПрдВрдбрдкреЙрдЗрдВрдЯ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рд╕реНрдерд┐рдд рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ `route.js` рдпрд╛ `route.ts` рдлрд╝рд╛рдЗрд▓ рд╣реЛрддреА рд╣реИред
* **рдирд┐рд░реНрдпрд╛рддрд┐рдд рдлрд╝рдВрдХреНрд╢рди:** рдПрдХрд▓ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдирд┐рд░реНрдпрд╛рдд рдХреЗ рдмрдЬрд╛рдп, рд╡рд┐рд╢рд┐рд╖реНрдЯ HTTP рд╡рд┐рдзрд┐ рдлрд╝рдВрдХреНрд╢рди (рдЬреИрд╕реЗ, `GET`, `POST`) рдирд┐рд░реНрдпрд╛рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред
* **рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдкреНрд░рдмрдВрдзрди:** рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдПрдБ рд▓реМрдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП `Response` рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдЬреЛ рд╣реЗрдбрд░ рдФрд░ рд╕реНрдерд┐рддрд┐ рдХреЛрдб рдкрд░ рдЕрдзрд┐рдХ рдирд┐рдпрдВрддреНрд░рдг рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

#### рдЕрдиреНрдп рдкрдереЛрдВ рдФрд░ рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдХреИрд╕реЗ рд╕рдВрднрд╛рд▓реЗрдВ:

<details>

<summary>рд╡рд┐рд╢рд┐рд╖реНрдЯ HTTP рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдирд╛</summary>

Next.js 13+ рдЖрдкрдХреЛ рдПрдХ рд╣реА `route.js` рдпрд╛ `route.ts` рдлрд╝рд╛рдЗрд▓ рдХреЗ рднреАрддрд░ рд╡рд┐рд╢рд┐рд╖реНрдЯ HTTP рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╣реИрдВрдбрд▓рд░ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЬреЛ рдХреЛрдб рдХреЛ рдЕрдзрд┐рдХ рд╕реНрдкрд╖реНрдЯ рдФрд░ рд╕рдВрдЧрдард┐рдд рдмрдирд╛рддрд╛ рд╣реИред

**рдЙрджрд╛рд╣рд░рдг:**
```javascript
// app/api/users/[id]/route.js

export async function GET(request, { params }) {
const { id } = params;
// Fetch user data based on 'id'
return new Response(JSON.stringify({ userId: id, name: 'Jane Doe' }), {
status: 200,
headers: { 'Content-Type': 'application/json' },
});
}

export async function PUT(request, { params }) {
const { id } = params;
// Update user data based on 'id'
return new Response(JSON.stringify({ message: `User ${id} updated.` }), {
status: 200,
headers: { 'Content-Type': 'application/json' },
});
}

export async function DELETE(request, { params }) {
const { id } = params;
// Delete user based on 'id'
return new Response(JSON.stringify({ message: `User ${id} deleted.` }), {
status: 200,
headers: { 'Content-Type': 'application/json' },
});
}
```
**рд╡реНрдпрд╛рдЦреНрдпрд╛:**

* **рдХрдИ рдирд┐рд░реНрдпрд╛рдд:** рдкреНрд░рддреНрдпреЗрдХ HTTP рд╡рд┐рдзрд┐ (`GET`, `PUT`, `DELETE`) рдХрд╛ рдЕрдкрдирд╛ рдирд┐рд░реНрдпрд╛рддрд┐рдд рдлрд╝рдВрдХреНрд╢рди рд╣реЛрддрд╛ рд╣реИред
* **рдкреИрд░рд╛рдореАрдЯрд░:** рджреВрд╕рд░рд╛ рддрд░реНрдХ `params` рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд░реВрдЯ рдкреИрд░рд╛рдореАрдЯрд░ рддрдХ рдкрд╣реБрдБрдЪ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред
* **рд╕реБрдзрд╛рд░рд┐рдд рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдПрдБ:** рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд╡рд╕реНрддреБрдУрдВ рдкрд░ рдЕрдзрд┐рдХ рдирд┐рдпрдВрддреНрд░рдг, рд╕рдЯреАрдХ рд╣реЗрдбрд░ рдФрд░ рд╕реНрдерд┐рддрд┐ рдХреЛрдб рдкреНрд░рдмрдВрдзрди рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

</details>

<details>

<summary>рдХреИрдЪ-рдСрд▓ рдФрд░ рдиреЗрд╕реНрдЯреЗрдб рд░реВрдЯреНрд╕</summary>



Next.js 13+ рдХреИрдЪ-рдСрд▓ рд░реВрдЯреНрд╕ рдФрд░ рдиреЗрд╕реНрдЯреЗрдб API рд░реВрдЯреНрд╕ рдЬреИрд╕реА рдЙрдиреНрдирдд рд░реВрдЯрд┐рдВрдЧ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдЕрдзрд┐рдХ рдЧрддрд┐рд╢реАрд▓ рдФрд░ рд╕реНрдХреЗрд▓реЗрдмрд▓ API рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

**рдХреИрдЪ-рдСрд▓ рд░реВрдЯ рдЙрджрд╛рд╣рд░рдг:**
```javascript
// app/api/[...slug]/route.js

export async function GET(request, { params }) {
const { slug } = params;
// Handle dynamic nested routes
return new Response(JSON.stringify({ slug }), {
status: 200,
headers: { 'Content-Type': 'application/json' },
});
}
```
**рд╡реНрдпрд╛рдЦреНрдпрд╛:**

* **рд╕рд┐рдВрдЯреИрдХреНрд╕:** `[...]` рдПрдХ рдХреИрдЪ-рдСрд▓ рдЦрдВрдб рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ, рдЬреЛ рд╕рднреА рдиреЗрд╕реНрдЯреЗрдб рдкрдереЛрдВ рдХреЛ рдХреИрдкреНрдЪрд░ рдХрд░рддрд╛ рд╣реИред
* **рдЙрдкрдпреЛрдЧ:** рдЙрди APIs рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рд╡рд┐рднрд┐рдиреНрди рдорд╛рд░реНрдЧ рдЧрд╣рд░рд╛рдЗрдпреЛрдВ рдпрд╛ рдЧрддрд┐рд╢реАрд▓ рдЦрдВрдбреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред

**рдиреЗрд╕реНрдЯреЗрдб рд░реВрдЯреНрд╕ рдЙрджрд╛рд╣рд░рдг:**
```javascript
// app/api/posts/[postId]/comments/[commentId]/route.js

export async function GET(request, { params }) {
const { postId, commentId } = params;
// Fetch specific comment for a post
return new Response(JSON.stringify({ postId, commentId, comment: 'Great post!' }), {
status: 200,
headers: { 'Content-Type': 'application/json' },
});
}
```
**рд╡реНрдпрд╛рдЦреНрдпрд╛:**

* **рдЧрд╣рд░рд╛ рдиреЗрд╕реНрдЯрд┐рдВрдЧ:** рд╕рдВрд╕рд╛рдзрди рд╕рдВрдмрдВрдзреЛрдВ рдХреЛ рджрд░реНрд╢рд╛рддреЗ рд╣реБрдП рдкрджрд╛рдиреБрдХреНрд░рдорд┐рдд API рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред
* **рдкреИрд░рд╛рдореАрдЯрд░ рдПрдХреНрд╕реЗрд╕:** `params` рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрдИ рд░реВрдЯ рдкреИрд░рд╛рдореАрдЯрд░ рдЖрд╕рд╛рдиреА рд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд░реЗрдВред

</details>

<details>

<summary>Next.js 12 рдФрд░ рдкрд╣рд▓реЗ API рд░реВрдЯреНрд╕ рдХреЛ рд╕рдВрднрд╛рд▓рдирд╛</summary>

## `pages` рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ API рд░реВрдЯреНрд╕ (Next.js 12 рдФрд░ рдкрд╣рд▓реЗ)

Next.js 13 рдиреЗ `app` рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдФрд░ рдЙрдиреНрдирдд рд░реВрдЯрд┐рдВрдЧ рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ рдкреЗрд╢ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, API рд░реВрдЯреНрд╕ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ `pages` рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЗ рднреАрддрд░ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдП рдЧрдП рдереЗред рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдЕрднреА рднреА рд╡реНрдпрд╛рдкрдХ рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ Next.js 12 рдФрд░ рдкрд╣рд▓реЗ рдХреЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдореЗрдВ рд╕рдорд░реНрдерд┐рдд рд╣реИред

#### рдмреБрдирд┐рдпрд╛рджреА API рд░реВрдЯ

**рдлрд╛рдЗрд▓ рд╕рдВрд░рдЪрдирд╛:**
```go
goCopy codemy-nextjs-app/
тФЬтФАтФА pages/
тФВ   тФФтФАтФА api/
тФВ       тФФтФАтФА hello.js
тФЬтФАтФА package.json
тФФтФАтФА ...
```
**рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди:**
```javascript
javascriptCopy code// pages/api/hello.js

export default function handler(req, res) {
res.status(200).json({ message: 'Hello, World!' });
}
```
**рд╡реНрдпрд╛рдЦреНрдпрд╛:**

* **рд╕реНрдерд╛рди:** API рд░реВрдЯ `pages/api/` рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЗ рдЕрдВрддрд░реНрдЧрдд рд╣реЛрддреЗ рд╣реИрдВред
* **рдирд┐рд░реНрдпрд╛рдд:** рд╣реИрдВрдбрд▓рд░ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `export default` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред
* **рдлрд╝рдВрдХреНрд╢рди рд╣рд╕реНрддрд╛рдХреНрд╖рд░:** рд╣реИрдВрдбрд▓рд░ `req` (HTTP рдЕрдиреБрд░реЛрдз) рдФрд░ `res` (HTTP рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛) рдСрдмреНрдЬреЗрдХреНрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред
* **рд░реВрдЯрд┐рдВрдЧ:** рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдирд╛рдо (`hello.js`) рдПрдВрдбрдкреЙрдЗрдВрдЯ `/api/hello` рд╕реЗ рдореИрдк рд╣реЛрддрд╛ рд╣реИред

#### рдЧрддрд┐рд╢реАрд▓ API рд░реВрдЯреНрд╕

**рдлрд╝рд╛рдЗрд▓ рд╕рдВрд░рдЪрдирд╛:**
```bash
bashCopy codemy-nextjs-app/
тФЬтФАтФА pages/
тФВ   тФФтФАтФА api/
тФВ       тФФтФАтФА users/
тФВ           тФФтФАтФА [id].js
тФЬтФАтФА package.json
тФФтФАтФА ...
```
**рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди:**
```javascript
javascriptCopy code// pages/api/users/[id].js

export default function handler(req, res) {
const {
query: { id },
method,
} = req;

switch (method) {
case 'GET':
// Fetch user data based on 'id'
res.status(200).json({ userId: id, name: 'John Doe' });
break;
case 'PUT':
// Update user data based on 'id'
res.status(200).json({ message: `User ${id} updated.` });
break;
case 'DELETE':
// Delete user based on 'id'
res.status(200).json({ message: `User ${id} deleted.` });
break;
default:
res.setHeader('Allow', ['GET', 'PUT', 'DELETE']);
res.status(405).end(`Method ${method} Not Allowed`);
}
}
```
**рд╡реНрдпрд╛рдЦреНрдпрд╛:**

* **рдЧрддрд┐рд╢реАрд▓ рдЦрдВрдб:** рд╡рд░реНрдЧрд╛рдХрд╛рд░ рдмреНрд░реИрдХреЗрдЯ (`[id].js`) рдЧрддрд┐рд╢реАрд▓ рдорд╛рд░реНрдЧ рдЦрдВрдбреЛрдВ рдХреЛ рджрд░реНрд╢рд╛рддреЗ рд╣реИрдВред
* **рдкреИрд░рд╛рдореАрдЯрд░ рддрдХ рдкрд╣реБрдБрдЪ:** рдЧрддрд┐рд╢реАрд▓ рдкреИрд░рд╛рдореАрдЯрд░ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреЗ рд▓рд┐рдП `req.query.id` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред
* **рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдирд╛:** рд╡рд┐рднрд┐рдиреНрди HTTP рд╡рд┐рдзрд┐рдпреЛрдВ (`GET`, `PUT`, `DELETE`, рдЖрджрд┐) рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рд╢рд░реНрддреАрдп рддрд░реНрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред

#### рд╡рд┐рднрд┐рдиреНрди HTTP рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдирд╛

рдЬрдмрдХрд┐ рдмреБрдирд┐рдпрд╛рджреА API рдорд╛рд░реНрдЧ рдЙрджрд╛рд╣рд░рдг рд╕рднреА HTTP рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдПрдХрд▓ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рднреАрддрд░ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИ, рдЖрдк рдЕрдкрдиреЗ рдХреЛрдб рдХреЛ рдмреЗрд╣рддрд░ рд╕реНрдкрд╖реНрдЯрддрд╛ рдФрд░ рд░рдЦрд░рдЦрд╛рд╡ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреНрдпреЗрдХ рд╡рд┐рдзрд┐ рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрд░рдЪрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

**рдЙрджрд╛рд╣рд░рдг:**
```javascript
javascriptCopy code// pages/api/posts.js

export default async function handler(req, res) {
const { method } = req;

switch (method) {
case 'GET':
// Handle GET request
res.status(200).json({ message: 'Fetching posts.' });
break;
case 'POST':
// Handle POST request
res.status(201).json({ message: 'Post created.' });
break;
default:
res.setHeader('Allow', ['GET', 'POST']);
res.status(405).end(`Method ${method} Not Allowed`);
}
}
```
**рд╕рд░реНрд╡рд╢реНрд░реЗрд╖реНрда рдкреНрд░рдерд╛рдПрдБ:**

* **рдЪрд┐рдВрддрд╛рдУрдВ рдХрд╛ рдкреГрдердХреНрдХрд░рдг:** рд╡рд┐рднрд┐рдиреНрди HTTP рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рд▓реЙрдЬрд┐рдХ рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЕрд▓рдЧ рдХрд░реЗрдВред
* **рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд╕реНрдерд┐рд░рддрд╛:** рдХреНрд▓рд╛рдЗрдВрдЯ-рд╕рд╛рдЗрдб рд╣реИрдВрдбрд▓рд┐рдВрдЧ рдХреА рд╕реБрд╡рд┐рдзрд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рд╕рдВрд░рдЪрдирд╛ рдХреЛ рд╕реНрдерд┐рд░ рд░рдЦреЗрдВред
* **рддреНрд░реБрдЯрд┐ рдкреНрд░рдмрдВрдзрди:** рдЕрд╕рдорд░реНрдерд┐рдд рд╡рд┐рдзрд┐рдпреЛрдВ рдФрд░ рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рд╕реБрдЪрд╛рд░реВ рд░реВрдк рд╕реЗ рд╕рдВрднрд╛рд▓реЗрдВред

</details>

### CORS рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди

рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░реЗрдВ рдХрд┐ рдХреМрди рд╕реЗ рдореВрд▓ рдЖрдкрдХреЗ API рд░реВрдЯреНрд╕ рддрдХ рдкрд╣реБрдБрдЪ рд╕рдХрддреЗ рд╣реИрдВ, рдХреНрд░реЙрд╕-рдУрд░рд┐рдЬрд┐рди рд░рд┐рд╕реЛрд░реНрд╕ рд╢реЗрдпрд░рд┐рдВрдЧ (CORS) рдХрдордЬреЛрд░рд┐рдпреЛрдВ рдХреЛ рдХрдо рдХрд░рддреЗ рд╣реБрдПред

**рдЦрд░рд╛рдм рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЙрджрд╛рд╣рд░рдг:**
```javascript
// app/api/data/route.js

export async function GET(request) {
return new Response(JSON.stringify({ data: 'Public Data' }), {
status: 200,
headers: {
'Access-Control-Allow-Origin': '*', // Allows any origin
'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE',
},
});
}
```
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ **CORS рдХреЛ рд╕рднреА API рд░реВрдЯреНрд╕ рдореЗрдВ рднреА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ** **`middleware.ts`** рдлрд╝рд╛рдЗрд▓ рдХреЗ рдЕрдВрджрд░:
```javascript
// app/middleware.ts

import { NextResponse } from 'next/server';
import type { NextRequest } from 'next/server';

export function middleware(request: NextRequest) {
const allowedOrigins = ['https://yourdomain.com', 'https://sub.yourdomain.com'];
const origin = request.headers.get('Origin');

const response = NextResponse.next();

if (allowedOrigins.includes(origin || '')) {
response.headers.set('Access-Control-Allow-Origin', origin || '');
response.headers.set('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');
response.headers.set('Access-Control-Allow-Headers', 'Content-Type, Authorization');
// If credentials are needed:
// response.headers.set('Access-Control-Allow-Credentials', 'true');
}

// Handle preflight requests
if (request.method === 'OPTIONS') {
return new Response(null, {
status: 204,
headers: response.headers,
});
}

return response;
}

export const config = {
matcher: '/api/:path*', // Apply to all API routes
};

```
**рд╕рдорд╕реНрдпрд╛:**

* **`Access-Control-Allow-Origin: '*'`:** рдХрд┐рд╕реА рднреА рд╡реЗрдмрд╕рд╛рдЗрдЯ рдХреЛ API рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рджреБрд░реНрднрд╛рд╡рдирд╛рдкреВрд░реНрдг рд╕рд╛рдЗрдЯреЛрдВ рдХреЛ рдЖрдкрдХреА API рдХреЗ рд╕рд╛рде рдмрд┐рдирд╛ рдХрд┐рд╕реА рдкреНрд░рддрд┐рдмрдВрдз рдХреЗ рдЗрдВрдЯрд░реИрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред
* **рд╡реНрдпрд╛рдкрдХ рд╡рд┐рдзрд┐ рдЕрдиреБрдорддрд┐:** рд╕рднреА рд╡рд┐рдзрд┐рдпреЛрдВ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдирд╛ рд╣рдорд▓рд╛рд╡рд░реЛрдВ рдХреЛ рдЕрд╡рд╛рдВрдЫрд┐рдд рдХреНрд░рд┐рдпрд╛рдПрдБ рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИред

**рд╣рдорд▓рд╛рд╡рд░ рдЗрд╕рдХрд╛ рдХреИрд╕реЗ рд▓рд╛рдн рдЙрдард╛рддреЗ рд╣реИрдВ:**

рд╣рдорд▓рд╛рд╡рд░ рджреБрд░реНрднрд╛рд╡рдирд╛рдкреВрд░реНрдг рд╡реЗрдмрд╕рд╛рдЗрдЯреЗрдВ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЖрдкрдХреА API рдХреЛ рдЕрдиреБрд░реЛрдз рднреЗрдЬрддреА рд╣реИрдВ, рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рдбреЗрдЯрд╛ рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрддрд┐, рдбреЗрдЯрд╛ рд╣реЗрд░рдлреЗрд░, рдпрд╛ рдкреНрд░рдорд╛рдгрд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА рдУрд░ рд╕реЗ рдЕрд╡рд╛рдВрдЫрд┐рдд рдХреНрд░рд┐рдпрд╛рдПрдБ рдЯреНрд░рд┐рдЧрд░ рдХрд░рдиреЗ рдЬреИрд╕реА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛рдУрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреА рд╣реИрдВред

{% content-ref url="../../pentesting-web/cors-bypass.md" %}
[cors-bypass.md](../../pentesting-web/cors-bypass.md)
{% endcontent-ref %}

### рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд╛рдЗрдб рдореЗрдВ рд╕рд░реНрд╡рд░ рдХреЛрдб рдХрд╛ рдкреНрд░рджрд░реНрд╢рди

рдпрд╣ **рд╕рд░реНрд╡рд░ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рдХреЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд╛рдЗрдб рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдФрд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рдХреЛрдб рдореЗрдВ рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИ**, рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рддрд░реАрдХрд╛ рд╣реИ рдХрд┐ рдХреЛрдб рдХреА рдХреЛрдИ рдлрд╝рд╛рдЗрд▓ рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд╛рдЗрдб рдореЗрдВ рдХрднреА рдкреНрд░рджрд░реНрд╢рд┐рдд рди рд╣реЛ, рдлрд╝рд╛рдЗрд▓ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдЗрд╕ рдЖрдпрд╛рдд рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИ:
```js
import "server-only";
```
## Key Files and Their Roles

### `middleware.ts` / `middleware.js`

**Location:** рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреА рдЬрдбрд╝ рдпрд╛ `src/` рдХреЗ рднреАрддрд░ред

**Purpose:** рдПрдХ рдЕрдиреБрд░реЛрдз рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╕рд░реНрд╡рд░-рд╕рд╛рдЗрдб рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдХреЛрдб рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рдкреНрд░рдорд╛рдгреАрдХрд░рдг, рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ, рдпрд╛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛ред

**Execution Flow:**

1. **Incoming Request:** рдорд┐рдбрд▓рд╡реЗрдпрд░ рдЕрдиреБрд░реЛрдз рдХреЛ рд░реЛрдХрддрд╛ рд╣реИред
2. **Processing:** рдЕрдиреБрд░реЛрдз рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╕рдВрдЪрд╛рд▓рди рдХрд░рддрд╛ рд╣реИ (рдЬреИрд╕реЗ, рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреА рдЬрд╛рдВрдЪ рдХрд░рдирд╛)ред
3. **Response Modification:** рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛ рдмрджрд▓ рд╕рдХрддрд╛ рд╣реИ рдпрд╛ рдЕрдЧрд▓реЗ рд╣реИрдВрдбрд▓рд░ рдХреЛ рдирд┐рдпрдВрддреНрд░рдг рджреЗ рд╕рдХрддрд╛ рд╣реИред

**Example Use Cases:**

* рдЕрдкреНрд░рдорд╛рдгрд┐рдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рдХрд░рдирд╛ред
* рдХрд╕реНрдЯрдо рд╣реЗрдбрд░ рдЬреЛрдбрд╝рдирд╛ред
* рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд▓реЙрдЧ рдХрд░рдирд╛ред

**Sample Configuration:**
```typescript
// middleware.ts
import { NextResponse } from 'next/server';
import type { NextRequest } from 'next/server';

export function middleware(req: NextRequest) {
const url = req.nextUrl.clone();
if (!req.cookies.has('token')) {
url.pathname = '/login';
return NextResponse.redirect(url);
}
return NextResponse.next();
}

export const config = {
matcher: ['/protected/:path*'],
};
```
### `next.config.js`

**рд╕реНрдерд╛рди:** рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреА рдЬрдбрд╝ред

**рдЙрджреНрджреЗрд╢реНрдп:** Next.js рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реИ, рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЛ рд╕рдХреНрд╖рдо рдпрд╛ рдЕрдХреНрд╖рдо рдХрд░рддрд╛ рд╣реИ, рд╡реЗрдмрдкреИрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдХрдИ рд╕реБрд░рдХреНрд╖рд╛ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реИред

**рдореБрдЦреНрдп рд╕реБрд░рдХреНрд╖рд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди:**

<details>

<summary>рд╕реБрд░рдХреНрд╖рд╛ рд╣реЗрдбрд░</summary>

рд╕реБрд░рдХреНрд╖рд╛ рд╣реЗрдбрд░ рдЖрдкрдХреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдХреЛ рдмрдврд╝рд╛рддреЗ рд╣реИрдВ, рдмреНрд░рд╛рдЙрдЬрд╝рд░реЛрдВ рдХреЛ рд╕рд╛рдордЧреНрд░реА рдХреЛ рдХреИрд╕реЗ рд╕рдВрднрд╛рд▓рдирд╛ рд╣реИ, рдЗрд╕ рдкрд░ рдирд┐рд░реНрджреЗрд╢ рджреЗрдХрд░ред рдпреЗ рд╡рд┐рднрд┐рдиреНрди рд╣рдорд▓реЛрдВ рдЬреИрд╕реЗ рдХрд┐ рдХреНрд░реЙрд╕-рд╕рд╛рдЗрдЯ рд╕реНрдХреНрд░рд┐рдкреНрдЯрд┐рдВрдЧ (XSS), рдХреНрд▓рд┐рдХрдЬреИрдХрд┐рдВрдЧ, рдФрд░ MIME рдкреНрд░рдХрд╛рд░ рд╕реНрдирд┐рдлрд╝рд┐рдВрдЧ рдХреЛ рдХрдо рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддреЗ рд╣реИрдВ:

* рд╕рд╛рдордЧреНрд░реА рд╕реБрд░рдХреНрд╖рд╛ рдиреАрддрд┐ (CSP)
* X-Frame-Options
* X-Content-Type-Options
* рд╕реНрдЯреНрд░рд┐рдХреНрдЯ-рдЯреНрд░рд╛рдВрд╕рдкреЛрд░реНрдЯ-рд╕реЗрдХреНрдпреЛрд░рд┐рдЯреА (HSTS)
* рд░реЗрдлрд░рд░ рдиреАрддрд┐

**рдЙрджрд╛рд╣рд░рдг:**
```javascript
// next.config.js

module.exports = {
async headers() {
return [
{
source: '/(.*)', // Apply to all routes
headers: [
{
key: 'X-Frame-Options',
value: 'DENY',
},
{
key: 'Content-Security-Policy',
value: "default-src *; script-src 'self' 'unsafe-inline' 'unsafe-eval';",
},
{
key: 'X-Content-Type-Options',
value: 'nosniff',
},
{
key: 'Strict-Transport-Security',
value: 'max-age=63072000; includeSubDomains; preload', // Enforces HTTPS
},
{
key: 'Referrer-Policy',
value: 'no-referrer', // Completely hides referrer
},
// Additional headers...
],
},
];
},
};
```
</details>

<details>

<summary>рдЫрд╡рд┐ рдЕрдиреБрдХреВрд▓рди рд╕реЗрдЯрд┐рдВрдЧреНрд╕</summary>

Next.js рдкреНрд░рджрд░реНрд╢рди рдХреЗ рд▓рд┐рдП рдЫрд╡рд┐рдпреЛрдВ рдХрд╛ рдЕрдиреБрдХреВрд▓рди рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЧрд▓рдд рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕реБрд░рдХреНрд╖рд╛ рдХрдордЬреЛрд░рд┐рдпреЛрдВ рдХрд╛ рдХрд╛рд░рдг рдмрди рд╕рдХрддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рдЕрд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд╕реНрд░реЛрддреЛрдВ рдХреЛ рджреБрд░реНрднрд╛рд╡рдирд╛рдкреВрд░реНрдг рд╕рд╛рдордЧреНрд░реА рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдирд╛ред

**рдЦрд░рд╛рдм рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЙрджрд╛рд╣рд░рдг:**
```javascript
// next.config.js

module.exports = {
images: {
domains: ['*'], // Allows images from any domain
},
};
```
**рд╕рдорд╕реНрдпрд╛:**

* **`'*'`:** рдХрд┐рд╕реА рднреА рдмрд╛рд╣рд░реА рд╕реНрд░реЛрдд рд╕реЗ рдЪрд┐рддреНрд░реЛрдВ рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдЕрд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдпрд╛ рджреБрд░реНрднрд╛рд╡рдирд╛рдкреВрд░реНрдг рдбреЛрдореЗрди рд╢рд╛рдорд┐рд▓ рд╣реИрдВред рд╣рдорд▓рд╛рд╡рд░ рдЪрд┐рддреНрд░реЛрдВ рдХреЛ рджреБрд░реНрднрд╛рд╡рдирд╛рдкреВрд░реНрдг рдкреЗрд▓реЛрдб рдпрд╛ рд╕рд╛рдордЧреНрд░реА рдХреЗ рд╕рд╛рде рд╣реЛрд╕реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рднреНрд░рд╛рдорд┐рдд рдХрд░рддрд╛ рд╣реИред
* рдПрдХ рдФрд░ рд╕рдорд╕реНрдпрд╛ рдпрд╣ рд╣реЛ рд╕рдХрддреА рд╣реИ рдХрд┐ рдПрдХ рдбреЛрдореЗрди рдХреА рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рдП **рдЬрд╣рд╛рдВ рдХреЛрдИ рднреА рдЪрд┐рддреНрд░ рдЕрдкрд▓реЛрдб рдХрд░ рд╕рдХрддрд╛ рд╣реИ** (рдЬреИрд╕реЗ `raw.githubusercontent.com`)

**рд╣рдорд▓рд╛рд╡рд░ рдЗрд╕рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд░рддреЗ рд╣реИрдВ:**

рджреБрд░реНрднрд╛рд╡рдирд╛рдкреВрд░реНрдг рд╕реНрд░реЛрддреЛрдВ рд╕реЗ рдЪрд┐рддреНрд░реЛрдВ рдХреЛ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░рдХреЗ, рд╣рдорд▓рд╛рд╡рд░ рдлрд╝рд┐рд╢рд┐рдВрдЧ рд╣рдорд▓реЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рднреНрд░рд╛рдордХ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╛ рдЪрд┐рддреНрд░ рд░реЗрдВрдбрд░рд┐рдВрдЧ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдореЗрдВ рдХрдордЬреЛрд░рд┐рдпреЛрдВ рдХрд╛ рд▓рд╛рдн рдЙрдард╛ рд╕рдХрддреЗ рд╣реИрдВред

</details>

<details>

<summary>рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдХрд╛ рдкреНрд░рджрд░реНрд╢рди</summary>

рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рдЬреИрд╕реЗ API рдХреБрдВрдЬреА рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░реЗрдВ рдмрд┐рдирд╛ рдЙрдиреНрд╣реЗрдВ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рд╕рд╛рдордиреЗ рдЙрдЬрд╛рдЧрд░ рдХрд┐рдПред

#### рдХ. рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЪрд░ рдХрд╛ рдкреНрд░рджрд░реНрд╢рди

**рдЦрд░рд╛рдм рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЙрджрд╛рд╣рд░рдг:**
```javascript
// next.config.js

module.exports = {
env: {
SECRET_API_KEY: process.env.SECRET_API_KEY, // Exposed to the client
NEXT_PUBLIC_API_URL: process.env.NEXT_PUBLIC_API_URL, // Correctly prefixed for client
},
};
```
**рд╕рдорд╕реНрдпрд╛:**

* **`SECRET_API_KEY`:** `NEXT_PUBLIC_` рдЙрдкрд╕рд░реНрдЧ рдХреЗ рдмрд┐рдирд╛, Next.js рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ рдХреЛ рдХреНрд▓рд╛рдЗрдВрдЯ рдкрд░ рдЙрдЬрд╛рдЧрд░ рдирд╣реАрдВ рдХрд░рддрд╛ред рд╣рд╛рд▓рд╛рдБрдХрд┐, рдпрджрд┐ рдЧрд▓рддреА рд╕реЗ рдЙрдкрд╕рд░реНрдЧ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ (рдЬреИрд╕реЗ, `NEXT_PUBLIC_SECRET_API_KEY`), рддреЛ рдпрд╣ рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд╛рдЗрдб рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред

**рд╣рдорд▓рд╛рд╡рд░ рдЗрд╕рдХрд╛ рдХреИрд╕реЗ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ:**

рдпрджрд┐ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ рдХреНрд▓рд╛рдЗрдВрдЯ рдкрд░ рдЙрдЬрд╛рдЧрд░ рд╣реЛрддреЗ рд╣реИрдВ, рддреЛ рд╣рдорд▓рд╛рд╡рд░ рдЙрдиреНрд╣реЗрдВ рдХреНрд▓рд╛рдЗрдВрдЯ-рд╕рд╛рдЗрдб рдХреЛрдб рдпрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдХреЗ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдЙрдиреНрд╣реЗрдВ APIs, рдбреЗрдЯрд╛рдмреЗрд╕, рдпрд╛ рдЕрдиреНрдп рд╕реЗрд╡рд╛рдУрдВ рддрдХ рдЕрдирдзрд┐рдХреГрдд рдкрд╣реБрдВрдЪ рдорд┐рд▓рддреА рд╣реИред

</details>

<details>

<summary>рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯреНрд╕</summary>

рдЕрдкрдиреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рднреАрддрд░ URL рд░реАрдбрд╛рдпрд░реЗрдХреНрд╢рдВрд╕ рдФрд░ рд░реАрд▓реЗрдЦрдиреЛрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░реЗрдВ, рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЗ рд╣реБрдП рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдЙрдЪрд┐рдд рд░реВрдк рд╕реЗ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдП рдмрд┐рдирд╛ рдУрдкрди рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рдХрдордЬреЛрд░рд┐рдпреЛрдВ рдХреЛ рдкреЗрд╢ рдХрд┐рдПред

#### a. рдУрдкрди рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рдХрдордЬреЛрд░рд┐рдпреЛрдВ

**рдЦрд░рд╛рдм рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЙрджрд╛рд╣рд░рдг:**
```javascript
// next.config.js

module.exports = {
async redirects() {
return [
{
source: '/redirect',
destination: (req) => req.query.url, // Dynamically redirects based on query parameter
permanent: false,
},
];
},
};
```
**рд╕рдорд╕реНрдпрд╛:**

* **рдЧрддрд┐рд╢реАрд▓ рдЧрдВрддрд╡реНрдп:** рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдХрд┐рд╕реА рднреА URL рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдУрдкрди рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рд╣рдорд▓реЗ рдХреА рдЕрдиреБрдорддрд┐ рдорд┐рд▓рддреА рд╣реИред
* **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдирдкреБрдЯ рдкрд░ рднрд░реЛрд╕рд╛ рдХрд░рдирд╛:** рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХрд┐рдП рдЧрдП URLs рдкрд░ рдмрд┐рдирд╛ рд╕рддреНрдпрд╛рдкрди рдХреЗ рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рдХрд░рдирд╛ рдлрд╝рд┐рд╢рд┐рдВрдЧ, рдореИрд▓рд╡реЗрдпрд░ рд╡рд┐рддрд░рдг, рдпрд╛ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓ рдЪреЛрд░реА рдХрд╛ рдХрд╛рд░рдг рдмрди рд╕рдХрддрд╛ рд╣реИред

**рд╣рдорд▓рд╛рд╡рд░ рдЗрд╕рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд░рддреЗ рд╣реИрдВ:**

рд╣рдорд▓рд╛рд╡рд░ рдРрд╕реЗ URLs рддреИрдпрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЗ рдбреЛрдореЗрди рд╕реЗ рдЙрддреНрдкрдиреНрди рд╣реЛрдиреЗ рдХрд╛ рдЖрднрд╛рд╕ рджреЗрддреЗ рд╣реИрдВ рд▓реЗрдХрд┐рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рджреБрд░реНрднрд╛рд╡рдирд╛рдкреВрд░реНрдг рд╕рд╛рдЗрдЯреЛрдВ рдкрд░ рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рдХрд░рддреЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП:
```bash
https://yourdomain.com/redirect?url=https://malicious-site.com
```
рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдореВрд▓ рдбреЛрдореЗрди рдкрд░ рднрд░реЛрд╕рд╛ рдХрд░рддреЗ рд╣реБрдП рдЕрдирдЬрд╛рдиреЗ рдореЗрдВ рд╣рд╛рдирд┐рдХрд╛рд░рдХ рд╡реЗрдмрд╕рд╛рдЗрдЯреЛрдВ рдкрд░ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред

</details>

<details>

<summary>Webpack рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди</summary>

рдЕрдкрдиреЗ Next.js рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд▓рд┐рдП Webpack рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░реЗрдВ, рдЬреЛ рд╕рд╛рд╡рдзрд╛рдиреА рд╕реЗ рди рд╕рдВрднрд╛рд▓реЗ рдЬрд╛рдиреЗ рдкрд░ рд╕реБрд░рдХреНрд╖рд╛ рдХрдордЬреЛрд░рд┐рдпреЛрдВ рдХреЛ рдЕрдирдЬрд╛рдиреЗ рдореЗрдВ рдкреЗрд╢ рдХрд░ рд╕рдХрддрд╛ рд╣реИред

#### рдХ. рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдореЙрдбреНрдпреВрд▓ рдХреЛ рдЙрдЬрд╛рдЧрд░ рдХрд░рдирд╛

**рдЦрд░рд╛рдм рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЙрджрд╛рд╣рд░рдг:**
```javascript
// next.config.js

module.exports = {
webpack: (config, { isServer }) => {
if (!isServer) {
config.resolve.alias['@sensitive'] = path.join(__dirname, 'secret-folder');
}
return config;
},
};
```
**рд╕рдорд╕реНрдпрд╛:**

* **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдкрдереЛрдВ рдХрд╛ рдЦреБрд▓рд╛рд╕рд╛:** рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХреЛ рдЙрдкрдирд╛рдо рджреЗрдирд╛ рдФрд░ рдХреНрд▓рд╛рдЗрдВрдЯ-рд╕рд╛рдЗрдб рдкрд╣реБрдВрдЪ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдирд╛ рдЧреЛрдкрдиреАрдп рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рд▓реАрдХ рдХрд░ рд╕рдХрддрд╛ рд╣реИред
* **рдЧреБрдкреНрдд рдЬрд╛рдирдХрд╛рд░рд┐рдпреЛрдВ рдХрд╛ рдмрдВрдбрд▓рд┐рдВрдЧ:** рдпрджрд┐ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдлрд╝рд╛рдЗрд▓реЗрдВ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рд▓рд┐рдП рдмрдВрдбрд▓ рдХреА рдЬрд╛рддреА рд╣реИрдВ, рддреЛ рдЙрдирдХреА рд╕рд╛рдордЧреНрд░реА рд╕реНрд░реЛрдд рдорд╛рдирдЪрд┐рддреНрд░реЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдпрд╛ рдХреНрд▓рд╛рдЗрдВрдЯ-рд╕рд╛рдЗрдб рдХреЛрдб рдХреА рдЬрд╛рдВрдЪ рдХрд░рдХреЗ рд╕реБрд▓рдн рд╣реЛ рдЬрд╛рддреА рд╣реИред

**рд╣рдорд▓рд╛рд╡рд░ рдЗрд╕рдХрд╛ рдХреИрд╕реЗ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ:**

рд╣рдорд▓рд╛рд╡рд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕рдВрд░рдЪрдирд╛ рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдЙрд╕реЗ рдкреБрдирд░реНрдирд┐рд░реНрдорд╛рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдлрд╝рд╛рдЗрд▓реЛрдВ рдпрд╛ рдбреЗрдЯрд╛ рдХреЛ рдЦреЛрдЬрдХрд░ рдФрд░ рдЙрдирдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рдХреЗред

</details>

### `pages/_app.js` рдФрд░ `pages/_document.js`

#### **`pages/_app.js`**

**рдЙрджреНрджреЗрд╢реНрдп:** рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдРрдк рдШрдЯрдХ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░рддрд╛ рд╣реИ, рд╡реИрд╢реНрд╡рд┐рдХ рд╕реНрдерд┐рддрд┐, рд╢реИрд▓рд┐рдпрд╛рдБ, рдФрд░ рд▓реЗрдЖрдЙрдЯ рдШрдЯрдХреЛрдВ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

**рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЗ:**

* рд╡реИрд╢реНрд╡рд┐рдХ CSS рдХреЛ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░рдирд╛ред
* рд▓реЗрдЖрдЙрдЯ рд░реИрдкрд░ рдЬреЛрдбрд╝рдирд╛ред
* рд╕реНрдерд┐рддрд┐ рдкреНрд░рдмрдВрдзрди рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреЛ рдПрдХреАрдХреГрдд рдХрд░рдирд╛ред

**рдЙрджрд╛рд╣рд░рдг:**
```jsx
// pages/_app.js
import '../styles/globals.css';

function MyApp({ Component, pageProps }) {
return <Component {...pageProps} />;
}

export default MyApp;
```
#### **`pages/_document.js`**

**рдЙрджреНрджреЗрд╢реНрдп:** рдбрд┐рдлрд╝реЙрд▓реНрдЯ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░рддрд╛ рд╣реИ, HTML рдФрд░ Body рдЯреИрдЧреНрд╕ рдХреЗ рдЕрдиреБрдХреВрд▓рди рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред

**рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЗ:**

* `<html>` рдпрд╛ `<body>` рдЯреИрдЧреНрд╕ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛ред
* рдореЗрдЯрд╛ рдЯреИрдЧреНрд╕ рдпрд╛ рдХрд╕реНрдЯрдо рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЬреЛрдбрд╝рдирд╛ред
* рдерд░реНрдб-рдкрд╛рд░реНрдЯреА рдлреЙрдиреНрдЯреНрд╕ рдХреЛ рдПрдХреАрдХреГрдд рдХрд░рдирд╛ред

**рдЙрджрд╛рд╣рд░рдг:**
```jsx
// pages/_document.js
import Document, { Html, Head, Main, NextScript } from 'next/document';

class MyDocument extends Document {
render() {
return (
<Html lang="en">
<Head>
{/* Custom fonts or meta tags */}
</Head>
<body>
<Main />
<NextScript />
</body>
</Html>
);
}
}

export default MyDocument;
```
### рдХрд╕реНрдЯрдо рд╕рд░реНрд╡рд░ (рд╡реИрдХрд▓реНрдкрд┐рдХ)

**рдЙрджреНрджреЗрд╢реНрдп:** рдЬрдмрдХрд┐ Next.js рдПрдХ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рд╕рд░реНрд╡рд░ рдХреЗ рд╕рд╛рде рдЖрддрд╛ рд╣реИ, рдЖрдк рдХрд╕реНрдЯрдо рд░рд╛рдЙрдЯрд┐рдВрдЧ рдпрд╛ рдореМрдЬреВрджрд╛ рдмреИрдХрдПрдВрдб рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд╕рд╛рде рдПрдХреАрдХреГрдд рдХрд░рдиреЗ рдЬреИрд╕реЗ рдЙрдиреНрдирдд рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдХрд╕реНрдЯрдо рд╕рд░реНрд╡рд░ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред

**рдиреЛрдЯ:** рдХрд╕реНрдЯрдо рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рддреИрдирд╛рддреА рдХреЗ рд╡рд┐рдХрд▓реНрдк рд╕реАрдорд┐рдд рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЙрди рдкреНрд▓реЗрдЯрдлрд╛рд░реНрдореЛрдВ рдкрд░ рдЬреИрд╕реЗ Vercel рдЬреЛ Next.js рдХреЗ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рд╕рд░реНрд╡рд░ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдХреВрд▓рд┐рдд рд╣реИрдВред

**рдЙрджрд╛рд╣рд░рдг:**
```javascript
// server.js
const express = require('express');
const next = require('next');

const dev = process.env.NODE_ENV !== 'production';
const app = next({ dev });
const handle = app.getRequestHandler();

app.prepare().then(() => {
const server = express();

// Custom route
server.get('/a', (req, res) => {
return app.render(req, res, '/a');
});

// Default handler
server.all('*', (req, res) => {
return handle(req, res);
});

server.listen(3000, (err) => {
if (err) throw err;
console.log('> Ready on http://localhost:3000');
});
});
```
***

## рдЕрддрд┐рд░рд┐рдХреНрдд рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░рд▓ рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рд╡рд┐рдЪрд╛рд░

### рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди

**рдЙрджреНрджреЗрд╢реНрдп:** рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдХреЛрдбрдмреЗрд╕ рдХреЗ рдмрд╛рд╣рд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдирд╛ред

**рд╕рд░реНрд╡реЛрддреНрддрдо рдкреНрд░рдерд╛рдПрдБ:**

* **`.env` рдлрд╝рд╛рдЗрд▓реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ:** API рдХреБрдВрдЬреА рдЬреИрд╕реА рдЪрд░ рдХреЛ `.env.local` рдореЗрдВ рд╕реНрдЯреЛрд░ рдХрд░реЗрдВ (рд╕рдВрд╕реНрдХрд░рдг рдирд┐рдпрдВрддреНрд░рдг рд╕реЗ рдмрд╛рд╣рд░)ред
* **рдЪрд░ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдПрдХреНрд╕реЗрд╕ рдХрд░реЗрдВ:** рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдХреЛ рдПрдХреНрд╕реЗрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `process.env.VARIABLE_NAME` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред
* **рдХреНрд▓рд╛рдЗрдВрдЯ рдкрд░ рдХрднреА рднреА рд░рд╣рд╕реНрдп рдЙрдЬрд╛рдЧрд░ рди рдХрд░реЗрдВ:** рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЪрд░ рдХреЗрд╡рд▓ рд╕рд░реНрд╡рд░-рд╕рд╛рдЗрдб рдкрд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред

**рдЙрджрд╛рд╣рд░рдг:**
```javascript
// next.config.js
module.exports = {
env: {
API_KEY: process.env.API_KEY, // Accessible on both client and server
SECRET_KEY: process.env.SECRET_KEY, // Be cautious if accessible on the client
},
};
```
**рдиреЛрдЯ:** рдХреЗрд╡рд▓ рд╕рд░реНрд╡рд░-рд╕рд╛рдЗрдб рдХреЗ рд▓рд┐рдП рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ рдХреЛ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЙрдиреНрд╣реЗрдВ `env` рдСрдмреНрдЬреЗрдХреНрдЯ рд╕реЗ рд╣рдЯрд╛ рджреЗрдВ рдпрд╛ рдХреНрд▓рд╛рдЗрдВрдЯ рдПрдХреНрд╕рдкреЛрдЬрд░ рдХреЗ рд▓рд┐рдП `NEXT_PUBLIC_` рд╕реЗ рдкреВрд░реНрд╡рд╡рд░реНрддреА рдХрд░реЗрдВред

### рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдФрд░ рдкреНрд░рд╛рдзрд┐рдХрд░рдг

**рдкрджреНрдзрддрд┐:**

* **рд╕рддреНрд░-рдЖрдзрд╛рд░рд┐рдд рдкреНрд░рдорд╛рдгреАрдХрд░рдг:** рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рддреНрд░реЛрдВ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдХреАрдЬрд╝ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред
* **рдЯреЛрдХрди-рдЖрдзрд╛рд░рд┐рдд рдкреНрд░рдорд╛рдгреАрдХрд░рдг:** Stateless рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЗ рд▓рд┐рдП JWTs рд▓рд╛рдЧреВ рдХрд░реЗрдВред
* **рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рдкреНрд░рджрд╛рддрд╛:** `next-auth` рдЬреИрд╕реА рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ OAuth рдкреНрд░рджрд╛рддрд╛рдУрдВ (рдЬреИрд╕реЗ, Google, GitHub) рдХреЗ рд╕рд╛рде рдПрдХреАрдХреГрдд рдХрд░реЗрдВред

**рд╕реБрд░рдХреНрд╖рд╛ рдкреНрд░рдерд╛рдПрдБ:**

* **рд╕реБрд░рдХреНрд╖рд┐рдд рдХреБрдХреАрдЬрд╝:** `HttpOnly`, `Secure`, рдФрд░ `SameSite` рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рд╕реЗрдЯ рдХрд░реЗрдВред
* **рдкрд╛рд╕рд╡рд░реНрдб рд╣реИрд╢рд┐рдВрдЧ:** рд╣рдореЗрд╢рд╛ рдкрд╛рд╕рд╡рд░реНрдб рдХреЛ рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╣реИрд╢ рдХрд░реЗрдВред
* **рдЗрдирдкреБрдЯ рдорд╛рдиреНрдпрддрд╛:** рдЗрдирдкреБрдЯ рдХреЛ рдорд╛рдиреНрдп рдФрд░ рд╕реНрд╡рдЪреНрдЫ рдХрд░рдХреЗ рдЗрдВрдЬреЗрдХреНрд╢рди рд╣рдорд▓реЛрдВ рдХреЛ рд░реЛрдХреЗрдВред

**рдЙрджрд╛рд╣рд░рдг:**
```javascript
// pages/api/login.js
import { sign } from 'jsonwebtoken';
import { serialize } from 'cookie';

export default async function handler(req, res) {
const { username, password } = req.body;

// Validate user credentials
if (username === 'admin' && password === 'password') {
const token = sign({ username }, process.env.JWT_SECRET, { expiresIn: '1h' });
res.setHeader('Set-Cookie', serialize('auth', token, { path: '/', httpOnly: true, secure: true, sameSite: 'strict' }));
res.status(200).json({ message: 'Logged in' });
} else {
res.status(401).json({ error: 'Invalid credentials' });
}
}
```
### рдкреНрд░рджрд░реНрд╢рди рдЕрдиреБрдХреВрд▓рди

**рд░рдгрдиреАрддрд┐рдпрд╛рдБ:**

* **рдЫрд╡рд┐ рдЕрдиреБрдХреВрд▓рди:** рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЫрд╡рд┐ рдЕрдиреБрдХреВрд▓рди рдХреЗ рд▓рд┐рдП Next.js рдХреЗ `next/image` рдШрдЯрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред
* **рдХреЛрдб рд╡рд┐рднрд╛рдЬрди:** рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд▓реЛрдб рд╕рдордп рдХреЛ рдХрдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЧрддрд┐рд╢реАрд▓ рдЖрдпрд╛рдд рдХрд╛ рд▓рд╛рдн рдЙрдард╛рдПрдВред
* **рдХреИрд╢рд┐рдВрдЧ:** API рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдУрдВ рдФрд░ рд╕реНрдерд┐рд░ рд╕рдВрдкрддреНрддрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдХреИрд╢рд┐рдВрдЧ рд░рдгрдиреАрддрд┐рдпреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░реЗрдВред
* **рдЖрд▓рд╕реА рд▓реЛрдбрд┐рдВрдЧ:** рдШрдЯрдХреЛрдВ рдпрд╛ рд╕рдВрдкрддреНрддрд┐рдпреЛрдВ рдХреЛ рдХреЗрд╡рд▓ рддрдм рд▓реЛрдб рдХрд░реЗрдВ рдЬрдм рдЙрдирдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛред

**рдЙрджрд╛рд╣рд░рдг:**
```jsx
// Dynamic Import with Code Splitting
import dynamic from 'next/dynamic';

const HeavyComponent = dynamic(() => import('../components/HeavyComponent'), {
loading: () => <p>Loading...</p>,
});
```
{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../../.gitbook/assets/arte.png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="../../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдБ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* **рд╣рдорд╛рд░реЗ** ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**telegram рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ **рд╣рдорд╛рд░реЗ** **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks_live)** рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВред**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github рд░рд┐рдкреЛрдЬрд┐рдЯрд░реА рдореЗрдВ PRs рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВред

</details>
{% endhint %}
