# Basic Tomcat Info

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

### –£–Ω–∏–∫–∞–π—Ç–µ –∑–∞–ø—É—Å–∫—É –∑ –ø—Ä–∞–≤–∞–º–∏ root

–©–æ–± –Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç–∏ Tomcat –∑ –ø—Ä–∞–≤–∞–º–∏ root, –¥—É–∂–µ –ø–æ—à–∏—Ä–µ–Ω–æ—é –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é —î –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞ Apache –Ω–∞ –ø–æ—Ä—Ç—É 80/443, —ñ —è–∫—â–æ –∑–∞–ø–∏—Ç—É–≤–∞–Ω–∏–π —à–ª—è—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤–∏—Ä–∞–∑—É, –∑–∞–ø–∏—Ç –Ω–∞–¥—Å–∏–ª–∞—î—Ç—å—Å—è –¥–æ Tomcat, —â–æ –ø—Ä–∞—Ü—é—î –Ω–∞ —ñ–Ω—à–æ–º—É –ø–æ—Ä—Ç—É.

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
‚îú‚îÄ‚îÄ bin
‚îú‚îÄ‚îÄ conf
‚îÇ   ‚îú‚îÄ‚îÄ catalina.policy
‚îÇ   ‚îú‚îÄ‚îÄ catalina.properties
‚îÇ   ‚îú‚îÄ‚îÄ context.xml
‚îÇ   ‚îú‚îÄ‚îÄ tomcat-users.xml
‚îÇ   ‚îú‚îÄ‚îÄ tomcat-users.xsd
‚îÇ   ‚îî‚îÄ‚îÄ web.xml
‚îú‚îÄ‚îÄ lib
‚îú‚îÄ‚îÄ logs
‚îú‚îÄ‚îÄ temp
‚îú‚îÄ‚îÄ webapps
‚îÇ   ‚îú‚îÄ‚îÄ manager
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ images
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ META-INF
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ WEB-INF
|   |       ‚îî‚îÄ‚îÄ web.xml
‚îÇ   ‚îî‚îÄ‚îÄ ROOT
‚îÇ       ‚îî‚îÄ‚îÄ WEB-INF
‚îî‚îÄ‚îÄ work
‚îî‚îÄ‚îÄ Catalina
‚îî‚îÄ‚îÄ localhost
```
* –ü–∞–ø–∫–∞ `bin` –∑–±–µ—Ä—ñ–≥–∞—î —Å–∫—Ä–∏–ø—Ç–∏ —Ç–∞ –¥–≤—ñ–π–∫–æ–≤—ñ —Ñ–∞–π–ª–∏, –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–ª—è –∑–∞–ø—É—Å–∫—É —Ç–∞ —Ä–æ–±–æ—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ Tomcat.
* –ü–∞–ø–∫–∞ `conf` –∑–±–µ—Ä—ñ–≥–∞—î —Ä—ñ–∑–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ —Ñ–∞–π–ª–∏, —è–∫—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è Tomcat.
* –§–∞–π–ª `tomcat-users.xml` –∑–±–µ—Ä—ñ–≥–∞—î –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —Ç–∞ —ó—Ö –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ —Ä–æ–ª—ñ.
* –ü–∞–ø–∫–∞ `lib` –º—ñ—Å—Ç–∏—Ç—å —Ä—ñ–∑–Ω—ñ JAR-—Ñ–∞–π–ª–∏, –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è Tomcat.
* –ü–∞–ø–∫–∏ `logs` —Ç–∞ `temp` –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å —Ç–∏–º—á–∞—Å–æ–≤—ñ —Ñ–∞–π–ª–∏ –∂—É—Ä–Ω–∞–ª—ñ–≤.
* –ü–∞–ø–∫–∞ `webapps` —î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º –≤–µ–±-–∫–æ—Ä–µ–Ω–µ–º Tomcat —ñ –º—ñ—Å—Ç–∏—Ç—å –≤—Å—ñ –¥–æ–¥–∞—Ç–∫–∏. –ü–∞–ø–∫–∞ `work` –¥—ñ—î —è–∫ –∫–µ—à —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.

–ö–æ–∂–Ω–∞ –ø–∞–ø–∫–∞ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `webapps` –ø–æ–≤–∏–Ω–Ω–∞ –º–∞—Ç–∏ —Ç–∞–∫—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É.
```
webapps/customapp
‚îú‚îÄ‚îÄ images
‚îú‚îÄ‚îÄ index.jsp
‚îú‚îÄ‚îÄ META-INF
‚îÇ   ‚îî‚îÄ‚îÄ context.xml
‚îú‚îÄ‚îÄ status.xsd
‚îî‚îÄ‚îÄ WEB-INF
‚îú‚îÄ‚îÄ jsp
|   ‚îî‚îÄ‚îÄ admin.jsp
‚îî‚îÄ‚îÄ web.xml
‚îî‚îÄ‚îÄ lib
|    ‚îî‚îÄ‚îÄ jdbc_drivers.jar
‚îî‚îÄ‚îÄ classes
‚îî‚îÄ‚îÄ AdminServlet.class
```
–ù–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–∏–º —Ñ–∞–π–ª–æ–º —Å–µ—Ä–µ–¥ —Ü–∏—Ö —î `WEB-INF/web.xml`, —è–∫–∏–π –≤—ñ–¥–æ–º–∏–π —è–∫ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è. –¶–µ–π —Ñ–∞–π–ª –∑–±–µ—Ä—ñ–≥–∞—î **—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –º–∞—Ä—à—Ä—É—Ç–∏**, —è–∫—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–æ–¥–∞—Ç–∫–æ–º, —Ç–∞ –∫–ª–∞—Å–∏, —â–æ –æ–±—Ä–æ–±–ª—è—é—Ç—å —Ü—ñ –º–∞—Ä—à—Ä—É—Ç–∏.\
–£—Å—ñ —Å–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω—ñ –∫–ª–∞—Å–∏, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–æ–¥–∞—Ç–∫–æ–º, –ø–æ–≤–∏–Ω–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏—Å—è —É –ø–∞–ø—Ü—ñ `WEB-INF/classes`. –¶—ñ –∫–ª–∞—Å–∏ –º–æ–∂—É—Ç—å –º—ñ—Å—Ç–∏—Ç–∏ –≤–∞–∂–ª–∏–≤—É –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫—É, –∞ —Ç–∞–∫–æ–∂ —á—É—Ç–ª–∏–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é. –ë—É–¥—å-—è–∫–∞ –≤—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å —É —Ü–∏—Ö —Ñ–∞–π–ª–∞—Ö –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –ø–æ–≤–Ω–æ–≥–æ –∫–æ–º–ø—Ä–æ–º—ñ—Å—É –≤–µ–±-—Å–∞–π—Ç—É. –ü–∞–ø–∫–∞ `lib` –∑–±–µ—Ä—ñ–≥–∞—î –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏, –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–ª—è —Ü—å–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É. –ü–∞–ø–∫–∞ `jsp` –∑–±–µ—Ä—ñ–≥–∞—î [Jakarta Server Pages (JSP)](https://en.wikipedia.org/wiki/Jakarta\_Server\_Pages), —Ä–∞–Ω—ñ—à–µ –≤—ñ–¥–æ–º—ñ —è–∫ `JavaServer Pages`, —è–∫—ñ –º–æ–∂–Ω–∞ –ø–æ—Ä—ñ–≤–Ω—è—Ç–∏ –∑ PHP-—Ñ–∞–π–ª–∞–º–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ Apache.

–û—Å—å –ø—Ä–∏–∫–ª–∞–¥ **web.xml** —Ñ–∞–π–ª—É.
```xml
<?xml version="1.0" encoding="ISO-8859-1"?>

<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>
<servlet>
<servlet-name>AdminServlet</servlet-name>
<servlet-class>com.inlanefreight.api.AdminServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>AdminServlet</servlet-name>
<url-pattern>/admin</url-pattern>
</servlet-mapping>
</web-app>
```
–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è `web.xml` –≤–∏—â–µ –≤–∏–∑–Ω–∞—á–∞—î **–Ω–æ–≤–∏–π —Å–µ—Ä–≤–ª–µ—Ç –∑ —ñ–º'—è–º `AdminServlet`**, —è–∫–∏–π –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –Ω–∞ **–∫–ª–∞—Å `com.inlanefreight.api.AdminServlet`**. Java –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫—Ä–∞–ø–∫–æ–≤—É –Ω–æ—Ç–∞—Ü—ñ—é –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–º–µ–Ω –ø–∞–∫–µ—Ç—ñ–≤, —â–æ –æ–∑–Ω–∞—á–∞—î, —â–æ —à–ª—è—Ö –Ω–∞ –¥–∏—Å–∫—É –¥–ª—è –≤–∫–∞–∑–∞–Ω–æ–≥–æ –≤–∏—â–µ –∫–ª–∞—Å—É –±—É–¥–µ:

* **`classes/com/inlanefreight/api/AdminServlet.class`**

–î–∞–ª—ñ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–æ–≤–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å–µ—Ä–≤–ª–µ—Ç–∞ –¥–ª—è **–≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤ –Ω–∞ `/admin` –∑ `AdminServlet`**. –¶—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –Ω–∞–¥—ñ—à–ª–µ –±—É–¥—å-—è–∫–∏–π –∑–∞–ø–∏—Ç, –æ—Ç—Ä–∏–º–∞–Ω–∏–π –¥–ª—è **`/admin` –¥–æ –∫–ª–∞—Å—É `AdminServlet.class`** –¥–ª—è –æ–±—Ä–æ–±–∫–∏. –û–ø–∏—Å–Ω–∏–∫ **`web.xml`** –º—ñ—Å—Ç–∏—Ç—å –±–∞–≥–∞—Ç–æ **—á—É—Ç–ª–∏–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó** —ñ —î –≤–∞–∂–ª–∏–≤–∏–º —Ñ–∞–π–ª–æ–º –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ **–≤—Ä–∞–∑–ª–∏–≤–æ—Å—Ç—ñ Local File Inclusion (LFI)**.

### tomcat-users

–§–∞–π–ª **`tomcat-users.xml`** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è **–¥–æ–∑–≤–æ–ª—É** –∞–±–æ –∑–∞–±–æ—Ä–æ–Ω–∏ –¥–æ—Å—Ç—É–ø—É –¥–æ **–∞–¥–º—ñ–Ω—Å—å–∫–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫ `/manager` —Ç–∞ `host-manager`**.
```xml
<?xml version="1.0" encoding="UTF-8"?>

<SNIP>

<tomcat-users xmlns="http://tomcat.apache.org/xml"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://tomcat.apache.org/xml tomcat-users.xsd"
version="1.0">
<!--
By default, no user is included in the "manager-gui" role required
to operate the "/manager/html" web application.  If you wish to use this app,
you must define such a user - the username and password are arbitrary.

Built-in Tomcat manager roles:
- manager-gui    - allows access to the HTML GUI and the status pages
- manager-script - allows access to the HTTP API and the status pages
- manager-jmx    - allows access to the JMX proxy and the status pages
- manager-status - allows access to the status pages only

The users below are wrapped in a comment and are therefore ignored. If you
wish to configure one or more of these users for use with the manager web
application, do not forget to remove the <!.. ..> that surrounds them. You
will also need to set the passwords to something appropriate.
-->


<SNIP>

!-- user manager can access only manager section -->
<role rolename="manager-gui" />
<user username="tomcat" password="tomcat" roles="manager-gui" />

<!-- user admin can access manager and admin section both -->
<role rolename="admin-gui" />
<user username="admin" password="admin" roles="manager-gui,admin-gui" />


</tomcat-users>
```
–§–∞–π–ª –ø–æ–∫–∞–∑—É—î, –¥–æ —á–æ–≥–æ –Ω–∞–¥–∞—é—Ç—å –¥–æ—Å—Ç—É–ø –∫–æ–∂–Ω–∞ –∑ —Ä–æ–ª–µ–π `manager-gui`, `manager-script`, `manager-jmx` —Ç–∞ `manager-status`. –£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –º–∏ –º–æ–∂–µ–º–æ –±–∞—á–∏—Ç–∏, —â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á `tomcat` –∑ –ø–∞—Ä–æ–ª–µ–º `tomcat` –º–∞—î —Ä–æ–ª—å `manager-gui`, –∞ –¥–ª—è –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ `admin` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥—Ä—É–≥–∏–π —Å–ª–∞–±–∫–∏–π –ø–∞—Ä–æ–ª—å `admin`.

## References

* [https://academy.hackthebox.com/module/113/section/1090](https://academy.hackthebox.com/module/113/section/1090)


{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
