# Basic Tomcat Info

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

### рд░реВрдЯ рдХреЗ рд╕рд╛рде рдЪрд▓рд╛рдиреЗ рд╕реЗ рдмрдЪреЗрдВ

рдЯреЙрдордХреИрдЯ рдХреЛ рд░реВрдЯ рдХреЗ рд╕рд╛рде рди рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдмрд╣реБрдд рд╕рд╛рдорд╛рдиреНрдп рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдпрд╣ рд╣реИ рдХрд┐ рдкреЛрд░реНрдЯ 80/443 рдкрд░ рдПрдХ рдЕрдкрд╛рдЪреЗ рд╕рд░реНрд╡рд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдП рдФрд░, рдпрджрд┐ рдЕрдиреБрд░реЛрдзрд┐рдд рдкрде рдПрдХ рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИ, рддреЛ рдЕрдиреБрд░реЛрдз рдХреЛ рдПрдХ рдЕрд▓рдЧ рдкреЛрд░реНрдЯ рдкрд░ рдЪрд▓ рд░рд╣реЗ рдЯреЙрдордХреИрдЯ рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИред

### рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╕рдВрд░рдЪрдирд╛
```
тФЬтФАтФА bin
тФЬтФАтФА conf
тФВ   тФЬтФАтФА catalina.policy
тФВ   тФЬтФАтФА catalina.properties
тФВ   тФЬтФАтФА context.xml
тФВ   тФЬтФАтФА tomcat-users.xml
тФВ   тФЬтФАтФА tomcat-users.xsd
тФВ   тФФтФАтФА web.xml
тФЬтФАтФА lib
тФЬтФАтФА logs
тФЬтФАтФА temp
тФЬтФАтФА webapps
тФВ   тФЬтФАтФА manager
тФВ   тФВ   тФЬтФАтФА images
тФВ   тФВ   тФЬтФАтФА META-INF
тФВ   тФВ   тФФтФАтФА WEB-INF
|   |       тФФтФАтФА web.xml
тФВ   тФФтФАтФА ROOT
тФВ       тФФтФАтФА WEB-INF
тФФтФАтФА work
тФФтФАтФА Catalina
тФФтФАтФА localhost
```
* `bin` рдлрд╝реЛрд▓реНрдбрд░ рдЙрди рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдФрд░ рдмрд╛рдЗрдирд░реАрдЬрд╝ рдХреЛ рд╕реНрдЯреЛрд░ рдХрд░рддрд╛ рд╣реИ рдЬреЛ Tomcat рд╕рд░реНрд╡рд░ рдХреЛ рд╢реБрд░реВ рдФрд░ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИрдВред
* `conf` рдлрд╝реЛрд▓реНрдбрд░ Tomcat рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╡рд┐рднрд┐рдиреНрди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╕реНрдЯреЛрд░ рдХрд░рддрд╛ рд╣реИред
* `tomcat-users.xml` рдлрд╝рд╛рдЗрд▓ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓ рдФрд░ рдЙрдирдХреЗ рдЕрд╕рд╛рдЗрди рдХрд┐рдП рдЧрдП рднреВрдорд┐рдХрд╛рдУрдВ рдХреЛ рд╕реНрдЯреЛрд░ рдХрд░рддреА рд╣реИред
* `lib` рдлрд╝реЛрд▓реНрдбрд░ Tomcat рдХреЗ рд╕рд╣реА рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╡рд┐рднрд┐рдиреНрди JAR рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд░рдЦрддрд╛ рд╣реИред
* `logs` рдФрд░ `temp` рдлрд╝реЛрд▓реНрдбрд░ рдЕрд╕реНрдерд╛рдпреА рд▓реЙрдЧ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╕реНрдЯреЛрд░ рдХрд░рддреЗ рд╣реИрдВред
* `webapps` рдлрд╝реЛрд▓реНрдбрд░ Tomcat рдХрд╛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╡реЗрдм рд░реВрдЯ рд╣реИ рдФрд░ рд╕рднреА рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд░рддрд╛ рд╣реИред `work` рдлрд╝реЛрд▓реНрдбрд░ рдПрдХ рдХреИрд╢ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИ рдФрд░ рд░рдирдЯрд╛рдЗрдо рдХреЗ рджреМрд░рд╛рди рдбреЗрдЯрд╛ рдХреЛ рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

`webapps` рдХреЗ рдЕрдВрджрд░ рдкреНрд░рддреНрдпреЗрдХ рдлрд╝реЛрд▓реНрдбрд░ рд╕реЗ рдЕрдкреЗрдХреНрд╖рд┐рдд рд╣реИ рдХрд┐ рдЙрд╕рдХреА рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕рдВрд░рдЪрдирд╛ рд╣реЛред
```
webapps/customapp
тФЬтФАтФА images
тФЬтФАтФА index.jsp
тФЬтФАтФА META-INF
тФВ   тФФтФАтФА context.xml
тФЬтФАтФА status.xsd
тФФтФАтФА WEB-INF
тФЬтФАтФА jsp
|   тФФтФАтФА admin.jsp
тФФтФАтФА web.xml
тФФтФАтФА lib
|    тФФтФАтФА jdbc_drivers.jar
тФФтФАтФА classes
тФФтФАтФА AdminServlet.class
```
рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдлрд╝рд╛рдЗрд▓ рдЗрдирдореЗрдВ рд╕реЗ `WEB-INF/web.xml` рд╣реИ, рдЬрд┐рд╕реЗ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдбрд┐рд╕реНрдХреНрд░рд┐рдкреНрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣ рдлрд╝рд╛рдЗрд▓ **рдРрдкреНрд▓рд┐рдХреЗрд╢рди рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд░реВрдЯреНрд╕** рдФрд░ рдЗрди рд░реВрдЯреНрд╕ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рд╡рд╛рд▓реА рдХрдХреНрд╖рд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддреА рд╣реИред\
рдРрдкреНрд▓рд┐рдХреЗрд╢рди рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд╕рднреА рд╕рдВрдХрд▓рд┐рдд рдХрдХреНрд╖рд╛рдПрдБ `WEB-INF/classes` рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред рдЗрди рдХрдХреНрд╖рд╛рдУрдВ рдореЗрдВ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ рдФрд░ рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА рд╣реЛ рд╕рдХрддреА рд╣реИред рдЗрди рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рдХреЛрдИ рднреА рднреЗрджреНрдпрддрд╛ рд╡реЗрдмрд╕рд╛рдЗрдЯ рдХреЗ рдкреВрд░реНрдг рд╕рдордЭреМрддреЗ рдХреА рдУрд░ рд▓реЗ рдЬрд╛ рд╕рдХрддреА рд╣реИред `lib` рдлрд╝реЛрд▓реНрдбрд░ рдЙрд╕ рд╡рд┐рд╢реЗрд╖ рдРрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИред `jsp` рдлрд╝реЛрд▓реНрдбрд░ [Jakarta Server Pages (JSP)](https://en.wikipedia.org/wiki/Jakarta\_Server\_Pages) рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рдкрд╣рд▓реЗ `JavaServer Pages` рдХреЗ рд░реВрдк рдореЗрдВ рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рдерд╛, рдЬрд┐рд╕реЗ Apache рд╕рд░реНрд╡рд░ рдкрд░ PHP рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд╕рд╛рде рддреБрд▓рдирд╛ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред

рдпрд╣рд╛рдБ рдПрдХ рдЙрджрд╛рд╣рд░рдг **web.xml** рдлрд╝рд╛рдЗрд▓ рд╣реИред
```xml
<?xml version="1.0" encoding="ISO-8859-1"?>

<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>
<servlet>
<servlet-name>AdminServlet</servlet-name>
<servlet-class>com.inlanefreight.api.AdminServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>AdminServlet</servlet-name>
<url-pattern>/admin</url-pattern>
</servlet-mapping>
</web-app>
```
The `web.xml` рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдКрдкрд░ рдПрдХ **рдирдпрд╛ рд╕рд░реНрд╡рд▓реЗрдЯ рдирд╛рдо `AdminServlet`** рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬреЛ **рдХреНрд▓рд╛рд╕ `com.inlanefreight.api.AdminServlet`** рд╕реЗ рдореИрдк рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдЬрд╛рд╡рд╛ рдбреЙрдЯ рдиреЛрдЯреЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдкреИрдХреЗрдЬ рдирд╛рдо рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдКрдкрд░ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреНрд▓рд╛рд╕ рдХреЗ рд▓рд┐рдП рдбрд┐рд╕реНрдХ рдкрд░ рдкрде рд╣реЛрдЧрд╛:

* **`classes/com/inlanefreight/api/AdminServlet.class`**

рдЗрд╕рдХреЗ рдмрд╛рдж, рдПрдХ рдирдпрд╛ рд╕рд░реНрд╡рд▓реЗрдЯ рдореИрдкрд┐рдВрдЧ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ рддрд╛рдХрд┐ **`/admin` рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ `AdminServlet`** рд╕реЗ рдореИрдк рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред рдпрд╣ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди **`/admin`** рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рдкреНрдд рдХрд┐рд╕реА рднреА рдЕрдиреБрд░реЛрдз рдХреЛ **`AdminServlet.class`** рдХреНрд▓рд╛рд╕ рдХреЗ рд▓рд┐рдП рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рднреЗрдЬреЗрдЧрд╛ред **`web.xml`** рд╡рд┐рд╡рд░рдг рдореЗрдВ рдмрд╣реБрдд рд╕рд╛рд░реА **рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рдЬрд╛рдирдХрд╛рд░реА** рд╣реЛрддреА рд╣реИ рдФрд░ рдпрд╣ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдлрд╝рд╛рдЗрд▓ рд╣реИ рдЬрд┐рд╕реЗ **рд╕реНрдерд╛рдиреАрдп рдлрд╝рд╛рдЗрд▓ рд╕рдорд╛рд╡реЗрд╢рди (LFI) рднреЗрджреНрдпрддрд╛** рдХрд╛ рд▓рд╛рдн рдЙрдард╛рддреЗ рд╕рдордп рдЬрд╛рдВрдЪрдирд╛ рдЪрд╛рд╣рд┐рдПред

### tomcat-users

**`tomcat-users.xml`** рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ **`/manager` рдФрд░ `host-manager` рдкреНрд░рд╢рд╛рд╕рдирд┐рдХ рдкреГрд╖реНрдареЛрдВ** рддрдХ рдкрд╣реБрдБрдЪ рдХреЛ **рдЕрдиреБрдорддрд┐ рджреЗрдиреЗ** рдпрд╛ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
```xml
<?xml version="1.0" encoding="UTF-8"?>

<SNIP>

<tomcat-users xmlns="http://tomcat.apache.org/xml"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://tomcat.apache.org/xml tomcat-users.xsd"
version="1.0">
<!--
By default, no user is included in the "manager-gui" role required
to operate the "/manager/html" web application.  If you wish to use this app,
you must define such a user - the username and password are arbitrary.

Built-in Tomcat manager roles:
- manager-gui    - allows access to the HTML GUI and the status pages
- manager-script - allows access to the HTTP API and the status pages
- manager-jmx    - allows access to the JMX proxy and the status pages
- manager-status - allows access to the status pages only

The users below are wrapped in a comment and are therefore ignored. If you
wish to configure one or more of these users for use with the manager web
application, do not forget to remove the <!.. ..> that surrounds them. You
will also need to set the passwords to something appropriate.
-->


<SNIP>

!-- user manager can access only manager section -->
<role rolename="manager-gui" />
<user username="tomcat" password="tomcat" roles="manager-gui" />

<!-- user admin can access manager and admin section both -->
<role rolename="admin-gui" />
<user username="admin" password="admin" roles="manager-gui,admin-gui" />


</tomcat-users>
```
The file shows us what each of the roles `manager-gui`, `manager-script`, `manager-jmx`, and `manager-status` provide access to. In this example, we can see that a user `tomcat` with the password `tomcat` has the `manager-gui` role, and a second weak password `admin` is set for the user account `admin`

## References

* [https://academy.hackthebox.com/module/113/section/1090](https://academy.hackthebox.com/module/113/section/1090)


{% hint style="success" %}
рд╕реАрдЦреЗрдВ рдФрд░ AWS рд╣реИрдХрд┐рдВрдЧ рдХрд╛ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
рд╕реАрдЦреЗрдВ рдФрд░ GCP рд╣реИрдХрд┐рдВрдЧ рдХрд╛ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдБ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* **рд╣рдорд╛рд░реЗ** ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**telegram рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ **Twitter** ЁЯРж рдкрд░ рд╣рдореЗрдВ **рдлреЙрд▓реЛ рдХрд░реЗрдВ** [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдЧрд┐рдЯрд╣рдм рд░рд┐рдкреЛрдЬрд┐рдЯрд░реА рдореЗрдВ PR рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВред

</details>
{% endhint %}
