{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}


# IPv6 Osnovna teorija

## MreÅ¾e

IPv6 adrese su strukturirane kako bi poboljÅ¡ale organizaciju mreÅ¾e i interakciju ureÄ‘aja. IPv6 adresa se deli na:

1. **MreÅ¾ni prefiks**: Prvih 48 bita, koji odreÄ‘uju segment mreÅ¾e.
2. **Subnet ID**: SledeÄ‡ih 16 bita, koji se koriste za definisanje specifiÄnih podmreÅ¾a unutar mreÅ¾e.
3. **Identifikator interfejsa**: Poslednjih 64 bita, koji jedinstveno identifikuju ureÄ‘aj unutar podmreÅ¾e.

Dok IPv6 izostavlja ARP protokol prisutan u IPv4, uvodi **ICMPv6** sa dve glavne poruke:
- **Zahtev za suseda (NS)**: Multicast poruke za reÅ¡avanje adresa.
- **Oglas suseda (NA)**: Unicast odgovori na NS ili spontani oglasi.

IPv6 takoÄ‘e ukljuÄuje posebne tipove adresa:
- **Loopback adresa (`::1`)**: Ekvivalent IPv4 `127.0.0.1`, za internu komunikaciju unutar hosta.
- **Link-Local adrese (`FE80::/10`)**: Za lokalne mreÅ¾ne aktivnosti, ne za internet rutiranje. UreÄ‘aji na istoj lokalnoj mreÅ¾i mogu otkriti jedni druge koristeÄ‡i ovaj opseg.

### PraktiÄna upotreba IPv6 u mreÅ¾nim komandama

Da biste interagovali sa IPv6 mreÅ¾ama, moÅ¾ete koristiti razne komande:
- **Ping Link-Local adrese**: Proverite prisustvo lokalnih ureÄ‘aja koristeÄ‡i `ping6`.
- **OtkriÄ‡e suseda**: Koristite `ip neigh` da biste videli ureÄ‘aje otkrivene na link sloju.
- **alive6**: Alternativni alat za otkrivanje ureÄ‘aja na istoj mreÅ¾i.

Ispod su neki primeri komandi:
```bash
ping6 â€“I eth0 -c 5 ff02::1 > /dev/null 2>&1
ip neigh | grep ^fe80

# Alternatively, use alive6 for neighbor discovery
alive6 eth0
```
IPv6 adrese se mogu izvesti iz MAC adrese ureÄ‘aja za lokalnu komunikaciju. Evo pojednostavljenog vodiÄa o tome kako izvesti Link-local IPv6 adresu iz poznate MAC adrese, kao i kratak pregled tipova IPv6 adresa i metoda za otkrivanje IPv6 adresa unutar mreÅ¾e.

## **IzvoÄ‘enje Link-local IPv6 iz MAC adrese**

Data je MAC adresa **`12:34:56:78:9a:bc`**, moÅ¾ete konstruisati Link-local IPv6 adresu na sledeÄ‡i naÄin:

1. Konvertujte MAC u IPv6 format: **`1234:5678:9abc`**
2. Dodajte `fe80::` i umetnite `fffe` u sredinu: **`fe80::1234:56ff:fe78:9abc`**
3. Invertujte sedmi bit s leva, menjajuÄ‡i `1234` u `1034`: **`fe80::1034:56ff:fe78:9abc`**

## **Tipovi IPv6 adresa**

- **Jedinstvena lokalna adresa (ULA)**: Za lokalne komunikacije, nije namenjena za javno internet rutiranje. Prefiks: **`FEC00::/7`**
- **Multicast adresa**: Za komunikaciju jedan-prema-mnogima. Dostavlja se svim interfejsima u multicast grupi. Prefiks: **`FF00::/8`**
- **Anycast adresa**: Za komunikaciju jedan-prema-najbliÅ¾em. Å alje se najbliÅ¾em interfejsu prema rutirajuÄ‡em protokolu. Deo je **`2000::/3`** globalnog unicast opsega.

## **Prefiksi adresa**
- **fe80::/10**: Link-Local adrese (sliÄno 169.254.x.x)
- **fc00::/7**: Jedinstveni lokalni unicast (sliÄno privatnim IPv4 opsezima kao Å¡to su 10.x.x.x, 172.16.x.x, 192.168.x.x)
- **2000::/3**: Globalni unicast
- **ff02::1**: Multicast sve Ävorove
- **ff02::2**: Multicast Ävorovi rutera

## **OtkriÄ‡e IPv6 adresa unutar mreÅ¾e**

### NaÄin 1: KoriÅ¡Ä‡enje Link-local adresa
1. Nabavite MAC adresu ureÄ‘aja unutar mreÅ¾e.
2. Izvedite Link-local IPv6 adresu iz MAC adrese.

### NaÄin 2: KoriÅ¡Ä‡enje Multicast
1. PoÅ¡aljite ping na multicast adresu `ff02::1` da otkrijete IPv6 adrese na lokalnoj mreÅ¾i.
```bash
service ufw stop # Stop the firewall
ping6 -I <IFACE> ff02::1 # Send a ping to multicast address
ip -6 neigh # Display the neighbor table
```
## IPv6 Man-in-the-Middle (MitM) Attacks
Postoji nekoliko tehnika za izvoÄ‘enje MitM napada u IPv6 mreÅ¾ama, kao Å¡to su:

- LaÅ¾iranje ICMPv6 suseda ili usmerivaÄkih oglasa.
- KoriÅ¡Ä‡enje ICMPv6 preusmeravanja ili poruka "Packet Too Big" za manipulaciju rutiranjem.
- Napad na mobilni IPv6 (obiÄno zahteva da IPSec bude onemoguÄ‡en).
- Postavljanje laÅ¾nog DHCPv6 servera.


# Identifying IPv6 Addresses in the eild

## Exploring Subdomains
Metoda za pronalaÅ¾enje poddomena koji su potencijalno povezani sa IPv6 adresama ukljuÄuje koriÅ¡Ä‡enje pretraÅ¾ivaÄa. Na primer, koriÅ¡Ä‡enje obrasca upita kao Å¡to je `ipv6.*` moÅ¾e biti efikasno. Konkretno, sledeÄ‡a pretraga moÅ¾e se koristiti u Google-u:
```bash
site:ipv6./
```
## KoriÅ¡Ä‡enje DNS upita
Da bi se identifikovale IPv6 adrese, odreÄ‘ene vrste DNS zapisa mogu se upitavati:
- **AXFR**: Zahteva potpunu transfer zonu, potencijalno otkrivajuÄ‡i Å¡irok spektar DNS zapisa.
- **AAAA**: Direktno traÅ¾i IPv6 adrese.
- **ANY**: Å irok upit koji vraÄ‡a sve dostupne DNS zapise.

## IstraÅ¾ivanje sa Ping6
Nakon identifikacije IPv6 adresa povezanih sa organizacijom, `ping6` alat moÅ¾e se koristiti za istraÅ¾ivanje. Ovaj alat pomaÅ¾e u proceni odzivnosti identifikovanih IPv6 adresa, i moÅ¾e takoÄ‘e pomoÄ‡i u otkrivanju susednih IPv6 ureÄ‘aja.

## Reference

* [http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html](http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html)
* [https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904](https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904)


{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
