{% hint style="success" %}
Učite i vežbajte hakovanje AWS-a:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Učite i vežbajte hakovanje GCP-a: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podržite HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakovanje trikova slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}


# Osnovna teorija IPv6

## Mreže

IPv6 adrese su strukturirane radi poboljšanja organizacije mreže i interakcije uređaja. IPv6 adresa je podeljena na:

1. **Prefiks mreže**: Prvih 48 bitova koji određuju segment mreže.
2. **ID podmreže**: Sledećih 16 bitova, koji se koriste za definisanje specifičnih podmreža unutar mreže.
3. **Identifikator interfejsa**: Poslednjih 64 bitova, jedinstveno identifikujući uređaj unutar podmreže.

Iako IPv6 ne koristi ARP protokol koji se nalazi u IPv4, uvodi **ICMPv6** sa dve osnovne poruke:
- **Solicitacija suseda (NS)**: Multikast poruke za razrešenje adrese.
- **Oglas suseda (NA)**: Unikast odgovori na NS ili spontane najave.

IPv6 takođe uključuje posebne tipove adresa:
- **Loopback adresa (`::1`)**: Ekvivalentna IPv4 `127.0.0.1`, za internu komunikaciju unutar hosta.
- **Link-Local adrese (`FE80::/10`)**: Za lokalne mrežne aktivnosti, ne za rutiranje na internetu. Uređaji na istoj lokalnoj mreži mogu otkriti jedni druge koristeći ovaj opseg.

### Praktična upotreba IPv6 u mrežnim komandama

Da biste interagovati sa IPv6 mrežama, možete koristiti različite komande:
- **Ping Link-Local adrese**: Proverite prisustvo lokalnih uređaja koristeći `ping6`.
- **Otkrivanje suseda**: Koristite `ip neigh` da biste videli uređaje otkrivene na link nivou.
- **alive6**: Alternativni alat za otkrivanje uređaja na istoj mreži.

U nastavku su neki primeri komandi:
```bash
ping6 –I eth0 -c 5 ff02::1 > /dev/null 2>&1
ip neigh | grep ^fe80

# Alternatively, use alive6 for neighbor discovery
alive6 eth0
```
## **Dobijanje Link-local IPv6 adrese iz MAC adrese**

Dati MAC adresa **`12:34:56:78:9a:bc`**, možete konstruisati Link-local IPv6 adresu na sledeći način:

1. Konvertujte MAC u IPv6 format: **`1234:5678:9abc`**
2. Dodajte `fe80::` i ubacite `fffe` u sredinu: **`fe80::1234:56ff:fe78:9abc`**
3. Invertujte sedmi bit s leve strane, menjajući `1234` u `1034`: **`fe80::1034:56ff:fe78:9abc`**

## **Tipovi IPv6 Adresa**

- **Unique Local Address (ULA)**: Za lokalnu komunikaciju, nije namenjena za javno rutiranje interneta. Prefiks: **`FEC00::/7`**
- **Multicast Adresa**: Za jedan-na-mnogo komunikaciju. Dostavljena svim interfejsima u multicast grupi. Prefiks: **`FF00::/8`**
- **Anycast Adresa**: Za jedan-do-najbliže komunikaciju. Poslata najbližem interfejsu prema rutinskom protokolu. Deo **`2000::/3`** globalnog unicast opsega.

## **Prefiksi Adresa**
- **fe80::/10**: Link-Local adrese (slično kao 169.254.x.x)
- **fc00::/7**: Unique Local-Unicast (slično kao privatni IPv4 opsezi poput 10.x.x.x, 172.16.x.x, 192.168.x.x)
- **2000::/3**: Globalni Unicast
- **ff02::1**: Multicast Svi Čvorovi
- **ff02::2**: Multicast Ruter Čvorovi

## **Otkrivanje IPv6 Adresa unutar Mreže**

### Način 1: Korišćenje Link-local Adresa
1. Dobiti MAC adresu uređaja unutar mreže.
2. Dobiti Link-local IPv6 adresu iz MAC adrese.

### Način 2: Korišćenje Multicast-a
1. Pošaljite ping na multicast adresu `ff02::1` da biste otkrili IPv6 adrese na lokalnoj mreži.
```bash
service ufw stop # Stop the firewall
ping6 -I <IFACE> ff02::1 # Send a ping to multicast address
ip -6 neigh # Display the neighbor table
```
## Napadi čovek-u-sredini (MitM) na IPv6
Postoje nekoliko tehnika za izvođenje MitM napada u IPv6 mrežama, kao što su:

- Falsifikovanje ICMPv6 susednih ili rutera oglasa.
- Korišćenje ICMPv6 preusmeravanja ili poruka "Packet Too Big" za manipulaciju rutiranjem.
- Napad na mobilni IPv6 (obično zahteva isključen IPSec).
- Postavljanje lažnog DHCPv6 servera.


# Identifikacija IPv6 adresa u divljini

## Istraživanje poddomena
Metod za pronalaženje poddomena koji su potencijalno povezani sa IPv6 adresama uključuje korišćenje pretraživača. Na primer, upotreba obrasca upita poput `ipv6.*` može biti efikasna. Konkretno, sledeća pretraga može biti korišćena u Google pretraživaču:
```bash
site:ipv6./
```
## Korišćenje DNS Upita
Da biste identifikovali IPv6 adrese, mogu se upitati određeni tipovi DNS zapisa:
- **AXFR**: Zahteva kompletan prenos zone, potencijalno otkrivajući širok spektar DNS zapisa.
- **AAAA**: Direktno traži IPv6 adrese.
- **ANY**: Širok upit koji vraća sve dostupne DNS zapise.

## Istraživanje sa Ping6
Nakon što se identifikuju IPv6 adrese povezane sa organizacijom, alatka `ping6` može se koristiti za istraživanje. Ovaj alat pomaže u proceni odziva identifikovanih IPv6 adresa, a takođe može pomoći u otkrivanju susednih IPv6 uređaja.


## Reference

* [http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html](http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html)
* [https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904](https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904)


{% hint style="success" %}
Naučite i vežbajte hakovanje AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Obuka AWS Crveni Tim Ekspert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Naučite i vežbajte hakovanje GCP-a: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Obuka GCP Crveni Tim Ekspert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Podržite HackTricks</summary>

* Proverite [**planove pretplate**](https://github.com/sponsors/carlospolop)!
* **Pridružite se** 💬 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** nas na **Twitteru** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite hakovanje trikova slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
{% endhint %}
