{% hint style="success" %}
Apprenez et pratiquez le piratage AWS :<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**Formation HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Apprenez et pratiquez le piratage GCP : <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**Formation HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Soutenez HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop)!
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-nous** sur **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Partagez des astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}


# Th√©orie de base sur IPv6

## R√©seaux

Les adresses IPv6 sont structur√©es pour am√©liorer l'organisation des r√©seaux et l'interaction des appareils. Une adresse IPv6 est divis√©e en :

1. **Pr√©fixe de r√©seau** : Les 48 premiers bits, d√©terminant le segment r√©seau.
2. **ID de sous-r√©seau** : Les 16 bits suivants, utilis√©s pour d√©finir des sous-r√©seaux sp√©cifiques au sein du r√©seau.
3. **Identifiant d'interface** : Les 64 derniers bits, identifiant de mani√®re unique un appareil au sein du sous-r√©seau.

Alors qu'IPv6 omet le protocole ARP trouv√© dans IPv4, il introduit **ICMPv6** avec deux messages principaux :
- **Solicitation de voisinage (NS)** : Messages multicast pour la r√©solution d'adresses.
- **Annonce de voisinage (NA)** : R√©ponses unicast aux NS ou annonces spontan√©es.

IPv6 int√®gre √©galement des types d'adresses sp√©ciaux :
- **Adresse de bouclage (`::1`)** : √âquivalent √† `127.0.0.1` en IPv4, pour la communication interne au sein de l'h√¥te.
- **Adresses de lien local (`FE80::/10`)** : Pour les activit√©s de r√©seau local, non pour le routage internet. Les appareils sur le m√™me r√©seau local peuvent se d√©couvrir mutuellement en utilisant cette plage.

### Utilisation pratique de l'IPv6 dans les commandes r√©seau

Pour interagir avec les r√©seaux IPv6, vous pouvez utiliser diverses commandes :
- **Ping des adresses de lien local** : V√©rifiez la pr√©sence des appareils locaux en utilisant `ping6`.
- **D√©couverte de voisinage** : Utilisez `ip neigh` pour voir les appareils d√©couverts au niveau de la couche de liaison.
- **alive6** : Un outil alternatif pour d√©couvrir les appareils sur le m√™me r√©seau.

Voici quelques exemples de commandes :
```bash
ping6 ‚ÄìI eth0 -c 5 ff02::1 > /dev/null 2>&1
ip neigh | grep ^fe80

# Alternatively, use alive6 for neighbor discovery
alive6 eth0
```
Les adresses IPv6 peuvent √™tre d√©riv√©es de l'adresse MAC d'un appareil pour la communication locale. Voici un guide simplifi√© sur la mani√®re de d√©river l'adresse IPv6 de lien local √† partir d'une adresse MAC connue, ainsi qu'un bref aper√ßu des types d'adresses IPv6 et des m√©thodes pour d√©couvrir les adresses IPv6 au sein d'un r√©seau.

## **D√©rivation de l'adresse IPv6 de lien local √† partir de l'adresse MAC**

√âtant donn√© une adresse MAC **`12:34:56:78:9a:bc`**, vous pouvez construire l'adresse IPv6 de lien local comme suit :

1. Convertir la MAC en format IPv6 : **`1234:5678:9abc`**
2. Pr√©fixer `fe80::` et ins√©rer `fffe` au milieu : **`fe80::1234:56ff:fe78:9abc`**
3. Inverser le septi√®me bit de gauche, en changeant `1234` en `1034` : **`fe80::1034:56ff:fe78:9abc`**

## **Types d'adresses IPv6**

- **Adresse Unique Locale (ULA)** : Pour les communications locales, non destin√©e au routage sur Internet public. Pr√©fixe : **`FEC00::/7`**
- **Adresse Multicast** : Pour les communications de un √† plusieurs. Livr√©e √† toutes les interfaces du groupe multicast. Pr√©fixe : **`FF00::/8`**
- **Adresse Anycast** : Pour les communications de un √† plus proche. Envoy√©e √† l'interface la plus proche selon le protocole de routage. Fait partie de la plage d'unicast globale **`2000::/3`**.

## **Pr√©fixes d'adresse**
- **fe80::/10** : Adresses de lien local (similaire √† 169.254.x.x)
- **fc00::/7** : Unique Local-Unicast (similaire aux plages IPv4 priv√©es comme 10.x.x.x, 172.16.x.x, 192.168.x.x)
- **2000::/3** : Unicast Global
- **ff02::1** : Multicast Tous les Noeuds
- **ff02::2** : Multicast Noeuds Routeurs

## **D√©couverte des adresses IPv6 au sein d'un r√©seau**

### M√©thode 1 : Utilisation des adresses de lien local
1. Obtenir l'adresse MAC d'un appareil dans le r√©seau.
2. D√©river l'adresse IPv6 de lien local √† partir de l'adresse MAC.

### M√©thode 2 : Utilisation du Multicast
1. Envoyer un ping √† l'adresse multicast `ff02::1` pour d√©couvrir les adresses IPv6 sur le r√©seau local.
```bash
service ufw stop # Stop the firewall
ping6 -I <IFACE> ff02::1 # Send a ping to multicast address
ip -6 neigh # Display the neighbor table
```
## Attaques de l'homme du milieu (MitM) IPv6
Plusieurs techniques existent pour ex√©cuter des attaques MitM dans les r√©seaux IPv6, telles que :

- Le spoofing des annonces de voisin ou de routeur ICMPv6.
- L'utilisation des messages de redirection ICMPv6 ou "Packet Too Big" pour manipuler le routage.
- Attaquer le mobile IPv6 (n√©cessite g√©n√©ralement que IPSec soit d√©sactiv√©).
- Mettre en place un serveur DHCPv6 malveillant.


# Identification des adresses IPv6 sur le terrain

## Exploration des sous-domaines
Une m√©thode pour trouver des sous-domaines potentiellement li√©s √† des adresses IPv6 implique l'utilisation des moteurs de recherche. Par exemple, l'utilisation d'un motif de requ√™te tel que `ipv6.*` peut √™tre efficace. Plus pr√©cis√©ment, la commande de recherche suivante peut √™tre utilis√©e dans Google:
```bash
site:ipv6./
```
## Utilisation des requ√™tes DNS
Pour identifier les adresses IPv6, certains types d'enregistrements DNS peuvent √™tre interrog√©s :
- **AXFR** : Demande un transfert de zone complet, permettant potentiellement de d√©couvrir une large gamme d'enregistrements DNS.
- **AAAA** : Recherche directement des adresses IPv6.
- **ANY** : Une requ√™te large qui renvoie tous les enregistrements DNS disponibles.

## Exploration avec Ping6
Apr√®s avoir identifi√© les adresses IPv6 associ√©es √† une organisation, l'utilitaire `ping6` peut √™tre utilis√© pour l'exploration. Cet outil aide √† √©valuer la r√©activit√© des adresses IPv6 identifi√©es et peut √©galement aider √† d√©couvrir des p√©riph√©riques IPv6 adjacents.


## R√©f√©rences

* [http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html](http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html)
* [https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904](https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904)


{% hint style="success" %}
Apprenez et pratiquez le piratage AWS :<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**Formation HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Apprenez et pratiquez le piratage GCP : <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**Formation HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Soutenez HackTricks</summary>

* Consultez les [**plans d'abonnement**](https://github.com/sponsors/carlospolop)!
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe Telegram**](https://t.me/peass) ou **suivez-nous** sur **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Partagez des astuces de piratage en soumettant des PR aux** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
