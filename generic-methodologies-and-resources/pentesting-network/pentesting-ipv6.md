{% hint style="success" %}
Leer en oefen AWS Hack: <img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Opleiding AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Leer en oefen GCP Hack: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Opleiding GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Ondersteun HackTricks</summary>

* Controleer die [**inskrywingsplanne**](https://github.com/sponsors/carlospolop)!
* **Sluit aan by die** üí¨ [**Discord-groep**](https://discord.gg/hRep4RUj7f) of die [**telegram-groep**](https://t.me/peass) of **volg** ons op **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Deel hacktruuks deur PR's in te dien by die** [**HackTricks**](https://github.com/carlospolop/hacktricks) en [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github-opslag.

</details>
{% endhint %}


# IPv6 Basiese teorie

## Netwerke

IPv6-adresse is gestruktureer om netwerkorganisasie en toestelinteraksie te verbeter. 'n IPv6-adres word verdeel in:

1. **Netwerkvoorvoegsel**: Die aanvanklike 48-bits, wat die netwerksegment bepaal.
2. **Subnet-ID**: Die volgende 16-bits, wat gebruik word om spesifieke subnets binne die netwerk te definieer.
3. **Koppelvlakidentifiseerder**: Die afsluitende 64-bits, wat 'n toestel binne die subnet uniek identifiseer.

Terwyl IPv6 die ARP-protokol wat in IPv4 gevind word, uitskakel, stel dit **ICMPv6** met twee prim√™re boodskappe in:
- **Buurnavorsing (NS)**: Multigietboodskappe vir adresoplossing.
- **Buuraankondiging (NA)**: Unikaste reaksies op NS of spontane aankondigings.

IPv6 sluit ook spesiale adresse in:
- **Terugvoeradres (`::1`)**: Ewewaardig aan IPv4 se `127.0.0.1`, vir interne kommunikasie binne die gasheer.
- **Skakelplaaslike adresse (`FE80::/10`)**: Vir plaaslike netwerkaktiwiteite, nie vir internetroeteverkeer nie. Toestelle op dieselfde plaaslike netwerk kan mekaar ontdek deur hierdie reeks te gebruik.

### Praktiese Gebruik van IPv6 in Netwerkopdragte

Om met IPv6-netwerke te interaksie, kan jy verskeie opdragte gebruik:
- **Ping Skakelplaaslike Adresse**: Kontroleer die teenwoordigheid van plaaslike toestelle met behulp van `ping6`.
- **Buurnavorsing**: Gebruik `ip neigh` om toestelle wat op die skakellaag ontdek is, te sien.
- **alive6**: 'n Alternatiewe instrument vir die ontdekking van toestelle op dieselfde netwerk.

Hieronder is 'n paar voorbeeldopdragte:
```bash
ping6 ‚ÄìI eth0 -c 5 ff02::1 > /dev/null 2>&1
ip neigh | grep ^fe80

# Alternatively, use alive6 for neighbor discovery
alive6 eth0
```
IPv6 adresse kan afgelei word vanaf 'n toestel se MAC-adres vir plaaslike kommunikasie. Hier is 'n vereenvoudigde gids oor hoe om die Skakel-plaaslike IPv6-adres af te lei van 'n bekende MAC-adres, en 'n kort oorsig van IPv6-adrestipes en metodes om IPv6-adresse binne 'n netwerk te ontdek.

## **Afleiding van Skakel-plaaslike IPv6 vanaf MAC-adres**

As daar 'n MAC-adres **`12:34:56:78:9a:bc`** gegee word, kan jy die Skakel-plaaslike IPv6-adres as volg konstrueer:

1. Omskep MAC na IPv6-formaat: **`1234:5678:9abc`**
2. Voeg `fe80::` voor en voeg `fffe` in die middel in: **`fe80::1234:56ff:fe78:9abc`**
3. Keer die sewende bit van links af om, verander `1234` na `1034`: **`fe80::1034:56ff:fe78:9abc`**

## **IPv6 Adrestipes**

- **Unieke Plaaslike Adres (ULA)**: Vir plaaslike kommunikasie, nie bedoel vir openbare internetroetering nie. Voorvoegsel: **`FEC00::/7`**
- **Multicast-adres**: Vir een-tot-vele kommunikasie. Afgelewer aan alle koppelvlakke in die multicast-groep. Voorvoegsel: **`FF00::/8`**
- **Anycast-adres**: Vir een-tot-naaste kommunikasie. Gestuur na die naaste koppelvlak volgens roetineprotokol. Deel van die globale unicast-reeks **`2000::/3`**.

## **Adresvoorvoegsels**
- **fe80::/10**: Skakel-plaaslike adresse (soortgelyk aan 169.254.x.x)
- **fc00::/7**: Unieke Plaaslike-Uniek (soortgelyk aan privaat IPv4-reeks soos 10.x.x.x, 172.16.x.x, 192.168.x.x)
- **2000::/3**: Globale Unicast
- **ff02::1**: Multicast Alle Knope
- **ff02::2**: Multicast Router Knope

## **Ontdekking van IPv6-adresse binne 'n Netwerk**

### Metode 1: Gebruik van Skakel-plaaslike Adresse
1. Verkry die MAC-adres van 'n toestel binne die netwerk.
2. Leid die Skakel-plaaslike IPv6-adres af van die MAC-adres.

### Metode 2: Gebruik van Multicast
1. Stuur 'n ping na die multicast-adres `ff02::1` om IPv6-adresse op die plaaslike netwerk te ontdek.
```bash
service ufw stop # Stop the firewall
ping6 -I <IFACE> ff02::1 # Send a ping to multicast address
ip -6 neigh # Display the neighbor table
```
## IPv6 Man-in-the-Middle (MitM) Aanvalle
Verskeie tegnieke bestaan vir die uitvoering van MitM-aanvalle in IPv6-netwerke, soos:

- Spoofing van ICMPv6 buurman of router advertensies.
- Gebruik van ICMPv6 omleiding of "Pakket Te Groot" boodskappe om roeteverandering te manipuleer.
- Aanvalle op mobiele IPv6 (vereis gewoonlik dat IPSec gedeaktiveer word).
- Opstel van 'n skelm DHCPv6-bediener.


# Identifisering van IPv6-adresse in die veld

## Verkenning van Subdomeine
'n Metode om subdomeine te vind wat moontlik gekoppel is aan IPv6-adresse, behels die benutting van soektogte. Byvoorbeeld, die gebruik van 'n soekpatroon soos `ipv6.*` kan effektief wees. Spesifiek kan die volgende soekopdrag in Google gebruik word:
```bash
site:ipv6./
```
## Benutting van DNS-navrae
Om IPv6-adresse te identifiseer, kan sekere DNS-rekordtipes ondervra word:
- **AXFR**: Versoek 'n volledige s√¥ne-oordrag, wat moontlik 'n wye reeks DNS-rekords kan blootl√™.
- **AAAA**: Soek direk na IPv6-adresse.
- **ANY**: 'n Bre√´ navraag wat alle beskikbare DNS-rekords teruggee.

## Ondersoek met Ping6
Nadat IPv6-adresse wat met 'n organisasie verband hou, ge√Ødentifiseer is, kan die `ping6`-nutsmiddel gebruik word vir ondersoek. Hierdie nut help om die responsiwiteit van ge√Ødentifiseerde IPv6-adresse te assesseer, en kan ook help om aangrensende IPv6-toestelle te ontdek.

## Verwysings

* [http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html](http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html)
* [https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904](https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904)
