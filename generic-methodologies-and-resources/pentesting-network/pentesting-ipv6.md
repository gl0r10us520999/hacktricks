{% hint style="success" %}
Μάθετε & εξασκηθείτε στο Hacking του AWS:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**Εκπαίδευση HackTricks AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Μάθετε & εξασκηθείτε στο Hacking του GCP: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**Εκπαίδευση HackTricks GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Υποστηρίξτε το HackTricks</summary>

* Ελέγξτε τα [**σχέδια συνδρομής**](https://github.com/sponsors/carlospolop)!
* **Εγγραφείτε** στην 💬 [**ομάδα Discord**](https://discord.gg/hRep4RUj7f) ή στην [**ομάδα telegram**](https://t.me/peass) ή **ακολουθήστε** μας στο **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Μοιραστείτε κόλπα χάκερ κάνοντας υποβολή PRs** στα αποθετήρια [**HackTricks**](https://github.com/carlospolop/hacktricks) και [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) στο GitHub.

</details>
{% endhint %}


# Βασική θεωρία IPv6

## Δίκτυα

Οι διευθύνσεις IPv6 είναι δομημένες για να βελτιώσουν την οργάνωση του δικτύου και την αλληλεπίδραση των συσκευών. Μια διεύθυνση IPv6 διαιρείται σε:

1. **Πρόθεμα Δικτύου**: Οι πρώτοι 48 bits, που καθορίζουν το τμήμα του δικτύου.
2. **Ταυτότητα Υποδικτύου**: Οι επόμενοι 16 bits, χρησιμοποιούνται για τον καθορισμό συγκεκριμένων υποδικτύων εντός του δικτύου.
3. **Αναγνωριστικό Διεπαφής**: Οι τελευταίοι 64 bits, που αναγνωρίζουν μοναδικά μια συσκευή εντός του υποδικτύου.

Ενώ το IPv6 παραλείπει το πρωτόκολλο ARP που βρίσκεται στο IPv4, εισάγει το **ICMPv6** με δύο κύρια μηνύματα:
- **Αίτηση Γείτονα (NS)**: Πολυδιάστατα μηνύματα για την ανάλυση διευθύνσεων.
- **Ανακοίνωση Γείτονα (NA)**: Μονοδιάστατες απαντήσεις σε NS ή αυθόρμητες ανακοινώσεις.

Το IPv6 ενσωματώνει επίσης ειδικούς τύπους διευθύνσεων:
- **Διεύθυνση Επιστροφής (`::1`)**: Ίδια με το `127.0.0.1` του IPv4, για εσωτερική επικοινωνία εντός του κεντρικού υπολογιστή.
- **Τοπικές Διευθύνσεις Δικτύου (`FE80::/10`)**: Για τοπικές δραστηριότητες δικτύου, όχι για δρομολόγηση στο internet. Οι συσκευές στο ίδιο τοπικό δίκτυο μπορούν να ανακαλύψουν η μία την άλλη χρησιμοποιώντας αυτό το εύρος.

### Πρακτική Χρήση του IPv6 σε Εντολές Δικτύου

Για να αλληλεπιδράσετε με δίκτυα IPv6, μπορείτε να χρησιμοποιήσετε διάφορες εντολές:
- **Ping Διευθύνσεις Τοπικού Δικτύου**: Ελέγξτε την παρουσία τοπικών συσκευών χρησιμοποιώντας το `ping6`.
- **Ανακάλυψη Γείτονα**: Χρησιμοποιήστε το `ip neigh` για να δείτε τις συσκευές που ανακαλύφθηκαν στο επίπεδο συνδέσεων.
- **alive6**: Ένα εναλλακτικό εργαλείο για την ανακάλυψη συσκευών στο ίδιο δίκτυο.

Παρακάτω παρουσιάζονται μερικά παραδείγματα εντολών:
```bash
ping6 –I eth0 -c 5 ff02::1 > /dev/null 2>&1
ip neigh | grep ^fe80

# Alternatively, use alive6 for neighbor discovery
alive6 eth0
```
## **Παράγωγη Link-local IPv6 από τη διεύθυνση MAC**

Δεδομένης μιας διεύθυνσης MAC **`12:34:56:78:9a:bc`**, μπορείτε να κατασκευάσετε τη διεύθυνση Link-local IPv6 ως εξής:

1. Μετατροπή της MAC σε μορφή IPv6: **`1234:5678:9abc`**
2. Προσθήκη `fe80::` και εισαγωγή του `fffe` στη μέση: **`fe80::1234:56ff:fe78:9abc`**
3. Αντιστροφή του έβδομου bit από αριστερά, μετατρέποντας το `1234` σε `1034`: **`fe80::1034:56ff:fe78:9abc`**

## **Τύποι Διευθύνσεων IPv6**

- **Μοναδική Τοπική Διεύθυνση (ULA)**: Για τοπικές επικοινωνίες, δεν προορίζεται για δρομολόγηση στο διαδίκτυο. Πρόθεμα: **`FEC00::/7`**
- **Διεύθυνση Πολυδιανομής**: Για επικοινωνία από ένα προς πολλούς. Παραδίδεται σε όλες τις διεπαφές στην ομάδα πολυδιανομής. Πρόθεμα: **`FF00::/8`**
- **Διεύθυνση Οποιασδήποτε Αντιστοίχισης**: Για επικοινωνία από ένα προς την πλησιέστερη διεπαφή σύμφωνα με το πρωτόκολλο δρομολόγησης. Μέρος του παγκόσμιου εύρους μοναδικών διευθύνσεων **`2000::/3`**.

## **Προθέματα Διευθύνσεων**
- **fe80::/10**: Διευθύνσεις Link-Local (παρόμοιες με τις 169.254.x.x)
- **fc00::/7**: Μοναδική Τοπική-Μοναδική (παρόμοιες με τις ιδιωτικές εύρεσης IPv4 όπως 10.x.x.x, 172.16.x.x, 192.168.x.x)
- **2000::/3**: Παγκόσμιες Μοναδικές
- **ff02::1**: Πολυδιανομή Όλοι οι Κόμβοι
- **ff02::2**: Πολυδιανομή Κόμβοι Δρομολογητές

## **Ανακάλυψη Διευθύνσεων IPv6 σε ένα Δίκτυο**

### Τρόπος 1: Χρησιμοποιώντας Διευθύνσεις Link-local
1. Αποκτήστε τη διεύθυνση MAC ενός συσκευής εντός του δικτύου.
2. Παράγετε τη διεύθυνση Link-local IPv6 από τη διεύθυνση MAC.

### Τρόπος 2: Χρησιμοποιώντας Πολυδιανομή
1. Στείλτε ένα ping στη διεύθυνση πολυδιανομής `ff02::1` για να ανακαλύψετε διευθύνσεις IPv6 στο τοπικό δίκτυο.
```bash
service ufw stop # Stop the firewall
ping6 -I <IFACE> ff02::1 # Send a ping to multicast address
ip -6 neigh # Display the neighbor table
```
## Επιθέσεις Man-in-the-Middle (MitM) στο IPv6
Υπάρχουν αρκετές τεχνικές για την εκτέλεση επιθέσεων MitM σε δίκτυα IPv6, όπως:

- Πλαστογράφηση διαφήμισης γείτονα ή δρομολογητή ICMPv6.
- Χρήση μηνυμάτων ICMPv6 redirect ή "Packet Too Big" για τη χειραγώγηση της δρομολόγησης.
- Επίθεση στο κινητό IPv6 (συνήθως απαιτεί απενεργοποίηση του IPSec).
- Δημιουργία κακόβουλου διακομιστή DHCPv6.


# Αναγνώριση διευθύνσεων IPv6 στο πεδίο

## Εξερεύνηση Υποτομέων
Μια μέθοδος για την εύρεση υποτομέων που είναι πιθανώς συνδεδεμένα με διευθύνσεις IPv6 περιλαμβάνει την εκμετάλλευση μηχανών αναζήτησης. Για παράδειγμα, η χρήση ενός προτύπου ερωτήματος όπως `ipv6.*` μπορεί να είναι αποτελεσματική. Συγκεκριμένα, το ακόλουθο ερωτηματικό εντολής μπορεί να χρησιμοποιηθεί στη Google:
```bash
site:ipv6./
```
## Χρήση Ερωτημάτων DNS
Για την εντοπισμό των διευθύνσεων IPv6, μπορούν να γίνουν ερωτήματα σε συγκεκριμένους τύπους εγγραφών DNS:
- **AXFR**: Ζητά μια πλήρη μεταφορά ζώνης, αποκαλύπτοντας ενδεχομένως μια ευρεία γκάμα εγγραφών DNS.
- **AAAA**: Αναζητά απευθείας διευθύνσεις IPv6.
- **ANY**: Ένα ευρύ ερώτημα που επιστρέφει όλες τις διαθέσιμες εγγραφές DNS.

## Εξερεύνηση με το Ping6
Αφού εντοπιστούν οι διευθύνσεις IPv6 που σχετίζονται με μια οργάνωση, το εργαλείο `ping6` μπορεί να χρησιμοποιηθεί για εξερεύνηση. Αυτό το εργαλείο βοηθά στην αξιολόγηση της ανταπόκρισης των εντοπισμένων διευθύνσεων IPv6 και ενδέχεται επίσης να βοηθήσει στην ανακάλυψη γειτονικών συσκευών IPv6.


## Αναφορές

* [http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html](http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html)
* [https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904](https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904)
