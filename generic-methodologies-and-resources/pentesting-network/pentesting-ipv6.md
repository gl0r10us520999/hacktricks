{% hint style="success" %}
AWS Hacking'ı öğrenin ve uygulayın:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Eğitim AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'ı öğrenin ve uygulayın: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Eğitim GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**Abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* 💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) katılın veya [**telegram grubuna**](https://t.me/peass) katılın veya bizi **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **HackTricks** ve **HackTricks Cloud** github depolarına PR göndererek hacking püf noktalarını paylaşın.

</details>
{% endhint %}


# IPv6 Temel teori

## Ağlar

IPv6 adresleri ağ organizasyonunu ve cihaz etkileşimini geliştirmek için yapılandırılmıştır. Bir IPv6 adresi şu şekilde bölünmüştür:

1. **Ağ Öneki**: Ağı belirleyen ilk 48 bit.
2. **Alt Ağ Kimliği**: Ağ içinde belirli alt ağları tanımlamak için kullanılan 16 bit.
3. **Arayüz Tanımlayıcı**: Alt ağ içindeki bir cihazı benzersiz olarak tanımlayan son 64 bit.

IPv6, IPv4'te bulunan ARP protokolünü atladığı gibi, iki temel mesajla **ICMPv6**'yı tanıtır:
- **Komşu İstemi (NS)**: Adres çözümlemesi için çoklu mesajlar.
- **Komşu İlanı (NA)**: NS'ye veya kendiliğinden duyurulara tekil yanıtlar.

IPv6 ayrıca özel adres türlerini de içerir:
- **Döngü Geri Adresi (`::1`)**: İç iletişim için IPv4'ün `127.0.0.1`'ine eşdeğerdir.
- **Bağ Yerel Adresler (`FE80::/10`)**: İnternet yönlendirmesi için değil, yerel ağ etkinlikleri için. Aynı yerel ağdaki cihazlar, birbirlerini bu aralığı kullanarak keşfedebilir.

### IPv6'nın Ağ Komutlarında Pratik Kullanımı

IPv6 ağlarıyla etkileşimde bulunmak için çeşitli komutları kullanabilirsiniz:
- **Bağ Yerel Adreslerini Pingleme**: `ping6` kullanarak yerel cihazların varlığını kontrol edin.
- **Komşu Keşfi**: `ip neigh` kullanarak bağ katmanında keşfedilen cihazları görüntüleyin.
- **alive6**: Aynı ağdaki cihazları keşfetmek için alternatif bir araç.

Aşağıda bazı komut örnekleri bulunmaktadır:
```bash
ping6 –I eth0 -c 5 ff02::1 > /dev/null 2>&1
ip neigh | grep ^fe80

# Alternatively, use alive6 for neighbor discovery
alive6 eth0
```
## **MAC Adresinden Link-local IPv6 Türetme**

Bir cihazın MAC adresinden yerel iletişim için IPv6 adresleri türetilebilir. Bilinen bir MAC adresinden Link-local IPv6 adresini nasıl türeteceğinize dair basitleştirilmiş bir rehber aşağıda verilmiştir:

1. MAC adresini IPv6 formatına dönüştürün: **`1234:5678:9abc`**
2. `fe80::` ön ekini ekleyin ve ortaya `fffe` ekleyin: **`fe80::1234:56ff:fe78:9abc`**
3. Soldan yedinci biti tersine çevirerek `1234`'ü `1034` olarak değiştirin: **`fe80::1034:56ff:fe78:9abc`**

## **IPv6 Adres Türleri**

- **Benzersiz Yerel Adres (ULA)**: Genel internet yönlendirmesi için değil, yerel iletişimler için kullanılır. Önek: **`FEC00::/7`**
- **Çoklu Yayın Adresi**: Birçok cihaza iletişim için kullanılır. Çoklu yayın grubundaki tüm arayüzlere iletilir. Önek: **`FF00::/8`**
- **Anycast Adresi**: En yakına iletişim için kullanılır. Yönlendirme protokolüne göre en yakın arayüze gönderilir. **`2000::/3`** küresel tek yayın aralığının bir parçasıdır.

## **Adres Önekleri**
- **fe80::/10**: Link-Local adresler (169.254.x.x'ye benzer)
- **fc00::/7**: Benzersiz Yerel-Unicast (10.x.x.x, 172.16.x.x, 192.168.x.x gibi özel IPv4 aralıklarına benzer)
- **2000::/3**: Küresel Unicast
- **ff02::1**: Tüm Düğümler Çoklu Yayın
- **ff02::2**: Yönlendirici Düğümler Çoklu Yayın

## **Bir Ağ İçinde IPv6 Adreslerini Keşfetme**

### Yöntem 1: Link-local Adresler Kullanarak
1. Ağ içindeki bir cihazın MAC adresini edinin.
2. MAC adresinden Link-local IPv6 adresini türetin.

### Yöntem 2: Çoklu Yayın Kullanarak
1. Yerel ağdaki IPv6 adreslerini keşfetmek için `ff02::1` çoklu yayın adresine bir ping gönderin.
```bash
service ufw stop # Stop the firewall
ping6 -I <IFACE> ff02::1 # Send a ping to multicast address
ip -6 neigh # Display the neighbor table
```
## IPv6 Orta Adam (MitM) Saldırıları
IPv6 ağlarında MitM saldırıları gerçekleştirmek için birkaç teknik mevcuttur, bunlar şunlardır:

- ICMPv6 komşu veya yönlendirici reklamlarını sahteleme.
- Yönlendirmeyi manipüle etmek için ICMPv6 yönlendirme veya "Paket Çok Büyük" mesajlarını kullanma.
- Mobil IPv6 saldırısı (genellikle IPSec'in devre dışı bırakılmasını gerektirir).
- Sahte bir DHCPv6 sunucusu kurma.


# IPv6 Adreslerini Tanımlama

## Alt Alanları Keşfetme
IPv6 adresleriyle ilişkilendirilmiş olabilecek alt alanları bulmanın bir yolu, arama motorlarından faydalanmaktır. Örneğin, `ipv6.*` gibi bir sorgu desenini kullanmak etkili olabilir. Özellikle, Google'da aşağıdaki arama komutu kullanılabilir:
```bash
site:ipv6./
```
## DNS Sorguları Kullanma
IPv6 adreslerini belirlemek için belirli DNS kayıt türleri sorgulanabilir:
- **AXFR**: Geniş bir DNS kayıtları yelpazesini ortaya çıkarabilen tam bir bölge transferi isteği.
- **AAAA**: Doğrudan IPv6 adreslerini arar.
- **ANY**: Tüm mevcut DNS kayıtlarını döndüren geniş kapsamlı bir sorgu.

## Ping6 ile Sondaj Yapma
Bir organizasyonla ilişkilendirilen IPv6 adreslerini belirledikten sonra, `ping6` aracı sondaj yapmak için kullanılabilir. Bu araç, belirlenen IPv6 adreslerinin yanıt verme durumunu değerlendirmeye yardımcı olur ve ayrıca yanındaki IPv6 cihazlarını keşfetmede de yardımcı olabilir.


## Referanslar

* [http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html](http://www.firewall.cx/networking-topics/protocols/877-ipv6-subnetting-how-to-subnet-ipv6.html)
* [https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904](https://www.sans.org/reading-room/whitepapers/detection/complete-guide-ipv6-attack-defense-33904)
