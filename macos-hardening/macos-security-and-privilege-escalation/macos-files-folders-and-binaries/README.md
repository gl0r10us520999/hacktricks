# macOS –§–∞–π–ª–∏, –ü–∞–ø–∫–∏, –ë—ñ–Ω–∞—Ä–Ω—ñ –§–∞–π–ª–∏ —Ç–∞ –ü–∞–º'—è—Ç—å

{% hint style="success" %}
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
–í–∏–≤—á–∞–π—Ç–µ —Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>–ü—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ HackTricks</summary>

* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ [**–ø–ª–∞–Ω–∏ –ø—ñ–¥–ø–∏—Å–∫–∏**](https://github.com/sponsors/carlospolop)!
* **–ü—Ä–∏—î–¥–Ω—É–π—Ç–µ—Å—å –¥–æ** üí¨ [**–≥—Ä—É–ø–∏ Discord**](https://discord.gg/hRep4RUj7f) –∞–±–æ [**–≥—Ä—É–ø–∏ Telegram**](https://t.me/peass) –∞–±–æ **—Å–ª—ñ–¥–∫—É–π—Ç–µ** –∑–∞ –Ω–∞–º–∏ –≤ **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **–î—ñ–ª—ñ—Ç—å—Å—è —Ö–∞–∫–µ—Ä—Å—å–∫–∏–º–∏ —Ç—Ä—é–∫–∞–º–∏, –Ω–∞–¥—Å–∏–ª–∞—é—á–∏ PR –¥–æ** [**HackTricks**](https://github.com/carlospolop/hacktricks) —Ç–∞ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ –Ω–∞ GitHub.

</details>
{% endhint %}

## –Ü—î—Ä–∞—Ä—Ö—ñ—è —Ñ–∞–π–ª—ñ–≤

* **/Applications**: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –ø—Ä–æ–≥—Ä–∞–º–∏ –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ —Ç—É—Ç. –£—Å—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –∑–º–æ–∂—É—Ç—å –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ –Ω–∏—Ö –¥–æ—Å—Ç—É–ø.
* **/bin**: –ë—ñ–Ω–∞—Ä–Ω—ñ —Ñ–∞–π–ª–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
* **/cores**: –Ø–∫—â–æ —ñ—Å–Ω—É—î, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–º–ø—ñ–≤ –ø–∞–º'—è—Ç—ñ
* **/dev**: –í—Å–µ —Ä–æ–∑–≥–ª—è–¥–∞—î—Ç—å—Å—è —è–∫ —Ñ–∞–π–ª, —Ç–æ–º—É –≤–∏ –º–æ–∂–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –∞–ø–∞—Ä–∞—Ç–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó, –∑–±–µ—Ä–µ–∂–µ–Ω—ñ —Ç—É—Ç.
* **/etc**: –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ —Ñ–∞–π–ª–∏
* **/Library**: –¢—É—Ç –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ –±–∞–≥–∞—Ç–æ –ø—ñ–¥–∫–∞—Ç–∞–ª–æ–≥—ñ–≤ —ñ —Ñ–∞–π–ª—ñ–≤, –ø–æ–≤'—è–∑–∞–Ω–∏—Ö –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏, –∫–µ—à–∞–º–∏ —Ç–∞ –∂—É—Ä–Ω–∞–ª–∞–º–∏. –ü–∞–ø–∫–∞ Library —ñ—Å–Ω—É—î –≤ –∫–æ—Ä–µ–Ω–µ–≤–æ–º—É –∫–∞—Ç–∞–ª–æ–∑—ñ —Ç–∞ –≤ –∫–∞—Ç–∞–ª–æ–∑—ñ –∫–æ–∂–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
* **/private**: –ù–µ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–æ, –∞–ª–µ –±–∞–≥–∞—Ç–æ –∑ –≤–∫–∞–∑–∞–Ω–∏—Ö –ø–∞–ø–æ–∫ —î —Å–∏–º–≤–æ–ª—ñ—á–Ω–∏–º–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏ –Ω–∞ –ø—Ä–∏–≤–∞—Ç–Ω–∏–π –∫–∞—Ç–∞–ª–æ–≥.
* **/sbin**: –û—Å–Ω–æ–≤–Ω—ñ —Å–∏—Å—Ç–µ–º–Ω—ñ –±—ñ–Ω–∞—Ä–Ω—ñ —Ñ–∞–π–ª–∏ (–ø–æ–≤'—è–∑–∞–Ω—ñ –∑ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è–º)
* **/System**: –§–∞–π–ª–∏ –¥–ª—è –∑–∞–ø—É—Å–∫—É OS X. –¢—É—Ç –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ –∑–Ω–∞–π—Ç–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º—É –ª–∏—à–µ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –¥–ª—è Apple —Ñ–∞–π–ª–∏ (–Ω–µ —Å—Ç–æ—Ä–æ–Ω–Ω—ñ).
* **/tmp**: –§–∞–π–ª–∏ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è —á–µ—Ä–µ–∑ 3 –¥–Ω—ñ (—Ü–µ –º'—è–∫–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ /private/tmp)
* **/Users**: –î–æ–º–∞—à–Ω—ñ–π –∫–∞—Ç–∞–ª–æ–≥ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.
* **/usr**: –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–∞ —Å–∏—Å—Ç–µ–º–Ω—ñ –±—ñ–Ω–∞—Ä–Ω—ñ —Ñ–∞–π–ª–∏
* **/var**: –ñ—É—Ä–Ω–∞–ª—å–Ω—ñ —Ñ–∞–π–ª–∏
* **/Volumes**: –ó–º–æ–Ω—Ç–æ–≤–∞–Ω—ñ –¥–∏—Å–∫–∏ –∑'—è–≤–ª—è—Ç—å—Å—è —Ç—É—Ç.
* **/.vol**: –ó–∞–ø—É—Å—Ç–∏–≤—à–∏ `stat a.txt`, –≤–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ —â–æ—Å—å –Ω–∞ –∑—Ä–∞–∑–æ–∫ `16777223 7545753 -rw-r--r-- 1 username wheel ...`, –¥–µ –ø–µ—Ä—à–µ —á–∏—Å–ª–æ - —Ü–µ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ–π–Ω–∏–π –Ω–æ–º–µ—Ä —Ç–æ–º—É, –¥–µ —ñ—Å–Ω—É—î —Ñ–∞–π–ª, –∞ –¥—Ä—É–≥–µ - –Ω–æ–º–µ—Ä inode. –í–∏ –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –≤–º—ñ—Å—Ç—É —Ü—å–æ–≥–æ —Ñ–∞–π–ª—É —á–µ—Ä–µ–∑ /.vol/ –∑ —Ü—ñ—î—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é, –∑–∞–ø—É—Å—Ç–∏–≤—à–∏ `cat /.vol/16777223/7545753`

### –ü–∞–ø–∫–∏ –ø—Ä–æ–≥—Ä–∞–º

* **–°–∏—Å—Ç–µ–º–Ω—ñ –ø—Ä–æ–≥—Ä–∞–º–∏** —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω—ñ –≤ `/System/Applications`
* **–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ** –ø—Ä–æ–≥—Ä–∞–º–∏ –∑–∞–∑–≤–∏—á–∞–π –≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—Ç—å—Å—è –≤ `/Applications` –∞–±–æ –≤ `~/Applications`
* **–î–∞–Ω—ñ –ø—Ä–æ–≥—Ä–∞–º** –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ –≤ `/Library/Application Support` –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º, —â–æ –ø—Ä–∞—Ü—é—é—Ç—å –≤—ñ–¥ —ñ–º–µ–Ω—ñ root, —ñ `~/Library/Application Support` –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º, —â–æ –ø—Ä–∞—Ü—é—é—Ç—å –≤—ñ–¥ —ñ–º–µ–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
* –°—Ç–æ—Ä–æ–Ω–Ω—ñ –ø—Ä–æ–≥—Ä–∞–º–∏ **–¥–µ–º–æ–Ω–∏**, —è–∫—ñ **–ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –≤—ñ–¥ —ñ–º–µ–Ω—ñ root**, –∑–∞–∑–≤–∏—á–∞–π —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω—ñ –≤ `/Library/PrivilegedHelperTools/`
* **–ü—ñ—Å–æ—á–Ω–∏—Ü—ñ** –ø—Ä–æ–≥—Ä–∞–º–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –≤ –ø–∞–ø—Ü—ñ `~/Library/Containers`. –ö–æ–∂–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –º–∞—î –ø–∞–ø–∫—É, –Ω–∞–∑–≤–∞–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞ –ø–∞–∫–µ—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–∏ (`com.apple.Safari`).
* **–Ø–¥—Ä–æ** —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω–µ –≤ `/System/Library/Kernels/kernel`
* **–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —è–¥—Ä–∞ Apple** —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω—ñ –≤ `/System/Library/Extensions`
* **–°—Ç–æ—Ä–æ–Ω–Ω—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —è–¥—Ä–∞** –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `/Library/Extensions`

### –§–∞–π–ª–∏ –∑ —á—É—Ç–ª–∏–≤–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é

MacOS –∑–±–µ—Ä—ñ–≥–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é, —Ç–∞–∫—É —è–∫ –ø–∞—Ä–æ–ª—ñ, —É –∫—ñ–ª—å–∫–æ—Ö –º—ñ—Å—Ü—è—Ö:

{% content-ref url="macos-sensitive-locations.md" %}
[macos-sensitive-locations.md](macos-sensitive-locations.md)
{% endcontent-ref %}

### –í—Ä–∞–∑–ª–∏–≤—ñ —É—Å—Ç–∞–Ω–æ–≤–Ω–∏–∫–∏ pkg

{% content-ref url="macos-installers-abuse.md" %}
[macos-installers-abuse.md](macos-installers-abuse.md)
{% endcontent-ref %}

## –°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è OS X

* **`.dmg`**: –§–∞–π–ª–∏ –æ–±—Ä–∞–∑—É –¥–∏—Å–∫–∞ Apple –¥—É–∂–µ –ø–æ—à–∏—Ä–µ–Ω—ñ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–Ω–∏–∫—ñ–≤.
* **`.kext`**: –ü–æ–≤–∏–Ω–µ–Ω –¥–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏—Å—è —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —ñ —î –≤–µ—Ä—Å—ñ—î—é –¥—Ä–∞–π–≤–µ—Ä–∞ –¥–ª—è OS X. (—Ü–µ –ø–∞–∫–µ—Ç)
* **`.plist`**: –í—ñ–¥–æ–º–∏–π —Ç–∞–∫–æ–∂ —è–∫ —Å–ø–∏—Å–æ–∫ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π, –∑–±–µ—Ä—ñ–≥–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é —É —Ñ–æ—Ä–º–∞—Ç—ñ XML –∞–±–æ –±—ñ–Ω–∞—Ä–Ω–æ–º—É.
* –ú–æ–∂–µ –±—É—Ç–∏ XML –∞–±–æ –±—ñ–Ω–∞—Ä–Ω–∏–º. –ë—ñ–Ω–∞—Ä–Ω—ñ –º–æ–∂–Ω–∞ –ø—Ä–æ—á–∏—Ç–∞—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é:
* `defaults read config.plist`
* `/usr/libexec/PlistBuddy -c print config.plsit`
* `plutil -p ~/Library/Preferences/com.apple.screensaver.plist`
* `plutil -convert xml1 ~/Library/Preferences/com.apple.screensaver.plist -o -`
* `plutil -convert json ~/Library/Preferences/com.apple.screensaver.plist -o -`
* **`.app`**: –ü—Ä–æ–≥—Ä–∞–º–∏ Apple, —è–∫—ñ –¥–æ—Ç—Ä–∏–º—É—é—Ç—å—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –∫–∞—Ç–∞–ª–æ–≥—É (—Ü–µ –ø–∞–∫–µ—Ç).
* **`.dylib`**: –î–∏–Ω–∞–º—ñ—á–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ (—è–∫ —Ñ–∞–π–ª–∏ DLL Windows)
* **`.pkg`**: –¶–µ —Ç–µ –∂ —Å–∞–º–µ, —â–æ —ñ xar (—Ñ–æ—Ä–º–∞—Ç —Ä–æ–∑—à–∏—Ä–µ–Ω–æ–≥–æ –∞—Ä—Ö—ñ–≤—É). –ö–æ–º–∞–Ω–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–Ω–∏–∫–∞ –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∞ –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –≤–º—ñ—Å—Ç—É —Ü–∏—Ö —Ñ–∞–π–ª—ñ–≤.
* **`.DS_Store`**: –¶–µ–π —Ñ–∞–π–ª —î –≤ –∫–æ–∂–Ω–æ–º—É –∫–∞—Ç–∞–ª–æ–∑—ñ, –≤—ñ–Ω –∑–±–µ—Ä—ñ–≥–∞—î –∞—Ç—Ä–∏–±—É—Ç–∏ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–∞—Ç–∞–ª–æ–≥—É.
* **`.Spotlight-V100`**: –¶—è –ø–∞–ø–∫–∞ –∑'—è–≤–ª—è—î—Ç—å—Å—è –≤ –∫–æ—Ä–µ–Ω–µ–≤–æ–º—É –∫–∞—Ç–∞–ª–æ–∑—ñ –∫–æ–∂–Ω–æ–≥–æ —Ç–æ–º—É –≤ —Å–∏—Å—Ç–µ–º—ñ.
* **`.metadata_never_index`**: –Ø–∫—â–æ —Ü–µ–π —Ñ–∞–π–ª –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä–µ–Ω—ñ —Ç–æ–º—É, Spotlight –Ω–µ –±—É–¥–µ —ñ–Ω–¥–µ–∫—Å—É–≤–∞—Ç–∏ —Ü–µ–π —Ç–æ–º.
* **`.noindex`**: –§–∞–π–ª–∏ —Ç–∞ –ø–∞–ø–∫–∏ –∑ —Ü–∏–º —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º –Ω–µ –±—É–¥—É—Ç—å —ñ–Ω–¥–µ–∫—Å—É–≤–∞—Ç–∏—Å—è Spotlight.
* **`.sdef`**: –§–∞–π–ª–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ø–∞–∫–µ—Ç—ñ–≤, —â–æ –≤–∫–∞–∑—É—é—Ç—å, —è–∫ –º–æ–∂–Ω–∞ –≤–∑–∞—î–º–æ–¥—ñ—è—Ç–∏ –∑ –ø—Ä–æ–≥—Ä–∞–º–æ—é –∑ AppleScript.

### –ü–∞–∫–µ—Ç–∏ macOS

–ü–∞–∫–µ—Ç - —Ü–µ **–∫–∞—Ç–∞–ª–æ–≥**, —è–∫–∏–π **–≤–∏–≥–ª—è–¥–∞—î —è–∫ –æ–±'—î–∫—Ç —É Finder** (–ø—Ä–∏–∫–ª–∞–¥ –ø–∞–∫–µ—Ç–∞ - —Ü–µ —Ñ–∞–π–ª–∏ `*.app`).

{% content-ref url="macos-bundles.md" %}
[macos-bundles.md](macos-bundles.md)
{% endcontent-ref %}

## –ö–µ—à —Å–ø—ñ–ª—å–Ω–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫ Dyld (SLC)

–£ macOS (—ñ iOS) –≤—Å—ñ —Å–∏—Å—Ç–µ–º–Ω—ñ —Å–ø—ñ–ª—å–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏, —Ç–∞–∫—ñ —è–∫ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ —Ç–∞ dylibs, **–æ–±'—î–¥–Ω—É—é—Ç—å—Å—è –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª**, —è–∫–∏–π –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è **–∫–µ—à–µ–º —Å–ø—ñ–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è dyld**. –¶–µ –ø–æ–∫—Ä–∞—â—É—î –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å, –æ—Å–∫—ñ–ª—å–∫–∏ –∫–æ–¥ –º–æ–∂–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏—Å—è —à–≤–∏–¥—à–µ.

–¶–µ —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω–æ –≤ macOS –≤ `/System/Volumes/Preboot/Cryptexes/OS/System/Library/dyld/`, –∞ –≤ —Å—Ç–∞—Ä—ñ—à–∏—Ö –≤–µ—Ä—Å—ñ—è—Ö –≤–∏ –º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ **—Å–ø—ñ–ª—å–Ω–∏–π –∫–µ—à** –≤ **`/System/Library/dyld/`**.\
–í iOS –≤–∏ –º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ —ó—Ö —É **`/System/Library/Caches/com.apple.dyld/`**.

–ü–æ–¥—ñ–±–Ω–æ –¥–æ –∫–µ—à—É —Å–ø—ñ–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è dyld, —è–¥—Ä–æ —Ç–∞ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —è–¥—Ä–∞ —Ç–∞–∫–æ–∂ –∫–æ–º–ø—ñ–ª—é—é—Ç—å—Å—è –≤ –∫–µ—à —è–¥—Ä–∞, —è–∫–∏–π –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è.

–©–æ–± –≤–∏—Ç—è–≥—Ç–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –∑ —î–¥–∏–Ω–æ–≥–æ —Ñ–∞–π–ª—É –∫–µ—à—É —Å–ø—ñ–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è dylib, –º–æ–∂–Ω–∞ –±—É–ª–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—ñ–Ω–∞—Ä–Ω–∏–π [dyld\_shared\_cache\_util](https://www.mbsplugins.de/files/dyld\_shared\_cache\_util-dyld-733.8.zip), —è–∫–∏–π, –º–æ–∂–ª–∏–≤–æ, –∑–∞—Ä–∞–∑ –Ω–µ –ø—Ä–∞—Ü—é—î, –∞–ª–µ –≤–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ [**dyldextractor**](https://github.com/arandomdev/dyldextractor):

{% code overflow="wrap" %}
```bash
# dyld_shared_cache_util
dyld_shared_cache_util -extract ~/shared_cache/ /System/Volumes/Preboot/Cryptexes/OS/System/Library/dyld/dyld_shared_cache_arm64e

# dyldextractor
dyldex -l [dyld_shared_cache_path] # List libraries
dyldex_all [dyld_shared_cache_path] # Extract all
# More options inside the readme
```
{% endcode %}

{% hint style="success" %}
–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `dyld_shared_cache_util` –Ω–µ –ø—Ä–∞—Ü—é—î, –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç–∏ **—Å–ø—ñ–ª—å–Ω–∏–π –¥–≤—ñ–π–∫–æ–≤–∏–π —Ñ–∞–π–ª dyld –≤ Hopper**, —ñ Hopper –∑–º–æ–∂–µ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ –≤—Å—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —Ç–∞ –¥–æ–∑–≤–æ–ª–∏—Ç—å –≤–∞–º **–≤–∏–±—Ä–∞—Ç–∏, —è–∫—É –∑ –Ω–∏—Ö** –≤–∏ —Ö–æ—á–µ—Ç–µ –¥–æ—Å–ª—ñ–¥–∏—Ç–∏:
{% endhint %}

<figure><img src="../../../.gitbook/assets/image (1152).png" alt="" width="563"><figcaption></figcaption></figure>

–î–µ—è–∫—ñ –µ–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä–∏ –Ω–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º—É—Ç—å, –æ—Å–∫—ñ–ª—å–∫–∏ dylibs –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ –∑–≤'—è–∑–∞–Ω—ñ –∑ –∂–æ—Ä—Å—Ç–∫–æ –∑–∞–∫–æ–¥–æ–≤–∞–Ω–∏–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏, —Ç–æ–º—É –≤–æ–Ω–∏ –º–æ–∂—É—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–∏ –Ω–∞ –Ω–µ–≤—ñ–¥–æ–º—ñ –∞–¥—Ä–µ—Å–∏.

{% hint style="success" %}
–¢–∞–∫–æ–∂ –º–æ–∂–ª–∏–≤–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∫–µ—à —Å–ø—ñ–ª—å–Ω–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫ —ñ–Ω—à–∏—Ö \*OS –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ –≤ macos, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –µ–º—É–ª—è—Ç–æ—Ä –≤ Xcode. –í–æ–Ω–∏ –±—É–¥—É—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ –≤: ls `$HOME/Library/Developer/Xcode/<*>OS\ DeviceSupport/<version>/Symbols/System/Library/Caches/com.apple.dyld/`, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `$HOME/Library/Developer/Xcode/iOS\ DeviceSupport/14.1\ (18A8395)/Symbols/System/Library/Caches/com.apple.dyld/dyld_shared_cache_arm64`
{% endhint %}

### Mapping SLC

**`dyld`** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Å–∏—Å—Ç–µ–º–Ω–∏–π –≤–∏–∫–ª–∏–∫ **`shared_region_check_np`**, —â–æ–± –¥—ñ–∑–Ω–∞—Ç–∏—Å—è, —á–∏ –±—É–≤ SLC –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–∏–π (—â–æ –ø–æ–≤–µ—Ä—Ç–∞—î –∞–¥—Ä–µ—Å—É) —ñ **`shared_region_map_and_slide_np`**, —â–æ–± –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏ SLC.

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ SLC –∑—Å—É–≤–∞—î—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ, –≤—Å—ñ **–ø—Ä–æ—Ü–µ—Å–∏** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å **–æ–¥–Ω—É –π —Ç—É –∂ –∫–æ–ø—ñ—é**, —â–æ **—É—Å—É–≤–∞—î –∑–∞—Ö–∏—Å—Ç ASLR**, —è–∫—â–æ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –∑–º—ñ–≥ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ—Ü–µ—Å–∏ –≤ —Å–∏—Å—Ç–µ–º—ñ. –¶–µ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ –±—É–ª–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ –≤ –º–∏–Ω—É–ª–æ–º—É —ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–ø—ñ–ª—å–Ω–æ–≥–æ —Ä–µ–≥—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø–µ–π–¥–∂–µ—Ä–∞.

–ü—É–ª –≥—ñ–ª–æ–∫ - —Ü–µ –º–∞–ª–µ–Ω—å–∫—ñ Mach-O dylibs, —è–∫—ñ —Å—Ç–≤–æ—Ä—é—é—Ç—å –Ω–µ–≤–µ–ª–∏–∫—ñ –ø—Ä–æ—Å—Ç–æ—Ä–∏ –º—ñ–∂ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å, —â–æ —É—Å–∫–ª–∞–¥–Ω—é—î –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–π.

### Override SLCs

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:

* **`DYLD_DHARED_REGION=private DYLD_SHARED_CACHE_DIR=</path/dir> DYLD_SHARED_CACHE_DONT_VALIDATE=1`** -> –¶–µ –¥–æ–∑–≤–æ–ª–∏—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –Ω–æ–≤–∏–π –∫–µ—à —Å–ø—ñ–ª—å–Ω–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫.
* **`DYLD_SHARED_CACHE_DIR=avoid`** —ñ –≤—Ä—É—á–Ω—É –∑–∞–º—ñ–Ω–∏—Ç–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –Ω–∞ —Å–∏–º–≤–æ–ª—ñ—á–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Å–ø—ñ–ª—å–Ω–∏–π –∫–µ—à –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ (–≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–¥–µ —ó—Ö –≤–∏—Ç—è–≥—Ç–∏).

## Special File Permissions

### Folder permissions

–£ **–ø–∞–ø—Ü—ñ**, **—á–∏—Ç–∞–Ω–Ω—è** –¥–æ–∑–≤–æ–ª—è—î **–ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —ó—ó**, **–∑–∞–ø–∏—Å** –¥–æ–∑–≤–æ–ª—è—î **–≤–∏–¥–∞–ª—è—Ç–∏** —Ç–∞ **–∑–∞–ø–∏—Å—É–≤–∞—Ç–∏** —Ñ–∞–π–ª–∏ –≤ –Ω—ñ–π, –∞ **–≤–∏–∫–æ–Ω–∞–Ω–Ω—è** –¥–æ–∑–≤–æ–ª—è—î **–ø–µ—Ä–µ–º—ñ—â–∞—Ç–∏—Å—è** –ø–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó. –û—Ç–∂–µ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑ **–¥–æ–∑–≤–æ–ª–æ–º –Ω–∞ —á–∏—Ç–∞–Ω–Ω—è —Ñ–∞–π–ª—É** –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó, –¥–µ –≤—ñ–Ω **–Ω–µ –º–∞—î –¥–æ–∑–≤–æ–ª—É –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è**, **–Ω–µ –∑–º–æ–∂–µ –ø—Ä–æ—á–∏—Ç–∞—Ç–∏** —Ñ–∞–π–ª.

### Flag modifiers

–Ñ –¥–µ—è–∫—ñ –ø—Ä–∞–ø–æ—Ä–∏, —è–∫—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ —É —Ñ–∞–π–ª–∞—Ö, —â–æ –∑–º—É—Å–∏—Ç—å —Ñ–∞–π–ª –ø–æ–≤–æ–¥–∏—Ç–∏—Å—è —ñ–Ω–∞–∫—à–µ. –í–∏ –º–æ–∂–µ—Ç–µ **–ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–ø–æ—Ä–∏** —Ñ–∞–π–ª—ñ–≤ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `ls -lO /path/directory`

* **`uchg`**: –í—ñ–¥–æ–º–∏–π —è–∫ **uchange** –ø—Ä–∞–ø–æ—Ä, —è–∫–∏–π **–∑–∞–ø–æ–±—ñ–≥–∞—î –±—É–¥—å-—è–∫—ñ–π –¥—ñ—ó** –∑–º—ñ–Ω–∏ –∞–±–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è **—Ñ–∞–π–ª—É**. –©–æ–± –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –π–æ–≥–æ, –≤–∏–∫–æ–Ω–∞–π—Ç–µ: `chflags uchg file.txt`
* –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á root –º–æ–∂–µ **–≤–∏–¥–∞–ª–∏—Ç–∏ –ø—Ä–∞–ø–æ—Ä** —ñ –∑–º—ñ–Ω–∏—Ç–∏ —Ñ–∞–π–ª.
* **`restricted`**: –¶–µ–π –ø—Ä–∞–ø–æ—Ä —Ä–æ–±–∏—Ç—å —Ñ–∞–π–ª **–∑–∞—Ö–∏—â–µ–Ω–∏–º SIP** (–≤–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ —Ü–µ–π –ø—Ä–∞–ø–æ—Ä –¥–æ —Ñ–∞–π–ª—É).
* **`Sticky bit`**: –Ø–∫—â–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è –º–∞—î sticky bit, **—Ç—ñ–ª—å–∫–∏** –≤–ª–∞—Å–Ω–∏–∫ **–¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –∞–±–æ root –º–æ–∂—É—Ç—å –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤—É–≤–∞—Ç–∏ –∞–±–æ –≤–∏–¥–∞–ª—è—Ç–∏** —Ñ–∞–π–ª–∏. –ó–∞–∑–≤–∏—á–∞–π —Ü–µ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó /tmp, —â–æ–± –∑–∞–ø–æ–±—ñ–≥—Ç–∏ –∑–≤–∏—á–∞–π–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –≤–∏–¥–∞–ª—è—Ç–∏ –∞–±–æ –ø–µ—Ä–µ–º—ñ—â–∞—Ç–∏ —Ñ–∞–π–ª–∏ —ñ–Ω—à–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

–£—Å—ñ –ø—Ä–∞–ø–æ—Ä–∏ –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ —É —Ñ–∞–π–ª—ñ `sys/stat.h` (–∑–Ω–∞–π–¥—ñ—Ç—å –π–æ–≥–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `mdfind stat.h | grep stat.h`) —ñ –≤–æ–Ω–∏ —î:

* `UF_SETTABLE` 0x0000ffff: –ú–∞—Å–∫–∞ –∑–º—ñ–Ω–Ω–∏—Ö –ø—Ä–∞–ø–æ—Ä—ñ–≤ –≤–ª–∞—Å–Ω–∏–∫–∞.
* `UF_NODUMP` 0x00000001: –ù–µ –≤–∏–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ —Ñ–∞–π–ª.
* `UF_IMMUTABLE` 0x00000002: –§–∞–π–ª –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –∑–º—ñ–Ω–µ–Ω–∏–π.
* `UF_APPEND` 0x00000004: –ó–∞–ø–∏—Å–∏ —É —Ñ–∞–π–ª –º–æ–∂—É—Ç—å –ª–∏—à–µ –¥–æ–¥–∞–≤–∞—Ç–∏—Å—è.
* `UF_OPAQUE` 0x00000008: –î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è —î –Ω–µ–ø—Ä–æ–∑–æ—Ä–æ—é —â–æ–¥–æ –æ–±'—î–¥–Ω–∞–Ω–Ω—è.
* `UF_COMPRESSED` 0x00000020: –§–∞–π–ª —Å—Ç–∏—Å–Ω—É—Ç–∏–π (–¥–µ—è–∫—ñ —Ñ–∞–π–ª–æ–≤—ñ —Å–∏—Å—Ç–µ–º–∏).
* `UF_TRACKED` 0x00000040: –ù–µ–º–∞—î —Å–ø–æ–≤—ñ—â–µ–Ω—å –ø—Ä–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è/–ø–µ—Ä–µ–π–º–µ–Ω—É–≤–∞–Ω–Ω—è –¥–ª—è —Ñ–∞–π–ª—ñ–≤ –∑ —Ü–∏–º –ø—Ä–∞–ø–æ—Ä–æ–º.
* `UF_DATAVAULT` 0x00000080: –ü–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–∞–≤–æ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è —Ç–∞ –∑–∞–ø–∏—Å—É.
* `UF_HIDDEN` 0x00008000: –ü—ñ–¥–∫–∞–∑–∫–∞, —â–æ —Ü–µ–π –µ–ª–µ–º–µ–Ω—Ç –Ω–µ –ø–æ–≤–∏–Ω–µ–Ω –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è –≤ GUI.
* `SF_SUPPORTED` 0x009f0000: –ú–∞—Å–∫–∞ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö –ø—Ä–∞–ø–æ—Ä—ñ–≤ —Å—É–ø–µ—Ä–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
* `SF_SETTABLE` 0x3fff0000: –ú–∞—Å–∫–∞ –∑–º—ñ–Ω–Ω–∏—Ö –ø—Ä–∞–ø–æ—Ä—ñ–≤ —Å—É–ø–µ—Ä–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
* `SF_SYNTHETIC` 0xc0000000: –ú–∞—Å–∫–∞ —Å–∏—Å—Ç–µ–º–Ω–∏—Ö —Å–∏–Ω—Ç–µ—Ç–∏—á–Ω–∏—Ö –ø—Ä–∞–ø–æ—Ä—ñ–≤ —Ç—ñ–ª—å–∫–∏ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è.
* `SF_ARCHIVED` 0x00010000: –§–∞–π–ª –∞—Ä—Ö—ñ–≤–æ–≤–∞–Ω–∏–π.
* `SF_IMMUTABLE` 0x00020000: –§–∞–π–ª –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –∑–º—ñ–Ω–µ–Ω–∏–π.
* `SF_APPEND` 0x00040000: –ó–∞–ø–∏—Å–∏ —É —Ñ–∞–π–ª –º–æ–∂—É—Ç—å –ª–∏—à–µ –¥–æ–¥–∞–≤–∞—Ç–∏—Å—è.
* `SF_RESTRICTED` 0x00080000: –ü–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–∞–≤–æ –¥–ª—è –∑–∞–ø–∏—Å—É.
* `SF_NOUNLINK` 0x00100000: –ï–ª–µ–º–µ–Ω—Ç –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–¥–∞–ª–µ–Ω–∏–π, –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–∏–π –∞–±–æ –∑–º–æ–Ω—Ç–æ–≤–∞–Ω–∏–π.
* `SF_FIRMLINK` 0x00800000: –§–∞–π–ª —î firmlink.
* `SF_DATALESS` 0x40000000: –§–∞–π–ª —î –æ–±'—î–∫—Ç–æ–º –±–µ–∑ –¥–∞–Ω–∏—Ö.

### **File ACLs**

–§–∞–π–ª–æ–≤—ñ **ACLs** –º—ñ—Å—Ç—è—Ç—å **ACE** (–ó–∞–ø–∏—Å–∏ –∫–æ–Ω—Ç—Ä–æ–ª—é –¥–æ—Å—Ç—É–ø—É), –¥–µ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –±—ñ–ª—å—à **–¥–µ—Ç–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –¥–æ–∑–≤–æ–ª–∏** –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

–ú–æ–∂–Ω–∞ –Ω–∞–¥–∞—Ç–∏ **–¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó** —Ü—ñ –¥–æ–∑–≤–æ–ª–∏: `list`, `search`, `add_file`, `add_subdirectory`, `delete_child`, `delete_child`.\
–ê –¥–ª—è **—Ñ–∞–π–ª—É**: `read`, `write`, `append`, `execute`.

–ö–æ–ª–∏ —Ñ–∞–π–ª –º—ñ—Å—Ç–∏—Ç—å ACLs, –≤–∏ **–∑–Ω–∞–π–¥–µ—Ç–µ "+" –ø—Ä–∏ –ø–µ—Ä–µ–ª—ñ–∫—É –¥–æ–∑–≤–æ–ª—ñ–≤, —è–∫ —É**:
```bash
ls -ld Movies
drwx------+   7 username  staff     224 15 Apr 19:42 Movies
```
–í–∏ –º–æ–∂–µ—Ç–µ **–ø—Ä–æ—á–∏—Ç–∞—Ç–∏ ACL** —Ñ–∞–π–ª—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é:
```bash
ls -lde Movies
drwx------+ 7 username  staff  224 15 Apr 19:42 Movies
0: group:everyone deny delete
```
–í–∏ –º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ **–≤—Å—ñ —Ñ–∞–π–ª–∏ –∑ ACL** –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é (—Ü–µ –¥—É–∂–µ –ø–æ–≤—ñ–ª—å–Ω–æ):
```bash
ls -RAle / 2>/dev/null | grep -E -B1 "\d: "
```
### –†–æ–∑—à–∏—Ä–µ–Ω—ñ –ê—Ç—Ä–∏–±—É—Ç–∏

–†–æ–∑—à–∏—Ä–µ–Ω—ñ –∞—Ç—Ä–∏–±—É—Ç–∏ –º–∞—é—Ç—å —ñ–º'—è —Ç–∞ –±—É–¥—å-—è–∫–µ –±–∞–∂–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è, —ñ —ó—Ö –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `ls -@` —Ç–∞ –º–∞–Ω—ñ–ø—É–ª—é–≤–∞—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–æ–º–∞–Ω–¥–∏ `xattr`. –î–µ—è–∫—ñ –ø–æ—à–∏—Ä–µ–Ω—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω—ñ –∞—Ç—Ä–∏–±—É—Ç–∏:

* `com.apple.resourceFork`: –°—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ —Ä–µ—Å—É—Ä—Å–Ω–∏–º–∏ fork. –¢–∞–∫–æ–∂ –≤–∏–¥–Ω–æ —è–∫ `filename/..namedfork/rsrc`
* `com.apple.quarantine`: MacOS: –º–µ—Ö–∞–Ω—ñ–∑–º –∫–∞—Ä–∞–Ω—Ç–∏–Ω—É Gatekeeper (III/6)
* `metadata:*`: MacOS: —Ä—ñ–∑–Ω—ñ –º–µ—Ç–∞–¥–∞–Ω—ñ, —Ç–∞–∫—ñ —è–∫ `_backup_excludeItem`, –∞–±–æ `kMD*`
* `com.apple.lastuseddate` (#PS): –î–∞—Ç–∞ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ñ–∞–π–ª—É
* `com.apple.FinderInfo`: MacOS: —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è Finder (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ–ª—å–æ—Ä–æ–≤—ñ –º—ñ—Ç–∫–∏)
* `com.apple.TextEncoding`: –í–∏–∑–Ω–∞—á–∞—î –∫–æ–¥—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É —Ñ–∞–π–ª—ñ–≤ ASCII
* `com.apple.logd.metadata`: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è logd –¥–ª—è —Ñ–∞–π–ª—ñ–≤ —É `/var/db/diagnostics`
* `com.apple.genstore.*`: –ì–µ–Ω–µ—Ä–∞—Ü—ñ–π–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è (`/.DocumentRevisions-V100` –≤ –∫–æ—Ä–µ–Ω—ñ —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏)
* `com.apple.rootless`: MacOS: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è System Integrity Protection –¥–ª—è –º–∞—Ä–∫—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—É (III/10)
* `com.apple.uuidb.boot-uuid`: –º–∞—Ä–∫—É–≤–∞–Ω–Ω—è logd –µ–ø–æ—Ö –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º UUID
* `com.apple.decmpfs`: MacOS: –ü—Ä–æ–∑–æ—Ä–∞ –∫–æ–º–ø—Ä–µ—Å—ñ—è —Ñ–∞–π–ª—ñ–≤ (II/7)
* `com.apple.cprotect`: \*OS: –î–∞–Ω—ñ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ñ–∞–π–ª—É (III/11)
* `com.apple.installd.*`: \*OS: –ú–µ—Ç–∞–¥–∞–Ω—ñ, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è installd, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `installType`, `uniqueInstallID`

### –†–µ—Å—É—Ä—Å–Ω—ñ Forks | macOS ADS

–¶–µ —Å–ø–æ—Å—ñ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ –ü–æ—Ç–æ–∫–∏ –î–∞–Ω–∏—Ö —É MacOS**. –í–∏ –º–æ–∂–µ—Ç–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –≤–º—ñ—Å—Ç –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞ –ø—ñ–¥ –Ω–∞–∑–≤–æ—é **com.apple.ResourceFork** –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ñ–∞–π–ª—É, –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ –π–æ–≥–æ –≤ **file/..namedfork/rsrc**.
```bash
echo "Hello" > a.txt
echo "Hello Mac ADS" > a.txt/..namedfork/rsrc

xattr -l a.txt #Read extended attributes
com.apple.ResourceFork: Hello Mac ADS

ls -l a.txt #The file length is still q
-rw-r--r--@ 1 username  wheel  6 17 Jul 01:15 a.txt
```
–í–∏ –º–æ–∂–µ—Ç–µ **–∑–Ω–∞–π—Ç–∏ –≤—Å—ñ —Ñ–∞–π–ª–∏, —â–æ –º—ñ—Å—Ç—è—Ç—å —Ü–µ–π —Ä–æ–∑—à–∏—Ä–µ–Ω–∏–π –∞—Ç—Ä–∏–±—É—Ç** –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é: 

{% code overflow="wrap" %}
```bash
find / -type f -exec ls -ld {} \; 2>/dev/null | grep -E "[x\-]@ " | awk '{printf $9; printf "\n"}' | xargs -I {} xattr -lv {} | grep "com.apple.ResourceFork"
```
{% endcode %}

### decmpfs

–†–æ–∑—à–∏—Ä–µ–Ω–∞ –∞—Ç—Ä–∏–±—É—Ç–∏–∫–∞ `com.apple.decmpfs` –≤–∫–∞–∑—É—î –Ω–∞ —Ç–µ, —â–æ —Ñ–∞–π–ª –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ–º—É –≤–∏–≥–ª—è–¥—ñ, `ls -l` –ø–æ–≤—ñ–¥–æ–º–∏—Ç—å –ø—Ä–æ **—Ä–æ–∑–º—ñ—Ä 0** —ñ —Å—Ç–∏—Å–Ω—É—Ç—ñ –¥–∞–Ω—ñ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ü—å–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞. –ö–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É, –∫–æ–ª–∏ —Ñ–∞–π–ª –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è, –≤—ñ–Ω –±—É–¥–µ —Ä–æ–∑—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–π –≤ –ø–∞–º'—è—Ç—ñ.

–¶–µ–π –∞—Ç—Ä–∏–±—É—Ç –º–æ–∂–Ω–∞ –ø–æ–±–∞—á–∏—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `ls -lO`, –≤–∫–∞–∑–∞–Ω–∏–º —è–∫ —Å—Ç–∏—Å–Ω—É—Ç–∏–π, –æ—Å–∫—ñ–ª—å–∫–∏ —Å—Ç–∏—Å–Ω—É—Ç—ñ —Ñ–∞–π–ª–∏ —Ç–∞–∫–æ–∂ –ø–æ–∑–Ω–∞—á–µ–Ω—ñ –ø—Ä–∞–ø–æ—Ä–æ–º `UF_COMPRESSED`. –Ø–∫—â–æ —Å—Ç–∏—Å–Ω—É—Ç–∏–π —Ñ–∞–π–ª –≤–∏–¥–∞–ª–∏—Ç–∏ –∑ —Ü—å–æ–≥–æ –ø—Ä–∞–ø–æ—Ä–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `chflags nocompressed </path/to/file>`, —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –∑–Ω–∞—Ç–∏–º–µ, —â–æ —Ñ–∞–π–ª –±—É–≤ —Å—Ç–∏—Å–Ω—É—Ç–∏–π, —ñ —Ç–æ–º—É –Ω–µ –∑–º–æ–∂–µ —Ä–æ–∑–ø–∞–∫—É–≤–∞—Ç–∏ —Ç–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –¥–∞–Ω–∏—Ö (–≤–æ–Ω–∞ –ø–æ–¥—É–º–∞—î, —â–æ –≤—ñ–Ω –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ –ø–æ—Ä–æ–∂–Ω—ñ–π).

–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç afscexpand –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –ø—Ä–∏–º—É—Å–æ–≤–æ–≥–æ —Ä–æ–∑–ø–∞–∫—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—É.

## **–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ –±—ñ–Ω–∞—Ä–Ω—ñ —Ñ–∞–π–ª–∏ &** –§–æ—Ä–º–∞—Ç Mach-o

–ë—ñ–Ω–∞—Ä–Ω—ñ —Ñ–∞–π–ª–∏ Mac OS –∑–∞–∑–≤–∏—á–∞–π –∫–æ–º–ø—ñ–ª—é—é—Ç—å—Å—è —è–∫ **—É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ –±—ñ–Ω–∞—Ä–Ω—ñ —Ñ–∞–π–ª–∏**. **–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –±—ñ–Ω–∞—Ä–Ω–∏–π —Ñ–∞–π–ª** –º–æ–∂–µ **–ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä –≤ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—ñ**.

{% content-ref url="universal-binaries-and-mach-o-format.md" %}
[universal-binaries-and-mach-o-format.md](universal-binaries-and-mach-o-format.md)
{% endcontent-ref %}

## macOS –ü—Ä–æ—Ü–µ—Å –ü–∞–º'—è—Ç—ñ

## –í–∏–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–∞–º'—è—Ç—ñ macOS

{% content-ref url="macos-memory-dumping.md" %}
[macos-memory-dumping.md](macos-memory-dumping.md)
{% endcontent-ref %}

## –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ä–∏–∑–∏–∫—É —Ñ–∞–π–ª—ñ–≤ Mac OS

–ö–∞—Ç–∞–ª–æ–≥ `/System/Library/CoreServices/CoreTypes.bundle/Contents/Resources/System` —î –º—ñ—Å—Ü–µ–º, –¥–µ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ **—Ä–∏–∑–∏–∫, –ø–æ–≤'—è–∑–∞–Ω–∏–π –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º–∏ —Ñ–∞–π–ª—ñ–≤**. –¶–µ–π –∫–∞—Ç–∞–ª–æ–≥ –∫–ª–∞—Å–∏—Ñ—ñ–∫—É—î —Ñ–∞–π–ª–∏ –∑–∞ —Ä—ñ–∑–Ω–∏–º–∏ —Ä—ñ–≤–Ω—è–º–∏ —Ä–∏–∑–∏–∫—É, –≤–ø–ª–∏–≤–∞—é—á–∏ –Ω–∞ —Ç–µ, —è–∫ Safari –æ–±—Ä–æ–±–ª—è—î —Ü—ñ —Ñ–∞–π–ª–∏ –ø—ñ–¥ —á–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è. –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–∞–∫—ñ:

* **LSRiskCategorySafe**: –§–∞–π–ª–∏ –≤ —Ü—ñ–π –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –≤–≤–∞–∂–∞—é—Ç—å—Å—è **–∞–±—Å–æ–ª—é—Ç–Ω–æ –±–µ–∑–ø–µ—á–Ω–∏–º–∏**. Safari –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥–∫—Ä–∏—î —Ü—ñ —Ñ–∞–π–ª–∏ –ø—ñ—Å–ª—è —ó—Ö –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è.
* **LSRiskCategoryNeutral**: –¶—ñ —Ñ–∞–π–ª–∏ –Ω–µ —Å—É–ø—Ä–æ–≤–æ–¥–∂—É—é—Ç—å—Å—è –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è–º–∏ —ñ **–Ω–µ –≤—ñ–¥–∫—Ä–∏–≤–∞—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ** Safari.
* **LSRiskCategoryUnsafeExecutable**: –§–∞–π–ª–∏ –≤ —Ü—ñ–π –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó **–≤–∏–∫–ª–∏–∫–∞—é—Ç—å –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è**, —â–æ –≤–∫–∞–∑—É—î –Ω–∞ —Ç–µ, —â–æ —Ñ–∞–π–ª —î –¥–æ–¥–∞—Ç–∫–æ–º. –¶–µ —Å–ª—É–∂–∏—Ç—å –∑–∞—Ö–æ–¥–æ–º –±–µ–∑–ø–µ–∫–∏ –¥–ª—è –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
* **LSRiskCategoryMayContainUnsafeExecutable**: –¶—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—è –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ñ–∞–π–ª—ñ–≤, —Ç–∞–∫–∏—Ö —è–∫ –∞—Ä—Ö—ñ–≤–∏, —è–∫—ñ –º–æ–∂—É—Ç—å –º—ñ—Å—Ç–∏—Ç–∏ –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏–π —Ñ–∞–π–ª. Safari **–≤–∏–∫–ª–∏—á–µ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è**, —è–∫—â–æ –Ω–µ –∑–º–æ–∂–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏, —â–æ –≤—Å—ñ –≤–º—ñ—Å—Ç–∏ –±–µ–∑–ø–µ—á–Ω—ñ –∞–±–æ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ñ.

## –õ–æ–≥ —Ñ–∞–π–ª–∏

* **`$HOME/Library/Preferences/com.apple.LaunchServices.QuarantineEventsV2`**: –ú—ñ—Å—Ç–∏—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ —Ñ–∞–π–ª–∏, —Ç–∞–∫—ñ —è–∫ URL, –∑ —è–∫–æ–≥–æ –≤–æ–Ω–∏ –±—É–ª–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ.
* **`/var/log/system.log`**: –û—Å–Ω–æ–≤–Ω–∏–π –∂—É—Ä–Ω–∞–ª —Å–∏—Å—Ç–µ–º OSX. com.apple.syslogd.plist –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è syslogging (–≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –≤—ñ–Ω –≤–∏–º–∫–Ω–µ–Ω–∏–π, —à—É–∫–∞—é—á–∏ "com.apple.syslogd" —É `launchctl list`).
* **`/private/var/log/asl/*.asl`**: –¶–µ –∂—É—Ä–Ω–∞–ª–∏ —Å–∏—Å—Ç–µ–º–∏ Apple, —è–∫—ñ –º–æ–∂—É—Ç—å –º—ñ—Å—Ç–∏—Ç–∏ —Ü—ñ–∫–∞–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é.
* **`$HOME/Library/Preferences/com.apple.recentitems.plist`**: –ó–±–µ—Ä—ñ–≥–∞—î –Ω–µ—â–æ–¥–∞–≤–Ω–æ –≤—ñ–¥–∫—Ä–∏—Ç—ñ —Ñ–∞–π–ª–∏ —Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–∏ —á–µ—Ä–µ–∑ "Finder".
* **`$HOME/Library/Preferences/com.apple.loginitems.plsit`**: –ó–±–µ—Ä—ñ–≥–∞—î –µ–ª–µ–º–µ–Ω—Ç–∏ –¥–ª—è –∑–∞–ø—É—Å–∫—É –ø—ñ–¥ —á–∞—Å —Å—Ç–∞—Ä—Ç—É —Å–∏—Å—Ç–µ–º–∏.
* **`$HOME/Library/Logs/DiskUtility.log`**: –ñ—É—Ä–Ω–∞–ª –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–∏ DiskUtility (—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –¥–∏—Å–∫–∏, –≤–∫–ª—é—á–∞—é—á–∏ USB).
* **`/Library/Preferences/SystemConfiguration/com.apple.airport.preferences.plist`**: –î–∞–Ω—ñ –ø—Ä–æ –±–µ–∑–¥—Ä–æ—Ç–æ–≤—ñ —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø—É.
* **`/private/var/db/launchd.db/com.apple.launchd/overrides.plist`**: –°–ø–∏—Å–æ–∫ –¥–µ–∞–∫—Ç–∏–≤–æ–≤–∞–Ω–∏—Ö –¥–µ–º–æ–Ω—ñ–≤.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
