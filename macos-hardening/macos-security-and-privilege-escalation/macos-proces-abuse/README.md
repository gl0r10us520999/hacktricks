# macOS Process Abuse

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Processes Basic Information

„Éó„É≠„Çª„Çπ„ÅØÂÆüË°å‰∏≠„ÅÆÂÆüË°åÂèØËÉΩ„Éï„Ç°„Ç§„É´„ÅÆ„Ç§„É≥„Çπ„Çø„É≥„Çπ„Åß„Åô„Åå„ÄÅ„Éó„É≠„Çª„Çπ„ÅØ„Ç≥„Éº„Éâ„ÇíÂÆüË°å„Åó„Åæ„Åõ„Çì„ÄÇ„Åì„Çå„Çâ„ÅØ„Çπ„É¨„ÉÉ„Éâ„Åß„Åô„ÄÇ„Åó„Åü„Åå„Å£„Å¶„ÄÅ**„Éó„É≠„Çª„Çπ„ÅØÂÆüË°å‰∏≠„ÅÆ„Çπ„É¨„ÉÉ„Éâ„ÅÆ„Åü„ÇÅ„ÅÆ„Ç≥„É≥„ÉÜ„Éä„Å´ÈÅé„Åé„Åæ„Åõ„Çì**„ÄÇ„É°„É¢„É™„ÄÅ„Éá„Ç£„Çπ„ÇØ„É™„Éó„Çø„ÄÅ„Éù„Éº„Éà„ÄÅÊ®©Èôê„ÇíÊèê‰æõ„Åó„Åæ„Åô...

ÂæìÊù•„ÄÅ„Éó„É≠„Çª„Çπ„ÅØ**`fork`**„ÇíÂëº„Å≥Âá∫„Åô„Åì„Å®„Å´„Çà„Å£„Å¶‰ªñ„ÅÆ„Éó„É≠„Çª„ÇπÂÜÖ„ÅßÈñãÂßã„Åï„Çå„Åæ„Åó„ÅüÔºàPID 1„ÇíÈô§„ÅèÔºâ„ÄÇ„Åì„Çå„Å´„Çà„Çä„ÄÅÁèæÂú®„ÅÆ„Éó„É≠„Çª„Çπ„ÅÆÊ≠£Á¢∫„Å™„Ç≥„Éî„Éº„Åå‰ΩúÊàê„Åï„Çå„ÄÅ„Åù„ÅÆÂæå**Â≠ê„Éó„É≠„Çª„Çπ**„ÅØ‰∏ÄËà¨ÁöÑ„Å´**`execve`**„ÇíÂëº„Å≥Âá∫„Åó„Å¶Êñ∞„Åó„ÅÑÂÆüË°åÂèØËÉΩ„Éï„Ç°„Ç§„É´„Çí„É≠„Éº„Éâ„Åó„Å¶ÂÆüË°å„Åó„Åæ„Åô„ÄÇ„Åù„ÅÆÂæå„ÄÅ**`vfork`**„ÅåÂ∞éÂÖ•„Åï„Çå„ÄÅ„Åì„ÅÆ„Éó„É≠„Çª„Çπ„Çí„É°„É¢„É™„Ç≥„Éî„Éº„Å™„Åó„ÅßÈ´òÈÄüÂåñ„Åó„Åæ„Åó„Åü„ÄÇ\
Ê¨°„Å´„ÄÅ**`posix_spawn`**„ÅåÂ∞éÂÖ•„Åï„Çå„ÄÅ**`vfork`**„Å®**`execve`**„Çí1Âõû„ÅÆÂëº„Å≥Âá∫„Åó„ÅßÁµÑ„ÅøÂêà„Çè„Åõ„ÄÅ„Éï„É©„Ç∞„ÇíÂèó„ÅëÂÖ•„Çå„Åæ„ÅôÔºö

* `POSIX_SPAWN_RESETIDS`: ÊúâÂäπ„Å™ID„ÇíÂÆüÈöõ„ÅÆID„Å´„É™„Çª„ÉÉ„Éà
* `POSIX_SPAWN_SETPGROUP`: „Éó„É≠„Çª„Çπ„Ç∞„É´„Éº„Éó„ÅÆÊâÄÂ±û„ÇíË®≠ÂÆö
* `POSUX_SPAWN_SETSIGDEF`: „Ç∑„Ç∞„Éä„É´„ÅÆ„Éá„Éï„Ç©„É´„ÉàÂãï‰Ωú„ÇíË®≠ÂÆö
* `POSIX_SPAWN_SETSIGMASK`: „Ç∑„Ç∞„Éä„É´„Éû„Çπ„ÇØ„ÇíË®≠ÂÆö
* `POSIX_SPAWN_SETEXEC`: Âêå„Åò„Éó„É≠„Çª„Çπ„ÅßexecÔºà`execve`„ÅÆ„Çà„ÅÜ„Å´„ÄÅ„Çà„ÇäÂ§ö„Åè„ÅÆ„Ç™„Éó„Ç∑„Éß„É≥„ÇíÊåÅ„Å§Ôºâ
* `POSIX_SPAWN_START_SUSPENDED`: „Çµ„Çπ„Éö„É≥„ÉâÁä∂ÊÖã„ÅßÈñãÂßã
* `_POSIX_SPAWN_DISABLE_ASLR`: ASLR„Å™„Åó„ÅßÈñãÂßã
* `_POSIX_SPAWN_NANO_ALLOCATOR:` libmalloc„ÅÆ„Éä„Éé„Ç¢„É≠„Ç±„Éº„Çø„Çí‰ΩøÁî®
* `_POSIX_SPAWN_ALLOW_DATA_EXEC:` „Éá„Éº„Çø„Çª„Ç∞„É°„É≥„Éà„Åß`rwx`„ÇíË®±ÂèØ
* `POSIX_SPAWN_CLOEXEC_DEFAULT`: exec(2)„Åß„Éá„Éï„Ç©„É´„Éà„ÅßÂÖ®„Å¶„ÅÆ„Éï„Ç°„Ç§„É´Ë®òËø∞Â≠ê„ÇíÈñâ„Åò„Çã
* `_POSIX_SPAWN_HIGH_BITS_ASLR:` ASLR„Çπ„É©„Ç§„Éâ„ÅÆÈ´ò‰Ωç„Éì„ÉÉ„Éà„Çí„É©„É≥„ÉÄ„É†Âåñ

„Åï„Çâ„Å´„ÄÅ`posix_spawn`„ÅØ„ÄÅÁîüÊàê„Åï„Çå„Åü„Éó„É≠„Çª„Çπ„ÅÆ„ÅÑ„Åè„Å§„Åã„ÅÆÂÅ¥Èù¢„ÇíÂà∂Âæ°„Åô„Çã**`posix_spawnattr`**„ÅÆÈÖçÂàó„ÇíÊåáÂÆö„Åô„Çã„Åì„Å®„ÇíË®±ÂèØ„Åó„ÄÅ„Éá„Ç£„Çπ„ÇØ„É™„Éó„Çø„ÅÆÁä∂ÊÖã„ÇíÂ§âÊõ¥„Åô„Çã„Åü„ÇÅ„ÅÆ**`posix_spawn_file_actions`**„ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇ

„Éó„É≠„Çª„Çπ„ÅåÁµÇ‰∫Ü„Åô„Çã„Å®„ÄÅ**Ë¶™„Éó„É≠„Çª„Çπ„Å´Êàª„Çä„Ç≥„Éº„Éâ„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô**ÔºàË¶™„ÅåÁµÇ‰∫Ü„Åó„ÅüÂ†¥Âêà„ÄÅÊñ∞„Åó„ÅÑË¶™„ÅØPID 1„Åß„ÅôÔºâ„Åó„ÄÅ„Ç∑„Ç∞„Éä„É´`SIGCHLD`„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô„ÄÇË¶™„ÅØ„Åì„ÅÆÂÄ§„ÇíÂèñÂæó„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„ÄÅ`wait4()`„Åæ„Åü„ÅØ`waitid()`„ÇíÂëº„Å≥Âá∫„Åó„ÄÅ„Åù„ÅÆÈñì„ÄÅÂ≠ê„Éó„É≠„Çª„Çπ„ÅØ„Çæ„É≥„ÉìÁä∂ÊÖã„Å´Áïô„Åæ„Çä„ÄÅ„É™„Çπ„Éà„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô„Åå„ÄÅ„É™„ÇΩ„Éº„Çπ„ÇíÊ∂àË≤ª„Åó„Åæ„Åõ„Çì„ÄÇ

### PIDs

PID„ÅØ„Éó„É≠„Çª„ÇπË≠òÂà•Â≠ê„Åß„ÄÅ„É¶„Éã„Éº„ÇØ„Å™„Éó„É≠„Çª„Çπ„ÇíË≠òÂà•„Åó„Åæ„Åô„ÄÇXNU„Åß„ÅØ„ÄÅ**PID**„ÅØ**64„Éì„ÉÉ„Éà**„Åß„ÄÅÂçòË™ø„Å´Â¢óÂä†„Åó„ÄÅ**Ê±∫„Åó„Å¶„É©„ÉÉ„Éó„Åó„Åæ„Åõ„Çì**ÔºàÊÇ™Áî®„ÇíÈÅø„Åë„Çã„Åü„ÇÅÔºâ„ÄÇ

### Process Groups, Sessions & Coalations

**„Éó„É≠„Çª„Çπ**„ÅØ**„Ç∞„É´„Éº„Éó**„Å´ÊåøÂÖ•„Åï„Çå„ÄÅÁÆ°ÁêÜ„ÇíÂÆπÊòì„Å´„Åó„Åæ„Åô„ÄÇ„Åü„Å®„Åà„Å∞„ÄÅ„Ç∑„Çß„É´„Çπ„ÇØ„É™„Éó„ÉàÂÜÖ„ÅÆ„Ç≥„Éû„É≥„Éâ„ÅØÂêå„Åò„Éó„É≠„Çª„Çπ„Ç∞„É´„Éº„Éó„Å´„ÅÇ„Çä„ÄÅkill„Çí‰ΩøÁî®„Åó„Å¶**‰∏ÄÁ∑í„Å´„Ç∑„Ç∞„Éä„É´„ÇíÈÄÅ‰ø°„Åô„Çã**„Åì„Å®„ÅåÂèØËÉΩ„Åß„Åô„ÄÇ\
„Éó„É≠„Çª„Çπ„Çí„Çª„ÉÉ„Ç∑„Éß„É≥„Å´**„Ç∞„É´„Éº„ÉóÂåñ„Åô„Çã**„Åì„Å®„ÇÇÂèØËÉΩ„Åß„Åô„ÄÇ„Éó„É≠„Çª„Çπ„Åå„Çª„ÉÉ„Ç∑„Éß„É≥„ÇíÈñãÂßã„Åô„Çã„Å®Ôºà`setsid(2)`Ôºâ„ÄÅÂ≠ê„Éó„É≠„Çª„Çπ„ÅØ„Çª„ÉÉ„Ç∑„Éß„É≥ÂÜÖ„Å´Ë®≠ÂÆö„Åï„Çå„Åæ„Åô„Åå„ÄÅÁã¨Ëá™„ÅÆ„Çª„ÉÉ„Ç∑„Éß„É≥„ÇíÈñãÂßã„Åó„Å™„ÅÑÈôê„Çä„ÄÅ„Åù„ÅÜ„Å™„Çä„Åæ„Åô„ÄÇ

„Ç≥„Ç¢„É™„Ç∑„Éß„É≥„ÅØ„ÄÅDarwin„Åß„Éó„É≠„Çª„Çπ„Çí„Ç∞„É´„Éº„ÉóÂåñ„Åô„ÇãÂà•„ÅÆÊñπÊ≥ï„Åß„Åô„ÄÇ„Ç≥„Ç¢„É™„Ç∑„Éß„É≥„Å´ÂèÇÂä†„Åô„Çã„Éó„É≠„Çª„Çπ„ÅØ„ÄÅ„Éó„Éº„É´„É™„ÇΩ„Éº„Çπ„Å´„Ç¢„ÇØ„Çª„Çπ„Åß„Åç„ÄÅÂè∞Â∏≥„ÇíÂÖ±Êúâ„Åó„Åü„Çä„ÄÅJetsam„Å´Áõ¥Èù¢„Åó„Åü„Çä„Åó„Åæ„Åô„ÄÇ„Ç≥„Ç¢„É™„Ç∑„Éß„É≥„Å´„ÅØÁï∞„Å™„ÇãÂΩπÂâ≤„Åå„ÅÇ„Çä„Åæ„ÅôÔºö„É™„Éº„ÉÄ„Éº„ÄÅXPC„Çµ„Éº„Éì„Çπ„ÄÅÊã°Âºµ„ÄÇ

### Credentials & Personae

ÂêÑ„Éó„É≠„Çª„Çπ„ÅØ„ÄÅ„Ç∑„Çπ„ÉÜ„É†ÂÜÖ„ÅÆ**Ê®©Èôê„ÇíË≠òÂà•„Åô„Çã**„Åü„ÇÅ„ÅÆ**Ë≥áÊ†ºÊÉÖÂ†±**„Çí‰øùÊåÅ„Åó„Åæ„Åô„ÄÇÂêÑ„Éó„É≠„Çª„Çπ„Å´„ÅØ1„Å§„ÅÆ‰∏ªË¶Å„Å™`uid`„Å®1„Å§„ÅÆ‰∏ªË¶Å„Å™`gid`„Åå„ÅÇ„Çä„Åæ„ÅôÔºà„Åü„Å†„Åó„ÄÅË§áÊï∞„ÅÆ„Ç∞„É´„Éº„Éó„Å´Â±û„Åô„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„ÅôÔºâ„ÄÇ\
„Éê„Ç§„Éä„É™„Åå`setuid/setgid`„Éì„ÉÉ„Éà„ÇíÊåÅ„Å£„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÄÅ„É¶„Éº„Ç∂„ÉºID„Å®„Ç∞„É´„Éº„ÉóID„ÇíÂ§âÊõ¥„Åô„Çã„Åì„Å®„ÇÇÂèØËÉΩ„Åß„Åô„ÄÇ\
Êñ∞„Åó„ÅÑuid/gid„Çí**Ë®≠ÂÆö„Åô„Çã„Åü„ÇÅ„ÅÆÈñ¢Êï∞**„Åå„ÅÑ„Åè„Å§„Åã„ÅÇ„Çä„Åæ„Åô„ÄÇ

„Ç∑„Çπ„ÉÜ„É†„Ç≥„Éº„É´**`persona`**„ÅØ„ÄÅ**‰ª£Êõø„ÅÆ**Ë≥áÊ†ºÊÉÖÂ†±„ÅÆ„Çª„ÉÉ„Éà„ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇ„Éö„É´„ÇΩ„Éä„ÇíÊé°Áî®„Åô„Çã„Å®„ÄÅ„Åù„ÅÆuid„ÄÅgid„ÄÅ„Åä„Çà„Å≥„Ç∞„É´„Éº„Éó„É°„É≥„Éê„Éº„Ç∑„ÉÉ„Éó„Çí**‰∏ÄÂ∫¶„Å´**Âºï„ÅçÂèó„Åë„Åæ„Åô„ÄÇ[**„ÇΩ„Éº„Çπ„Ç≥„Éº„Éâ**](https://github.com/apple/darwin-xnu/blob/main/bsd/sys/persona.h)„Å´„ÅØ„ÄÅÊ¨°„ÅÆÊßãÈÄ†‰Ωì„ÅåË¶ã„Å§„Åã„Çä„Åæ„ÅôÔºö
```c
struct kpersona_info { uint32_t persona_info_version;
uid_t    persona_id; /* overlaps with UID */
int      persona_type;
gid_t    persona_gid;
uint32_t persona_ngroups;
gid_t    persona_groups[NGROUPS];
uid_t    persona_gmuid;
char     persona_name[MAXLOGNAME + 1];

/* TODO: MAC policies?! */
}
```
## „Çπ„É¨„ÉÉ„Éâ„ÅÆÂü∫Êú¨ÊÉÖÂ†±

1. **POSIX„Çπ„É¨„ÉÉ„ÉâÔºàpthreadsÔºâÔºö** macOS„ÅØPOSIX„Çπ„É¨„ÉÉ„ÉâÔºà`pthreads`Ôºâ„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„Åä„Çä„ÄÅ„Åì„Çå„ÅØC/C++„ÅÆÊ®ôÊ∫ñ„Çπ„É¨„ÉÉ„ÉâAPI„ÅÆ‰∏ÄÈÉ®„Åß„Åô„ÄÇmacOS„Å´„Åä„Åë„Çãpthreads„ÅÆÂÆüË£Ö„ÅØ`/usr/lib/system/libsystem_pthread.dylib`„Å´„ÅÇ„Çä„ÄÅ„Åì„Çå„ÅØÂÖ¨Èñã„Åï„Çå„Å¶„ÅÑ„Çã`libpthread`„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åã„ÇâÊù•„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åì„ÅÆ„É©„Ç§„Éñ„É©„É™„ÅØ„Çπ„É¨„ÉÉ„Éâ„Çí‰ΩúÊàê„ÅóÁÆ°ÁêÜ„Åô„Çã„Åü„ÇÅ„Å´ÂøÖË¶Å„Å™Èñ¢Êï∞„ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇ
2. **„Çπ„É¨„ÉÉ„Éâ„ÅÆ‰ΩúÊàêÔºö** `pthread_create()`Èñ¢Êï∞„ÅØÊñ∞„Åó„ÅÑ„Çπ„É¨„ÉÉ„Éâ„Çí‰ΩúÊàê„Åô„Çã„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇÂÜÖÈÉ®ÁöÑ„Å´„ÄÅ„Åì„ÅÆÈñ¢Êï∞„ÅØXNU„Ç´„Éº„Éç„É´ÔºàmacOS„ÅåÂü∫„Å•„ÅÑ„Å¶„ÅÑ„Çã„Ç´„Éº„Éç„É´ÔºâÁâπÊúâ„ÅÆ‰Ωé„É¨„Éô„É´„ÅÆ„Ç∑„Çπ„ÉÜ„É†„Ç≥„Éº„É´„Åß„ÅÇ„Çã`bsdthread_create()`„ÇíÂëº„Å≥Âá∫„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆ„Ç∑„Çπ„ÉÜ„É†„Ç≥„Éº„É´„ÅØ„ÄÅ„Çπ„É¨„ÉÉ„Éâ„ÅÆÂãï‰Ωú„ÇíÊåáÂÆö„Åô„Çã`pthread_attr`ÔºàÂ±ûÊÄßÔºâ„Åã„ÇâÊ¥æÁîü„Åó„Åü„Åï„Åæ„Åñ„Åæ„Å™„Éï„É©„Ç∞„ÇíÂèó„ÅëÂèñ„Çä„Åæ„Åô„ÄÇ„Åì„Çå„Å´„ÅØ„Çπ„Ç±„Ç∏„É•„Éº„É™„É≥„Ç∞„Éù„É™„Ç∑„Éº„ÇÑ„Çπ„Çø„ÉÉ„ÇØ„Çµ„Ç§„Ç∫„ÅåÂê´„Åæ„Çå„Åæ„Åô„ÄÇ
* **„Éá„Éï„Ç©„É´„Éà„Çπ„Çø„ÉÉ„ÇØ„Çµ„Ç§„Ç∫Ôºö** Êñ∞„Åó„ÅÑ„Çπ„É¨„ÉÉ„Éâ„ÅÆ„Éá„Éï„Ç©„É´„Éà„Çπ„Çø„ÉÉ„ÇØ„Çµ„Ç§„Ç∫„ÅØ512 KB„Åß„ÄÅÈÄöÂ∏∏„ÅÆÊìç‰Ωú„Å´„ÅØÂçÅÂàÜ„Åß„Åô„Åå„ÄÅÂøÖË¶Å„Å´Âøú„Åò„Å¶„Çπ„É¨„ÉÉ„ÉâÂ±ûÊÄß„Çí‰ªã„Åó„Å¶Ë™øÊï¥„Åß„Åç„Åæ„Åô„ÄÇ
3. **„Çπ„É¨„ÉÉ„Éâ„ÅÆÂàùÊúüÂåñÔºö** `__pthread_init()`Èñ¢Êï∞„ÅØ„Çπ„É¨„ÉÉ„Éâ„ÅÆ„Çª„ÉÉ„Éà„Ç¢„ÉÉ„Éó‰∏≠„Å´ÈáçË¶Å„Åß„ÄÅ`env[]`ÂºïÊï∞„ÇíÂà©Áî®„Åó„Å¶„Çπ„Çø„ÉÉ„ÇØ„ÅÆ‰ΩçÁΩÆ„ÇÑ„Çµ„Ç§„Ç∫„Å´Èñ¢„Åô„ÇãË©≥Á¥∞„ÇíÂê´„ÇÄÁí∞Â¢ÉÂ§âÊï∞„ÇíËß£Êûê„Åó„Åæ„Åô„ÄÇ

#### macOS„Å´„Åä„Åë„Çã„Çπ„É¨„ÉÉ„Éâ„ÅÆÁµÇ‰∫Ü

1. **„Çπ„É¨„ÉÉ„Éâ„ÅÆÁµÇ‰∫ÜÔºö** „Çπ„É¨„ÉÉ„Éâ„ÅØÈÄöÂ∏∏„ÄÅ`pthread_exit()`„ÇíÂëº„Å≥Âá∫„Åô„Åì„Å®„ÅßÁµÇ‰∫Ü„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÈñ¢Êï∞„ÅØ„Çπ„É¨„ÉÉ„Éâ„Åå„ÇØ„É™„Éº„É≥„Å´ÁµÇ‰∫Ü„Åó„ÄÅÂøÖË¶Å„Å™„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„Éó„ÇíË°å„ÅÑ„ÄÅ„Çπ„É¨„ÉÉ„Éâ„ÅåÂèÇÂä†ËÄÖ„Å´Êàª„ÇäÂÄ§„ÇíÈÄÅ‰ø°„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åó„Åæ„Åô„ÄÇ
2. **„Çπ„É¨„ÉÉ„Éâ„ÅÆ„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„ÉóÔºö** `pthread_exit()`„ÇíÂëº„Å≥Âá∫„Åô„Å®„ÄÅ`pthread_terminate()`Èñ¢Êï∞„ÅåÂëº„Å≥Âá∫„Åï„Çå„ÄÅ„Åô„Åπ„Å¶„ÅÆÈñ¢ÈÄ£„Çπ„É¨„ÉÉ„ÉâÊßãÈÄ†„ÅÆÂâäÈô§„ÇíÂá¶ÁêÜ„Åó„Åæ„Åô„ÄÇ„Åì„Çå„Å´„Çà„ÇäMach„Çπ„É¨„ÉÉ„Éâ„Éù„Éº„Éà„ÅåËß£Êîæ„Åï„ÇåÔºàMach„ÅØXNU„Ç´„Éº„Éç„É´„ÅÆÈÄö‰ø°„Çµ„Éñ„Ç∑„Çπ„ÉÜ„É†Ôºâ„ÄÅ„Çπ„É¨„ÉÉ„Éâ„Å´Èñ¢ÈÄ£„Åô„Çã„Ç´„Éº„Éç„É´„É¨„Éô„É´„ÅÆÊßãÈÄ†„ÇíÂâäÈô§„Åô„Çã„Ç∑„Çπ„ÉÜ„É†„Ç≥„Éº„É´`bsdthread_terminate`„ÅåÂëº„Å≥Âá∫„Åï„Çå„Åæ„Åô„ÄÇ

#### ÂêåÊúü„É°„Ç´„Éã„Ç∫„É†

ÂÖ±Êúâ„É™„ÇΩ„Éº„Çπ„Å∏„ÅÆ„Ç¢„ÇØ„Çª„Çπ„ÇíÁÆ°ÁêÜ„Åó„ÄÅÁ´∂ÂêàÁä∂ÊÖã„ÇíÈÅø„Åë„Çã„Åü„ÇÅ„Å´„ÄÅmacOS„ÅØ„ÅÑ„Åè„Å§„Åã„ÅÆÂêåÊúü„Éó„É™„Éü„ÉÜ„Ç£„Éñ„ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇ„Åì„Çå„Çâ„ÅØ„Éû„É´„ÉÅ„Çπ„É¨„ÉÉ„ÉâÁí∞Â¢É„Å´„Åä„ÅÑ„Å¶„Éá„Éº„Çø„ÅÆÊï¥ÂêàÊÄß„Å®„Ç∑„Çπ„ÉÜ„É†„ÅÆÂÆâÂÆöÊÄß„ÇíÁ¢∫‰øù„Åô„Çã„Åü„ÇÅ„Å´ÈáçË¶Å„Åß„ÅôÔºö

1. **„Éü„É•„Éº„ÉÜ„ÉÉ„ÇØ„ÇπÔºö**
* **ÈÄöÂ∏∏„ÅÆ„Éü„É•„Éº„ÉÜ„ÉÉ„ÇØ„ÇπÔºà„Ç∑„Ç∞„Éç„ÉÅ„É£Ôºö0x4D555458ÔºâÔºö** „É°„É¢„É™„Éï„ÉÉ„Éà„Éó„É™„É≥„Éà„Åå60„Éê„Ç§„ÉàÔºà„Éü„É•„Éº„ÉÜ„ÉÉ„ÇØ„Çπ56„Éê„Ç§„Éà„ÄÅ„Ç∑„Ç∞„Éç„ÉÅ„É£4„Éê„Ç§„ÉàÔºâ„ÅÆÊ®ôÊ∫ñ„Éü„É•„Éº„ÉÜ„ÉÉ„ÇØ„Çπ„ÄÇ
* **„Éï„Ç°„Çπ„Éà„Éü„É•„Éº„ÉÜ„ÉÉ„ÇØ„ÇπÔºà„Ç∑„Ç∞„Éç„ÉÅ„É£Ôºö0x4d55545AÔºâÔºö** ÈÄöÂ∏∏„ÅÆ„Éü„É•„Éº„ÉÜ„ÉÉ„ÇØ„Çπ„Å´‰ºº„Å¶„ÅÑ„Åæ„Åô„Åå„ÄÅ„Çà„ÇäÈ´òÈÄü„Å™Êìç‰Ωú„ÅÆ„Åü„ÇÅ„Å´ÊúÄÈÅ©Âåñ„Åï„Çå„Å¶„Åä„Çä„ÄÅ„Çµ„Ç§„Ç∫„ÅØ60„Éê„Ç§„Éà„Åß„Åô„ÄÇ
2. **Êù°‰ª∂Â§âÊï∞Ôºö**
* ÁâπÂÆö„ÅÆÊù°‰ª∂„ÅåÁô∫Áîü„Åô„Çã„ÅÆ„ÇíÂæÖ„Å§„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„ÄÅ„Çµ„Ç§„Ç∫„ÅØ44„Éê„Ç§„ÉàÔºà40„Éê„Ç§„Éà„Éó„É©„Çπ4„Éê„Ç§„Éà„ÅÆ„Ç∑„Ç∞„Éç„ÉÅ„É£Ôºâ„ÄÇ
* **Êù°‰ª∂Â§âÊï∞Â±ûÊÄßÔºà„Ç∑„Ç∞„Éç„ÉÅ„É£Ôºö0x434e4441ÔºâÔºö** Êù°‰ª∂Â§âÊï∞„ÅÆË®≠ÂÆöÂ±ûÊÄß„Åß„ÄÅ„Çµ„Ç§„Ç∫„ÅØ12„Éê„Ç§„Éà„Åß„Åô„ÄÇ
3. **„ÉØ„É≥„ÇπÂ§âÊï∞Ôºà„Ç∑„Ç∞„Éç„ÉÅ„É£Ôºö0x4f4e4345ÔºâÔºö**
* ÂàùÊúüÂåñ„Ç≥„Éº„Éâ„Åå‰∏ÄÂ∫¶„Å†„ÅëÂÆüË°å„Åï„Çå„Çã„Åì„Å®„Çí‰øùË®º„Åó„Åæ„Åô„ÄÇ„Çµ„Ç§„Ç∫„ÅØ12„Éê„Ç§„Éà„Åß„Åô„ÄÇ
4. **Ë™≠„ÅøÊõ∏„Åç„É≠„ÉÉ„ÇØÔºö**
* ÂêåÊôÇ„Å´Ë§áÊï∞„ÅÆ„É™„Éº„ÉÄ„Éº„Åæ„Åü„ÅØ1„Å§„ÅÆ„É©„Ç§„Çø„Éº„ÇíË®±ÂèØ„Åó„ÄÅÂÖ±Êúâ„Éá„Éº„Çø„Å∏„ÅÆÂäπÁéáÁöÑ„Å™„Ç¢„ÇØ„Çª„Çπ„Çí‰øÉÈÄ≤„Åó„Åæ„Åô„ÄÇ
* **Ë™≠„ÅøÊõ∏„Åç„É≠„ÉÉ„ÇØÔºà„Ç∑„Ç∞„Éç„ÉÅ„É£Ôºö0x52574c4bÔºâÔºö** „Çµ„Ç§„Ç∫„ÅØ196„Éê„Ç§„Éà„Åß„Åô„ÄÇ
* **Ë™≠„ÅøÊõ∏„Åç„É≠„ÉÉ„ÇØÂ±ûÊÄßÔºà„Ç∑„Ç∞„Éç„ÉÅ„É£Ôºö0x52574c41ÔºâÔºö** Ë™≠„ÅøÊõ∏„Åç„É≠„ÉÉ„ÇØ„ÅÆÂ±ûÊÄß„Åß„ÄÅ„Çµ„Ç§„Ç∫„ÅØ20„Éê„Ç§„Éà„Åß„Åô„ÄÇ

{% hint style="success" %}
„Åì„Çå„Çâ„ÅÆ„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÅÆÊúÄÂæå„ÅÆ4„Éê„Ç§„Éà„ÅØ„Ç™„Éº„Éê„Éº„Éï„É≠„Éº„ÇíÊ§úÂá∫„Åô„Çã„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ
{% endhint %}

### „Çπ„É¨„ÉÉ„Éâ„É≠„Éº„Ç´„É´Â§âÊï∞ÔºàTLVÔºâ

**„Çπ„É¨„ÉÉ„Éâ„É≠„Éº„Ç´„É´Â§âÊï∞ÔºàTLVÔºâ**„ÅØ„ÄÅMach-O„Éï„Ç°„Ç§„É´ÔºàmacOS„ÅÆÂÆüË°åÂèØËÉΩ„Éï„Ç°„Ç§„É´„ÅÆÂΩ¢ÂºèÔºâ„ÅÆÊñáËÑà„Åß„ÄÅ„Éû„É´„ÉÅ„Çπ„É¨„ÉÉ„Éâ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥ÂÜÖ„ÅÆ**ÂêÑ„Çπ„É¨„ÉÉ„Éâ**„Å´ÁâπÊúâ„ÅÆÂ§âÊï∞„ÇíÂÆ£Ë®Ä„Åô„Çã„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ„Åì„Çå„Å´„Çà„Çä„ÄÅÂêÑ„Çπ„É¨„ÉÉ„Éâ„ÅåÂ§âÊï∞„ÅÆÁã¨Ëá™„ÅÆ„Ç§„É≥„Çπ„Çø„É≥„Çπ„ÇíÊåÅ„Å°„ÄÅ„Éü„É•„Éº„ÉÜ„ÉÉ„ÇØ„Çπ„ÅÆ„Çà„ÅÜ„Å™ÊòéÁ§∫ÁöÑ„Å™ÂêåÊúü„É°„Ç´„Éã„Ç∫„É†„ÇíÂøÖË¶Å„Å®„Åõ„Åö„Å´Á´∂Âêà„ÇíÂõûÈÅø„Åó„ÄÅ„Éá„Éº„Çø„ÅÆÊï¥ÂêàÊÄß„ÇíÁ∂≠ÊåÅ„Åô„ÇãÊñπÊ≥ï„ÅåÊèê‰æõ„Åï„Çå„Åæ„Åô„ÄÇ

C„Åä„Çà„Å≥Èñ¢ÈÄ£Ë®ÄË™û„Åß„ÅØ„ÄÅ**`__thread`**„Ç≠„Éº„ÉØ„Éº„Éâ„Çí‰ΩøÁî®„Åó„Å¶„Çπ„É¨„ÉÉ„Éâ„É≠„Éº„Ç´„É´Â§âÊï∞„ÇíÂÆ£Ë®Ä„Åß„Åç„Åæ„Åô„ÄÇ‰ª•‰∏ã„ÅØ„ÄÅ„ÅÇ„Å™„Åü„ÅÆ‰æã„Åß„ÅÆÂãï‰ΩúÊñπÊ≥ï„Åß„ÅôÔºö
```c
cCopy code__thread int tlv_var;

void main (int argc, char **argv){
tlv_var = 10;
}
```
„Åì„ÅÆ„Çπ„Éã„Éö„ÉÉ„Éà„ÅØ `tlv_var` „Çí„Çπ„É¨„ÉÉ„Éâ„É≠„Éº„Ç´„É´Â§âÊï∞„Å®„Åó„Å¶ÂÆöÁæ©„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆ„Ç≥„Éº„Éâ„ÇíÂÆüË°å„Åó„Å¶„ÅÑ„ÇãÂêÑ„Çπ„É¨„ÉÉ„Éâ„ÅØÁã¨Ëá™„ÅÆ `tlv_var` „ÇíÊåÅ„Å°„ÄÅ„ÅÇ„Çã„Çπ„É¨„ÉÉ„Éâ„Åå `tlv_var` „Å´Âä†„Åà„ÅüÂ§âÊõ¥„ÅØ‰ªñ„ÅÆ„Çπ„É¨„ÉÉ„Éâ„ÅÆ `tlv_var` „Å´ÂΩ±Èüø„Çí‰∏é„Åà„Åæ„Åõ„Çì„ÄÇ

Mach-O „Éê„Ç§„Éä„É™„Åß„ÅØ„ÄÅ„Çπ„É¨„ÉÉ„Éâ„É≠„Éº„Ç´„É´Â§âÊï∞„Å´Èñ¢ÈÄ£„Åô„Çã„Éá„Éº„Çø„ÅØÁâπÂÆö„ÅÆ„Çª„ÇØ„Ç∑„Éß„É≥„Å´Êï¥ÁêÜ„Åï„Çå„Å¶„ÅÑ„Åæ„ÅôÔºö

* **`__DATA.__thread_vars`**: „Åì„ÅÆ„Çª„ÇØ„Ç∑„Éß„É≥„Å´„ÅØ„ÄÅ„Çπ„É¨„ÉÉ„Éâ„É≠„Éº„Ç´„É´Â§âÊï∞„Å´Èñ¢„Åô„Çã„É°„Çø„Éá„Éº„Çø„ÅåÂê´„Åæ„Çå„Å¶„Åä„Çä„ÄÅÂ§âÊï∞„ÅÆÂûã„ÇÑÂàùÊúüÂåñÁä∂ÊÖã„Å™„Å©„ÅåË®òËºâ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ
* **`__DATA.__thread_bss`**: „Åì„ÅÆ„Çª„ÇØ„Ç∑„Éß„É≥„ÅØ„ÄÅÊòéÁ§∫ÁöÑ„Å´ÂàùÊúüÂåñ„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„Çπ„É¨„ÉÉ„Éâ„É≠„Éº„Ç´„É´Â§âÊï∞„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ„Çº„É≠ÂàùÊúüÂåñ„Éá„Éº„Çø„ÅÆ„Åü„ÇÅ„Å´Á¢∫‰øù„Åï„Çå„Åü„É°„É¢„É™„ÅÆ‰∏ÄÈÉ®„Åß„Åô„ÄÇ

Mach-O „ÅØ„ÄÅ„Çπ„É¨„ÉÉ„Éâ„ÅåÁµÇ‰∫Ü„Åô„ÇãÈöõ„Å´„Çπ„É¨„ÉÉ„Éâ„É≠„Éº„Ç´„É´Â§âÊï∞„ÇíÁÆ°ÁêÜ„Åô„Çã„Åü„ÇÅ„ÅÆÁâπÂÆö„ÅÆ API **`tlv_atexit`** „ÇÇÊèê‰æõ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åì„ÅÆ API „Çí‰ΩøÁî®„Åô„Çã„Å®„ÄÅ„Çπ„É¨„ÉÉ„Éâ„ÅåÁµÇ‰∫Ü„Åô„ÇãÈöõ„Å´„Çπ„É¨„ÉÉ„Éâ„É≠„Éº„Ç´„É´„Éá„Éº„Çø„Çí„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„Éó„Åô„ÇãÁâπÂà•„Å™Èñ¢Êï∞„Åß„ÅÇ„Çã **„Éá„Çπ„Éà„É©„ÇØ„Çø„ÇíÁôªÈå≤** „Åß„Åç„Åæ„Åô„ÄÇ

### „Çπ„É¨„ÉÉ„Éâ„ÅÆÂÑ™ÂÖàÈ†Ü‰Ωç

„Çπ„É¨„ÉÉ„Éâ„ÅÆÂÑ™ÂÖàÈ†Ü‰Ωç„ÇíÁêÜËß£„Åô„Çã„Å´„ÅØ„ÄÅ„Ç™„Éö„É¨„Éº„ÉÜ„Ç£„É≥„Ç∞„Ç∑„Çπ„ÉÜ„É†„Åå„Å©„ÅÆ„Çπ„É¨„ÉÉ„Éâ„Çí„ÅÑ„Å§ÂÆüË°å„Åô„Çã„Åã„ÇíÊ±∫ÂÆö„Åô„ÇãÊñπÊ≥ï„ÇíË¶ã„Å¶„ÅÑ„ÅèÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åì„ÅÆÊ±∫ÂÆö„ÅØ„ÄÅÂêÑ„Çπ„É¨„ÉÉ„Éâ„Å´Ââ≤„ÇäÂΩì„Å¶„Çâ„Çå„ÅüÂÑ™ÂÖàÂ∫¶„É¨„Éô„É´„Å´„Çà„Å£„Å¶ÂΩ±Èüø„ÇíÂèó„Åë„Åæ„Åô„ÄÇmacOS „Åä„Çà„Å≥ Unix Á≥ª„Ç∑„Çπ„ÉÜ„É†„Åß„ÅØ„ÄÅ„Åì„Çå„Çí `nice`„ÄÅ`renice`„ÄÅ„Åä„Çà„Å≥ Quality of Service (QoS) „ÇØ„É©„Çπ„ÅÆ„Çà„ÅÜ„Å™Ê¶ÇÂøµ„Çí‰ΩøÁî®„Åó„Å¶Âá¶ÁêÜ„Åó„Åæ„Åô„ÄÇ

#### Nice „Å® Renice

1. **Nice:**
* „Éó„É≠„Çª„Çπ„ÅÆ `nice` ÂÄ§„ÅØ„ÄÅ„Åù„ÅÆÂÑ™ÂÖàÂ∫¶„Å´ÂΩ±Èüø„Çí‰∏é„Åà„ÇãÊï∞ÂÄ§„Åß„Åô„ÄÇ„Åô„Åπ„Å¶„ÅÆ„Éó„É≠„Çª„Çπ„Å´„ÅØ -20ÔºàÊúÄÈ´òÂÑ™ÂÖàÂ∫¶Ôºâ„Åã„Çâ 19ÔºàÊúÄ‰ΩéÂÑ™ÂÖàÂ∫¶Ôºâ„Åæ„Åß„ÅÆÁØÑÂõ≤„ÅÆ nice ÂÄ§„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Éó„É≠„Çª„Çπ„Åå‰ΩúÊàê„Åï„Çå„Çã„Å®„Åç„ÅÆ„Éá„Éï„Ç©„É´„Éà„ÅÆ nice ÂÄ§„ÅØÈÄöÂ∏∏ 0 „Åß„Åô„ÄÇ
* „Çà„Çä‰Ωé„ÅÑ nice ÂÄ§Ôºà-20 „Å´Ëøë„ÅÑÔºâ„ÅØ„ÄÅ„Éó„É≠„Çª„Çπ„Çí„Çà„Çä„ÄåËá™Â∑±‰∏≠ÂøÉÁöÑ„Äç„Å´„Åó„ÄÅ‰ªñ„ÅÆ„Éó„É≠„Çª„Çπ„Çà„Çä„ÇÇÂ§ö„Åè„ÅÆ CPU ÊôÇÈñì„Çí‰∏é„Åà„Åæ„Åô„ÄÇ
2. **Renice:**
* `renice` „ÅØ„ÄÅ„Åô„Åß„Å´ÂÆüË°å‰∏≠„ÅÆ„Éó„É≠„Çª„Çπ„ÅÆ nice ÂÄ§„ÇíÂ§âÊõ¥„Åô„Çã„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„Çã„Ç≥„Éû„É≥„Éâ„Åß„Åô„ÄÇ„Åì„Çå„Çí‰ΩøÁî®„Åó„Å¶„ÄÅ„Éó„É≠„Çª„Çπ„ÅÆÂÑ™ÂÖàÂ∫¶„ÇíÂãïÁöÑ„Å´Ë™øÊï¥„Åó„ÄÅÊñ∞„Åó„ÅÑ nice ÂÄ§„Å´Âü∫„Å•„ÅÑ„Å¶ CPU ÊôÇÈñì„ÅÆÂâ≤„ÇäÂΩì„Å¶„ÇíÂ¢óÊ∏õ„Åï„Åõ„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ
* „Åü„Å®„Åà„Å∞„ÄÅ„Éó„É≠„Çª„Çπ„Åå‰∏ÄÊôÇÁöÑ„Å´„Çà„ÇäÂ§ö„Åè„ÅÆ CPU „É™„ÇΩ„Éº„Çπ„ÇíÂøÖË¶Å„Å®„Åô„ÇãÂ†¥Âêà„ÄÅ`renice` „Çí‰ΩøÁî®„Åó„Å¶„Åù„ÅÆ nice ÂÄ§„Çí‰∏ã„Åí„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ

#### Quality of Service (QoS) „ÇØ„É©„Çπ

QoS „ÇØ„É©„Çπ„ÅØ„ÄÅÁâπ„Å´ **Grand Central Dispatch (GCD)** „Çí„Çµ„Éù„Éº„Éà„Åô„Çã macOS „ÅÆ„Çà„ÅÜ„Å™„Ç∑„Çπ„ÉÜ„É†„Åß„Çπ„É¨„ÉÉ„Éâ„ÅÆÂÑ™ÂÖàÈ†Ü‰Ωç„ÇíÂá¶ÁêÜ„Åô„Çã„Åü„ÇÅ„ÅÆ„Çà„ÇäÁèæ‰ª£ÁöÑ„Å™„Ç¢„Éó„É≠„Éº„ÉÅ„Åß„Åô„ÄÇQoS „ÇØ„É©„Çπ„Çí‰ΩøÁî®„Åô„Çã„Å®„ÄÅÈñãÁô∫ËÄÖ„ÅØ‰ΩúÊ•≠„Çí„Åù„ÅÆÈáçË¶ÅÊÄß„ÇÑÁ∑äÊÄ•ÊÄß„Å´Âü∫„Å•„ÅÑ„Å¶Áï∞„Å™„Çã„É¨„Éô„É´„Å´ **ÂàÜÈ°û** „Åß„Åç„Åæ„Åô„ÄÇmacOS „ÅØ„Åì„Çå„Çâ„ÅÆ QoS „ÇØ„É©„Çπ„Å´Âü∫„Å•„ÅÑ„Å¶„Çπ„É¨„ÉÉ„Éâ„ÅÆÂÑ™ÂÖàÈ†Ü‰Ωç„ÇíËá™ÂãïÁöÑ„Å´ÁÆ°ÁêÜ„Åó„Åæ„ÅôÔºö

1. **„É¶„Éº„Ç∂„Éº„Ç§„É≥„Çø„É©„ÇØ„ÉÜ„Ç£„Éñ:**
* „Åì„ÅÆ„ÇØ„É©„Çπ„ÅØ„ÄÅÁèæÂú®„É¶„Éº„Ç∂„Éº„Å®ÂØæË©±„Åó„Å¶„ÅÑ„Çã„Çø„Çπ„ÇØ„ÇÑ„ÄÅËâØÂ•Ω„Å™„É¶„Éº„Ç∂„Éº„Ç®„ÇØ„Çπ„Éö„É™„Ç®„É≥„Çπ„ÇíÊèê‰æõ„Åô„Çã„Åü„ÇÅ„Å´Âç≥ÊôÇ„ÅÆÁµêÊûú„ÇíÂøÖË¶Å„Å®„Åô„Çã„Çø„Çπ„ÇØ„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ„Åì„Çå„Çâ„ÅÆ„Çø„Çπ„ÇØ„ÅØ„ÄÅ„Ç§„É≥„Çø„Éº„Éï„Çß„Éº„Çπ„ÇíÂøúÁ≠îÊÄß„ÅÆ„ÅÇ„Çã„ÇÇ„ÅÆ„Å´‰øù„Å§„Åü„ÇÅ„Å´ÊúÄÈ´ò„ÅÆÂÑ™ÂÖàÂ∫¶„Åå‰∏é„Åà„Çâ„Çå„Åæ„ÅôÔºà‰æãÔºö„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„ÇÑ„Ç§„Éô„É≥„ÉàÂá¶ÁêÜÔºâ„ÄÇ
2. **„É¶„Éº„Ç∂„ÉºÈñãÂßã:**
* „É¶„Éº„Ç∂„Éº„ÅåÈñãÂßã„Åó„ÄÅÂç≥ÊôÇ„ÅÆÁµêÊûú„ÇíÊúüÂæÖ„Åô„Çã„Çø„Çπ„ÇØÔºà‰æãÔºö„Éâ„Ç≠„É•„É°„É≥„Éà„ÇíÈñã„Åè„ÄÅË®àÁÆó„ÇíÂøÖË¶Å„Å®„Åô„Çã„Éú„Çø„É≥„Çí„ÇØ„É™„ÉÉ„ÇØ„Åô„Çã„Å™„Å©Ôºâ„ÄÇ„Åì„Çå„Çâ„ÅØÈ´òÂÑ™ÂÖàÂ∫¶„Åß„Åô„Åå„ÄÅ„É¶„Éº„Ç∂„Éº„Ç§„É≥„Çø„É©„ÇØ„ÉÜ„Ç£„Éñ„Çà„Çä„ÅØ‰Ωé„ÅÑ„Åß„Åô„ÄÇ
3. **„É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£:**
* „Åì„Çå„Çâ„ÅÆ„Çø„Çπ„ÇØ„ÅØÈï∑ÊôÇÈñìÂÆüË°å„Åï„Çå„ÄÅÈÄöÂ∏∏„ÅØÈÄ≤Ë°åÁä∂Ê≥Å„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº„ÇíË°®Á§∫„Åó„Åæ„ÅôÔºà‰æãÔºö„Éï„Ç°„Ç§„É´„ÅÆ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„ÄÅ„Éá„Éº„Çø„ÅÆ„Ç§„É≥„Éù„Éº„ÉàÔºâ„ÄÇ„Åì„Çå„Çâ„ÅØ„É¶„Éº„Ç∂„ÉºÈñãÂßã„Çø„Çπ„ÇØ„Çà„Çä„ÇÇÂÑ™ÂÖàÂ∫¶„Åå‰Ωé„Åè„ÄÅÂç≥Â∫ß„Å´ÁµÇ‰∫Ü„Åô„ÇãÂøÖË¶Å„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ
4. **„Éê„ÉÉ„ÇØ„Ç∞„É©„Ç¶„É≥„Éâ:**
* „Åì„ÅÆ„ÇØ„É©„Çπ„ÅØ„ÄÅ„Éê„ÉÉ„ÇØ„Ç∞„É©„Ç¶„É≥„Éâ„ÅßÂãï‰Ωú„Åó„ÄÅ„É¶„Éº„Ç∂„Éº„Å´„ÅØË¶ã„Åà„Å™„ÅÑ„Çø„Çπ„ÇØ„Å´‰ΩøÁî®„Åï„Çå„Åæ„Åô„ÄÇ„Åì„Çå„Å´„ÅØ„ÄÅ„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ‰ΩúÊàê„ÄÅÂêåÊúü„ÄÅ„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„Å™„Å©„ÅÆ„Çø„Çπ„ÇØ„ÅåÂê´„Åæ„Çå„Åæ„Åô„ÄÇ„Åì„Çå„Çâ„ÅØÊúÄ‰Ωé„ÅÆÂÑ™ÂÖàÂ∫¶„ÇíÊåÅ„Å°„ÄÅ„Ç∑„Çπ„ÉÜ„É†„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„Å´‰∏é„Åà„ÇãÂΩ±Èüø„ÅØÊúÄÂ∞èÈôê„Åß„Åô„ÄÇ

QoS „ÇØ„É©„Çπ„Çí‰ΩøÁî®„Åô„Çã„Åì„Å®„Åß„ÄÅÈñãÁô∫ËÄÖ„ÅØÊ≠£Á¢∫„Å™ÂÑ™ÂÖàÂ∫¶Áï™Âè∑„ÇíÁÆ°ÁêÜ„Åô„ÇãÂøÖË¶Å„Åå„Å™„Åè„ÄÅ„Çø„Çπ„ÇØ„ÅÆÊÄßË≥™„Å´ÁÑ¶ÁÇπ„ÇíÂΩì„Å¶„Çã„Åì„Å®„Åå„Åß„Åç„ÄÅ„Ç∑„Çπ„ÉÜ„É†„ÅØ„Åù„Çå„Å´Âøú„Åò„Å¶ CPU „É™„ÇΩ„Éº„Çπ„ÇíÊúÄÈÅ©Âåñ„Åó„Åæ„Åô„ÄÇ

„Åï„Çâ„Å´„ÄÅ„Çπ„É¨„ÉÉ„Éâ„Çπ„Ç±„Ç∏„É•„Éº„É™„É≥„Ç∞„Éù„É™„Ç∑„Éº„ÅåÁï∞„Å™„Çä„ÄÅ„Çπ„Ç±„Ç∏„É•„Éº„É©„ÅåËÄÉÊÖÆ„Åô„Çã„Çπ„Ç±„Ç∏„É•„Éº„É™„É≥„Ç∞„Éë„É©„É°„Éº„Çø„ÅÆ„Çª„ÉÉ„Éà„ÇíÊåáÂÆö„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ„Åì„Çå„ÅØ `thread_policy_[set/get]` „Çí‰ΩøÁî®„Åó„Å¶Ë°å„ÅÜ„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ„Åì„Çå„ÅØ„É¨„Éº„Çπ„Ç≥„É≥„Éá„Ç£„Ç∑„Éß„É≥ÊîªÊíÉ„Å´ÂΩπÁ´ã„Å§„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì„ÄÇ

## MacOS „Éó„É≠„Çª„Çπ„ÅÆÊÇ™Áî®

MacOS „ÅØ„ÄÅ‰ªñ„ÅÆ„Ç™„Éö„É¨„Éº„ÉÜ„Ç£„É≥„Ç∞„Ç∑„Çπ„ÉÜ„É†„Å®ÂêåÊßò„Å´„ÄÅ**„Éó„É≠„Çª„Çπ„ÅåÁõ∏‰∫í‰ΩúÁî®„Åó„ÄÅÈÄö‰ø°„Åó„ÄÅ„Éá„Éº„Çø„ÇíÂÖ±Êúâ„Åô„Çã„Åü„ÇÅ„ÅÆ„Åï„Åæ„Åñ„Åæ„Å™ÊñπÊ≥ï„Å®„É°„Ç´„Éã„Ç∫„É†„ÇíÊèê‰æõ„Åó„Åæ„Åô**„ÄÇ„Åì„Çå„Çâ„ÅÆÊäÄË°ì„ÅØÂäπÁéáÁöÑ„Å™„Ç∑„Çπ„ÉÜ„É†Ê©üËÉΩ„Å´‰∏çÂèØÊ¨†„Åß„Åô„Åå„ÄÅËÑÖÂ®Å„Ç¢„ÇØ„Çø„Éº„Å´„Çà„Å£„Å¶ **ÊÇ™ÊÑè„ÅÆ„ÅÇ„ÇãÊ¥ªÂãï„ÇíË°å„ÅÜ„Åü„ÇÅ„Å´ÊÇ™Áî®„Åï„Çå„ÇãÂèØËÉΩÊÄß„ÇÇ„ÅÇ„Çä„Åæ„Åô**„ÄÇ

### „É©„Ç§„Éñ„É©„É™„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥

„É©„Ç§„Éñ„É©„É™„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„ÅØ„ÄÅÊîªÊíÉËÄÖ„Åå **„Éó„É≠„Çª„Çπ„Å´ÊÇ™ÊÑè„ÅÆ„ÅÇ„Çã„É©„Ç§„Éñ„É©„É™„Çí„É≠„Éº„Éâ„Åï„Åõ„Çã** ÊäÄË°ì„Åß„Åô„ÄÇ‰∏ÄÂ∫¶Ê≥®ÂÖ•„Åï„Çå„Çã„Å®„ÄÅ„É©„Ç§„Éñ„É©„É™„ÅØ„Çø„Éº„Ç≤„ÉÉ„Éà„Éó„É≠„Çª„Çπ„ÅÆ„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„ÅßÂÆüË°å„Åï„Çå„ÄÅÊîªÊíÉËÄÖ„Å´„Éó„É≠„Çª„Çπ„Å®Âêå„ÅòÊ®©Èôê„Å®„Ç¢„ÇØ„Çª„Çπ„ÇíÊèê‰æõ„Åó„Åæ„Åô„ÄÇ

{% content-ref url="macos-library-injection/" %}
[macos-library-injection](macos-library-injection/)
{% endcontent-ref %}

### Èñ¢Êï∞„Éï„ÉÉ„Ç≠„É≥„Ç∞

Èñ¢Êï∞„Éï„ÉÉ„Ç≠„É≥„Ç∞„ÅØ„ÄÅ„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢„Ç≥„Éº„ÉâÂÜÖ„ÅÆ **Èñ¢Êï∞Âëº„Å≥Âá∫„Åó** „ÇÑ„É°„ÉÉ„Çª„Éº„Ç∏„Çí **ÂÇçÂèó„Åô„Çã** „Åì„Å®„ÇíÂê´„Åø„Åæ„Åô„ÄÇÈñ¢Êï∞„Çí„Éï„ÉÉ„ÇØ„Åô„Çã„Åì„Å®„Åß„ÄÅÊîªÊíÉËÄÖ„ÅØ„Éó„É≠„Çª„Çπ„ÅÆ **Âãï‰Ωú„ÇíÂ§âÊõ¥** „Åó„Åü„Çä„ÄÅÊ©üÂØÜ„Éá„Éº„Çø„ÇíË¶≥ÂØü„Åó„Åü„Çä„ÄÅÂÆüË°å„Éï„É≠„Éº„ÇíÂà∂Âæ°„Åó„Åü„Çä„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ

{% content-ref url="macos-function-hooking.md" %}
[macos-function-hooking.md](macos-function-hooking.md)
{% endcontent-ref %}

### „Éó„É≠„Çª„ÇπÈñìÈÄö‰ø°

„Éó„É≠„Çª„ÇπÈñìÈÄö‰ø° (IPC) „ÅØ„ÄÅÂà•„ÄÖ„ÅÆ„Éó„É≠„Çª„Çπ„Åå **„Éá„Éº„Çø„ÇíÂÖ±Êúâ„Åó„ÄÅ‰∫§Êèõ„Åô„Çã** ÊñπÊ≥ï„ÇíÊåá„Åó„Åæ„Åô„ÄÇIPC „ÅØÂ§ö„Åè„ÅÆÊ≠£ÂΩì„Å™„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Å´„Å®„Å£„Å¶Âü∫Êú¨ÁöÑ„Åß„Åô„Åå„ÄÅ„Éó„É≠„Çª„Çπ„ÅÆÂàÜÈõ¢„ÇíË¶Ü„Åó„Åü„Çä„ÄÅÊ©üÂØÜÊÉÖÂ†±„ÇíÊºèÊ¥©„Åï„Åõ„Åü„Çä„ÄÅÁÑ°Ë®±ÂèØ„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥„ÇíÂÆüË°å„Åô„Çã„Åü„ÇÅ„Å´ÊÇ™Áî®„Åï„Çå„ÇãÂèØËÉΩÊÄß„ÇÇ„ÅÇ„Çä„Åæ„Åô„ÄÇ

{% content-ref url="macos-ipc-inter-process-communication/" %}
[macos-ipc-inter-process-communication](macos-ipc-inter-process-communication/)
{% endcontent-ref %}

### Electron „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅÆ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥

ÁâπÂÆö„ÅÆÁí∞Â¢ÉÂ§âÊï∞„ÅßÂÆüË°å„Åï„Çå„Çã Electron „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅØ„ÄÅ„Éó„É≠„Çª„Çπ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥„Å´ÂØæ„Åó„Å¶ËÑÜÂº±„Åß„ÅÇ„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„ÅôÔºö

{% content-ref url="macos-electron-applications-injection.md" %}
[macos-electron-applications-injection.md](macos-electron-applications-injection.md)
{% endcontent-ref %}

### Chromium „Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥

`--load-extension` „Åä„Çà„Å≥ `--use-fake-ui-for-media-stream` „Éï„É©„Ç∞„Çí‰ΩøÁî®„Åó„Å¶ **„Éñ„É©„Ç¶„Ç∂ÂÜÖ„ÅÆÊîªÊíÉ** „ÇíÂÆüË°å„Åó„ÄÅ„Ç≠„ÉºÂÖ•Âäõ„ÄÅ„Éà„É©„Éï„Ç£„ÉÉ„ÇØ„ÄÅ„ÇØ„ÉÉ„Ç≠„Éº„ÇíÁõó„Çì„Å†„Çä„ÄÅ„Éö„Éº„Ç∏„Å´„Çπ„ÇØ„É™„Éó„Éà„ÇíÊ≥®ÂÖ•„Åó„Åü„Çä„Åô„Çã„Åì„Å®„ÅåÂèØËÉΩ„Åß„ÅôÔºö

{% content-ref url="macos-chromium-injection.md" %}
[macos-chromium-injection.md](macos-chromium-injection.md)
{% endcontent-ref %}

### „ÉÄ„Éº„ÉÜ„Ç£ NIB

NIB „Éï„Ç°„Ç§„É´„ÅØ **„É¶„Éº„Ç∂„Éº„Ç§„É≥„Çø„Éº„Éï„Çß„Éº„Çπ (UI) Ë¶ÅÁ¥†** „Å®„Åù„ÅÆÁõ∏‰∫í‰ΩúÁî®„Çí„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥ÂÜÖ„ÅßÂÆöÁæ©„Åó„Åæ„Åô„ÄÇ„Åó„Åã„Åó„ÄÅ„Åì„Çå„Çâ„ÅØ **‰ªªÊÑè„ÅÆ„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åô„Çã„Åì„Å®„Åå„Åß„Åç**„ÄÅ**NIB „Éï„Ç°„Ç§„É´„ÅåÂ§âÊõ¥„Åï„Çå„Å¶„ÇÇ** „Åô„Åß„Å´ÂÆüË°å„Åï„Çå„Åü„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅÆÂÆüË°å„Çí **Gatekeeper „ÅØÂÅúÊ≠¢„Åó„Åæ„Åõ„Çì**„ÄÇ„Åó„Åü„Åå„Å£„Å¶„ÄÅ‰ªªÊÑè„ÅÆ„Éó„É≠„Ç∞„É©„É†„Åå‰ªªÊÑè„ÅÆ„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åô„Çã„Åü„ÇÅ„Å´‰ΩøÁî®„Åï„Çå„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„ÅôÔºö

{% content-ref url="macos-dirty-nib.md" %}
[macos-dirty-nib.md](macos-dirty-nib.md)
{% endcontent-ref %}

### Java „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅÆ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥

ÁâπÂÆö„ÅÆ Java Ê©üËÉΩÔºà**`_JAVA_OPTS`** Áí∞Â¢ÉÂ§âÊï∞„Å™„Å©Ôºâ„ÇíÊÇ™Áî®„Åó„Å¶„ÄÅJava „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Åå **‰ªªÊÑè„ÅÆ„Ç≥„Éº„Éâ/„Ç≥„Éû„É≥„Éâ„ÇíÂÆüË°å„Åô„Çã** „Åì„Å®„ÅåÂèØËÉΩ„Åß„Åô„ÄÇ

{% content-ref url="macos-java-apps-injection.md" %}
[macos-java-apps-injection.md](macos-java-apps-injection.md)
{% endcontent-ref %}

### .Net „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅÆ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥

**.Net „Éá„Éê„ÉÉ„Ç∞Ê©üËÉΩ„ÇíÊÇ™Áî®„Åô„Çã„Åì„Å®„Å´„Çà„Å£„Å¶** „Ç≥„Éº„Éâ„Çí .Net „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Å´Ê≥®ÂÖ•„Åô„Çã„Åì„Å®„ÅåÂèØËÉΩ„Åß„ÅôÔºàmacOS „ÅÆ‰øùË≠∑Ôºà„É©„É≥„Çø„Ç§„É†„Éè„Éº„Éâ„Éã„É≥„Ç∞„Å™„Å©Ôºâ„Å´„Çà„Å£„Å¶‰øùË≠∑„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„ÇìÔºâ„ÄÇ

{% content-ref url="macos-.net-applications-injection.md" %}
[macos-.net-applications-injection.md](macos-.net-applications-injection.md)
{% endcontent-ref %}

### Perl „Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥

‰ªªÊÑè„ÅÆ„Ç≥„Éº„Éâ„ÇíÂÆüË°å„Åô„Çã„Åü„ÇÅ„ÅÆ Perl „Çπ„ÇØ„É™„Éó„Éà„ÇíÂÆüË°å„Åô„Çã„Åï„Åæ„Åñ„Åæ„Å™„Ç™„Éó„Ç∑„Éß„É≥„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºö

{% content-ref url="macos-perl-applications-injection.md" %}
[macos-perl-applications-injection.md](macos-perl-applications-injection.md)
{% endcontent-ref %}

### Ruby „Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥

Ruby Áí∞Â¢ÉÂ§âÊï∞„ÇíÊÇ™Áî®„Åó„Å¶„ÄÅ‰ªªÊÑè„ÅÆ„Çπ„ÇØ„É™„Éó„Éà„Åå‰ªªÊÑè„ÅÆ„Ç≥„Éº„Éâ„ÇíÂÆüË°å„Åô„Çã„Åì„Å®„ÇÇÂèØËÉΩ„Åß„ÅôÔºö

{% content-ref url="macos-ruby-applications-injection.md" %}
[macos-ruby-applications-injection.md](macos-ruby-applications-injection.md)
{% endcontent-ref %}

### Python „Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥

Áí∞Â¢ÉÂ§âÊï∞ **`PYTHONINSPECT`** „ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÄÅPython „Éó„É≠„Çª„Çπ„ÅØÁµÇ‰∫ÜÂæå„Å´ Python CLI „Å´„Éâ„É≠„ÉÉ„Éó„Åó„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅ**`PYTHONSTARTUP`** „Çí‰ΩøÁî®„Åó„Å¶„ÄÅ„Ç§„É≥„Çø„É©„ÇØ„ÉÜ„Ç£„Éñ„Çª„ÉÉ„Ç∑„Éß„É≥„ÅÆÈñãÂßãÊôÇ„Å´ÂÆüË°å„Åô„Çã Python „Çπ„ÇØ„É™„Éó„Éà„ÇíÊåáÂÆö„Åô„Çã„Åì„Å®„ÇÇÂèØËÉΩ„Åß„Åô„ÄÇ\
„Åü„Å†„Åó„ÄÅ**`PYTHONINSPECT`** „Åå„Ç§„É≥„Çø„É©„ÇØ„ÉÜ„Ç£„Éñ„Çª„ÉÉ„Ç∑„Éß„É≥„Çí‰ΩúÊàê„Åô„ÇãÈöõ„Å´„ÅØ **`PYTHONSTARTUP`** „Çπ„ÇØ„É™„Éó„Éà„ÅØÂÆüË°å„Åï„Çå„Åæ„Åõ„Çì„ÄÇ

‰ªñ„ÅÆÁí∞Â¢ÉÂ§âÊï∞Ôºà**`PYTHONPATH`** „ÇÑ **`PYTHONHOME`** „Å™„Å©Ôºâ„ÇÇ„ÄÅPython „Ç≥„Éû„É≥„Éâ„Åå‰ªªÊÑè„ÅÆ„Ç≥„Éº„Éâ„ÇíÂÆüË°å„Åô„Çã„ÅÆ„Å´ÂΩπÁ´ã„Å§ÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ

**`pyinstaller`** „Åß„Ç≥„É≥„Éë„Ç§„É´„Åï„Çå„ÅüÂÆüË°åÂèØËÉΩ„Éï„Ç°„Ç§„É´„ÅØ„ÄÅÂüã„ÇÅËæº„Åæ„Çå„Åü Python „Çí‰ΩøÁî®„Åó„Å¶ÂÆüË°å„Åï„Çå„Å¶„ÅÑ„Å¶„ÇÇ„ÄÅ„Åì„Çå„Çâ„ÅÆÁí∞Â¢ÉÂ§âÊï∞„Çí‰ΩøÁî®„Åó„Å™„ÅÑ„Åì„Å®„Å´Ê≥®ÊÑè„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

{% hint style="danger" %}
ÂÖ®‰Ωì„Å®„Åó„Å¶„ÄÅÁí∞Â¢ÉÂ§âÊï∞„ÇíÊÇ™Áî®„Åó„Å¶ Python „Åå‰ªªÊÑè„ÅÆ„Ç≥„Éº„Éâ„ÇíÂÆüË°å„Åô„ÇãÊñπÊ≥ï„ÇíË¶ã„Å§„Åë„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ\
„Åü„Å†„Åó„ÄÅ„Åª„Å®„Çì„Å©„ÅÆ‰∫∫„ÅØ **Hombrew** „Çí‰ΩøÁî®„Åó„Å¶ Python „Çí„Ç§„É≥„Çπ„Éà„Éº„É´„Åó„ÄÅ„Éá„Éï„Ç©„É´„Éà„ÅÆÁÆ°ÁêÜËÄÖ„É¶„Éº„Ç∂„Éº„ÅÆ„Åü„ÇÅ„Å´ **Êõ∏„ÅçËæº„ÅøÂèØËÉΩ„Å™Â†¥ÊâÄ** „Å´ Python „Çí„Ç§„É≥„Çπ„Éà„Éº„É´„Åó„Åæ„Åô„ÄÇ„Åì„Çå„ÇíÊ¨°„ÅÆ„Çà„ÅÜ„Å´„Éè„Ç§„Ç∏„É£„ÉÉ„ÇØ„Åß„Åç„Åæ„ÅôÔºö
```bash
mv /opt/homebrew/bin/python3 /opt/homebrew/bin/python3.old
cat > /opt/homebrew/bin/python3 <<EOF
#!/bin/bash
# Extra hijack code
/opt/homebrew/bin/python3.old "$@"
EOF
chmod +x /opt/homebrew/bin/python3
```
Even **root** will run this code when running python.
{% endhint %}

## Detection

### Shield

[**Shield**](https://theevilbit.github.io/shield/) ([**Github**](https://github.com/theevilbit/Shield)) „ÅØ„ÄÅ**„Éó„É≠„Çª„Çπ„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥**„Ç¢„ÇØ„Ç∑„Éß„É≥„Çí**Ê§úÂá∫„Åó„Éñ„É≠„ÉÉ„ÇØ**„Åß„Åç„Çã„Ç™„Éº„Éó„É≥„ÇΩ„Éº„Çπ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Åß„ÅôÔºö

* **Áí∞Â¢ÉÂ§âÊï∞**„Çí‰ΩøÁî®ÔºöÊ¨°„ÅÆÁí∞Â¢ÉÂ§âÊï∞„ÅÆ„ÅÑ„Åö„Çå„Åã„ÅÆÂ≠òÂú®„ÇíÁõ£Ë¶ñ„Åó„Åæ„ÅôÔºö**`DYLD_INSERT_LIBRARIES`**„ÄÅ**`CFNETWORK_LIBRARY_PATH`**„ÄÅ**`RAWCAMERA_BUNDLE_PATH`**„ÄÅ„Åä„Çà„Å≥ **`ELECTRON_RUN_AS_NODE`**
* **`task_for_pid`** Âëº„Å≥Âá∫„Åó„Çí‰ΩøÁî®Ôºö„ÅÇ„Çã„Éó„É≠„Çª„Çπ„ÅåÂà•„ÅÆ„Éó„É≠„Çª„Çπ„ÅÆ**„Çø„Çπ„ÇØ„Éù„Éº„Éà„ÇíÂèñÂæó**„Åó„Çà„ÅÜ„Å®„Åô„ÇãÈöõ„ÇíË¶ã„Å§„Åë„Çã„Åü„ÇÅ„ÄÇ
* **Electron„Ç¢„Éó„É™„ÅÆ„Éë„É©„É°„Éº„Çø**ÔºöË™∞„Åã„Åå**`--inspect`**„ÄÅ**`--inspect-brk`**„ÄÅ„Åä„Çà„Å≥ **`--remote-debugging-port`** „Ç≥„Éû„É≥„Éâ„É©„Ç§„É≥ÂºïÊï∞„Çí‰ΩøÁî®„Åó„Å¶„ÄÅ„Éá„Éê„ÉÉ„Ç∞„É¢„Éº„Éâ„ÅßElectron„Ç¢„Éó„É™„ÇíËµ∑Âãï„Åó„ÄÅ„Ç≥„Éº„Éâ„ÇíÊ≥®ÂÖ•„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ
* **„Ç∑„É≥„Éú„É™„ÉÉ„ÇØ„É™„É≥„ÇØ**„Åæ„Åü„ÅØ**„Éè„Éº„Éâ„É™„É≥„ÇØ**„Çí‰ΩøÁî®Ôºö‰∏ÄËà¨ÁöÑ„Å™ÊÇ™Áî®„ÅØ„ÄÅ**„É¶„Éº„Ç∂„ÉºÊ®©Èôê„Åß„É™„É≥„ÇØ„Çí‰ΩúÊàê„Åó**„ÄÅ**„Çà„ÇäÈ´ò„ÅÑÊ®©Èôê„ÅÆ**Â†¥ÊâÄ„ÇíÊåá„Åô„Åì„Å®„Åß„Åô„ÄÇ„É™„É≥„ÇØ„Çí‰ΩúÊàê„Åô„Çã„Éó„É≠„Çª„Çπ„Åå„Çø„Éº„Ç≤„ÉÉ„Éà„Éï„Ç°„Ç§„É´„Å®„ÅØ**Áï∞„Å™„ÇãÊ®©Èôê„É¨„Éô„É´**„ÇíÊåÅ„Å£„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÄÅ**„Ç¢„É©„Éº„Éà**„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇÊÆãÂøµ„Å™„Åå„Çâ„ÄÅ„Ç∑„É≥„Éú„É™„ÉÉ„ÇØ„É™„É≥„ÇØ„ÅÆÂ†¥Âêà„ÅØ„ÄÅ‰ΩúÊàêÂâç„Å´„É™„É≥„ÇØ„ÅÆÂÆõÂÖà„Å´Èñ¢„Åô„ÇãÊÉÖÂ†±„Åå„Å™„ÅÑ„Åü„ÇÅ„ÄÅ„Éñ„É≠„ÉÉ„ÇØ„ÅØ‰∏çÂèØËÉΩ„Åß„Åô„ÄÇ„Åì„Çå„ÅØApple„ÅÆEndpointSecurity„Éï„É¨„Éº„É†„ÉØ„Éº„ÇØ„ÅÆÂà∂Èôê„Åß„Åô„ÄÇ

### ‰ªñ„ÅÆ„Éó„É≠„Çª„Çπ„Å´„Çà„Å£„Å¶Ë°å„Çè„Çå„ÅüÂëº„Å≥Âá∫„Åó

[**„Åì„ÅÆ„Éñ„É≠„Ç∞Ë®ò‰∫ã**](https://knight.sc/reverse%20engineering/2019/04/15/detecting-task-modifications.html)„Åß„ÅØ„ÄÅ**`task_name_for_pid`**Èñ¢Êï∞„Çí‰ΩøÁî®„Åó„Å¶„ÄÅ‰ªñ„ÅÆ**„Éó„É≠„Çª„Çπ„Åå„Éó„É≠„Çª„Çπ„Å´„Ç≥„Éº„Éâ„ÇíÊ≥®ÂÖ•„Åó„Å¶„ÅÑ„Çã**ÊÉÖÂ†±„ÇíÂèñÂæó„Åó„ÄÅ„Åù„ÅÆ‰ªñ„ÅÆ„Éó„É≠„Çª„Çπ„Å´Èñ¢„Åô„ÇãÊÉÖÂ†±„ÇíÂèñÂæó„Åô„ÇãÊñπÊ≥ï„ÇíË¶ã„Å§„Åë„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ

„Åù„ÅÆÈñ¢Êï∞„ÇíÂëº„Å≥Âá∫„Åô„Å´„ÅØ„ÄÅ„Éó„É≠„Çª„Çπ„ÇíÂÆüË°å„Åó„Å¶„ÅÑ„Çã„ÅÆ„Å®**Âêå„Åòuid**„Åß„ÅÇ„Çã„Åã„ÄÅ**root**„Åß„ÅÇ„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„ÅôÔºà„Åù„Åó„Å¶„ÄÅ„Éó„É≠„Çª„Çπ„Å´Èñ¢„Åô„ÇãÊÉÖÂ†±„ÇíËøî„Åó„Åæ„Åô„Åå„ÄÅ„Ç≥„Éº„Éâ„ÇíÊ≥®ÂÖ•„Åô„ÇãÊñπÊ≥ï„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„ÇìÔºâ„ÄÇ

## References

* [https://theevilbit.github.io/shield/](https://theevilbit.github.io/shield/)
* [https://medium.com/@metnew/why-electron-apps-cant-store-your-secrets-confidentially-inspect-option-a49950d6d51f](https://medium.com/@metnew/why-electron-apps-cant-store-your-secrets-confidentially-inspect-option-a49950d6d51f)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
