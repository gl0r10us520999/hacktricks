{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

### PostgreSQL Veliki Objekti

PostgreSQL nudi strukturu poznatu kao **veliki objekti**, dostupnu putem tabele `pg_largeobject`, koja je dizajnirana za skladi≈°tenje velikih tipova podataka, kao ≈°to su slike ili PDF dokumenti. Ovaj pristup je prednost u odnosu na funkciju `COPY TO` jer omoguƒáava **izvoz podataka nazad u fajl sistem**, osiguravajuƒái da se taƒçna replika originalnog fajla odr≈æava.

Za **skladi≈°tenje kompletnog fajla** unutar ove tabele, objekat mora biti kreiran u tabeli `pg_largeobject` (identifikovan LOID-om), nakon ƒçega se podaci dele u delove, svaki veliƒçine 2KB, u ovaj objekat. Kljuƒçno je da ovi delovi budu taƒçno 2KB u veliƒçini (sa moguƒáim izuzecima poslednjeg dela) kako bi se osiguralo da funkcija izvoza radi ispravno.

Da biste **podelili svoje binarne podatke** u delove od 2KB, mogu se izvr≈°iti sledeƒáe komande:
```bash
split -b 2048 your_file # Creates 2KB sized files
```
Za kodiranje svakog fajla u Base64 ili Hex, mogu se koristiti sledeƒáe komande:
```bash
base64 -w 0 <Chunk_file> # Encodes in Base64 in one line
xxd -ps -c 99999999999 <Chunk_file> # Encodes in Hex in one line
```
**–í–∞–∂–Ω–æ**: –ü—Ä–∏ –∞—É—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—ò–∏ –æ–≤–æ–≥ –ø—Ä–æ—Ü–µ—Å–∞, —É–≤–µ—Ä–∏—Ç–µ —Å–µ –¥–∞ —à–∞—ô–µ—Ç–µ –¥–µ–ª–æ–≤–µ –æ–¥ 2KB —á–∏—Å—Ç–æ–≥ —Ç–µ–∫—Å—Ç–∞. –•–µ–∫—Å –∫–æ–¥–∏—Ä–∞–Ω–∏ —Ñ–∞—ò–ª–æ–≤–∏ —õ–µ –∑–∞—Ö—Ç–µ–≤–∞—Ç–∏ 4KB –ø–æ–¥–∞—Ç–∞–∫–∞ –ø–æ –¥–µ–ª—É –∑–±–æ–≥ —É–¥–≤–æ—Å—Ç—Ä—É—á–µ—ö–∞ –≤–µ–ª–∏—á–∏–Ω–µ, –¥–æ–∫ —Ñ–∞—ò–ª–æ–≤–∏ –∫–æ–¥–∏—Ä–∞–Ω–∏ —É Base64 —Å–ª–µ–¥–µ —Ñ–æ—Ä–º—É–ª—É `ceil(n / 3) * 4`.

–°–∞–¥—Ä–∂–∞—ò –≤–µ–ª–∏–∫–∏—Ö –æ–±—ò–µ–∫–∞—Ç–∞ –º–æ–∂–µ —Å–µ –ø—Ä–µ–≥–ª–µ–¥–∞—Ç–∏ —É —Å–≤—Ä—Ö—É –¥–µ–±–∞–≥–æ–≤–∞—ö–∞ –∫–æ—Ä–∏—Å—Ç–µ—õ–∏:
```sql
select loid, pageno, encode(data, 'escape') from pg_largeobject;
```
#### Koristeƒái `lo_creat` i Base64

Da bi se saƒçuvali binarni podaci, prvo se kreira LOID:
```sql
SELECT lo_creat(-1);       -- Creates a new, empty large object
SELECT lo_create(173454);  -- Attempts to create a large object with a specific OID
```
U situacijama koje zahtevaju preciznu kontrolu, kao ≈°to je iskori≈°ƒáavanje Blind SQL Injection, `lo_create` se preferira za odreƒëivanje fiksnog LOID-a.

Podaci se mogu umetnuti na sledeƒái naƒçin:
```sql
INSERT INTO pg_largeobject (loid, pageno, data) VALUES (173454, 0, decode('<B64 chunk1>', 'base64'));
INSERT INTO pg_largeobject (loid, pageno, data) VALUES (173454, 1, decode('<B64 chunk2>', 'base64'));

```
Da biste eksportovali i potencijalno obrisali veliki objekat nakon upotrebe:
```sql
SELECT lo_export(173454, '/tmp/your_file');
SELECT lo_unlink(173454);  -- Deletes the specified large object
```
#### Koristeƒái `lo_import` i Hex

Funkcija `lo_import` mo≈æe se koristiti za kreiranje i odreƒëivanje LOID-a za veliki objekat:
```sql
select lo_import('/path/to/file');
select lo_import('/path/to/file', 173454);
```
Nakon kreiranja objekta, podaci se unose po stranici, osiguravajuƒái da svaki deo ne prelazi 2KB:
```sql
update pg_largeobject set data=decode('<HEX>', 'hex') where loid=173454 and pageno=0;
update pg_largeobject set data=decode('<HEX>', 'hex') where loid=173454 and pageno=1;
```
Da bi se proces zavr≈°io, podaci se izvoze i veliki objekat se bri≈°e:
```sql
select lo_export(173454, '/path/to/your_file');
select lo_unlink(173454);  -- Deletes the specified large object
```
### Limitations

Napomena je da **veliki objekti mogu imati ACL-ove** (Liste Kontrole Pristupa), ≈°to mo≈æe ograniƒçiti pristup ƒçak i objektima koje je kreirao va≈° korisnik. Meƒëutim, stariji objekti sa permisivnim ACL-ovima mogu i dalje biti dostupni za ekfiltraciju sadr≈æaja.

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
