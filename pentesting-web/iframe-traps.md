# Iframe Traps

{% hint style="success" %}
AWS Hacking'i öğrenin ve pratik yapın:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Eğitim AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve pratik yapın: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Eğitim GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter**'da **bizi takip edin** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuçlarını paylaşmak için** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gönderin.

</details>
{% endhint %}

## Temel Bilgiler

Kullanıcının web sayfasında hareket ederken bilgilerini çalmak için iframeler aracılığıyla XSS'in bu şekilde kötüye kullanılması, trustedsec.com'daki bu 2 yazıda ilk olarak yayınlanmıştır: [**burada**](https://trustedsec.com/blog/persisting-xss-with-iframe-traps) **ve** [**burada**](https://trustedsec.com/blog/js-tap-weaponizing-javascript-for-red-teams).

Saldırı, XSS'e karşı savunmasız bir sayfada başlar; burada **kurbanların XSS'ten çıkmamalarını sağlamak** için **bir iframede gezinmelerini sağlamak** mümkündür ve bu iframe tüm web uygulamasını kaplar.

XSS saldırısı, temel olarak web sayfasını ekranın %100'ünde bir iframede yükleyecektir. Bu nedenle, kurban **iframe içinde olduğunu fark etmeyecek**. Ardından, kurban iframe içindeki bağlantılara tıklayarak sayfada gezinirse (web içinde), **iframe içinde gezinmiş** olacak ve bu gezinmeden bilgi çalan keyfi JS yüklenmiş olacaktır.

Ayrıca, daha gerçekçi hale getirmek için, bir iframe'in sayfanın konumunu değiştirdiğini kontrol etmek için bazı **dinleyiciler** kullanmak ve kullanıcının sayfalar arasında hareket ettiğini düşündüğü URL'yi tarayıcının URL'si ile güncellemek mümkündür.

<figure><img src="../.gitbook/assets/image (1248).png" alt=""><figcaption><p><a href="https://www.trustedsec.com/wp-content/uploads/2022/04/regEvents.png">https://www.trustedsec.com/wp-content/uploads/2022/04/regEvents.png</a></p></figcaption></figure>

<figure><img src="../.gitbook/assets/image (1249).png" alt=""><figcaption><p><a href="https://www.trustedsec.com/wp-content/uploads/2022/04/fakeAddress-1.png">https://www.trustedsec.com/wp-content/uploads/2022/04/fakeAddress-1.png</a></p></figcaption></figure>

Ayrıca, yalnızca kurbanın ziyaret ettiği diğer sayfaları değil, aynı zamanda **doldurulmuş formlar** için kullanılan verileri çalmak veya **yerel depolamayı çalmak** için dinleyiciler kullanmak mümkündür...

Elbette, ana sınırlamalar, **bir kurbanın sekmeyi kapatması veya tarayıcıda başka bir URL girmesi durumunda iframe'den kaçacağıdır**. Bunu yapmanın bir diğer yolu, **sayfayı yenilemek** olacaktır; ancak bu, her yeni sayfa iframe içinde yüklendiğinde sağ tıklama bağlam menüsünü devre dışı bırakarak veya kullanıcının fare hareketinin iframe'den çıkıp çıkmadığını kontrol ederek kısmen **önlenebilir**. Bu durumda, tarayıcının yenileme düğmesine tıklamak için fareyi çıkarması durumunda tarayıcının URL'si, XSS'e karşı savunmasız olan orijinal URL ile güncellenir, bu nedenle kullanıcı bunu yenilerse, tekrar zehirlenir (bu durumun çok gizli olmadığını unutmayın).

{% hint style="success" %}
AWS Hacking'i öğrenin ve pratik yapın:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Eğitim AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve pratik yapın: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Eğitim GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter**'da **bizi takip edin** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuçlarını paylaşmak için** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gönderin.

</details>
{% endhint %}
