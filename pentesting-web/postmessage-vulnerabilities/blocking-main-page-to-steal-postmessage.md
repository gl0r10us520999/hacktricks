# Blocking main page to steal postmessage

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

## Winning RCs with Iframes

‡§á‡§∏ [**Terjanq writeup**](https://gist.github.com/terjanq/7c1a71b83db5e02253c218765f96a710) ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞, ‡§∂‡•Ç‡§®‡•ç‡§Ø ‡§Æ‡•Ç‡§≤ ‡§∏‡•á ‡§¨‡§®‡§æ‡§è ‡§ó‡§è ‡§¨‡•ç‡§≤‡•â‡§¨ ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§≤‡§æ‡§≠‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§≤‡§ó ‡§ï‡§ø‡§è ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç, ‡§ú‡§ø‡§∏‡§ï‡§æ ‡§Ö‡§∞‡•ç‡§• ‡§π‡•à ‡§ï‡§ø ‡§Ø‡§¶‡§ø ‡§Ü‡§™ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§™‡•É‡§∑‡•ç‡§† ‡§ï‡•ã ‡§µ‡•ç‡§Ø‡§∏‡•ç‡§§ ‡§∞‡§ñ‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã iframe ‡§™‡•É‡§∑‡•ç‡§† ‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§π‡•ã‡§ó‡§æ‡•§

‡§¨‡•Å‡§®‡§ø‡§Ø‡§æ‡§¶‡•Ä ‡§∞‡•Ç‡§™ ‡§∏‡•á, ‡§â‡§∏ ‡§ö‡•Å‡§®‡•å‡§§‡•Ä ‡§Æ‡•á‡§Ç ‡§è‡§ï **‡§Ö‡§≤‡§ó iframe ‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à** ‡§î‡§∞ ‡§†‡•Ä‡§ï **‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç** ‡§ú‡§¨ ‡§Ø‡§π **‡§≤‡•ã‡§°** ‡§π‡•ã‡§§‡§æ ‡§π‡•à, ‡§§‡•ã **‡§Æ‡§æ‡§§‡§æ-‡§™‡§ø‡§§‡§æ** ‡§™‡•É‡§∑‡•ç‡§† **‡§è‡§ï ‡§™‡•ã‡§∏‡•ç‡§ü** ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§ï‡•á ‡§∏‡§æ‡§• **‡§ù‡§Ç‡§°‡§æ** ‡§≠‡•á‡§ú‡§®‡•á ‡§µ‡§æ‡§≤‡§æ ‡§π‡•à‡•§\
‡§π‡§æ‡§≤‡§æ‡§Ç‡§ï‡§ø, ‡§µ‡§π ‡§™‡•ã‡§∏‡•ç‡§ü‡§Æ‡•à‡§∏‡•á‡§ú ‡§∏‡§Ç‡§ö‡§æ‡§∞ **XSS ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤ ‡§π‡•à** (iframe JS ‡§ï‡•ã‡§° ‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à)‡•§

‡§á‡§∏‡§≤‡§ø‡§è, ‡§π‡§Æ‡§≤‡§æ‡§µ‡§∞ ‡§ï‡§æ ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§π‡•à ‡§ï‡§ø **‡§Æ‡§æ‡§§‡§æ-‡§™‡§ø‡§§‡§æ ‡§ï‡•ã iframe ‡§¨‡§®‡§æ‡§®‡•á ‡§¶‡•á‡§Ç**, ‡§≤‡•á‡§ï‡§ø‡§® **‡§™‡§π‡§≤‡•á** ‡§Æ‡§æ‡§§‡§æ-‡§™‡§ø‡§§‡§æ ‡§™‡•É‡§∑‡•ç‡§† **‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤ ‡§°‡•á‡§ü‡§æ** (**‡§ù‡§Ç‡§°‡§æ**) **‡§≠‡•á‡§ú‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á** ‡§á‡§∏‡•á **‡§µ‡•ç‡§Ø‡§∏‡•ç‡§§** ‡§∞‡§ñ‡•á‡§Ç ‡§î‡§∞ **‡§™‡•á‡§≤‡•ã‡§° ‡§ï‡•ã iframe ‡§Æ‡•á‡§Ç ‡§≠‡•á‡§ú‡•á‡§Ç**‡•§ ‡§ú‡§¨‡§ï‡§ø **‡§Æ‡§æ‡§§‡§æ-‡§™‡§ø‡§§‡§æ ‡§µ‡•ç‡§Ø‡§∏‡•ç‡§§ ‡§π‡•à‡§Ç**, **iframe ‡§™‡•á‡§≤‡•ã‡§° ‡§ï‡•ã ‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à** ‡§ú‡•ã ‡§ï‡•Å‡§õ JS ‡§π‡•ã‡§ó‡§æ ‡§ú‡•ã **‡§Æ‡§æ‡§§‡§æ-‡§™‡§ø‡§§‡§æ ‡§ï‡•á ‡§™‡•ã‡§∏‡•ç‡§ü‡§Æ‡•à‡§∏‡•á‡§ú ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§ï‡•ã ‡§∏‡•Å‡§®‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§ù‡§Ç‡§°‡§æ ‡§≤‡•Ä‡§ï ‡§ï‡§∞‡§§‡§æ ‡§π‡•à**‡•§\
‡§Ö‡§Ç‡§§ ‡§Æ‡•á‡§Ç, iframe ‡§®‡•á ‡§™‡•á‡§≤‡•ã‡§° ‡§ï‡•ã ‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§î‡§∞ ‡§Æ‡§æ‡§§‡§æ-‡§™‡§ø‡§§‡§æ ‡§ï‡§æ ‡§™‡•É‡§∑‡•ç‡§† ‡§µ‡•ç‡§Ø‡§∏‡•ç‡§§ ‡§∞‡§π‡§®‡§æ ‡§¨‡§Ç‡§¶ ‡§ï‡§∞ ‡§¶‡•á‡§§‡§æ ‡§π‡•à, ‡§á‡§∏‡§≤‡§ø‡§è ‡§Ø‡§π ‡§ù‡§Ç‡§°‡§æ ‡§≠‡•á‡§ú‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§™‡•á‡§≤‡•ã‡§° ‡§á‡§∏‡•á ‡§≤‡•Ä‡§ï ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§

‡§≤‡•á‡§ï‡§ø‡§® ‡§Ü‡§™ ‡§Æ‡§æ‡§§‡§æ-‡§™‡§ø‡§§‡§æ ‡§ï‡•ã **‡§µ‡•ç‡§Ø‡§∏‡•ç‡§§ ‡§ï‡•à‡§∏‡•á ‡§∞‡§ñ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡§¨ ‡§â‡§∏‡§®‡•á iframe ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§ï‡§ø‡§Ø‡§æ ‡§î‡§∞ ‡§¨‡§∏ ‡§ú‡§¨ ‡§µ‡§π ‡§∏‡§Ç‡§µ‡•á‡§¶‡§®‡§∂‡•Ä‡§≤ ‡§°‡•á‡§ü‡§æ ‡§≠‡•á‡§ú‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è iframe ‡§ï‡•á ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•ã‡§®‡•á ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à?** ‡§¨‡•Å‡§®‡§ø‡§Ø‡§æ‡§¶‡•Ä ‡§∞‡•Ç‡§™ ‡§∏‡•á, ‡§Ü‡§™‡§ï‡•ã **‡§ê‡§∏‡•Ä ‡§Ö‡§∏‡§ø‡§Ç‡§ï‡•ç‡§∞‡•ã‡§®‡§∏ ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ** ‡§ñ‡•ã‡§ú‡§®‡•á ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à ‡§ú‡§ø‡§∏‡•á ‡§Ü‡§™ ‡§Æ‡§æ‡§§‡§æ-‡§™‡§ø‡§§‡§æ ‡§ï‡•ã **‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§ø‡§§** ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§®‡§æ ‡§∏‡§ï‡•á‡§Ç‡•§ ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§â‡§∏ ‡§ö‡•Å‡§®‡•å‡§§‡•Ä ‡§Æ‡•á‡§Ç ‡§Æ‡§æ‡§§‡§æ-‡§™‡§ø‡§§‡§æ **‡§á‡§∏ ‡§§‡§∞‡§π ‡§ï‡•á ‡§™‡•ã‡§∏‡•ç‡§ü‡§Æ‡•à‡§∏‡•á‡§ú** ‡§∏‡•Å‡§® ‡§∞‡§π‡§æ ‡§•‡§æ:
```javascript
window.addEventListener('message', (e) => {
if (e.data == 'blob loaded') {
$("#previewModal").modal();
}
});
```
‡§á‡§∏‡§≤‡§ø‡§è ‡§è‡§ï **‡§¨‡§°‡§º‡§æ ‡§™‡•Ç‡§∞‡•ç‡§£‡§æ‡§Ç‡§ï ‡§™‡•ã‡§∏‡•ç‡§ü‡§Æ‡•à‡§∏‡•á‡§ú ‡§Æ‡•á‡§Ç ‡§≠‡•á‡§ú‡§®‡§æ ‡§∏‡§Ç‡§≠‡§µ ‡§•‡§æ** ‡§ú‡•ã ‡§â‡§∏ ‡§§‡•Å‡§≤‡§®‡§æ ‡§Æ‡•á‡§Ç **‡§∏‡•ç‡§ü‡•ç‡§∞‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§ø‡§§ ‡§π‡•ã‡§ó‡§æ**, ‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§õ ‡§∏‡§Æ‡§Ø ‡§≤‡§ó‡•á‡§ó‡§æ:
```bash
const buffer = new Uint8Array(1e7);
win?.postMessage(buffer, '*', [buffer.buffer]);
```
‡§î‡§∞ ‡§∏‡§ü‡•Ä‡§ï‡§§‡§æ ‡§∏‡•á **postmessage** ‡§ï‡•ã **iframe** ‡§ï‡•á ‡§¨‡§®‡§®‡•á ‡§ï‡•á **‡§¨‡§æ‡§¶** ‡§≤‡•á‡§ï‡§ø‡§® **parent** ‡§∏‡•á ‡§°‡•á‡§ü‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è **‡§§‡•à‡§Ø‡§æ‡§∞** ‡§π‡•ã‡§®‡•á ‡§∏‡•á **‡§™‡§π‡§≤‡•á** ‡§≠‡•á‡§ú‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è, ‡§Ü‡§™‡§ï‡•ã `setTimeout` ‡§ï‡•á **‡§Æ‡§ø‡§≤‡•Ä‡§∏‡•á‡§ï‡§Ç‡§°** ‡§ï‡•á ‡§∏‡§æ‡§• **‡§ñ‡•á‡§≤‡§®‡§æ** ‡§π‡•ã‡§ó‡§æ‡•§ 

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** üí¨ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
