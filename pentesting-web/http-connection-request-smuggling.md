# HTTP Bağlantı İsteği Smuggling

{% hint style="success" %}
AWS Hacking'i öğrenin ve pratik yapın:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Eğitim AWS Kırmızı Takım Uzmanı (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve pratik yapın: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Eğitim GCP Kırmızı Takım Uzmanı (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter'da** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'ı takip edin.**
* **Hacking ipuçlarını paylaşmak için** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gönderin.

</details>
{% endhint %}

**Bu,** [**https://portswigger.net/research/browser-powered-desync-attacks**](https://portswigger.net/research/browser-powered-desync-attacks) **gönderisinin bir özetidir.**

## Bağlantı Durumu Saldırıları <a href="#state" id="state"></a>

### İlk İstek Doğrulaması

İstekleri yönlendirirken, ters proxy'ler genellikle hedef arka uç sunucusunu belirlemek için **Host başlığına** dayanabilir ve genellikle erişime izin verilen hostların beyaz listesini kullanır. Ancak, bazı proxy'lerde beyaz listenin yalnızca bir bağlantıdaki ilk istekte uygulanmasıyla ilgili bir zafiyet bulunmaktadır. Sonuç olarak, saldırganlar önce izin verilen bir hosta istek yaparak ve ardından aynı bağlantı üzerinden bir iç site talep ederek bunu istismar edebilirler:
```
GET / HTTP/1.1
Host: [allowed-external-host]

GET / HTTP/1.1
Host: [internal-host]
```
### İlk İstek Yönlendirmesi

Bazı yapılandırmalarda, bir ön uç sunucusu **ilk isteğin Host başlığını** kullanarak o isteğin arka uç yönlendirmesini belirleyebilir ve ardından aynı istemci bağlantısından gelen tüm sonraki istekleri aynı arka uç bağlantısına sürekli olarak yönlendirebilir. Bu şu şekilde gösterilebilir:
```
GET / HTTP/1.1
Host: example.com

POST /pwreset HTTP/1.1
Host: psres.net
```
Bu sorun, diğer güvenlik açıklarını istismar etmek veya ek sanal hostlara yetkisiz erişim sağlamak için [Host header saldırıları](https://portswigger.net/web-security/host-header) ile, şifre sıfırlama zehirlenmesi veya [web cache poisoning](https://portswigger.net/web-security/web-cache-poisoning) gibi, birleştirilebilir.

{% hint style="info" %}
Bu güvenlik açıklarını belirlemek için HTTP Request Smuggler'daki 'connection-state probe' özelliği kullanılabilir.
{% endhint %}

{% hint style="success" %}
AWS Hacking'i öğrenin ve pratik yapın:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP Hacking'i öğrenin ve pratik yapın: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks'i Destekleyin</summary>

* [**abonelik planlarını**](https://github.com/sponsors/carlospolop) kontrol edin!
* **💬 [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katılın ya da **Twitter'da** bizi **takip edin** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Hacking ipuçlarını paylaşmak için** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna PR gönderin.

</details>
{% endhint %}
